"use strict";exports.id=100,exports.ids=[100],exports.modules={100:(a,b,c)=>{let d,e,f;c.r(b),c.d(b,{default:()=>kV});var g,h,i={};c.r(i),c.d(i,{ACESFilmicToneMapping:()=>j.FV,AddEquation:()=>j.gO9,AddOperation:()=>j.XrR,AdditiveAnimationBlendMode:()=>j.DAe,AdditiveBlending:()=>j.EZo,AgXToneMapping:()=>j.LAk,AlphaFormat:()=>j.wrO,AlwaysCompare:()=>j.FFZ,AlwaysDepth:()=>j.lGu,AlwaysStencilFunc:()=>j.sKt,AmbientLight:()=>j.$p8,AnimationAction:()=>j.pPE,AnimationClip:()=>j.tz3,AnimationLoader:()=>j.kEx,AnimationMixer:()=>j.Iw4,AnimationObjectGroup:()=>j.P5j,AnimationUtils:()=>j.AKb,ArcCurve:()=>j.ibB,ArrayCamera:()=>j.nZQ,ArrowHelper:()=>j.E0M,AttachedBindMode:()=>j.BER,Audio:()=>j.fP5,AudioAnalyser:()=>j.CwR,AudioContext:()=>j.UtX,AudioListener:()=>j.Pf$,AudioLoader:()=>j.Am1,AxesHelper:()=>j.IzY,BackSide:()=>j.hsX,BasicDepthPacking:()=>j.Rkk,BasicShadowMap:()=>j.bTm,BatchedMesh:()=>j.$Ed,Bone:()=>j.$Kf,BooleanKeyframeTrack:()=>j.YOZ,Box2:()=>j.UtB,Box3:()=>j.NRn,Box3Helper:()=>j.BND,BoxGeometry:()=>j.iNn,BoxHelper:()=>j.IWo,BufferAttribute:()=>j.THS,BufferGeometry:()=>j.LoY,BufferGeometryLoader:()=>j.SUR,ByteType:()=>j.tJf,Cache:()=>j.l2R,Camera:()=>j.i7d,CameraHelper:()=>j.WTh,CanvasTexture:()=>j.GOR,CapsuleGeometry:()=>j.qU7,CatmullRomCurve3:()=>j.B6O,CineonToneMapping:()=>j.nNL,CircleGeometry:()=>j.tcD,ClampToEdgeWrapping:()=>j.ghU,Clock:()=>j.zD7,Color:()=>j.Q1f,ColorKeyframeTrack:()=>j.T6I,ColorManagement:()=>j.ppV,CompressedArrayTexture:()=>j.iOZ,CompressedCubeTexture:()=>j.c5h,CompressedTexture:()=>j.FvD,CompressedTextureLoader:()=>j.YRT,ConeGeometry:()=>j.qFE,ConstantAlphaFactor:()=>j.e0p,ConstantColorFactor:()=>j.RrE,Controls:()=>j.H2z,CubeCamera:()=>j.F1T,CubeReflectionMapping:()=>j.hy7,CubeRefractionMapping:()=>j.xFO,CubeTexture:()=>j.b4q,CubeTextureLoader:()=>j.ScU,CubeUVReflectionMapping:()=>j.Om,CubicBezierCurve:()=>j.Z0B,CubicBezierCurve3:()=>j.s0K,CubicInterpolant:()=>j.Pdi,CullFaceBack:()=>j.Vb5,CullFaceFront:()=>j.Jnc,CullFaceFrontBack:()=>j.ywQ,CullFaceNone:()=>j.WNZ,Curve:()=>j.Ipv,CurvePath:()=>j.jGm,CustomBlending:()=>j.bCz,CustomToneMapping:()=>j.g7M,CylinderGeometry:()=>j.Ho_,Cylindrical:()=>j.hjs,Data3DTexture:()=>j.dYF,DataArrayTexture:()=>j.rFo,DataTexture:()=>j.GYF,DataTextureLoader:()=>j.BRH,DataUtils:()=>j.GxU,DecrementStencilOp:()=>j.ROr,DecrementWrapStencilOp:()=>j.fJr,DefaultLoadingManager:()=>j.h_9,DepthFormat:()=>j.zdS,DepthStencilFormat:()=>j.dcC,DepthTexture:()=>j.VCu,DetachedBindMode:()=>j.Fvi,DirectionalLight:()=>j.ZyN,DirectionalLightHelper:()=>j.PFK,DiscreteInterpolant:()=>j.Yhb,DodecahedronGeometry:()=>j.nEu,DoubleSide:()=>j.$EB,DstAlphaFactor:()=>j.hdd,DstColorFactor:()=>j.wn6,DynamicCopyUsage:()=>j.MOq,DynamicDrawUsage:()=>j.Vnu,DynamicReadUsage:()=>j.hIf,EdgesGeometry:()=>j.TDQ,EllipseCurve:()=>j.S20,EqualCompare:()=>j.kO0,EqualDepth:()=>j.U3G,EqualStencilFunc:()=>j.jsO,EquirectangularReflectionMapping:()=>j.wfO,EquirectangularRefractionMapping:()=>j.uV5,Euler:()=>j.O9p,EventDispatcher:()=>j.Qev,ExtrudeGeometry:()=>j.QCA,FileLoader:()=>j.Y9S,Float16BufferAttribute:()=>j.Oax,Float32BufferAttribute:()=>j.qtW,FloatType:()=>j.RQf,Fog:()=>j.jUj,FogExp2:()=>j.cRK,FramebufferTexture:()=>j.Pem,FrontSide:()=>j.hB5,Frustum:()=>j.PPD,GLBufferAttribute:()=>j.oh6,GLSL1:()=>j.Wyr,GLSL3:()=>j.Wdf,GreaterCompare:()=>j.eoi,GreaterDepth:()=>j.K52,GreaterEqualCompare:()=>j.gWB,GreaterEqualDepth:()=>j.Gwm,GreaterEqualStencilFunc:()=>j.TMh,GreaterStencilFunc:()=>j.RcT,GridHelper:()=>j.fTw,Group:()=>j.YJl,HalfFloatType:()=>j.ix0,HemisphereLight:()=>j.dth,HemisphereLightHelper:()=>j.R1W,IcosahedronGeometry:()=>j.WBB,ImageBitmapLoader:()=>j.Kzg,ImageLoader:()=>j.$NF,ImageUtils:()=>j.HgN,IncrementStencilOp:()=>j.HLH,IncrementWrapStencilOp:()=>j.Ru$,InstancedBufferAttribute:()=>j.uWO,InstancedBufferGeometry:()=>j.CmU,InstancedInterleavedBuffer:()=>j.LuO,InstancedMesh:()=>j.ZLX,Int16BufferAttribute:()=>j.Hrb,Int32BufferAttribute:()=>j.vmz,Int8BufferAttribute:()=>j.wvS,IntType:()=>j.Yuy,InterleavedBuffer:()=>j.eB$,InterleavedBufferAttribute:()=>j.eHs,Interpolant:()=>j.lGw,InterpolateDiscrete:()=>j.ljd,InterpolateLinear:()=>j.PJ3,InterpolateSmooth:()=>j.EQC,InvertStencilOp:()=>j.oVO,KeepStencilOp:()=>j.VVr,KeyframeTrack:()=>j.UJ6,LOD:()=>j.UpK,LatheGeometry:()=>j.nzx,Layers:()=>j.zgK,LessCompare:()=>j.vim,LessDepth:()=>j.brA,LessEqualCompare:()=>j.TiK,LessEqualDepth:()=>j.xSv,LessEqualStencilFunc:()=>j.CR7,LessStencilFunc:()=>j.kYr,Light:()=>j.veJ,LightProbe:()=>j.FZo,Line:()=>j.N1A,Line3:()=>j.cZY,LineBasicMaterial:()=>j.mrM,LineCurve:()=>j.GZZ,LineCurve3:()=>j.VnP,LineDashedMaterial:()=>j.Fvt,LineLoop:()=>j.FCc,LineSegments:()=>j.DXC,LinearFilter:()=>j.k6q,LinearInterpolant:()=>j.ezk,LinearMipMapLinearFilter:()=>j.NZq,LinearMipMapNearestFilter:()=>j.iUH,LinearMipmapLinearFilter:()=>j.$_I,LinearMipmapNearestFilter:()=>j.kRr,LinearSRGBColorSpace:()=>j.Zr2,LinearToneMapping:()=>j.kyO,LinearTransfer:()=>j.VxR,Loader:()=>j.aHM,LoaderUtils:()=>j.r6x,LoadingManager:()=>j.KPJ,LoopOnce:()=>j.G3T,LoopPingPong:()=>j.lc7,LoopRepeat:()=>j.aMy,LuminanceAlphaFormat:()=>j.CMB,LuminanceFormat:()=>j.Kzv,MOUSE:()=>j.kBv,Material:()=>j.imn,MaterialLoader:()=>j.jut,MathUtils:()=>j.cj9,Matrix2:()=>j.k_V,Matrix3:()=>j.dwI,Matrix4:()=>j.kn4,MaxEquation:()=>j.$ei,Mesh:()=>j.eaF,MeshBasicMaterial:()=>j.V9B,MeshDepthMaterial:()=>j.CSG,MeshDistanceMaterial:()=>j.aVO,MeshLambertMaterial:()=>j.G_z,MeshMatcapMaterial:()=>j.FNr,MeshNormalMaterial:()=>j.qBx,MeshPhongMaterial:()=>j.tXL,MeshPhysicalMaterial:()=>j.uSd,MeshStandardMaterial:()=>j._4j,MeshToonMaterial:()=>j.Df,MinEquation:()=>j.znC,MirroredRepeatWrapping:()=>j.kTW,MixOperation:()=>j.KRh,MultiplyBlending:()=>j.EdD,MultiplyOperation:()=>j.caT,NearestFilter:()=>j.hxR,NearestMipMapLinearFilter:()=>j.a$r,NearestMipMapNearestFilter:()=>j.$O9,NearestMipmapLinearFilter:()=>j.Cfg,NearestMipmapNearestFilter:()=>j.pHI,NeutralToneMapping:()=>j.aJ8,NeverCompare:()=>j.amv,NeverDepth:()=>j.eHc,NeverStencilFunc:()=>j.HPb,NoBlending:()=>j.XIg,NoColorSpace:()=>j.jf0,NoToneMapping:()=>j.y_p,NormalAnimationBlendMode:()=>j.Ke9,NormalBlending:()=>j.NTi,NotEqualCompare:()=>j.jzd,NotEqualDepth:()=>j.bw0,NotEqualStencilFunc:()=>j.klZ,NumberKeyframeTrack:()=>j.Hit,Object3D:()=>j.B69,ObjectLoader:()=>j.XTe,ObjectSpaceNormalMap:()=>j.vyJ,OctahedronGeometry:()=>j.Ufg,OneFactor:()=>j.qad,OneMinusConstantAlphaFactor:()=>j.ov9,OneMinusConstantColorFactor:()=>j.$Yl,OneMinusDstAlphaFactor:()=>j.Nt7,OneMinusDstColorFactor:()=>j.aEY,OneMinusSrcAlphaFactor:()=>j.OuU,OneMinusSrcColorFactor:()=>j.LiQ,OrthographicCamera:()=>j.qUd,PCFShadowMap:()=>j.QP0,PCFSoftShadowMap:()=>j.Wk7,PMREMGenerator:()=>I,Path:()=>j.wAk,PerspectiveCamera:()=>j.ubm,Plane:()=>j.Zcv,PlaneGeometry:()=>j.bdM,PlaneHelper:()=>j.ZM4,PointLight:()=>j.HiM,PointLightHelper:()=>j.F1l,Points:()=>j.ONl,PointsMaterial:()=>j.BH$,PolarGridHelper:()=>j.hzE,PolyhedronGeometry:()=>j.pFK,PositionalAudio:()=>j.xZx,PropertyBinding:()=>j.Nwf,PropertyMixer:()=>j.N2s,QuadraticBezierCurve:()=>j.dAo,QuadraticBezierCurve3:()=>j.CV9,Quaternion:()=>j.PTz,QuaternionKeyframeTrack:()=>j.MBL,QuaternionLinearInterpolant:()=>j.GBG,RED_GREEN_RGTC2_Format:()=>j.HO_,RED_RGTC1_Format:()=>j.Kef,REVISION:()=>j.sPf,RGBADepthPacking:()=>j.N5j,RGBAFormat:()=>j.GWd,RGBAIntegerFormat:()=>j.c90,RGBA_ASTC_10x10_Format:()=>j.y3Z,RGBA_ASTC_10x5_Format:()=>j.uB5,RGBA_ASTC_10x6_Format:()=>j.lyL,RGBA_ASTC_10x8_Format:()=>j.bC7,RGBA_ASTC_12x10_Format:()=>j.ojs,RGBA_ASTC_12x12_Format:()=>j.S$4,RGBA_ASTC_4x4_Format:()=>j.qa3,RGBA_ASTC_5x4_Format:()=>j.B_h,RGBA_ASTC_5x5_Format:()=>j.czI,RGBA_ASTC_6x5_Format:()=>j.rSH,RGBA_ASTC_6x6_Format:()=>j.Qrf,RGBA_ASTC_8x5_Format:()=>j.psI,RGBA_ASTC_8x6_Format:()=>j.a5J,RGBA_ASTC_8x8_Format:()=>j._QJ,RGBA_BPTC_Format:()=>j.Fn,RGBA_ETC2_EAC_Format:()=>j.KDk,RGBA_PVRTC_2BPPV1_Format:()=>j.pBf,RGBA_PVRTC_4BPPV1_Format:()=>j.HXV,RGBA_S3TC_DXT1_Format:()=>j.Nz6,RGBA_S3TC_DXT3_Format:()=>j.jR7,RGBA_S3TC_DXT5_Format:()=>j.BXX,RGBDepthPacking:()=>j.wTz,RGBFormat:()=>j.HIg,RGBIntegerFormat:()=>j.VGF,RGB_BPTC_SIGNED_Format:()=>j.H23,RGB_BPTC_UNSIGNED_Format:()=>j.W9U,RGB_ETC1_Format:()=>j.CVz,RGB_ETC2_Format:()=>j.Riy,RGB_PVRTC_2BPPV1_Format:()=>j.kTp,RGB_PVRTC_4BPPV1_Format:()=>j.k6Q,RGB_S3TC_DXT1_Format:()=>j.IE4,RGDepthPacking:()=>j.k8v,RGFormat:()=>j.paN,RGIntegerFormat:()=>j.TkQ,RawShaderMaterial:()=>j.D$Q,Ray:()=>j.RlV,Raycaster:()=>j.tBo,RectAreaLight:()=>j.ure,RedFormat:()=>j.VT0,RedIntegerFormat:()=>j.ZQM,ReinhardToneMapping:()=>j.Mjd,RenderTarget:()=>j.O0B,RenderTarget3D:()=>j.XMJ,RenderTargetArray:()=>j.rrX,RepeatWrapping:()=>j.GJx,ReplaceStencilOp:()=>j.kG0,ReverseSubtractEquation:()=>j.nST,RingGeometry:()=>j.rKP,SIGNED_RED_GREEN_RGTC2_Format:()=>j.CWW,SIGNED_RED_RGTC1_Format:()=>j.XG_,SRGBColorSpace:()=>j.er$,SRGBTransfer:()=>j.KLL,Scene:()=>j.Z58,ShaderChunk:()=>m,ShaderLib:()=>o,ShaderMaterial:()=>j.BKk,ShadowMaterial:()=>j.q2,Shape:()=>j.ypk,ShapeGeometry:()=>j.MSw,ShapePath:()=>j.Ld9,ShapeUtils:()=>j.xJ6,ShortType:()=>j.fBL,Skeleton:()=>j.EAD,SkeletonHelper:()=>j._xc,SkinnedMesh:()=>j.I46,Source:()=>j.kLi,Sphere:()=>j.iyt,SphereGeometry:()=>j.Gu$,Spherical:()=>j.YHV,SphericalHarmonics3:()=>j.xOk,SplineCurve:()=>j.xfg,SpotLight:()=>j.nCl,SpotLightHelper:()=>j.Fpm,Sprite:()=>j.kxk,SpriteMaterial:()=>j.RoJ,SrcAlphaFactor:()=>j.ie2,SrcAlphaSaturateFactor:()=>j.hgQ,SrcColorFactor:()=>j.f4X,StaticCopyUsage:()=>j.Hrq,StaticDrawUsage:()=>j.agE,StaticReadUsage:()=>j.uXQ,StereoCamera:()=>j.keZ,StreamCopyUsage:()=>j.rOG,StreamDrawUsage:()=>j.Ktl,StreamReadUsage:()=>j.uov,StringKeyframeTrack:()=>j.hZF,SubtractEquation:()=>j.FXf,SubtractiveBlending:()=>j.Kwu,TOUCH:()=>j.wtR,TangentSpaceNormalMap:()=>j.bI3,TetrahedronGeometry:()=>j.Zpd,Texture:()=>j.gPd,TextureLoader:()=>j.Tap,TextureUtils:()=>j.Vwu,TimestampQuery:()=>j.v9J,TorusGeometry:()=>j.O3Y,TorusKnotGeometry:()=>j.UPV,Triangle:()=>j.lMl,TriangleFanDrawMode:()=>j.rYR,TriangleStripDrawMode:()=>j.O49,TrianglesDrawMode:()=>j.RJ4,TubeGeometry:()=>j.j6,UVMapping:()=>j.UTZ,Uint16BufferAttribute:()=>j.A$4,Uint32BufferAttribute:()=>j.MW4,Uint8BufferAttribute:()=>j.baL,Uint8ClampedBufferAttribute:()=>j.fc6,Uniform:()=>j.nc$,UniformsGroup:()=>j.dzP,UniformsLib:()=>n,UniformsUtils:()=>j.LlO,UnsignedByteType:()=>j.OUM,UnsignedInt248Type:()=>j.V3x,UnsignedInt5999Type:()=>j.Dmk,UnsignedIntType:()=>j.bkx,UnsignedShort4444Type:()=>j.Wew,UnsignedShort5551Type:()=>j.gJ2,UnsignedShortType:()=>j.cHt,VSMShadowMap:()=>j.RyA,Vector2:()=>j.I9Y,Vector3:()=>j.Pq0,Vector4:()=>j.IUQ,VectorKeyframeTrack:()=>j.RiT,VideoFrameTexture:()=>j.SYV,VideoTexture:()=>j.Nv2,WebGL3DRenderTarget:()=>j.ALV,WebGLArrayRenderTarget:()=>j.y9J,WebGLCoordinateSystem:()=>j.TdN,WebGLCubeRenderTarget:()=>j.o6l,WebGLRenderTarget:()=>j.nWS,WebGLRenderer:()=>bI,WebGLUtils:()=>by,WebGPUCoordinateSystem:()=>j.i7u,WebXRController:()=>j.R3r,WireframeGeometry:()=>j.XJ7,WrapAroundEnding:()=>j.dhZ,ZeroCurvatureEnding:()=>j.rQf,ZeroFactor:()=>j.ojh,ZeroSlopeEnding:()=>j.h2z,ZeroStencilOp:()=>j.kqe,createCanvasElement:()=>j.lPF});var j=c(4546);function k(){let a=null,b=!1,c=null,d=null;function e(b,f){c(b,f),d=a.requestAnimationFrame(e)}return{start:function(){!0!==b&&null!==c&&(d=a.requestAnimationFrame(e),b=!0)},stop:function(){a.cancelAnimationFrame(d),b=!1},setAnimationLoop:function(a){c=a},setContext:function(b){a=b}}}function l(a){let b=new WeakMap;return{get:function(a){return a.isInterleavedBufferAttribute&&(a=a.data),b.get(a)},remove:function(c){c.isInterleavedBufferAttribute&&(c=c.data);let d=b.get(c);d&&(a.deleteBuffer(d.buffer),b.delete(c))},update:function(c,d){if(c.isInterleavedBufferAttribute&&(c=c.data),c.isGLBufferAttribute){let a=b.get(c);(!a||a.version<c.version)&&b.set(c,{buffer:c.buffer,type:c.type,bytesPerElement:c.elementSize,version:c.version});return}let e=b.get(c);if(void 0===e)b.set(c,function(b,c){let d,e=b.array,f=b.usage,g=e.byteLength,h=a.createBuffer();if(a.bindBuffer(c,h),a.bufferData(c,e,f),b.onUploadCallback(),e instanceof Float32Array)d=a.FLOAT;else if(e instanceof Uint16Array)d=b.isFloat16BufferAttribute?a.HALF_FLOAT:a.UNSIGNED_SHORT;else if(e instanceof Int16Array)d=a.SHORT;else if(e instanceof Uint32Array)d=a.UNSIGNED_INT;else if(e instanceof Int32Array)d=a.INT;else if(e instanceof Int8Array)d=a.BYTE;else if(e instanceof Uint8Array)d=a.UNSIGNED_BYTE;else if(e instanceof Uint8ClampedArray)d=a.UNSIGNED_BYTE;else throw Error("THREE.WebGLAttributes: Unsupported buffer data format: "+e);return{buffer:h,type:d,bytesPerElement:e.BYTES_PER_ELEMENT,version:b.version,size:g}}(c,d));else if(e.version<c.version){if(e.size!==c.array.byteLength)throw Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");!function(b,c,d){let e=c.array,f=c.updateRanges;if(a.bindBuffer(d,b),0===f.length)a.bufferSubData(d,0,e);else{f.sort((a,b)=>a.start-b.start);let b=0;for(let a=1;a<f.length;a++){let c=f[b],d=f[a];d.start<=c.start+c.count+1?c.count=Math.max(c.count,d.start+d.count-c.start):f[++b]=d}f.length=b+1;for(let b=0,c=f.length;b<c;b++){let c=f[b];a.bufferSubData(d,c.start*e.BYTES_PER_ELEMENT,e,c.start,c.count)}c.clearUpdateRanges()}c.onUploadCallback()}(e.buffer,c,d),e.version=c.version}}}}let m={alphahash_fragment:"#ifdef USE_ALPHAHASH\n	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;\n#endif",alphahash_pars_fragment:"#ifdef USE_ALPHAHASH\n	const float ALPHA_HASH_SCALE = 0.05;\n	float hash2D( vec2 value ) {\n		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );\n	}\n	float hash3D( vec3 value ) {\n		return hash2D( vec2( hash2D( value.xy ), value.z ) );\n	}\n	float getAlphaHashThreshold( vec3 position ) {\n		float maxDeriv = max(\n			length( dFdx( position.xyz ) ),\n			length( dFdy( position.xyz ) )\n		);\n		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );\n		vec2 pixScales = vec2(\n			exp2( floor( log2( pixScale ) ) ),\n			exp2( ceil( log2( pixScale ) ) )\n		);\n		vec2 alpha = vec2(\n			hash3D( floor( pixScales.x * position.xyz ) ),\n			hash3D( floor( pixScales.y * position.xyz ) )\n		);\n		float lerpFactor = fract( log2( pixScale ) );\n		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;\n		float a = min( lerpFactor, 1.0 - lerpFactor );\n		vec3 cases = vec3(\n			x * x / ( 2.0 * a * ( 1.0 - a ) ),\n			( x - 0.5 * a ) / ( 1.0 - a ),\n			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )\n		);\n		float threshold = ( x < ( 1.0 - a ) )\n			? ( ( x < a ) ? cases.x : cases.y )\n			: cases.z;\n		return clamp( threshold , 1.0e-6, 1.0 );\n	}\n#endif",alphamap_fragment:"#ifdef USE_ALPHAMAP\n	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n	uniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef USE_ALPHATEST\n	#ifdef ALPHA_TO_COVERAGE\n	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );\n	if ( diffuseColor.a == 0.0 ) discard;\n	#else\n	if ( diffuseColor.a < alphaTest ) discard;\n	#endif\n#endif",alphatest_pars_fragment:"#ifdef USE_ALPHATEST\n	uniform float alphaTest;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;\n	reflectedLight.indirectDiffuse *= ambientOcclusion;\n	#if defined( USE_CLEARCOAT ) \n		clearcoatSpecularIndirect *= ambientOcclusion;\n	#endif\n	#if defined( USE_SHEEN ) \n		sheenSpecularIndirect *= ambientOcclusion;\n	#endif\n	#if defined( USE_ENVMAP ) && defined( STANDARD )\n		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );\n		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\n	#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n	uniform sampler2D aoMap;\n	uniform float aoMapIntensity;\n#endif",batching_pars_vertex:"#ifdef USE_BATCHING\n	#if ! defined( GL_ANGLE_multi_draw )\n	#define gl_DrawID _gl_DrawID\n	uniform int _gl_DrawID;\n	#endif\n	uniform highp sampler2D batchingTexture;\n	uniform highp usampler2D batchingIdTexture;\n	mat4 getBatchingMatrix( const in float i ) {\n		int size = textureSize( batchingTexture, 0 ).x;\n		int j = int( i ) * 4;\n		int x = j % size;\n		int y = j / size;\n		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );\n		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );\n		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );\n		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );\n		return mat4( v1, v2, v3, v4 );\n	}\n	float getIndirectIndex( const in int i ) {\n		int size = textureSize( batchingIdTexture, 0 ).x;\n		int x = i % size;\n		int y = i / size;\n		return float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );\n	}\n#endif\n#ifdef USE_BATCHING_COLOR\n	uniform sampler2D batchingColorTexture;\n	vec3 getBatchingColor( const in float i ) {\n		int size = textureSize( batchingColorTexture, 0 ).x;\n		int j = int( i );\n		int x = j % size;\n		int y = j / size;\n		return texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;\n	}\n#endif",batching_vertex:"#ifdef USE_BATCHING\n	mat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );\n#endif",begin_vertex:"vec3 transformed = vec3( position );\n#ifdef USE_ALPHAHASH\n	vPosition = vec3( position );\n#endif",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n	vec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"float G_BlinnPhong_Implicit( ) {\n	return 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\n	vec3 halfDir = normalize( lightDir + viewDir );\n	float dotNH = saturate( dot( normal, halfDir ) );\n	float dotVH = saturate( dot( viewDir, halfDir ) );\n	vec3 F = F_Schlick( specularColor, 1.0, dotVH );\n	float G = G_BlinnPhong_Implicit( );\n	float D = D_BlinnPhong( shininess, dotNH );\n	return F * ( G * D );\n} // validated",iridescence_fragment:"#ifdef USE_IRIDESCENCE\n	const mat3 XYZ_TO_REC709 = mat3(\n		 3.2404542, -0.9692660,  0.0556434,\n		-1.5371385,  1.8760108, -0.2040259,\n		-0.4985314,  0.0415560,  1.0572252\n	);\n	vec3 Fresnel0ToIor( vec3 fresnel0 ) {\n		vec3 sqrtF0 = sqrt( fresnel0 );\n		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );\n	}\n	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {\n		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );\n	}\n	float IorToFresnel0( float transmittedIor, float incidentIor ) {\n		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));\n	}\n	vec3 evalSensitivity( float OPD, vec3 shift ) {\n		float phase = 2.0 * PI * OPD * 1.0e-9;\n		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );\n		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );\n		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );\n		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );\n		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );\n		xyz /= 1.0685e-7;\n		vec3 rgb = XYZ_TO_REC709 * xyz;\n		return rgb;\n	}\n	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {\n		vec3 I;\n		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );\n		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );\n		float cosTheta2Sq = 1.0 - sinTheta2Sq;\n		if ( cosTheta2Sq < 0.0 ) {\n			return vec3( 1.0 );\n		}\n		float cosTheta2 = sqrt( cosTheta2Sq );\n		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );\n		float R12 = F_Schlick( R0, 1.0, cosTheta1 );\n		float T121 = 1.0 - R12;\n		float phi12 = 0.0;\n		if ( iridescenceIOR < outsideIOR ) phi12 = PI;\n		float phi21 = PI - phi12;\n		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );\n		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );\n		vec3 phi23 = vec3( 0.0 );\n		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;\n		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;\n		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;\n		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;\n		vec3 phi = vec3( phi21 ) + phi23;\n		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );\n		vec3 r123 = sqrt( R123 );\n		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );\n		vec3 C0 = R12 + Rs;\n		I = C0;\n		vec3 Cm = Rs - T121;\n		for ( int m = 1; m <= 2; ++ m ) {\n			Cm *= r123;\n			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );\n			I += Cm * Sm;\n		}\n		return max( I, vec3( 0.0 ) );\n	}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n	uniform sampler2D bumpMap;\n	uniform float bumpScale;\n	vec2 dHdxy_fwd() {\n		vec2 dSTdx = dFdx( vBumpMapUv );\n		vec2 dSTdy = dFdy( vBumpMapUv );\n		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;\n		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;\n		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;\n		return vec2( dBx, dBy );\n	}\n	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );\n		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );\n		vec3 vN = surf_norm;\n		vec3 R1 = cross( vSigmaY, vN );\n		vec3 R2 = cross( vN, vSigmaX );\n		float fDet = dot( vSigmaX, R1 ) * faceDirection;\n		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n		return normalize( abs( fDet ) * surf_norm - vGrad );\n	}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n	vec4 plane;\n	#ifdef ALPHA_TO_COVERAGE\n		float distanceToPlane, distanceGradient;\n		float clipOpacity = 1.0;\n		#pragma unroll_loop_start\n		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n			plane = clippingPlanes[ i ];\n			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;\n			distanceGradient = fwidth( distanceToPlane ) / 2.0;\n			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );\n			if ( clipOpacity == 0.0 ) discard;\n		}\n		#pragma unroll_loop_end\n		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n			float unionClipOpacity = 1.0;\n			#pragma unroll_loop_start\n			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n				plane = clippingPlanes[ i ];\n				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;\n				distanceGradient = fwidth( distanceToPlane ) / 2.0;\n				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );\n			}\n			#pragma unroll_loop_end\n			clipOpacity *= 1.0 - unionClipOpacity;\n		#endif\n		diffuseColor.a *= clipOpacity;\n		if ( diffuseColor.a == 0.0 ) discard;\n	#else\n		#pragma unroll_loop_start\n		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n			plane = clippingPlanes[ i ];\n			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n		}\n		#pragma unroll_loop_end\n		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n			bool clipped = true;\n			#pragma unroll_loop_start\n			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n				plane = clippingPlanes[ i ];\n				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n			}\n			#pragma unroll_loop_end\n			if ( clipped ) discard;\n		#endif\n	#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n	varying vec3 vClipPosition;\n	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n	varying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n	vClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#if defined( USE_COLOR_ALPHA )\n	diffuseColor *= vColor;\n#elif defined( USE_COLOR )\n	diffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#if defined( USE_COLOR_ALPHA )\n	varying vec4 vColor;\n#elif defined( USE_COLOR )\n	varying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR_ALPHA )\n	varying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )\n	varying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR_ALPHA )\n	vColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )\n	vColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n	vColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n	vColor.xyz *= instanceColor.xyz;\n#endif\n#ifdef USE_BATCHING_COLOR\n	vec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );\n	vColor.xyz *= batchingColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nvec3 pow2( const in vec3 x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\nfloat average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }\nhighp float rand( const in vec2 uv ) {\n	const highp float a = 12.9898, b = 78.233, c = 43758.5453;\n	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n	return fract( sin( sn ) * c );\n}\n#ifdef HIGH_PRECISION\n	float precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n	float precisionSafeLength( vec3 v ) {\n		float maxComponent = max3( abs( v ) );\n		return length( v / maxComponent ) * maxComponent;\n	}\n#endif\nstruct IncidentLight {\n	vec3 color;\n	vec3 direction;\n	bool visible;\n};\nstruct ReflectedLight {\n	vec3 directDiffuse;\n	vec3 directSpecular;\n	vec3 indirectDiffuse;\n	vec3 indirectSpecular;\n};\n#ifdef USE_ALPHAHASH\n	varying vec3 vPosition;\n#endif\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nmat3 transposeMat3( const in mat3 m ) {\n	mat3 tmp;\n	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n	return tmp;\n}\nbool isPerspectiveMatrix( mat4 m ) {\n	return m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n	return vec2( u, v );\n}\nvec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n	return RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\n	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nfloat F_Schlick( const in float f0, const in float f90, const in float dotVH ) {\n	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n} // validated",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n	#define cubeUV_minMipLevel 4.0\n	#define cubeUV_minTileSize 16.0\n	float getFace( vec3 direction ) {\n		vec3 absDirection = abs( direction );\n		float face = - 1.0;\n		if ( absDirection.x > absDirection.z ) {\n			if ( absDirection.x > absDirection.y )\n				face = direction.x > 0.0 ? 0.0 : 3.0;\n			else\n				face = direction.y > 0.0 ? 1.0 : 4.0;\n		} else {\n			if ( absDirection.z > absDirection.y )\n				face = direction.z > 0.0 ? 2.0 : 5.0;\n			else\n				face = direction.y > 0.0 ? 1.0 : 4.0;\n		}\n		return face;\n	}\n	vec2 getUV( vec3 direction, float face ) {\n		vec2 uv;\n		if ( face == 0.0 ) {\n			uv = vec2( direction.z, direction.y ) / abs( direction.x );\n		} else if ( face == 1.0 ) {\n			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n		} else if ( face == 2.0 ) {\n			uv = vec2( - direction.x, direction.y ) / abs( direction.z );\n		} else if ( face == 3.0 ) {\n			uv = vec2( - direction.z, direction.y ) / abs( direction.x );\n		} else if ( face == 4.0 ) {\n			uv = vec2( - direction.x, direction.z ) / abs( direction.y );\n		} else {\n			uv = vec2( direction.x, direction.y ) / abs( direction.z );\n		}\n		return 0.5 * ( uv + 1.0 );\n	}\n	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n		float face = getFace( direction );\n		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n		mipInt = max( mipInt, cubeUV_minMipLevel );\n		float faceSize = exp2( mipInt );\n		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;\n		if ( face > 2.0 ) {\n			uv.y += faceSize;\n			face -= 3.0;\n		}\n		uv.x += face * faceSize;\n		uv.x += filterInt * 3.0 * cubeUV_minTileSize;\n		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );\n		uv.x *= CUBEUV_TEXEL_WIDTH;\n		uv.y *= CUBEUV_TEXEL_HEIGHT;\n		#ifdef texture2DGradEXT\n			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;\n		#else\n			return texture2D( envMap, uv ).rgb;\n		#endif\n	}\n	#define cubeUV_r0 1.0\n	#define cubeUV_m0 - 2.0\n	#define cubeUV_r1 0.8\n	#define cubeUV_m1 - 1.0\n	#define cubeUV_r4 0.4\n	#define cubeUV_m4 2.0\n	#define cubeUV_r5 0.305\n	#define cubeUV_m5 3.0\n	#define cubeUV_r6 0.21\n	#define cubeUV_m6 4.0\n	float roughnessToMip( float roughness ) {\n		float mip = 0.0;\n		if ( roughness >= cubeUV_r1 ) {\n			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;\n		} else if ( roughness >= cubeUV_r4 ) {\n			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;\n		} else if ( roughness >= cubeUV_r5 ) {\n			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;\n		} else if ( roughness >= cubeUV_r6 ) {\n			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;\n		} else {\n			mip = - 2.0 * log2( 1.16 * roughness );		}\n		return mip;\n	}\n	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );\n		float mipF = fract( mip );\n		float mipInt = floor( mip );\n		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n		if ( mipF == 0.0 ) {\n			return vec4( color0, 1.0 );\n		} else {\n			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n			return vec4( mix( color0, color1, mipF ), 1.0 );\n		}\n	}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_TANGENT\n	vec3 transformedTangent = objectTangent;\n#endif\n#ifdef USE_BATCHING\n	mat3 bm = mat3( batchingMatrix );\n	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );\n	transformedNormal = bm * transformedNormal;\n	#ifdef USE_TANGENT\n		transformedTangent = bm * transformedTangent;\n	#endif\n#endif\n#ifdef USE_INSTANCING\n	mat3 im = mat3( instanceMatrix );\n	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );\n	transformedNormal = im * transformedNormal;\n	#ifdef USE_TANGENT\n		transformedTangent = im * transformedTangent;\n	#endif\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n	transformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;\n	#ifdef FLIP_SIDED\n		transformedTangent = - transformedTangent;\n	#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n	uniform sampler2D displacementMap;\n	uniform float displacementScale;\n	uniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );\n	#ifdef DECODE_VIDEO_TEXTURE_EMISSIVE\n		emissiveColor = sRGBTransferEOTF( emissiveColor );\n	#endif\n	totalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n	uniform sampler2D emissiveMap;\n#endif",colorspace_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",colorspace_pars_fragment:"vec4 LinearTransferOETF( in vec4 value ) {\n	return value;\n}\nvec4 sRGBTransferEOTF( in vec4 value ) {\n	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );\n}\nvec4 sRGBTransferOETF( in vec4 value ) {\n	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n	#ifdef ENV_WORLDPOS\n		vec3 cameraToFrag;\n		if ( isOrthographic ) {\n			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n		} else {\n			cameraToFrag = normalize( vWorldPosition - cameraPosition );\n		}\n		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n		#ifdef ENVMAP_MODE_REFLECTION\n			vec3 reflectVec = reflect( cameraToFrag, worldNormal );\n		#else\n			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n		#endif\n	#else\n		vec3 reflectVec = vReflect;\n	#endif\n	#ifdef ENVMAP_TYPE_CUBE\n		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n	#else\n		vec4 envColor = vec4( 0.0 );\n	#endif\n	#ifdef ENVMAP_BLENDING_MULTIPLY\n		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n	#elif defined( ENVMAP_BLENDING_MIX )\n		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n	#elif defined( ENVMAP_BLENDING_ADD )\n		outgoingLight += envColor.xyz * specularStrength * reflectivity;\n	#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n	uniform float envMapIntensity;\n	uniform float flipEnvMap;\n	uniform mat3 envMapRotation;\n	#ifdef ENVMAP_TYPE_CUBE\n		uniform samplerCube envMap;\n	#else\n		uniform sampler2D envMap;\n	#endif\n	\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n	uniform float reflectivity;\n	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n		#define ENV_WORLDPOS\n	#endif\n	#ifdef ENV_WORLDPOS\n		varying vec3 vWorldPosition;\n		uniform float refractionRatio;\n	#else\n		varying vec3 vReflect;\n	#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n		#define ENV_WORLDPOS\n	#endif\n	#ifdef ENV_WORLDPOS\n		\n		varying vec3 vWorldPosition;\n	#else\n		varying vec3 vReflect;\n		uniform float refractionRatio;\n	#endif\n#endif",envmap_physical_pars_fragment:"#ifdef USE_ENVMAP\n	vec3 getIBLIrradiance( const in vec3 normal ) {\n		#ifdef ENVMAP_TYPE_CUBE_UV\n			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );\n			return PI * envMapColor.rgb * envMapIntensity;\n		#else\n			return vec3( 0.0 );\n		#endif\n	}\n	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n		#ifdef ENVMAP_TYPE_CUBE_UV\n			vec3 reflectVec = reflect( - viewDir, normal );\n			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );\n			return envMapColor.rgb * envMapIntensity;\n		#else\n			return vec3( 0.0 );\n		#endif\n	}\n	#ifdef USE_ANISOTROPY\n		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {\n			#ifdef ENVMAP_TYPE_CUBE_UV\n				vec3 bentNormal = cross( bitangent, viewDir );\n				bentNormal = normalize( cross( bentNormal, bitangent ) );\n				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );\n				return getIBLRadiance( viewDir, bentNormal, roughness );\n			#else\n				return vec3( 0.0 );\n			#endif\n		}\n	#endif\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n	#ifdef ENV_WORLDPOS\n		vWorldPosition = worldPosition.xyz;\n	#else\n		vec3 cameraToVertex;\n		if ( isOrthographic ) {\n			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n		} else {\n			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n		}\n		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n		#ifdef ENVMAP_MODE_REFLECTION\n			vReflect = reflect( cameraToVertex, worldNormal );\n		#else\n			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n		#endif\n	#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n	vFogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n	varying float vFogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n	#ifdef FOG_EXP2\n		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\n	#else\n		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\n	#endif\n	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n	uniform vec3 fogColor;\n	varying float vFogDepth;\n	#ifdef FOG_EXP2\n		uniform float fogDensity;\n	#else\n		uniform float fogNear;\n		uniform float fogFar;\n	#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n	uniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n	float dotNL = dot( normal, lightDirection );\n	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n	#ifdef USE_GRADIENTMAP\n		return vec3( texture2D( gradientMap, coord ).r );\n	#else\n		vec2 fw = fwidth( coord ) * 0.5;\n		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );\n	#endif\n}",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n	uniform sampler2D lightMap;\n	uniform float lightMapIntensity;\n#endif",lights_lambert_fragment:"LambertMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularStrength = specularStrength;",lights_lambert_pars_fragment:"varying vec3 vViewPosition;\nstruct LambertMaterial {\n	vec3 diffuseColor;\n	float specularStrength;\n};\nvoid RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n	vec3 irradiance = dotNL * directLight.color;\n	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct				RE_Direct_Lambert\n#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\n#if defined( USE_LIGHT_PROBES )\n	uniform vec3 lightProbe[ 9 ];\n#endif\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n	float x = normal.x, y = normal.y, z = normal.z;\n	vec3 result = shCoefficients[ 0 ] * 0.886227;\n	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n	return result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\n	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n	return irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n	vec3 irradiance = ambientLightColor;\n	return irradiance;\n}\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n	if ( cutoffDistance > 0.0 ) {\n		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n	}\n	return distanceFalloff;\n}\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\n	return smoothstep( coneCosine, penumbraCosine, angleCosine );\n}\n#if NUM_DIR_LIGHTS > 0\n	struct DirectionalLight {\n		vec3 direction;\n		vec3 color;\n	};\n	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {\n		light.color = directionalLight.color;\n		light.direction = directionalLight.direction;\n		light.visible = true;\n	}\n#endif\n#if NUM_POINT_LIGHTS > 0\n	struct PointLight {\n		vec3 position;\n		vec3 color;\n		float distance;\n		float decay;\n	};\n	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {\n		vec3 lVector = pointLight.position - geometryPosition;\n		light.direction = normalize( lVector );\n		float lightDistance = length( lVector );\n		light.color = pointLight.color;\n		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\n		light.visible = ( light.color != vec3( 0.0 ) );\n	}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n	struct SpotLight {\n		vec3 position;\n		vec3 direction;\n		vec3 color;\n		float distance;\n		float decay;\n		float coneCos;\n		float penumbraCos;\n	};\n	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {\n		vec3 lVector = spotLight.position - geometryPosition;\n		light.direction = normalize( lVector );\n		float angleCos = dot( light.direction, spotLight.direction );\n		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n		if ( spotAttenuation > 0.0 ) {\n			float lightDistance = length( lVector );\n			light.color = spotLight.color * spotAttenuation;\n			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\n			light.visible = ( light.color != vec3( 0.0 ) );\n		} else {\n			light.color = vec3( 0.0 );\n			light.visible = false;\n		}\n	}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n	struct RectAreaLight {\n		vec3 color;\n		vec3 position;\n		vec3 halfWidth;\n		vec3 halfHeight;\n	};\n	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;\n	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n	struct HemisphereLight {\n		vec3 direction;\n		vec3 skyColor;\n		vec3 groundColor;\n	};\n	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\n		float dotNL = dot( normal, hemiLight.direction );\n		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n		return irradiance;\n	}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\nstruct ToonMaterial {\n	vec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;\n	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct				RE_Direct_Toon\n#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\nstruct BlinnPhongMaterial {\n	vec3 diffuseColor;\n	vec3 specularColor;\n	float specularShininess;\n	float specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n	vec3 irradiance = dotNL * directLight.color;\n	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct				RE_Direct_BlinnPhong\n#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;\nmaterial.roughness = min( material.roughness, 1.0 );\n#ifdef IOR\n	material.ior = ior;\n	#ifdef USE_SPECULAR\n		float specularIntensityFactor = specularIntensity;\n		vec3 specularColorFactor = specularColor;\n		#ifdef USE_SPECULAR_COLORMAP\n			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;\n		#endif\n		#ifdef USE_SPECULAR_INTENSITYMAP\n			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;\n		#endif\n		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\n	#else\n		float specularIntensityFactor = 1.0;\n		vec3 specularColorFactor = vec3( 1.0 );\n		material.specularF90 = 1.0;\n	#endif\n	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n#else\n	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n	material.specularF90 = 1.0;\n#endif\n#ifdef USE_CLEARCOAT\n	material.clearcoat = clearcoat;\n	material.clearcoatRoughness = clearcoatRoughness;\n	material.clearcoatF0 = vec3( 0.04 );\n	material.clearcoatF90 = 1.0;\n	#ifdef USE_CLEARCOATMAP\n		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;\n	#endif\n	#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;\n	#endif\n	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n	material.clearcoatRoughness += geometryRoughness;\n	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_DISPERSION\n	material.dispersion = dispersion;\n#endif\n#ifdef USE_IRIDESCENCE\n	material.iridescence = iridescence;\n	material.iridescenceIOR = iridescenceIOR;\n	#ifdef USE_IRIDESCENCEMAP\n		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;\n	#endif\n	#ifdef USE_IRIDESCENCE_THICKNESSMAP\n		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;\n	#else\n		material.iridescenceThickness = iridescenceThicknessMaximum;\n	#endif\n#endif\n#ifdef USE_SHEEN\n	material.sheenColor = sheenColor;\n	#ifdef USE_SHEEN_COLORMAP\n		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;\n	#endif\n	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );\n	#ifdef USE_SHEEN_ROUGHNESSMAP\n		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;\n	#endif\n#endif\n#ifdef USE_ANISOTROPY\n	#ifdef USE_ANISOTROPYMAP\n		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );\n		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;\n		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;\n	#else\n		vec2 anisotropyV = anisotropyVector;\n	#endif\n	material.anisotropy = length( anisotropyV );\n	if( material.anisotropy == 0.0 ) {\n		anisotropyV = vec2( 1.0, 0.0 );\n	} else {\n		anisotropyV /= material.anisotropy;\n		material.anisotropy = saturate( material.anisotropy );\n	}\n	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );\n	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;\n	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n	vec3 diffuseColor;\n	float roughness;\n	vec3 specularColor;\n	float specularF90;\n	float dispersion;\n	#ifdef USE_CLEARCOAT\n		float clearcoat;\n		float clearcoatRoughness;\n		vec3 clearcoatF0;\n		float clearcoatF90;\n	#endif\n	#ifdef USE_IRIDESCENCE\n		float iridescence;\n		float iridescenceIOR;\n		float iridescenceThickness;\n		vec3 iridescenceFresnel;\n		vec3 iridescenceF0;\n	#endif\n	#ifdef USE_SHEEN\n		vec3 sheenColor;\n		float sheenRoughness;\n	#endif\n	#ifdef IOR\n		float ior;\n	#endif\n	#ifdef USE_TRANSMISSION\n		float transmission;\n		float transmissionAlpha;\n		float thickness;\n		float attenuationDistance;\n		vec3 attenuationColor;\n	#endif\n	#ifdef USE_ANISOTROPY\n		float anisotropy;\n		float alphaT;\n		vec3 anisotropyT;\n		vec3 anisotropyB;\n	#endif\n};\nvec3 clearcoatSpecularDirect = vec3( 0.0 );\nvec3 clearcoatSpecularIndirect = vec3( 0.0 );\nvec3 sheenSpecularDirect = vec3( 0.0 );\nvec3 sheenSpecularIndirect = vec3(0.0 );\nvec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {\n    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );\n    float x2 = x * x;\n    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );\n    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );\n}\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n	float a2 = pow2( alpha );\n	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n	return 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n	float a2 = pow2( alpha );\n	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n	return RECIPROCAL_PI * a2 / pow2( denom );\n}\n#ifdef USE_ANISOTROPY\n	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {\n		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );\n		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );\n		float v = 0.5 / ( gv + gl );\n		return saturate(v);\n	}\n	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {\n		float a2 = alphaT * alphaB;\n		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );\n		highp float v2 = dot( v, v );\n		float w2 = a2 / v2;\n		return RECIPROCAL_PI * a2 * pow2 ( w2 );\n	}\n#endif\n#ifdef USE_CLEARCOAT\n	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {\n		vec3 f0 = material.clearcoatF0;\n		float f90 = material.clearcoatF90;\n		float roughness = material.clearcoatRoughness;\n		float alpha = pow2( roughness );\n		vec3 halfDir = normalize( lightDir + viewDir );\n		float dotNL = saturate( dot( normal, lightDir ) );\n		float dotNV = saturate( dot( normal, viewDir ) );\n		float dotNH = saturate( dot( normal, halfDir ) );\n		float dotVH = saturate( dot( viewDir, halfDir ) );\n		vec3 F = F_Schlick( f0, f90, dotVH );\n		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n		float D = D_GGX( alpha, dotNH );\n		return F * ( V * D );\n	}\n#endif\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {\n	vec3 f0 = material.specularColor;\n	float f90 = material.specularF90;\n	float roughness = material.roughness;\n	float alpha = pow2( roughness );\n	vec3 halfDir = normalize( lightDir + viewDir );\n	float dotNL = saturate( dot( normal, lightDir ) );\n	float dotNV = saturate( dot( normal, viewDir ) );\n	float dotNH = saturate( dot( normal, halfDir ) );\n	float dotVH = saturate( dot( viewDir, halfDir ) );\n	vec3 F = F_Schlick( f0, f90, dotVH );\n	#ifdef USE_IRIDESCENCE\n		F = mix( F, material.iridescenceFresnel, material.iridescence );\n	#endif\n	#ifdef USE_ANISOTROPY\n		float dotTL = dot( material.anisotropyT, lightDir );\n		float dotTV = dot( material.anisotropyT, viewDir );\n		float dotTH = dot( material.anisotropyT, halfDir );\n		float dotBL = dot( material.anisotropyB, lightDir );\n		float dotBV = dot( material.anisotropyB, viewDir );\n		float dotBH = dot( material.anisotropyB, halfDir );\n		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );\n		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );\n	#else\n		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n		float D = D_GGX( alpha, dotNH );\n	#endif\n	return F * ( V * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n	const float LUT_SIZE = 64.0;\n	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n	const float LUT_BIAS = 0.5 / LUT_SIZE;\n	float dotNV = saturate( dot( N, V ) );\n	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n	uv = uv * LUT_SCALE + LUT_BIAS;\n	return uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n	float l = length( f );\n	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n	float x = dot( v1, v2 );\n	float y = abs( x );\n	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n	float b = 3.4175940 + ( 4.1616724 + y ) * y;\n	float v = a / b;\n	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n	return cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n	vec3 lightNormal = cross( v1, v2 );\n	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n	vec3 T1, T2;\n	T1 = normalize( V - N * dot( V, N ) );\n	T2 = - cross( N, T1 );\n	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n	vec3 coords[ 4 ];\n	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n	coords[ 0 ] = normalize( coords[ 0 ] );\n	coords[ 1 ] = normalize( coords[ 1 ] );\n	coords[ 2 ] = normalize( coords[ 2 ] );\n	coords[ 3 ] = normalize( coords[ 3 ] );\n	vec3 vectorFormFactor = vec3( 0.0 );\n	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n	return vec3( result );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie( float roughness, float dotNH ) {\n	float alpha = pow2( roughness );\n	float invAlpha = 1.0 / alpha;\n	float cos2h = dotNH * dotNH;\n	float sin2h = max( 1.0 - cos2h, 0.0078125 );\n	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\n}\nfloat V_Neubelt( float dotNV, float dotNL ) {\n	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\n}\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {\n	vec3 halfDir = normalize( lightDir + viewDir );\n	float dotNL = saturate( dot( normal, lightDir ) );\n	float dotNV = saturate( dot( normal, viewDir ) );\n	float dotNH = saturate( dot( normal, halfDir ) );\n	float D = D_Charlie( sheenRoughness, dotNH );\n	float V = V_Neubelt( dotNV, dotNL );\n	return sheenColor * ( D * V );\n}\n#endif\nfloat IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n	float dotNV = saturate( dot( normal, viewDir ) );\n	float r2 = roughness * roughness;\n	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;\n	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;\n	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );\n	return saturate( DG * RECIPROCAL_PI );\n}\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n	float dotNV = saturate( dot( normal, viewDir ) );\n	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n	vec4 r = roughness * c0 + c1;\n	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;\n	return fab;\n}\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\n	vec2 fab = DFGApprox( normal, viewDir, roughness );\n	return specularColor * fab.x + specularF90 * fab.y;\n}\n#ifdef USE_IRIDESCENCE\nvoid computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#else\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#endif\n	vec2 fab = DFGApprox( normal, viewDir, roughness );\n	#ifdef USE_IRIDESCENCE\n		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );\n	#else\n		vec3 Fr = specularColor;\n	#endif\n	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;\n	float Ess = fab.x + fab.y;\n	float Ems = 1.0 - Ess;\n	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n	singleScatter += FssEss;\n	multiScatter += Fms * Ems;\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n		vec3 normal = geometryNormal;\n		vec3 viewDir = geometryViewDir;\n		vec3 position = geometryPosition;\n		vec3 lightPos = rectAreaLight.position;\n		vec3 halfWidth = rectAreaLight.halfWidth;\n		vec3 halfHeight = rectAreaLight.halfHeight;\n		vec3 lightColor = rectAreaLight.color;\n		float roughness = material.roughness;\n		vec3 rectCoords[ 4 ];\n		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n		vec2 uv = LTC_Uv( normal, viewDir, roughness );\n		vec4 t1 = texture2D( ltc_1, uv );\n		vec4 t2 = texture2D( ltc_2, uv );\n		mat3 mInv = mat3(\n			vec3( t1.x, 0, t1.y ),\n			vec3(    0, 1,    0 ),\n			vec3( t1.z, 0, t1.w )\n		);\n		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n	}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n	vec3 irradiance = dotNL * directLight.color;\n	#ifdef USE_CLEARCOAT\n		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );\n		vec3 ccIrradiance = dotNLcc * directLight.color;\n		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );\n	#endif\n	#ifdef USE_SHEEN\n		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );\n	#endif\n	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );\n	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n	#ifdef USE_CLEARCOAT\n		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n	#endif\n	#ifdef USE_SHEEN\n		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );\n	#endif\n	vec3 singleScattering = vec3( 0.0 );\n	vec3 multiScattering = vec3( 0.0 );\n	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n	#ifdef USE_IRIDESCENCE\n		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );\n	#else\n		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\n	#endif\n	vec3 totalScattering = singleScattering + multiScattering;\n	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );\n	reflectedLight.indirectSpecular += radiance * singleScattering;\n	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct				RE_Direct_Physical\n#define RE_Direct_RectArea		RE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular		RE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nvec3 geometryPosition = - vViewPosition;\nvec3 geometryNormal = normal;\nvec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\nvec3 geometryClearcoatNormal = vec3( 0.0 );\n#ifdef USE_CLEARCOAT\n	geometryClearcoatNormal = clearcoatNormal;\n#endif\n#ifdef USE_IRIDESCENCE\n	float dotNVi = saturate( dot( normal, geometryViewDir ) );\n	if ( material.iridescenceThickness == 0.0 ) {\n		material.iridescence = 0.0;\n	} else {\n		material.iridescence = saturate( material.iridescence );\n	}\n	if ( material.iridescence > 0.0 ) {\n		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );\n		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );\n	}\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n	PointLight pointLight;\n	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n	PointLightShadow pointLightShadow;\n	#endif\n	#pragma unroll_loop_start\n	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n		pointLight = pointLights[ i ];\n		getPointLightInfo( pointLight, geometryPosition, directLight );\n		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n		pointLightShadow = pointLightShadows[ i ];\n		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n		#endif\n		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n	}\n	#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n	SpotLight spotLight;\n	vec4 spotColor;\n	vec3 spotLightCoord;\n	bool inSpotLightMap;\n	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n	SpotLightShadow spotLightShadow;\n	#endif\n	#pragma unroll_loop_start\n	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n		spotLight = spotLights[ i ];\n		getSpotLightInfo( spotLight, geometryPosition, directLight );\n		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX\n		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS\n		#else\n		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n		#endif\n		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )\n			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;\n			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );\n			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );\n			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;\n		#endif\n		#undef SPOT_LIGHT_MAP_INDEX\n		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n		spotLightShadow = spotLightShadows[ i ];\n		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n		#endif\n		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n	}\n	#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n	DirectionalLight directionalLight;\n	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n	DirectionalLightShadow directionalLightShadow;\n	#endif\n	#pragma unroll_loop_start\n	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n		directionalLight = directionalLights[ i ];\n		getDirectionalLightInfo( directionalLight, directLight );\n		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n		directionalLightShadow = directionalLightShadows[ i ];\n		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n		#endif\n		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n	}\n	#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n	RectAreaLight rectAreaLight;\n	#pragma unroll_loop_start\n	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n		rectAreaLight = rectAreaLights[ i ];\n		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n	}\n	#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n	vec3 iblIrradiance = vec3( 0.0 );\n	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n	#if defined( USE_LIGHT_PROBES )\n		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );\n	#endif\n	#if ( NUM_HEMI_LIGHTS > 0 )\n		#pragma unroll_loop_start\n		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );\n		}\n		#pragma unroll_loop_end\n	#endif\n#endif\n#if defined( RE_IndirectSpecular )\n	vec3 radiance = vec3( 0.0 );\n	vec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n	#ifdef USE_LIGHTMAP\n		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n		irradiance += lightMapIrradiance;\n	#endif\n	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n		iblIrradiance += getIBLIrradiance( geometryNormal );\n	#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n	#ifdef USE_ANISOTROPY\n		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );\n	#else\n		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );\n	#endif\n	#ifdef USE_CLEARCOAT\n		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );\n	#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF )\n	gl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF )\n	uniform float logDepthBufFC;\n	varying float vFragDepth;\n	varying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n	varying float vFragDepth;\n	varying float vIsPerspective;\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n	vFragDepth = 1.0 + gl_Position.w;\n	vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n#endif",map_fragment:"#ifdef USE_MAP\n	vec4 sampledDiffuseColor = texture2D( map, vMapUv );\n	#ifdef DECODE_VIDEO_TEXTURE\n		sampledDiffuseColor = sRGBTransferEOTF( sampledDiffuseColor );\n	#endif\n	diffuseColor *= sampledDiffuseColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n	uniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n	#if defined( USE_POINTS_UV )\n		vec2 uv = vUv;\n	#else\n		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n	#endif\n#endif\n#ifdef USE_MAP\n	diffuseColor *= texture2D( map, uv );\n#endif\n#ifdef USE_ALPHAMAP\n	diffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_POINTS_UV )\n	varying vec2 vUv;\n#else\n	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n		uniform mat3 uvTransform;\n	#endif\n#endif\n#ifdef USE_MAP\n	uniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n	uniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );\n	metalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n	uniform sampler2D metalnessMap;\n#endif",morphinstance_vertex:"#ifdef USE_INSTANCING_MORPH\n	float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;\n	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;\n	}\n#endif",morphcolor_vertex:"#if defined( USE_MORPHCOLORS )\n	vColor *= morphTargetBaseInfluence;\n	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n		#if defined( USE_COLOR_ALPHA )\n			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];\n		#elif defined( USE_COLOR )\n			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];\n		#endif\n	}\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n	objectNormal *= morphTargetBaseInfluence;\n	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n		if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];\n	}\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n	#ifndef USE_INSTANCING_MORPH\n		uniform float morphTargetBaseInfluence;\n		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n	#endif\n	uniform sampler2DArray morphTargetsTexture;\n	uniform ivec2 morphTargetsTextureSize;\n	vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {\n		int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;\n		int y = texelIndex / morphTargetsTextureSize.x;\n		int x = texelIndex - y * morphTargetsTextureSize.x;\n		ivec3 morphUV = ivec3( x, y, morphTargetIndex );\n		return texelFetch( morphTargetsTexture, morphUV, 0 );\n	}\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n	transformed *= morphTargetBaseInfluence;\n	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n		if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];\n	}\n#endif",normal_fragment_begin:"float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n	vec3 fdx = dFdx( vViewPosition );\n	vec3 fdy = dFdy( vViewPosition );\n	vec3 normal = normalize( cross( fdx, fdy ) );\n#else\n	vec3 normal = normalize( vNormal );\n	#ifdef DOUBLE_SIDED\n		normal *= faceDirection;\n	#endif\n#endif\n#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )\n	#ifdef USE_TANGENT\n		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );\n	#else\n		mat3 tbn = getTangentFrame( - vViewPosition, normal,\n		#if defined( USE_NORMALMAP )\n			vNormalMapUv\n		#elif defined( USE_CLEARCOAT_NORMALMAP )\n			vClearcoatNormalMapUv\n		#else\n			vUv\n		#endif\n		);\n	#endif\n	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )\n		tbn[0] *= faceDirection;\n		tbn[1] *= faceDirection;\n	#endif\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n	#ifdef USE_TANGENT\n		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );\n	#else\n		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );\n	#endif\n	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )\n		tbn2[0] *= faceDirection;\n		tbn2[1] *= faceDirection;\n	#endif\n#endif\nvec3 nonPerturbedNormal = normal;",normal_fragment_maps:"#ifdef USE_NORMALMAP_OBJECTSPACE\n	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;\n	#ifdef FLIP_SIDED\n		normal = - normal;\n	#endif\n	#ifdef DOUBLE_SIDED\n		normal = normal * faceDirection;\n	#endif\n	normal = normalize( normalMatrix * normal );\n#elif defined( USE_NORMALMAP_TANGENTSPACE )\n	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;\n	mapN.xy *= normalScale;\n	normal = normalize( tbn * mapN );\n#elif defined( USE_BUMPMAP )\n	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",normal_pars_fragment:"#ifndef FLAT_SHADED\n	varying vec3 vNormal;\n	#ifdef USE_TANGENT\n		varying vec3 vTangent;\n		varying vec3 vBitangent;\n	#endif\n#endif",normal_pars_vertex:"#ifndef FLAT_SHADED\n	varying vec3 vNormal;\n	#ifdef USE_TANGENT\n		varying vec3 vTangent;\n		varying vec3 vBitangent;\n	#endif\n#endif",normal_vertex:"#ifndef FLAT_SHADED\n	vNormal = normalize( transformedNormal );\n	#ifdef USE_TANGENT\n		vTangent = normalize( transformedTangent );\n		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n	#endif\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n	uniform sampler2D normalMap;\n	uniform vec2 normalScale;\n#endif\n#ifdef USE_NORMALMAP_OBJECTSPACE\n	uniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )\n	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {\n		vec3 q0 = dFdx( eye_pos.xyz );\n		vec3 q1 = dFdy( eye_pos.xyz );\n		vec2 st0 = dFdx( uv.st );\n		vec2 st1 = dFdy( uv.st );\n		vec3 N = surf_norm;\n		vec3 q1perp = cross( q1, N );\n		vec3 q0perp = cross( N, q0 );\n		vec3 T = q1perp * st0.x + q0perp * st1.x;\n		vec3 B = q1perp * st0.y + q0perp * st1.y;\n		float det = max( dot( T, T ), dot( B, B ) );\n		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );\n		return mat3( T * scale, B * scale, N );\n	}\n#endif",clearcoat_normal_fragment_begin:"#ifdef USE_CLEARCOAT\n	vec3 clearcoatNormal = nonPerturbedNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;\n	clearcoatMapN.xy *= clearcoatNormalScale;\n	clearcoatNormal = normalize( tbn2 * clearcoatMapN );\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n	uniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n	uniform sampler2D clearcoatNormalMap;\n	uniform vec2 clearcoatNormalScale;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n	uniform sampler2D clearcoatRoughnessMap;\n#endif",iridescence_pars_fragment:"#ifdef USE_IRIDESCENCEMAP\n	uniform sampler2D iridescenceMap;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n	uniform sampler2D iridescenceThicknessMap;\n#endif",opaque_fragment:"#ifdef OPAQUE\ndiffuseColor.a = 1.0;\n#endif\n#ifdef USE_TRANSMISSION\ndiffuseColor.a *= material.transmissionAlpha;\n#endif\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n	return normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n	return 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;\nconst float Inv255 = 1. / 255.;\nconst vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );\nconst vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );\nconst vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );\nconst vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );\nvec4 packDepthToRGBA( const in float v ) {\n	if( v <= 0.0 )\n		return vec4( 0., 0., 0., 0. );\n	if( v >= 1.0 )\n		return vec4( 1., 1., 1., 1. );\n	float vuf;\n	float af = modf( v * PackFactors.a, vuf );\n	float bf = modf( vuf * ShiftRight8, vuf );\n	float gf = modf( vuf * ShiftRight8, vuf );\n	return vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );\n}\nvec3 packDepthToRGB( const in float v ) {\n	if( v <= 0.0 )\n		return vec3( 0., 0., 0. );\n	if( v >= 1.0 )\n		return vec3( 1., 1., 1. );\n	float vuf;\n	float bf = modf( v * PackFactors.b, vuf );\n	float gf = modf( vuf * ShiftRight8, vuf );\n	return vec3( vuf * Inv255, gf * PackUpscale, bf );\n}\nvec2 packDepthToRG( const in float v ) {\n	if( v <= 0.0 )\n		return vec2( 0., 0. );\n	if( v >= 1.0 )\n		return vec2( 1., 1. );\n	float vuf;\n	float gf = modf( v * 256., vuf );\n	return vec2( vuf * Inv255, gf );\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n	return dot( v, UnpackFactors4 );\n}\nfloat unpackRGBToDepth( const in vec3 v ) {\n	return dot( v, UnpackFactors3 );\n}\nfloat unpackRGToDepth( const in vec2 v ) {\n	return v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;\n}\nvec4 pack2HalfToRGBA( const in vec2 v ) {\n	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\n	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\n}\nvec2 unpackRGBATo2Half( const in vec4 v ) {\n	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n	return ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {\n	return depth * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {\n	return ( near * far ) / ( ( far - near ) * depth - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n	gl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_BATCHING\n	mvPosition = batchingMatrix * mvPosition;\n#endif\n#ifdef USE_INSTANCING\n	mvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n	gl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n	vec3 dithering( vec3 color ) {\n		float grid_position = rand( gl_FragCoord.xy );\n		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n		return color + dither_shift_RGB;\n	}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );\n	roughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n	uniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#if NUM_SPOT_LIGHT_COORDS > 0\n	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#if NUM_SPOT_LIGHT_MAPS > 0\n	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];\n#endif\n#ifdef USE_SHADOWMAP\n	#if NUM_DIR_LIGHT_SHADOWS > 0\n		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n		struct DirectionalLightShadow {\n			float shadowIntensity;\n			float shadowBias;\n			float shadowNormalBias;\n			float shadowRadius;\n			vec2 shadowMapSize;\n		};\n		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n	#endif\n	#if NUM_SPOT_LIGHT_SHADOWS > 0\n		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n		struct SpotLightShadow {\n			float shadowIntensity;\n			float shadowBias;\n			float shadowNormalBias;\n			float shadowRadius;\n			vec2 shadowMapSize;\n		};\n		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n	#endif\n	#if NUM_POINT_LIGHT_SHADOWS > 0\n		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n		struct PointLightShadow {\n			float shadowIntensity;\n			float shadowBias;\n			float shadowNormalBias;\n			float shadowRadius;\n			vec2 shadowMapSize;\n			float shadowCameraNear;\n			float shadowCameraFar;\n		};\n		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n	#endif\n	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n	}\n	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n		return unpackRGBATo2Half( texture2D( shadow, uv ) );\n	}\n	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n		float occlusion = 1.0;\n		vec2 distribution = texture2DDistribution( shadow, uv );\n		float hard_shadow = step( compare , distribution.x );\n		if (hard_shadow != 1.0 ) {\n			float distance = compare - distribution.x ;\n			float variance = max( 0.00000, distribution.y * distribution.y );\n			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n		}\n		return occlusion;\n	}\n	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n		float shadow = 1.0;\n		shadowCoord.xyz /= shadowCoord.w;\n		shadowCoord.z += shadowBias;\n		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;\n		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;\n		if ( frustumTest ) {\n		#if defined( SHADOWMAP_TYPE_PCF )\n			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n			float dx0 = - texelSize.x * shadowRadius;\n			float dy0 = - texelSize.y * shadowRadius;\n			float dx1 = + texelSize.x * shadowRadius;\n			float dy1 = + texelSize.y * shadowRadius;\n			float dx2 = dx0 / 2.0;\n			float dy2 = dy0 / 2.0;\n			float dx3 = dx1 / 2.0;\n			float dy3 = dy1 / 2.0;\n			shadow = (\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n			) * ( 1.0 / 17.0 );\n		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n			float dx = texelSize.x;\n			float dy = texelSize.y;\n			vec2 uv = shadowCoord.xy;\n			vec2 f = fract( uv * shadowMapSize + 0.5 );\n			uv -= f * texelSize;\n			shadow = (\n				texture2DCompare( shadowMap, uv, shadowCoord.z ) +\n				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),\n					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n					 f.x ) +\n				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),\n					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n					 f.x ) +\n				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),\n					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n					 f.y ) +\n				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),\n					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n					 f.y ) +\n				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),\n						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n						  f.x ),\n					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),\n						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n						  f.x ),\n					 f.y )\n			) * ( 1.0 / 9.0 );\n		#elif defined( SHADOWMAP_TYPE_VSM )\n			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n		#else\n			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n		#endif\n		}\n		return mix( 1.0, shadow, shadowIntensity );\n	}\n	vec2 cubeToUV( vec3 v, float texelSizeY ) {\n		vec3 absV = abs( v );\n		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n		absV *= scaleToCube;\n		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n		vec2 planar = v.xy;\n		float almostATexel = 1.5 * texelSizeY;\n		float almostOne = 1.0 - almostATexel;\n		if ( absV.z >= almostOne ) {\n			if ( v.z > 0.0 )\n				planar.x = 4.0 - v.x;\n		} else if ( absV.x >= almostOne ) {\n			float signX = sign( v.x );\n			planar.x = v.z * signX + 2.0 * signX;\n		} else if ( absV.y >= almostOne ) {\n			float signY = sign( v.y );\n			planar.x = v.x + 2.0 * signY + 2.0;\n			planar.y = v.z * signY - 2.0;\n		}\n		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n	}\n	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n		float shadow = 1.0;\n		vec3 lightToPosition = shadowCoord.xyz;\n		\n		float lightToPositionLength = length( lightToPosition );\n		if ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {\n			float dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );			dp += shadowBias;\n			vec3 bd3D = normalize( lightToPosition );\n			vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n			#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n				vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n				shadow = (\n					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n					texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n				) * ( 1.0 / 9.0 );\n			#else\n				shadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n			#endif\n		}\n		return mix( 1.0, shadow, shadowIntensity );\n	}\n#endif",shadowmap_pars_vertex:"#if NUM_SPOT_LIGHT_COORDS > 0\n	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];\n	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#ifdef USE_SHADOWMAP\n	#if NUM_DIR_LIGHT_SHADOWS > 0\n		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n		struct DirectionalLightShadow {\n			float shadowIntensity;\n			float shadowBias;\n			float shadowNormalBias;\n			float shadowRadius;\n			vec2 shadowMapSize;\n		};\n		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n	#endif\n	#if NUM_SPOT_LIGHT_SHADOWS > 0\n		struct SpotLightShadow {\n			float shadowIntensity;\n			float shadowBias;\n			float shadowNormalBias;\n			float shadowRadius;\n			vec2 shadowMapSize;\n		};\n		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n	#endif\n	#if NUM_POINT_LIGHT_SHADOWS > 0\n		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n		struct PointLightShadow {\n			float shadowIntensity;\n			float shadowBias;\n			float shadowNormalBias;\n			float shadowRadius;\n			vec2 shadowMapSize;\n			float shadowCameraNear;\n			float shadowCameraFar;\n		};\n		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n	#endif\n#endif",shadowmap_vertex:"#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )\n	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n	vec4 shadowWorldPosition;\n#endif\n#if defined( USE_SHADOWMAP )\n	#if NUM_DIR_LIGHT_SHADOWS > 0\n		#pragma unroll_loop_start\n		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n		}\n		#pragma unroll_loop_end\n	#endif\n	#if NUM_POINT_LIGHT_SHADOWS > 0\n		#pragma unroll_loop_start\n		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n		}\n		#pragma unroll_loop_end\n	#endif\n#endif\n#if NUM_SPOT_LIGHT_COORDS > 0\n	#pragma unroll_loop_start\n	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {\n		shadowWorldPosition = worldPosition;\n		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;\n		#endif\n		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;\n	}\n	#pragma unroll_loop_end\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n	float shadow = 1.0;\n	#ifdef USE_SHADOWMAP\n	#if NUM_DIR_LIGHT_SHADOWS > 0\n	DirectionalLightShadow directionalLight;\n	#pragma unroll_loop_start\n	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n		directionalLight = directionalLightShadows[ i ];\n		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n	}\n	#pragma unroll_loop_end\n	#endif\n	#if NUM_SPOT_LIGHT_SHADOWS > 0\n	SpotLightShadow spotLight;\n	#pragma unroll_loop_start\n	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n		spotLight = spotLightShadows[ i ];\n		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n	}\n	#pragma unroll_loop_end\n	#endif\n	#if NUM_POINT_LIGHT_SHADOWS > 0\n	PointLightShadow pointLight;\n	#pragma unroll_loop_start\n	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n		pointLight = pointLightShadows[ i ];\n		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n	}\n	#pragma unroll_loop_end\n	#endif\n	#endif\n	return shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n	mat4 boneMatX = getBoneMatrix( skinIndex.x );\n	mat4 boneMatY = getBoneMatrix( skinIndex.y );\n	mat4 boneMatZ = getBoneMatrix( skinIndex.z );\n	mat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n	uniform mat4 bindMatrix;\n	uniform mat4 bindMatrixInverse;\n	uniform highp sampler2D boneTexture;\n	mat4 getBoneMatrix( const in float i ) {\n		int size = textureSize( boneTexture, 0 ).x;\n		int j = int( i ) * 4;\n		int x = j % size;\n		int y = j / size;\n		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );\n		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );\n		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );\n		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );\n		return mat4( v1, v2, v3, v4 );\n	}\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n	vec4 skinned = vec4( 0.0 );\n	skinned += boneMatX * skinVertex * skinWeight.x;\n	skinned += boneMatY * skinVertex * skinWeight.y;\n	skinned += boneMatZ * skinVertex * skinWeight.z;\n	skinned += boneMatW * skinVertex * skinWeight.w;\n	transformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n	mat4 skinMatrix = mat4( 0.0 );\n	skinMatrix += skinWeight.x * boneMatX;\n	skinMatrix += skinWeight.y * boneMatY;\n	skinMatrix += skinWeight.z * boneMatZ;\n	skinMatrix += skinWeight.w * boneMatW;\n	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n	#ifdef USE_TANGENT\n		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n	#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );\n	specularStrength = texelSpecular.r;\n#else\n	specularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n	uniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n	return saturate( toneMappingExposure * color );\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n	color *= toneMappingExposure;\n	return saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 CineonToneMapping( vec3 color ) {\n	color *= toneMappingExposure;\n	color = max( vec3( 0.0 ), color - 0.004 );\n	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n	return a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n	const mat3 ACESInputMat = mat3(\n		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),\n		vec3( 0.04823, 0.01566, 0.83777 )\n	);\n	const mat3 ACESOutputMat = mat3(\n		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),\n		vec3( -0.07367, -0.00605,  1.07602 )\n	);\n	color *= toneMappingExposure / 0.6;\n	color = ACESInputMat * color;\n	color = RRTAndODTFit( color );\n	color = ACESOutputMat * color;\n	return saturate( color );\n}\nconst mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(\n	vec3( 1.6605, - 0.1246, - 0.0182 ),\n	vec3( - 0.5876, 1.1329, - 0.1006 ),\n	vec3( - 0.0728, - 0.0083, 1.1187 )\n);\nconst mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(\n	vec3( 0.6274, 0.0691, 0.0164 ),\n	vec3( 0.3293, 0.9195, 0.0880 ),\n	vec3( 0.0433, 0.0113, 0.8956 )\n);\nvec3 agxDefaultContrastApprox( vec3 x ) {\n	vec3 x2 = x * x;\n	vec3 x4 = x2 * x2;\n	return + 15.5 * x4 * x2\n		- 40.14 * x4 * x\n		+ 31.96 * x4\n		- 6.868 * x2 * x\n		+ 0.4298 * x2\n		+ 0.1191 * x\n		- 0.00232;\n}\nvec3 AgXToneMapping( vec3 color ) {\n	const mat3 AgXInsetMatrix = mat3(\n		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),\n		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),\n		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )\n	);\n	const mat3 AgXOutsetMatrix = mat3(\n		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),\n		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),\n		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )\n	);\n	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;\n	color *= toneMappingExposure;\n	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;\n	color = AgXInsetMatrix * color;\n	color = max( color, 1e-10 );	color = log2( color );\n	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );\n	color = clamp( color, 0.0, 1.0 );\n	color = agxDefaultContrastApprox( color );\n	color = AgXOutsetMatrix * color;\n	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );\n	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;\n	color = clamp( color, 0.0, 1.0 );\n	return color;\n}\nvec3 NeutralToneMapping( vec3 color ) {\n	const float StartCompression = 0.8 - 0.04;\n	const float Desaturation = 0.15;\n	color *= toneMappingExposure;\n	float x = min( color.r, min( color.g, color.b ) );\n	float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;\n	color -= offset;\n	float peak = max( color.r, max( color.g, color.b ) );\n	if ( peak < StartCompression ) return color;\n	float d = 1. - StartCompression;\n	float newPeak = 1. - d * d / ( peak + d - StartCompression );\n	color *= newPeak / peak;\n	float g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );\n	return mix( color, vec3( newPeak ), g );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmission_fragment:"#ifdef USE_TRANSMISSION\n	material.transmission = transmission;\n	material.transmissionAlpha = 1.0;\n	material.thickness = thickness;\n	material.attenuationDistance = attenuationDistance;\n	material.attenuationColor = attenuationColor;\n	#ifdef USE_TRANSMISSIONMAP\n		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;\n	#endif\n	#ifdef USE_THICKNESSMAP\n		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;\n	#endif\n	vec3 pos = vWorldPosition;\n	vec3 v = normalize( cameraPosition - pos );\n	vec3 n = inverseTransformDirection( normal, viewMatrix );\n	vec4 transmitted = getIBLVolumeRefraction(\n		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,\n		pos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,\n		material.attenuationColor, material.attenuationDistance );\n	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );\n	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );\n#endif",transmission_pars_fragment:"#ifdef USE_TRANSMISSION\n	uniform float transmission;\n	uniform float thickness;\n	uniform float attenuationDistance;\n	uniform vec3 attenuationColor;\n	#ifdef USE_TRANSMISSIONMAP\n		uniform sampler2D transmissionMap;\n	#endif\n	#ifdef USE_THICKNESSMAP\n		uniform sampler2D thicknessMap;\n	#endif\n	uniform vec2 transmissionSamplerSize;\n	uniform sampler2D transmissionSamplerMap;\n	uniform mat4 modelMatrix;\n	uniform mat4 projectionMatrix;\n	varying vec3 vWorldPosition;\n	float w0( float a ) {\n		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );\n	}\n	float w1( float a ) {\n		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );\n	}\n	float w2( float a ){\n		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );\n	}\n	float w3( float a ) {\n		return ( 1.0 / 6.0 ) * ( a * a * a );\n	}\n	float g0( float a ) {\n		return w0( a ) + w1( a );\n	}\n	float g1( float a ) {\n		return w2( a ) + w3( a );\n	}\n	float h0( float a ) {\n		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );\n	}\n	float h1( float a ) {\n		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );\n	}\n	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {\n		uv = uv * texelSize.zw + 0.5;\n		vec2 iuv = floor( uv );\n		vec2 fuv = fract( uv );\n		float g0x = g0( fuv.x );\n		float g1x = g1( fuv.x );\n		float h0x = h0( fuv.x );\n		float h1x = h1( fuv.x );\n		float h0y = h0( fuv.y );\n		float h1y = h1( fuv.y );\n		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +\n			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );\n	}\n	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {\n		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );\n		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );\n		vec2 fLodSizeInv = 1.0 / fLodSize;\n		vec2 cLodSizeInv = 1.0 / cLodSize;\n		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );\n		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );\n		return mix( fSample, cSample, fract( lod ) );\n	}\n	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {\n		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\n		vec3 modelScale;\n		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n		return normalize( refractionVector ) * thickness * modelScale;\n	}\n	float applyIorToRoughness( const in float roughness, const in float ior ) {\n		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n	}\n	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {\n		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );\n	}\n	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {\n		if ( isinf( attenuationDistance ) ) {\n			return vec3( 1.0 );\n		} else {\n			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\n			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;\n		}\n	}\n	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,\n		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,\n		const in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,\n		const in vec3 attenuationColor, const in float attenuationDistance ) {\n		vec4 transmittedLight;\n		vec3 transmittance;\n		#ifdef USE_DISPERSION\n			float halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;\n			vec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );\n			for ( int i = 0; i < 3; i ++ ) {\n				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );\n				vec3 refractedRayExit = position + transmissionRay;\n				vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n				vec2 refractionCoords = ndcPos.xy / ndcPos.w;\n				refractionCoords += 1.0;\n				refractionCoords /= 2.0;\n				vec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );\n				transmittedLight[ i ] = transmissionSample[ i ];\n				transmittedLight.a += transmissionSample.a;\n				transmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];\n			}\n			transmittedLight.a /= 3.0;\n		#else\n			vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n			vec3 refractedRayExit = position + transmissionRay;\n			vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n			vec2 refractionCoords = ndcPos.xy / ndcPos.w;\n			refractionCoords += 1.0;\n			refractionCoords /= 2.0;\n			transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\n			transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );\n		#endif\n		vec3 attenuatedColor = transmittance * transmittedLight.rgb;\n		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;\n		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );\n	}\n#endif",uv_pars_fragment:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n	varying vec2 vUv;\n#endif\n#ifdef USE_MAP\n	varying vec2 vMapUv;\n#endif\n#ifdef USE_ALPHAMAP\n	varying vec2 vAlphaMapUv;\n#endif\n#ifdef USE_LIGHTMAP\n	varying vec2 vLightMapUv;\n#endif\n#ifdef USE_AOMAP\n	varying vec2 vAoMapUv;\n#endif\n#ifdef USE_BUMPMAP\n	varying vec2 vBumpMapUv;\n#endif\n#ifdef USE_NORMALMAP\n	varying vec2 vNormalMapUv;\n#endif\n#ifdef USE_EMISSIVEMAP\n	varying vec2 vEmissiveMapUv;\n#endif\n#ifdef USE_METALNESSMAP\n	varying vec2 vMetalnessMapUv;\n#endif\n#ifdef USE_ROUGHNESSMAP\n	varying vec2 vRoughnessMapUv;\n#endif\n#ifdef USE_ANISOTROPYMAP\n	varying vec2 vAnisotropyMapUv;\n#endif\n#ifdef USE_CLEARCOATMAP\n	varying vec2 vClearcoatMapUv;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n	varying vec2 vClearcoatNormalMapUv;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n	varying vec2 vClearcoatRoughnessMapUv;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n	varying vec2 vIridescenceMapUv;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n	varying vec2 vIridescenceThicknessMapUv;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n	varying vec2 vSheenColorMapUv;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n	varying vec2 vSheenRoughnessMapUv;\n#endif\n#ifdef USE_SPECULARMAP\n	varying vec2 vSpecularMapUv;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n	varying vec2 vSpecularColorMapUv;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n	varying vec2 vSpecularIntensityMapUv;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n	uniform mat3 transmissionMapTransform;\n	varying vec2 vTransmissionMapUv;\n#endif\n#ifdef USE_THICKNESSMAP\n	uniform mat3 thicknessMapTransform;\n	varying vec2 vThicknessMapUv;\n#endif",uv_pars_vertex:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n	varying vec2 vUv;\n#endif\n#ifdef USE_MAP\n	uniform mat3 mapTransform;\n	varying vec2 vMapUv;\n#endif\n#ifdef USE_ALPHAMAP\n	uniform mat3 alphaMapTransform;\n	varying vec2 vAlphaMapUv;\n#endif\n#ifdef USE_LIGHTMAP\n	uniform mat3 lightMapTransform;\n	varying vec2 vLightMapUv;\n#endif\n#ifdef USE_AOMAP\n	uniform mat3 aoMapTransform;\n	varying vec2 vAoMapUv;\n#endif\n#ifdef USE_BUMPMAP\n	uniform mat3 bumpMapTransform;\n	varying vec2 vBumpMapUv;\n#endif\n#ifdef USE_NORMALMAP\n	uniform mat3 normalMapTransform;\n	varying vec2 vNormalMapUv;\n#endif\n#ifdef USE_DISPLACEMENTMAP\n	uniform mat3 displacementMapTransform;\n	varying vec2 vDisplacementMapUv;\n#endif\n#ifdef USE_EMISSIVEMAP\n	uniform mat3 emissiveMapTransform;\n	varying vec2 vEmissiveMapUv;\n#endif\n#ifdef USE_METALNESSMAP\n	uniform mat3 metalnessMapTransform;\n	varying vec2 vMetalnessMapUv;\n#endif\n#ifdef USE_ROUGHNESSMAP\n	uniform mat3 roughnessMapTransform;\n	varying vec2 vRoughnessMapUv;\n#endif\n#ifdef USE_ANISOTROPYMAP\n	uniform mat3 anisotropyMapTransform;\n	varying vec2 vAnisotropyMapUv;\n#endif\n#ifdef USE_CLEARCOATMAP\n	uniform mat3 clearcoatMapTransform;\n	varying vec2 vClearcoatMapUv;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n	uniform mat3 clearcoatNormalMapTransform;\n	varying vec2 vClearcoatNormalMapUv;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n	uniform mat3 clearcoatRoughnessMapTransform;\n	varying vec2 vClearcoatRoughnessMapUv;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n	uniform mat3 sheenColorMapTransform;\n	varying vec2 vSheenColorMapUv;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n	uniform mat3 sheenRoughnessMapTransform;\n	varying vec2 vSheenRoughnessMapUv;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n	uniform mat3 iridescenceMapTransform;\n	varying vec2 vIridescenceMapUv;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n	uniform mat3 iridescenceThicknessMapTransform;\n	varying vec2 vIridescenceThicknessMapUv;\n#endif\n#ifdef USE_SPECULARMAP\n	uniform mat3 specularMapTransform;\n	varying vec2 vSpecularMapUv;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n	uniform mat3 specularColorMapTransform;\n	varying vec2 vSpecularColorMapUv;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n	uniform mat3 specularIntensityMapTransform;\n	varying vec2 vSpecularIntensityMapUv;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n	uniform mat3 transmissionMapTransform;\n	varying vec2 vTransmissionMapUv;\n#endif\n#ifdef USE_THICKNESSMAP\n	uniform mat3 thicknessMapTransform;\n	varying vec2 vThicknessMapUv;\n#endif",uv_vertex:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n	vUv = vec3( uv, 1 ).xy;\n#endif\n#ifdef USE_MAP\n	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ALPHAMAP\n	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_LIGHTMAP\n	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_AOMAP\n	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_BUMPMAP\n	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_NORMALMAP\n	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_DISPLACEMENTMAP\n	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_EMISSIVEMAP\n	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_METALNESSMAP\n	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ROUGHNESSMAP\n	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ANISOTROPYMAP\n	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOATMAP\n	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULARMAP\n	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_THICKNESSMAP\n	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0\n	vec4 worldPosition = vec4( transformed, 1.0 );\n	#ifdef USE_BATCHING\n		worldPosition = batchingMatrix * worldPosition;\n	#endif\n	#ifdef USE_INSTANCING\n		worldPosition = instanceMatrix * worldPosition;\n	#endif\n	worldPosition = modelMatrix * worldPosition;\n#endif",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n	gl_Position = vec4( position.xy, 1.0, 1.0 );\n}",background_frag:"uniform sampler2D t2D;\nuniform float backgroundIntensity;\nvarying vec2 vUv;\nvoid main() {\n	vec4 texColor = texture2D( t2D, vUv );\n	#ifdef DECODE_VIDEO_TEXTURE\n		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );\n	#endif\n	texColor.rgb *= backgroundIntensity;\n	gl_FragColor = texColor;\n	#include <tonemapping_fragment>\n	#include <colorspace_fragment>\n}",backgroundCube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n	vWorldDirection = transformDirection( position, modelMatrix );\n	#include <begin_vertex>\n	#include <project_vertex>\n	gl_Position.z = gl_Position.w;\n}",backgroundCube_frag:"#ifdef ENVMAP_TYPE_CUBE\n	uniform samplerCube envMap;\n#elif defined( ENVMAP_TYPE_CUBE_UV )\n	uniform sampler2D envMap;\n#endif\nuniform float flipEnvMap;\nuniform float backgroundBlurriness;\nuniform float backgroundIntensity;\nuniform mat3 backgroundRotation;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n	#ifdef ENVMAP_TYPE_CUBE\n		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );\n	#elif defined( ENVMAP_TYPE_CUBE_UV )\n		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );\n	#else\n		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n	#endif\n	texColor.rgb *= backgroundIntensity;\n	gl_FragColor = texColor;\n	#include <tonemapping_fragment>\n	#include <colorspace_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n	vWorldDirection = transformDirection( position, modelMatrix );\n	#include <begin_vertex>\n	#include <project_vertex>\n	gl_Position.z = gl_Position.w;\n}",cube_frag:"uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldDirection;\nvoid main() {\n	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );\n	gl_FragColor = texColor;\n	gl_FragColor.a *= opacity;\n	#include <tonemapping_fragment>\n	#include <colorspace_fragment>\n}",depth_vert:"#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n	#include <uv_vertex>\n	#include <batching_vertex>\n	#include <skinbase_vertex>\n	#include <morphinstance_vertex>\n	#ifdef USE_DISPLACEMENTMAP\n		#include <beginnormal_vertex>\n		#include <morphnormal_vertex>\n		#include <skinnormal_vertex>\n	#endif\n	#include <begin_vertex>\n	#include <morphtarget_vertex>\n	#include <skinning_vertex>\n	#include <displacementmap_vertex>\n	#include <project_vertex>\n	#include <logdepthbuf_vertex>\n	#include <clipping_planes_vertex>\n	vHighPrecisionZW = gl_Position.zw;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n	uniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n	vec4 diffuseColor = vec4( 1.0 );\n	#include <clipping_planes_fragment>\n	#if DEPTH_PACKING == 3200\n		diffuseColor.a = opacity;\n	#endif\n	#include <map_fragment>\n	#include <alphamap_fragment>\n	#include <alphatest_fragment>\n	#include <alphahash_fragment>\n	#include <logdepthbuf_fragment>\n	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n	#if DEPTH_PACKING == 3200\n		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n	#elif DEPTH_PACKING == 3201\n		gl_FragColor = packDepthToRGBA( fragCoordZ );\n	#elif DEPTH_PACKING == 3202\n		gl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );\n	#elif DEPTH_PACKING == 3203\n		gl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );\n	#endif\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n	#include <uv_vertex>\n	#include <batching_vertex>\n	#include <skinbase_vertex>\n	#include <morphinstance_vertex>\n	#ifdef USE_DISPLACEMENTMAP\n		#include <beginnormal_vertex>\n		#include <morphnormal_vertex>\n		#include <skinnormal_vertex>\n	#endif\n	#include <begin_vertex>\n	#include <morphtarget_vertex>\n	#include <skinning_vertex>\n	#include <displacementmap_vertex>\n	#include <project_vertex>\n	#include <worldpos_vertex>\n	#include <clipping_planes_vertex>\n	vWorldPosition = worldPosition.xyz;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n	vec4 diffuseColor = vec4( 1.0 );\n	#include <clipping_planes_fragment>\n	#include <map_fragment>\n	#include <alphamap_fragment>\n	#include <alphatest_fragment>\n	#include <alphahash_fragment>\n	float dist = length( vWorldPosition - referencePosition );\n	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n	dist = saturate( dist );\n	gl_FragColor = packDepthToRGBA( dist );\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n	vWorldDirection = transformDirection( position, modelMatrix );\n	#include <begin_vertex>\n	#include <project_vertex>\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n	vec3 direction = normalize( vWorldDirection );\n	vec2 sampleUV = equirectUv( direction );\n	gl_FragColor = texture2D( tEquirect, sampleUV );\n	#include <tonemapping_fragment>\n	#include <colorspace_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n	vLineDistance = scale * lineDistance;\n	#include <uv_vertex>\n	#include <color_vertex>\n	#include <morphinstance_vertex>\n	#include <morphcolor_vertex>\n	#include <begin_vertex>\n	#include <morphtarget_vertex>\n	#include <project_vertex>\n	#include <logdepthbuf_vertex>\n	#include <clipping_planes_vertex>\n	#include <fog_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n	vec4 diffuseColor = vec4( diffuse, opacity );\n	#include <clipping_planes_fragment>\n	if ( mod( vLineDistance, totalSize ) > dashSize ) {\n		discard;\n	}\n	vec3 outgoingLight = vec3( 0.0 );\n	#include <logdepthbuf_fragment>\n	#include <map_fragment>\n	#include <color_fragment>\n	outgoingLight = diffuseColor.rgb;\n	#include <opaque_fragment>\n	#include <tonemapping_fragment>\n	#include <colorspace_fragment>\n	#include <fog_fragment>\n	#include <premultiplied_alpha_fragment>\n}",meshbasic_vert:"#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n	#include <uv_vertex>\n	#include <color_vertex>\n	#include <morphinstance_vertex>\n	#include <morphcolor_vertex>\n	#include <batching_vertex>\n	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n		#include <beginnormal_vertex>\n		#include <morphnormal_vertex>\n		#include <skinbase_vertex>\n		#include <skinnormal_vertex>\n		#include <defaultnormal_vertex>\n	#endif\n	#include <begin_vertex>\n	#include <morphtarget_vertex>\n	#include <skinning_vertex>\n	#include <project_vertex>\n	#include <logdepthbuf_vertex>\n	#include <clipping_planes_vertex>\n	#include <worldpos_vertex>\n	#include <envmap_vertex>\n	#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n	varying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n	vec4 diffuseColor = vec4( diffuse, opacity );\n	#include <clipping_planes_fragment>\n	#include <logdepthbuf_fragment>\n	#include <map_fragment>\n	#include <color_fragment>\n	#include <alphamap_fragment>\n	#include <alphatest_fragment>\n	#include <alphahash_fragment>\n	#include <specularmap_fragment>\n	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n	#ifdef USE_LIGHTMAP\n		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;\n	#else\n		reflectedLight.indirectDiffuse += vec3( 1.0 );\n	#endif\n	#include <aomap_fragment>\n	reflectedLight.indirectDiffuse *= diffuseColor.rgb;\n	vec3 outgoingLight = reflectedLight.indirectDiffuse;\n	#include <envmap_fragment>\n	#include <opaque_fragment>\n	#include <tonemapping_fragment>\n	#include <colorspace_fragment>\n	#include <fog_fragment>\n	#include <premultiplied_alpha_fragment>\n	#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n	#include <uv_vertex>\n	#include <color_vertex>\n	#include <morphinstance_vertex>\n	#include <morphcolor_vertex>\n	#include <batching_vertex>\n	#include <beginnormal_vertex>\n	#include <morphnormal_vertex>\n	#include <skinbase_vertex>\n	#include <skinnormal_vertex>\n	#include <defaultnormal_vertex>\n	#include <normal_vertex>\n	#include <begin_vertex>\n	#include <morphtarget_vertex>\n	#include <skinning_vertex>\n	#include <displacementmap_vertex>\n	#include <project_vertex>\n	#include <logdepthbuf_vertex>\n	#include <clipping_planes_vertex>\n	vViewPosition = - mvPosition.xyz;\n	#include <worldpos_vertex>\n	#include <envmap_vertex>\n	#include <shadowmap_vertex>\n	#include <fog_vertex>\n}",meshlambert_frag:"#define LAMBERT\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_lambert_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n	vec4 diffuseColor = vec4( diffuse, opacity );\n	#include <clipping_planes_fragment>\n	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n	vec3 totalEmissiveRadiance = emissive;\n	#include <logdepthbuf_fragment>\n	#include <map_fragment>\n	#include <color_fragment>\n	#include <alphamap_fragment>\n	#include <alphatest_fragment>\n	#include <alphahash_fragment>\n	#include <specularmap_fragment>\n	#include <normal_fragment_begin>\n	#include <normal_fragment_maps>\n	#include <emissivemap_fragment>\n	#include <lights_lambert_fragment>\n	#include <lights_fragment_begin>\n	#include <lights_fragment_maps>\n	#include <lights_fragment_end>\n	#include <aomap_fragment>\n	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n	#include <envmap_fragment>\n	#include <opaque_fragment>\n	#include <tonemapping_fragment>\n	#include <colorspace_fragment>\n	#include <fog_fragment>\n	#include <premultiplied_alpha_fragment>\n	#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n	#include <uv_vertex>\n	#include <color_vertex>\n	#include <morphinstance_vertex>\n	#include <morphcolor_vertex>\n	#include <batching_vertex>\n	#include <beginnormal_vertex>\n	#include <morphnormal_vertex>\n	#include <skinbase_vertex>\n	#include <skinnormal_vertex>\n	#include <defaultnormal_vertex>\n	#include <normal_vertex>\n	#include <begin_vertex>\n	#include <morphtarget_vertex>\n	#include <skinning_vertex>\n	#include <displacementmap_vertex>\n	#include <project_vertex>\n	#include <logdepthbuf_vertex>\n	#include <clipping_planes_vertex>\n	#include <fog_vertex>\n	vViewPosition = - mvPosition.xyz;\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n	vec4 diffuseColor = vec4( diffuse, opacity );\n	#include <clipping_planes_fragment>\n	#include <logdepthbuf_fragment>\n	#include <map_fragment>\n	#include <color_fragment>\n	#include <alphamap_fragment>\n	#include <alphatest_fragment>\n	#include <alphahash_fragment>\n	#include <normal_fragment_begin>\n	#include <normal_fragment_maps>\n	vec3 viewDir = normalize( vViewPosition );\n	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n	vec3 y = cross( viewDir, x );\n	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n	#ifdef USE_MATCAP\n		vec4 matcapColor = texture2D( matcap, uv );\n	#else\n		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );\n	#endif\n	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n	#include <opaque_fragment>\n	#include <tonemapping_fragment>\n	#include <colorspace_fragment>\n	#include <fog_fragment>\n	#include <premultiplied_alpha_fragment>\n	#include <dithering_fragment>\n}",meshnormal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n	varying vec3 vViewPosition;\n#endif\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n	#include <uv_vertex>\n	#include <batching_vertex>\n	#include <beginnormal_vertex>\n	#include <morphinstance_vertex>\n	#include <morphnormal_vertex>\n	#include <skinbase_vertex>\n	#include <skinnormal_vertex>\n	#include <defaultnormal_vertex>\n	#include <normal_vertex>\n	#include <begin_vertex>\n	#include <morphtarget_vertex>\n	#include <skinning_vertex>\n	#include <displacementmap_vertex>\n	#include <project_vertex>\n	#include <logdepthbuf_vertex>\n	#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n	vViewPosition = - mvPosition.xyz;\n#endif\n}",meshnormal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n	varying vec3 vViewPosition;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );\n	#include <clipping_planes_fragment>\n	#include <logdepthbuf_fragment>\n	#include <normal_fragment_begin>\n	#include <normal_fragment_maps>\n	gl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );\n	#ifdef OPAQUE\n		gl_FragColor.a = 1.0;\n	#endif\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n	#include <uv_vertex>\n	#include <color_vertex>\n	#include <morphcolor_vertex>\n	#include <batching_vertex>\n	#include <beginnormal_vertex>\n	#include <morphinstance_vertex>\n	#include <morphnormal_vertex>\n	#include <skinbase_vertex>\n	#include <skinnormal_vertex>\n	#include <defaultnormal_vertex>\n	#include <normal_vertex>\n	#include <begin_vertex>\n	#include <morphtarget_vertex>\n	#include <skinning_vertex>\n	#include <displacementmap_vertex>\n	#include <project_vertex>\n	#include <logdepthbuf_vertex>\n	#include <clipping_planes_vertex>\n	vViewPosition = - mvPosition.xyz;\n	#include <worldpos_vertex>\n	#include <envmap_vertex>\n	#include <shadowmap_vertex>\n	#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n	vec4 diffuseColor = vec4( diffuse, opacity );\n	#include <clipping_planes_fragment>\n	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n	vec3 totalEmissiveRadiance = emissive;\n	#include <logdepthbuf_fragment>\n	#include <map_fragment>\n	#include <color_fragment>\n	#include <alphamap_fragment>\n	#include <alphatest_fragment>\n	#include <alphahash_fragment>\n	#include <specularmap_fragment>\n	#include <normal_fragment_begin>\n	#include <normal_fragment_maps>\n	#include <emissivemap_fragment>\n	#include <lights_phong_fragment>\n	#include <lights_fragment_begin>\n	#include <lights_fragment_maps>\n	#include <lights_fragment_end>\n	#include <aomap_fragment>\n	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n	#include <envmap_fragment>\n	#include <opaque_fragment>\n	#include <tonemapping_fragment>\n	#include <colorspace_fragment>\n	#include <fog_fragment>\n	#include <premultiplied_alpha_fragment>\n	#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifdef USE_TRANSMISSION\n	varying vec3 vWorldPosition;\n#endif\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n	#include <uv_vertex>\n	#include <color_vertex>\n	#include <morphinstance_vertex>\n	#include <morphcolor_vertex>\n	#include <batching_vertex>\n	#include <beginnormal_vertex>\n	#include <morphnormal_vertex>\n	#include <skinbase_vertex>\n	#include <skinnormal_vertex>\n	#include <defaultnormal_vertex>\n	#include <normal_vertex>\n	#include <begin_vertex>\n	#include <morphtarget_vertex>\n	#include <skinning_vertex>\n	#include <displacementmap_vertex>\n	#include <project_vertex>\n	#include <logdepthbuf_vertex>\n	#include <clipping_planes_vertex>\n	vViewPosition = - mvPosition.xyz;\n	#include <worldpos_vertex>\n	#include <shadowmap_vertex>\n	#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n	vWorldPosition = worldPosition.xyz;\n#endif\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n	#define IOR\n	#define USE_SPECULAR\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef IOR\n	uniform float ior;\n#endif\n#ifdef USE_SPECULAR\n	uniform float specularIntensity;\n	uniform vec3 specularColor;\n	#ifdef USE_SPECULAR_COLORMAP\n		uniform sampler2D specularColorMap;\n	#endif\n	#ifdef USE_SPECULAR_INTENSITYMAP\n		uniform sampler2D specularIntensityMap;\n	#endif\n#endif\n#ifdef USE_CLEARCOAT\n	uniform float clearcoat;\n	uniform float clearcoatRoughness;\n#endif\n#ifdef USE_DISPERSION\n	uniform float dispersion;\n#endif\n#ifdef USE_IRIDESCENCE\n	uniform float iridescence;\n	uniform float iridescenceIOR;\n	uniform float iridescenceThicknessMinimum;\n	uniform float iridescenceThicknessMaximum;\n#endif\n#ifdef USE_SHEEN\n	uniform vec3 sheenColor;\n	uniform float sheenRoughness;\n	#ifdef USE_SHEEN_COLORMAP\n		uniform sampler2D sheenColorMap;\n	#endif\n	#ifdef USE_SHEEN_ROUGHNESSMAP\n		uniform sampler2D sheenRoughnessMap;\n	#endif\n#endif\n#ifdef USE_ANISOTROPY\n	uniform vec2 anisotropyVector;\n	#ifdef USE_ANISOTROPYMAP\n		uniform sampler2D anisotropyMap;\n	#endif\n#endif\nvarying vec3 vViewPosition;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <iridescence_fragment>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <iridescence_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n	vec4 diffuseColor = vec4( diffuse, opacity );\n	#include <clipping_planes_fragment>\n	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n	vec3 totalEmissiveRadiance = emissive;\n	#include <logdepthbuf_fragment>\n	#include <map_fragment>\n	#include <color_fragment>\n	#include <alphamap_fragment>\n	#include <alphatest_fragment>\n	#include <alphahash_fragment>\n	#include <roughnessmap_fragment>\n	#include <metalnessmap_fragment>\n	#include <normal_fragment_begin>\n	#include <normal_fragment_maps>\n	#include <clearcoat_normal_fragment_begin>\n	#include <clearcoat_normal_fragment_maps>\n	#include <emissivemap_fragment>\n	#include <lights_physical_fragment>\n	#include <lights_fragment_begin>\n	#include <lights_fragment_maps>\n	#include <lights_fragment_end>\n	#include <aomap_fragment>\n	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n	#include <transmission_fragment>\n	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n	#ifdef USE_SHEEN\n		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );\n		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;\n	#endif\n	#ifdef USE_CLEARCOAT\n		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );\n		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;\n	#endif\n	#include <opaque_fragment>\n	#include <tonemapping_fragment>\n	#include <colorspace_fragment>\n	#include <fog_fragment>\n	#include <premultiplied_alpha_fragment>\n	#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n	#include <uv_vertex>\n	#include <color_vertex>\n	#include <morphinstance_vertex>\n	#include <morphcolor_vertex>\n	#include <batching_vertex>\n	#include <beginnormal_vertex>\n	#include <morphnormal_vertex>\n	#include <skinbase_vertex>\n	#include <skinnormal_vertex>\n	#include <defaultnormal_vertex>\n	#include <normal_vertex>\n	#include <begin_vertex>\n	#include <morphtarget_vertex>\n	#include <skinning_vertex>\n	#include <displacementmap_vertex>\n	#include <project_vertex>\n	#include <logdepthbuf_vertex>\n	#include <clipping_planes_vertex>\n	vViewPosition = - mvPosition.xyz;\n	#include <worldpos_vertex>\n	#include <shadowmap_vertex>\n	#include <fog_vertex>\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n	vec4 diffuseColor = vec4( diffuse, opacity );\n	#include <clipping_planes_fragment>\n	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n	vec3 totalEmissiveRadiance = emissive;\n	#include <logdepthbuf_fragment>\n	#include <map_fragment>\n	#include <color_fragment>\n	#include <alphamap_fragment>\n	#include <alphatest_fragment>\n	#include <alphahash_fragment>\n	#include <normal_fragment_begin>\n	#include <normal_fragment_maps>\n	#include <emissivemap_fragment>\n	#include <lights_toon_fragment>\n	#include <lights_fragment_begin>\n	#include <lights_fragment_maps>\n	#include <lights_fragment_end>\n	#include <aomap_fragment>\n	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n	#include <opaque_fragment>\n	#include <tonemapping_fragment>\n	#include <colorspace_fragment>\n	#include <fog_fragment>\n	#include <premultiplied_alpha_fragment>\n	#include <dithering_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n#ifdef USE_POINTS_UV\n	varying vec2 vUv;\n	uniform mat3 uvTransform;\n#endif\nvoid main() {\n	#ifdef USE_POINTS_UV\n		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n	#endif\n	#include <color_vertex>\n	#include <morphinstance_vertex>\n	#include <morphcolor_vertex>\n	#include <begin_vertex>\n	#include <morphtarget_vertex>\n	#include <project_vertex>\n	gl_PointSize = size;\n	#ifdef USE_SIZEATTENUATION\n		bool isPerspective = isPerspectiveMatrix( projectionMatrix );\n		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n	#endif\n	#include <logdepthbuf_vertex>\n	#include <clipping_planes_vertex>\n	#include <worldpos_vertex>\n	#include <fog_vertex>\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n	vec4 diffuseColor = vec4( diffuse, opacity );\n	#include <clipping_planes_fragment>\n	vec3 outgoingLight = vec3( 0.0 );\n	#include <logdepthbuf_fragment>\n	#include <map_particle_fragment>\n	#include <color_fragment>\n	#include <alphatest_fragment>\n	#include <alphahash_fragment>\n	outgoingLight = diffuseColor.rgb;\n	#include <opaque_fragment>\n	#include <tonemapping_fragment>\n	#include <colorspace_fragment>\n	#include <fog_fragment>\n	#include <premultiplied_alpha_fragment>\n}",shadow_vert:"#include <common>\n#include <batching_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n	#include <batching_vertex>\n	#include <beginnormal_vertex>\n	#include <morphinstance_vertex>\n	#include <morphnormal_vertex>\n	#include <skinbase_vertex>\n	#include <skinnormal_vertex>\n	#include <defaultnormal_vertex>\n	#include <begin_vertex>\n	#include <morphtarget_vertex>\n	#include <skinning_vertex>\n	#include <project_vertex>\n	#include <logdepthbuf_vertex>\n	#include <worldpos_vertex>\n	#include <shadowmap_vertex>\n	#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <logdepthbuf_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n	#include <logdepthbuf_fragment>\n	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n	#include <tonemapping_fragment>\n	#include <colorspace_fragment>\n	#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n	#include <uv_vertex>\n	vec4 mvPosition = modelViewMatrix[ 3 ];\n	vec2 scale = vec2( length( modelMatrix[ 0 ].xyz ), length( modelMatrix[ 1 ].xyz ) );\n	#ifndef USE_SIZEATTENUATION\n		bool isPerspective = isPerspectiveMatrix( projectionMatrix );\n		if ( isPerspective ) scale *= - mvPosition.z;\n	#endif\n	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n	vec2 rotatedPosition;\n	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n	mvPosition.xy += rotatedPosition;\n	gl_Position = projectionMatrix * mvPosition;\n	#include <logdepthbuf_vertex>\n	#include <clipping_planes_vertex>\n	#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n	vec4 diffuseColor = vec4( diffuse, opacity );\n	#include <clipping_planes_fragment>\n	vec3 outgoingLight = vec3( 0.0 );\n	#include <logdepthbuf_fragment>\n	#include <map_fragment>\n	#include <alphamap_fragment>\n	#include <alphatest_fragment>\n	#include <alphahash_fragment>\n	outgoingLight = diffuseColor.rgb;\n	#include <opaque_fragment>\n	#include <tonemapping_fragment>\n	#include <colorspace_fragment>\n	#include <fog_fragment>\n}"},n={common:{diffuse:{value:new j.Q1f(0xffffff)},opacity:{value:1},map:{value:null},mapTransform:{value:new j.dwI},alphaMap:{value:null},alphaMapTransform:{value:new j.dwI},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new j.dwI}},envmap:{envMap:{value:null},envMapRotation:{value:new j.dwI},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new j.dwI}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new j.dwI}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new j.dwI},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new j.dwI},normalScale:{value:new j.I9Y(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new j.dwI},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new j.dwI}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new j.dwI}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new j.dwI}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new j.Q1f(0xffffff)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new j.Q1f(0xffffff)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new j.dwI},alphaTest:{value:0},uvTransform:{value:new j.dwI}},sprite:{diffuse:{value:new j.Q1f(0xffffff)},opacity:{value:1},center:{value:new j.I9Y(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new j.dwI},alphaMap:{value:null},alphaMapTransform:{value:new j.dwI},alphaTest:{value:0}}},o={basic:{uniforms:(0,j.Iit)([n.common,n.specularmap,n.envmap,n.aomap,n.lightmap,n.fog]),vertexShader:m.meshbasic_vert,fragmentShader:m.meshbasic_frag},lambert:{uniforms:(0,j.Iit)([n.common,n.specularmap,n.envmap,n.aomap,n.lightmap,n.emissivemap,n.bumpmap,n.normalmap,n.displacementmap,n.fog,n.lights,{emissive:{value:new j.Q1f(0)}}]),vertexShader:m.meshlambert_vert,fragmentShader:m.meshlambert_frag},phong:{uniforms:(0,j.Iit)([n.common,n.specularmap,n.envmap,n.aomap,n.lightmap,n.emissivemap,n.bumpmap,n.normalmap,n.displacementmap,n.fog,n.lights,{emissive:{value:new j.Q1f(0)},specular:{value:new j.Q1f(1118481)},shininess:{value:30}}]),vertexShader:m.meshphong_vert,fragmentShader:m.meshphong_frag},standard:{uniforms:(0,j.Iit)([n.common,n.envmap,n.aomap,n.lightmap,n.emissivemap,n.bumpmap,n.normalmap,n.displacementmap,n.roughnessmap,n.metalnessmap,n.fog,n.lights,{emissive:{value:new j.Q1f(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:m.meshphysical_vert,fragmentShader:m.meshphysical_frag},toon:{uniforms:(0,j.Iit)([n.common,n.aomap,n.lightmap,n.emissivemap,n.bumpmap,n.normalmap,n.displacementmap,n.gradientmap,n.fog,n.lights,{emissive:{value:new j.Q1f(0)}}]),vertexShader:m.meshtoon_vert,fragmentShader:m.meshtoon_frag},matcap:{uniforms:(0,j.Iit)([n.common,n.bumpmap,n.normalmap,n.displacementmap,n.fog,{matcap:{value:null}}]),vertexShader:m.meshmatcap_vert,fragmentShader:m.meshmatcap_frag},points:{uniforms:(0,j.Iit)([n.points,n.fog]),vertexShader:m.points_vert,fragmentShader:m.points_frag},dashed:{uniforms:(0,j.Iit)([n.common,n.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:m.linedashed_vert,fragmentShader:m.linedashed_frag},depth:{uniforms:(0,j.Iit)([n.common,n.displacementmap]),vertexShader:m.depth_vert,fragmentShader:m.depth_frag},normal:{uniforms:(0,j.Iit)([n.common,n.bumpmap,n.normalmap,n.displacementmap,{opacity:{value:1}}]),vertexShader:m.meshnormal_vert,fragmentShader:m.meshnormal_frag},sprite:{uniforms:(0,j.Iit)([n.sprite,n.fog]),vertexShader:m.sprite_vert,fragmentShader:m.sprite_frag},background:{uniforms:{uvTransform:{value:new j.dwI},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:m.background_vert,fragmentShader:m.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new j.dwI}},vertexShader:m.backgroundCube_vert,fragmentShader:m.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:m.cube_vert,fragmentShader:m.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:m.equirect_vert,fragmentShader:m.equirect_frag},distanceRGBA:{uniforms:(0,j.Iit)([n.common,n.displacementmap,{referencePosition:{value:new j.Pq0},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:m.distanceRGBA_vert,fragmentShader:m.distanceRGBA_frag},shadow:{uniforms:(0,j.Iit)([n.lights,n.fog,{color:{value:new j.Q1f(0)},opacity:{value:1}}]),vertexShader:m.shadow_vert,fragmentShader:m.shadow_frag}};o.physical={uniforms:(0,j.Iit)([o.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new j.dwI},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new j.dwI},clearcoatNormalScale:{value:new j.I9Y(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new j.dwI},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new j.dwI},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new j.dwI},sheen:{value:0},sheenColor:{value:new j.Q1f(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new j.dwI},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new j.dwI},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new j.dwI},transmissionSamplerSize:{value:new j.I9Y},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new j.dwI},attenuationDistance:{value:0},attenuationColor:{value:new j.Q1f(0)},specularColor:{value:new j.Q1f(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new j.dwI},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new j.dwI},anisotropyVector:{value:new j.I9Y},anisotropyMap:{value:null},anisotropyMapTransform:{value:new j.dwI}}]),vertexShader:m.meshphysical_vert,fragmentShader:m.meshphysical_frag};let p={r:0,b:0,g:0},q=new j.O9p,r=new j.kn4;function s(a,b,c,d,e,f,g){let h,i,k=new j.Q1f(0),l=+(!0!==f),m=null,n=0,s=null;function t(a){let d=!0===a.isScene?a.background:null;return d&&d.isTexture&&(d=(a.backgroundBlurriness>0?c:b).get(d)),d}function u(b,c){b.getRGB(p,(0,j._Ut)(a)),d.buffers.color.setClear(p.r,p.g,p.b,c,g)}return{getClearColor:function(){return k},setClearColor:function(a,b=1){k.set(a),u(k,l=b)},getClearAlpha:function(){return l},setClearAlpha:function(a){u(k,l=a)},render:function(b){let c=!1,e=t(b);null===e?u(k,l):e&&e.isColor&&(u(e,1),c=!0);let f=a.xr.getEnvironmentBlendMode();"additive"===f?d.buffers.color.setClear(0,0,0,1,g):"alpha-blend"===f&&d.buffers.color.setClear(0,0,0,0,g),(a.autoClear||c)&&(d.buffers.depth.setTest(!0),d.buffers.depth.setMask(!0),d.buffers.color.setMask(!0),a.clear(a.autoClearColor,a.autoClearDepth,a.autoClearStencil))},addToRenderList:function(b,c){let d=t(c);d&&(d.isCubeTexture||d.mapping===j.Om)?(void 0===i&&((i=new j.eaF(new j.iNn(1e4,1e4,1e4),new j.BKk({name:"BackgroundCubeMaterial",uniforms:(0,j.lxW)(o.backgroundCube.uniforms),vertexShader:o.backgroundCube.vertexShader,fragmentShader:o.backgroundCube.fragmentShader,side:j.hsX,depthTest:!1,depthWrite:!1,fog:!1}))).geometry.deleteAttribute("normal"),i.geometry.deleteAttribute("uv"),i.onBeforeRender=function(a,b,c){this.matrixWorld.copyPosition(c.matrixWorld)},Object.defineProperty(i.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),e.update(i)),q.copy(c.backgroundRotation),q.x*=-1,q.y*=-1,q.z*=-1,d.isCubeTexture&&!1===d.isRenderTargetTexture&&(q.y*=-1,q.z*=-1),i.material.uniforms.envMap.value=d,i.material.uniforms.flipEnvMap.value=d.isCubeTexture&&!1===d.isRenderTargetTexture?-1:1,i.material.uniforms.backgroundBlurriness.value=c.backgroundBlurriness,i.material.uniforms.backgroundIntensity.value=c.backgroundIntensity,i.material.uniforms.backgroundRotation.value.setFromMatrix4(r.makeRotationFromEuler(q)),i.material.toneMapped=j.ppV.getTransfer(d.colorSpace)!==j.KLL,(m!==d||n!==d.version||s!==a.toneMapping)&&(i.material.needsUpdate=!0,m=d,n=d.version,s=a.toneMapping),i.layers.enableAll(),b.unshift(i,i.geometry,i.material,0,0,null)):d&&d.isTexture&&(void 0===h&&((h=new j.eaF(new j.bdM(2,2),new j.BKk({name:"BackgroundMaterial",uniforms:(0,j.lxW)(o.background.uniforms),vertexShader:o.background.vertexShader,fragmentShader:o.background.fragmentShader,side:j.hB5,depthTest:!1,depthWrite:!1,fog:!1}))).geometry.deleteAttribute("normal"),Object.defineProperty(h.material,"map",{get:function(){return this.uniforms.t2D.value}}),e.update(h)),h.material.uniforms.t2D.value=d,h.material.uniforms.backgroundIntensity.value=c.backgroundIntensity,h.material.toneMapped=j.ppV.getTransfer(d.colorSpace)!==j.KLL,!0===d.matrixAutoUpdate&&d.updateMatrix(),h.material.uniforms.uvTransform.value.copy(d.matrix),(m!==d||n!==d.version||s!==a.toneMapping)&&(h.material.needsUpdate=!0,m=d,n=d.version,s=a.toneMapping),h.layers.enableAll(),b.unshift(h,h.geometry,h.material,0,0,null))},dispose:function(){void 0!==i&&(i.geometry.dispose(),i.material.dispose(),i=void 0),void 0!==h&&(h.geometry.dispose(),h.material.dispose(),h=void 0)}}}function t(a,b){let c=a.getParameter(a.MAX_VERTEX_ATTRIBS),d={},e=k(null),f=e,g=!1;function h(b){return a.bindVertexArray(b)}function i(b){return a.deleteVertexArray(b)}function k(a){let b=[],d=[],e=[];for(let a=0;a<c;a++)b[a]=0,d[a]=0,e[a]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:b,enabledAttributes:d,attributeDivisors:e,object:a,attributes:{},index:null}}function l(){let a=f.newAttributes;for(let b=0,c=a.length;b<c;b++)a[b]=0}function m(a){n(a,0)}function n(b,c){let d=f.newAttributes,e=f.enabledAttributes,g=f.attributeDivisors;d[b]=1,0===e[b]&&(a.enableVertexAttribArray(b),e[b]=1),g[b]!==c&&(a.vertexAttribDivisor(b,c),g[b]=c)}function o(){let b=f.newAttributes,c=f.enabledAttributes;for(let d=0,e=c.length;d<e;d++)c[d]!==b[d]&&(a.disableVertexAttribArray(d),c[d]=0)}function p(b,c,d,e,f,g,h){!0===h?a.vertexAttribIPointer(b,c,d,f,g):a.vertexAttribPointer(b,c,d,e,f,g)}function q(){r(),g=!0,f!==e&&h((f=e).object)}function r(){e.geometry=null,e.program=null,e.wireframe=!1}return{setup:function(c,e,i,q,r){let s=!1,t=function(b,c,e){let f=!0===e.wireframe,g=d[b.id];void 0===g&&(g={},d[b.id]=g);let h=g[c.id];void 0===h&&(h={},g[c.id]=h);let i=h[f];return void 0===i&&(i=k(a.createVertexArray()),h[f]=i),i}(q,i,e);f!==t&&h((f=t).object),(s=function(a,b,c,d){let e=f.attributes,g=b.attributes,h=0,i=c.getAttributes();for(let b in i)if(i[b].location>=0){let c=e[b],d=g[b];if(void 0===d&&("instanceMatrix"===b&&a.instanceMatrix&&(d=a.instanceMatrix),"instanceColor"===b&&a.instanceColor&&(d=a.instanceColor)),void 0===c||c.attribute!==d||d&&c.data!==d.data)return!0;h++}return f.attributesNum!==h||f.index!==d}(c,q,i,r))&&function(a,b,c,d){let e={},g=b.attributes,h=0,i=c.getAttributes();for(let b in i)if(i[b].location>=0){let c=g[b];void 0===c&&("instanceMatrix"===b&&a.instanceMatrix&&(c=a.instanceMatrix),"instanceColor"===b&&a.instanceColor&&(c=a.instanceColor));let d={};d.attribute=c,c&&c.data&&(d.data=c.data),e[b]=d,h++}f.attributes=e,f.attributesNum=h,f.index=d}(c,q,i,r),null!==r&&b.update(r,a.ELEMENT_ARRAY_BUFFER),(s||g)&&(g=!1,function(c,d,e,f){l();let g=f.attributes,h=e.getAttributes(),i=d.defaultAttributeValues;for(let d in h){let e=h[d];if(e.location>=0){let h=g[d];if(void 0===h&&("instanceMatrix"===d&&c.instanceMatrix&&(h=c.instanceMatrix),"instanceColor"===d&&c.instanceColor&&(h=c.instanceColor)),void 0!==h){let d=h.normalized,g=h.itemSize,i=b.get(h);if(void 0===i)continue;let k=i.buffer,l=i.type,o=i.bytesPerElement,q=l===a.INT||l===a.UNSIGNED_INT||h.gpuType===j.Yuy;if(h.isInterleavedBufferAttribute){let b=h.data,i=b.stride,j=h.offset;if(b.isInstancedInterleavedBuffer){for(let a=0;a<e.locationSize;a++)n(e.location+a,b.meshPerAttribute);!0!==c.isInstancedMesh&&void 0===f._maxInstanceCount&&(f._maxInstanceCount=b.meshPerAttribute*b.count)}else for(let a=0;a<e.locationSize;a++)m(e.location+a);a.bindBuffer(a.ARRAY_BUFFER,k);for(let a=0;a<e.locationSize;a++)p(e.location+a,g/e.locationSize,l,d,i*o,(j+g/e.locationSize*a)*o,q)}else{if(h.isInstancedBufferAttribute){for(let a=0;a<e.locationSize;a++)n(e.location+a,h.meshPerAttribute);!0!==c.isInstancedMesh&&void 0===f._maxInstanceCount&&(f._maxInstanceCount=h.meshPerAttribute*h.count)}else for(let a=0;a<e.locationSize;a++)m(e.location+a);a.bindBuffer(a.ARRAY_BUFFER,k);for(let a=0;a<e.locationSize;a++)p(e.location+a,g/e.locationSize,l,d,g*o,g/e.locationSize*a*o,q)}}else if(void 0!==i){let b=i[d];if(void 0!==b)switch(b.length){case 2:a.vertexAttrib2fv(e.location,b);break;case 3:a.vertexAttrib3fv(e.location,b);break;case 4:a.vertexAttrib4fv(e.location,b);break;default:a.vertexAttrib1fv(e.location,b)}}}}o()}(c,e,i,q),null!==r&&a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,b.get(r).buffer))},reset:q,resetDefaultState:r,dispose:function(){for(let a in q(),d){let b=d[a];for(let a in b){let c=b[a];for(let a in c)i(c[a].object),delete c[a];delete b[a]}delete d[a]}},releaseStatesOfGeometry:function(a){if(void 0===d[a.id])return;let b=d[a.id];for(let a in b){let c=b[a];for(let a in c)i(c[a].object),delete c[a];delete b[a]}delete d[a.id]},releaseStatesOfProgram:function(a){for(let b in d){let c=d[b];if(void 0===c[a.id])continue;let e=c[a.id];for(let a in e)i(e[a].object),delete e[a];delete c[a.id]}},initAttributes:l,enableAttribute:m,disableUnusedAttributes:o}}function u(a,b,c){let d;function e(b,e,f){0!==f&&(a.drawArraysInstanced(d,b,e,f),c.update(e,d,f))}this.setMode=function(a){d=a},this.render=function(b,e){a.drawArrays(d,b,e),c.update(e,d,1)},this.renderInstances=e,this.renderMultiDraw=function(a,e,f){if(0===f)return;b.get("WEBGL_multi_draw").multiDrawArraysWEBGL(d,a,0,e,0,f);let g=0;for(let a=0;a<f;a++)g+=e[a];c.update(g,d,1)},this.renderMultiDrawInstances=function(a,f,g,h){if(0===g)return;let i=b.get("WEBGL_multi_draw");if(null===i)for(let b=0;b<a.length;b++)e(a[b],f[b],h[b]);else{i.multiDrawArraysInstancedWEBGL(d,a,0,f,0,h,0,g);let b=0;for(let a=0;a<g;a++)b+=f[a]*h[a];c.update(b,d,1)}}}function v(a,b,c,d){let e;function f(b){if("highp"===b){if(a.getShaderPrecisionFormat(a.VERTEX_SHADER,a.HIGH_FLOAT).precision>0&&a.getShaderPrecisionFormat(a.FRAGMENT_SHADER,a.HIGH_FLOAT).precision>0)return"highp";b="mediump"}return"mediump"===b&&a.getShaderPrecisionFormat(a.VERTEX_SHADER,a.MEDIUM_FLOAT).precision>0&&a.getShaderPrecisionFormat(a.FRAGMENT_SHADER,a.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let g=void 0!==c.precision?c.precision:"highp",h=f(g);h!==g&&(console.warn("THREE.WebGLRenderer:",g,"not supported, using",h,"instead."),g=h);let i=!0===c.logarithmicDepthBuffer,k=!0===c.reverseDepthBuffer&&b.has("EXT_clip_control"),l=a.getParameter(a.MAX_TEXTURE_IMAGE_UNITS),m=a.getParameter(a.MAX_VERTEX_TEXTURE_IMAGE_UNITS),n=a.getParameter(a.MAX_TEXTURE_SIZE),o=a.getParameter(a.MAX_CUBE_MAP_TEXTURE_SIZE),p=a.getParameter(a.MAX_VERTEX_ATTRIBS),q=a.getParameter(a.MAX_VERTEX_UNIFORM_VECTORS),r=a.getParameter(a.MAX_VARYING_VECTORS);return{isWebGL2:!0,getMaxAnisotropy:function(){if(void 0!==e)return e;if(!0===b.has("EXT_texture_filter_anisotropic")){let c=b.get("EXT_texture_filter_anisotropic");e=a.getParameter(c.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else e=0;return e},getMaxPrecision:f,textureFormatReadable:function(b){return b===j.GWd||d.convert(b)===a.getParameter(a.IMPLEMENTATION_COLOR_READ_FORMAT)},textureTypeReadable:function(c){let e=c===j.ix0&&(b.has("EXT_color_buffer_half_float")||b.has("EXT_color_buffer_float"));return c===j.OUM||d.convert(c)===a.getParameter(a.IMPLEMENTATION_COLOR_READ_TYPE)||c===j.RQf||!!e},precision:g,logarithmicDepthBuffer:i,reverseDepthBuffer:k,maxTextures:l,maxVertexTextures:m,maxTextureSize:n,maxCubemapSize:o,maxAttributes:p,maxVertexUniforms:q,maxVaryings:r,maxFragmentUniforms:a.getParameter(a.MAX_FRAGMENT_UNIFORM_VECTORS),vertexTextures:m>0,maxSamples:a.getParameter(a.MAX_SAMPLES)}}function w(a){let b=this,c=null,d=0,e=!1,f=!1,g=new j.Zcv,h=new j.dwI,i={value:null,needsUpdate:!1};function k(a,c,d,e){let f=null!==a?a.length:0,j=null;if(0!==f){if(j=i.value,!0!==e||null===j){let b=d+4*f,e=c.matrixWorldInverse;h.getNormalMatrix(e),(null===j||j.length<b)&&(j=new Float32Array(b));for(let b=0,c=d;b!==f;++b,c+=4)g.copy(a[b]).applyMatrix4(e,h),g.normal.toArray(j,c),j[c+3]=g.constant}i.value=j,i.needsUpdate=!0}return b.numPlanes=f,b.numIntersection=0,j}this.uniform=i,this.numPlanes=0,this.numIntersection=0,this.init=function(a,b){let c=0!==a.length||b||0!==d||e;return e=b,d=a.length,c},this.beginShadows=function(){f=!0,k(null)},this.endShadows=function(){f=!1},this.setGlobalState=function(a,b){c=k(a,b,0)},this.setState=function(g,h,j){let l=g.clippingPlanes,m=g.clipIntersection,n=g.clipShadows,o=a.get(g);if(e&&null!==l&&0!==l.length&&(!f||n)){let a=f?0:d,b=4*a,e=o.clippingState||null;i.value=e,e=k(l,h,b,j);for(let a=0;a!==b;++a)e[a]=c[a];o.clippingState=e,this.numIntersection=m?this.numPlanes:0,this.numPlanes+=a}else f?k(null):(i.value!==c&&(i.value=c,i.needsUpdate=d>0),b.numPlanes=d,b.numIntersection=0)}}function x(a){let b=new WeakMap;function c(a,b){return b===j.wfO?a.mapping=j.hy7:b===j.uV5&&(a.mapping=j.xFO),a}function d(a){let c=a.target;c.removeEventListener("dispose",d);let e=b.get(c);void 0!==e&&(b.delete(c),e.dispose())}return{get:function(e){if(e&&e.isTexture){let f=e.mapping;if(f===j.wfO||f===j.uV5)if(b.has(e))return c(b.get(e).texture,e.mapping);else{let f=e.image;if(!f||!(f.height>0))return null;{let g=new j.o6l(f.height);return g.fromEquirectangularTexture(a,e),b.set(e,g),e.addEventListener("dispose",d),c(g.texture,e.mapping)}}}return e},dispose:function(){b=new WeakMap}}}let y=[.125,.215,.35,.446,.526,.582],z=new j.qUd,A=new j.Q1f,B=null,C=0,D=0,E=!1,F=(1+Math.sqrt(5))/2,G=1/F,H=[new j.Pq0(-F,G,0),new j.Pq0(F,G,0),new j.Pq0(-G,0,F),new j.Pq0(G,0,F),new j.Pq0(0,F,-G),new j.Pq0(0,F,G),new j.Pq0(-1,1,-1),new j.Pq0(1,1,-1),new j.Pq0(-1,1,1),new j.Pq0(1,1,1)];class I{constructor(a){this._renderer=a,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(a,b=0,c=.1,d=100){B=this._renderer.getRenderTarget(),C=this._renderer.getActiveCubeFace(),D=this._renderer.getActiveMipmapLevel(),E=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(256);let e=this._allocateTargets();return e.depthBuffer=!0,this._sceneToCubeUV(a,c,d,e),b>0&&this._blur(e,0,0,b),this._applyPMREM(e),this._cleanup(e),e}fromEquirectangular(a,b=null){return this._fromTexture(a,b)}fromCubemap(a,b=null){return this._fromTexture(a,b)}compileCubemapShader(){null===this._cubemapMaterial&&(this._cubemapMaterial=M(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){null===this._equirectMaterial&&(this._equirectMaterial=L(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),null!==this._cubemapMaterial&&this._cubemapMaterial.dispose(),null!==this._equirectMaterial&&this._equirectMaterial.dispose()}_setSize(a){this._lodMax=Math.floor(Math.log2(a)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){null!==this._blurMaterial&&this._blurMaterial.dispose(),null!==this._pingPongRenderTarget&&this._pingPongRenderTarget.dispose();for(let a=0;a<this._lodPlanes.length;a++)this._lodPlanes[a].dispose()}_cleanup(a){this._renderer.setRenderTarget(B,C,D),this._renderer.xr.enabled=E,a.scissorTest=!1,K(a,0,0,a.width,a.height)}_fromTexture(a,b){a.mapping===j.hy7||a.mapping===j.xFO?this._setSize(0===a.image.length?16:a.image[0].width||a.image[0].image.width):this._setSize(a.image.width/4),B=this._renderer.getRenderTarget(),C=this._renderer.getActiveCubeFace(),D=this._renderer.getActiveMipmapLevel(),E=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;let c=b||this._allocateTargets();return this._textureToCubeUV(a,c),this._applyPMREM(c),this._cleanup(c),c}_allocateTargets(){let a=3*Math.max(this._cubeSize,112),b=4*this._cubeSize,c={magFilter:j.k6q,minFilter:j.k6q,generateMipmaps:!1,type:j.ix0,format:j.GWd,colorSpace:j.Zr2,depthBuffer:!1},d=J(a,b,c);if(null===this._pingPongRenderTarget||this._pingPongRenderTarget.width!==a||this._pingPongRenderTarget.height!==b){null!==this._pingPongRenderTarget&&this._dispose(),this._pingPongRenderTarget=J(a,b,c);let{_lodMax:d}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=function(a){let b=[],c=[],d=[],e=a,f=a-4+1+y.length;for(let g=0;g<f;g++){let f=Math.pow(2,e);c.push(f);let h=1/f;g>a-4?h=y[g-a+4-1]:0===g&&(h=0),d.push(h);let i=1/(f-2),k=-i,l=1+i,m=[k,k,l,k,l,l,k,k,l,l,k,l],n=new Float32Array(108),o=new Float32Array(72),p=new Float32Array(36);for(let a=0;a<6;a++){let b=a%3*2/3-1,c=a>2?0:-1,d=[b,c,0,b+2/3,c,0,b+2/3,c+1,0,b,c,0,b+2/3,c+1,0,b,c+1,0];n.set(d,18*a),o.set(m,12*a);let e=[a,a,a,a,a,a];p.set(e,6*a)}let q=new j.LoY;q.setAttribute("position",new j.THS(n,3)),q.setAttribute("uv",new j.THS(o,2)),q.setAttribute("faceIndex",new j.THS(p,1)),b.push(q),e>4&&e--}return{lodPlanes:b,sizeLods:c,sigmas:d}}(d)),this._blurMaterial=function(a,b,c){let d=new Float32Array(20),e=new j.Pq0(0,1,0);return new j.BKk({name:"SphericalGaussianBlur",defines:{n:20,CUBEUV_TEXEL_WIDTH:1/b,CUBEUV_TEXEL_HEIGHT:1/c,CUBEUV_MAX_MIP:`${a}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:d},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:e}},vertexShader:N(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:j.XIg,depthTest:!1,depthWrite:!1})}(d,a,b)}return d}_compileMaterial(a){let b=new j.eaF(this._lodPlanes[0],a);this._renderer.compile(b,z)}_sceneToCubeUV(a,b,c,d){let e=new j.ubm(90,1,b,c),f=[1,-1,1,1,1,1],g=[1,1,1,-1,-1,-1],h=this._renderer,i=h.autoClear,k=h.toneMapping;h.getClearColor(A),h.toneMapping=j.y_p,h.autoClear=!1;let l=new j.V9B({name:"PMREM.Background",side:j.hsX,depthWrite:!1,depthTest:!1}),m=new j.eaF(new j.iNn,l),n=!1,o=a.background;o?o.isColor&&(l.color.copy(o),a.background=null,n=!0):(l.color.copy(A),n=!0);for(let b=0;b<6;b++){let c=b%3;0===c?(e.up.set(0,f[b],0),e.lookAt(g[b],0,0)):1===c?(e.up.set(0,0,f[b]),e.lookAt(0,g[b],0)):(e.up.set(0,f[b],0),e.lookAt(0,0,g[b]));let i=this._cubeSize;K(d,c*i,b>2?i:0,i,i),h.setRenderTarget(d),n&&h.render(m,e),h.render(a,e)}m.geometry.dispose(),m.material.dispose(),h.toneMapping=k,h.autoClear=i,a.background=o}_textureToCubeUV(a,b){let c=this._renderer,d=a.mapping===j.hy7||a.mapping===j.xFO;d?(null===this._cubemapMaterial&&(this._cubemapMaterial=M()),this._cubemapMaterial.uniforms.flipEnvMap.value=!1===a.isRenderTargetTexture?-1:1):null===this._equirectMaterial&&(this._equirectMaterial=L());let e=d?this._cubemapMaterial:this._equirectMaterial,f=new j.eaF(this._lodPlanes[0],e);e.uniforms.envMap.value=a;let g=this._cubeSize;K(b,0,0,3*g,2*g),c.setRenderTarget(b),c.render(f,z)}_applyPMREM(a){let b=this._renderer,c=b.autoClear;b.autoClear=!1;let d=this._lodPlanes.length;for(let b=1;b<d;b++){let c=Math.sqrt(this._sigmas[b]*this._sigmas[b]-this._sigmas[b-1]*this._sigmas[b-1]),e=H[(d-b-1)%H.length];this._blur(a,b-1,b,c,e)}b.autoClear=c}_blur(a,b,c,d,e){let f=this._pingPongRenderTarget;this._halfBlur(a,f,b,c,d,"latitudinal",e),this._halfBlur(f,a,c,c,d,"longitudinal",e)}_halfBlur(a,b,c,d,e,f,g){let h=this._renderer,i=this._blurMaterial;"latitudinal"!==f&&"longitudinal"!==f&&console.error("blur direction must be either latitudinal or longitudinal!");let k=new j.eaF(this._lodPlanes[d],i),l=i.uniforms,m=this._sizeLods[c]-1,n=isFinite(e)?Math.PI/(2*m):2*Math.PI/39,o=e/n,p=isFinite(e)?1+Math.floor(3*o):20;p>20&&console.warn(`sigmaRadians, ${e}, is too large and will clip, as it requested ${p} samples when the maximum is set to 20`);let q=[],r=0;for(let a=0;a<20;++a){let b=a/o,c=Math.exp(-b*b/2);q.push(c),0===a?r+=c:a<p&&(r+=2*c)}for(let a=0;a<q.length;a++)q[a]=q[a]/r;l.envMap.value=a.texture,l.samples.value=p,l.weights.value=q,l.latitudinal.value="latitudinal"===f,g&&(l.poleAxis.value=g);let{_lodMax:s}=this;l.dTheta.value=n,l.mipInt.value=s-c;let t=this._sizeLods[d],u=4*(this._cubeSize-t);K(b,3*t*(d>s-4?d-s+4:0),u,3*t,2*t),h.setRenderTarget(b),h.render(k,z)}}function J(a,b,c){let d=new j.nWS(a,b,c);return d.texture.mapping=j.Om,d.texture.name="PMREM.cubeUv",d.scissorTest=!0,d}function K(a,b,c,d,e){a.viewport.set(b,c,d,e),a.scissor.set(b,c,d,e)}function L(){return new j.BKk({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:N(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:j.XIg,depthTest:!1,depthWrite:!1})}function M(){return new j.BKk({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:N(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:j.XIg,depthTest:!1,depthWrite:!1})}function N(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function O(a){let b=new WeakMap,c=null;function d(a){let c=a.target;c.removeEventListener("dispose",d);let e=b.get(c);void 0!==e&&(b.delete(c),e.dispose())}return{get:function(e){if(e&&e.isTexture){let f=e.mapping,g=f===j.wfO||f===j.uV5,h=f===j.hy7||f===j.xFO;if(g||h){let f=b.get(e),i=void 0!==f?f.texture.pmremVersion:0;if(e.isRenderTargetTexture&&e.pmremVersion!==i)return null===c&&(c=new I(a)),(f=g?c.fromEquirectangular(e,f):c.fromCubemap(e,f)).texture.pmremVersion=e.pmremVersion,b.set(e,f),f.texture;{if(void 0!==f)return f.texture;let i=e.image;return g&&i&&i.height>0||h&&i&&function(a){let b=0;for(let c=0;c<6;c++)void 0!==a[c]&&b++;return 6===b}(i)?(null===c&&(c=new I(a)),(f=g?c.fromEquirectangular(e):c.fromCubemap(e)).texture.pmremVersion=e.pmremVersion,b.set(e,f),e.addEventListener("dispose",d),f.texture):null}}}return e},dispose:function(){b=new WeakMap,null!==c&&(c.dispose(),c=null)}}}function P(a){let b={};function c(c){let d;if(void 0!==b[c])return b[c];switch(c){case"WEBGL_depth_texture":d=a.getExtension("WEBGL_depth_texture")||a.getExtension("MOZ_WEBGL_depth_texture")||a.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":d=a.getExtension("EXT_texture_filter_anisotropic")||a.getExtension("MOZ_EXT_texture_filter_anisotropic")||a.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":d=a.getExtension("WEBGL_compressed_texture_s3tc")||a.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||a.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":d=a.getExtension("WEBGL_compressed_texture_pvrtc")||a.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:d=a.getExtension(c)}return b[c]=d,d}return{has:function(a){return null!==c(a)},init:function(){c("EXT_color_buffer_float"),c("WEBGL_clip_cull_distance"),c("OES_texture_float_linear"),c("EXT_color_buffer_half_float"),c("WEBGL_multisampled_render_to_texture"),c("WEBGL_render_shared_exponent")},get:function(a){let b=c(a);return null===b&&(0,j.mcG)("THREE.WebGLRenderer: "+a+" extension not supported."),b}}}function Q(a,b,c,d){let e={},f=new WeakMap;function g(a){let h=a.target;for(let a in null!==h.index&&b.remove(h.index),h.attributes)b.remove(h.attributes[a]);h.removeEventListener("dispose",g),delete e[h.id];let i=f.get(h);i&&(b.remove(i),f.delete(h)),d.releaseStatesOfGeometry(h),!0===h.isInstancedBufferGeometry&&delete h._maxInstanceCount,c.memory.geometries--}function h(a){let c=[],d=a.index,e=a.attributes.position,g=0;if(null!==d){let a=d.array;g=d.version;for(let b=0,d=a.length;b<d;b+=3){let d=a[b+0],e=a[b+1],f=a[b+2];c.push(d,e,e,f,f,d)}}else{if(void 0===e)return;let a=e.array;g=e.version;for(let b=0,d=a.length/3-1;b<d;b+=3){let a=b+0,d=b+1,e=b+2;c.push(a,d,d,e,e,a)}}let h=new((0,j.AQS)(c)?j.MW4:j.A$4)(c,1);h.version=g;let i=f.get(a);i&&b.remove(i),f.set(a,h)}return{get:function(a,b){return!0===e[b.id]||(b.addEventListener("dispose",g),e[b.id]=!0,c.memory.geometries++),b},update:function(c){let d=c.attributes;for(let c in d)b.update(d[c],a.ARRAY_BUFFER)},getWireframeAttribute:function(a){let b=f.get(a);if(b){let c=a.index;null!==c&&b.version<c.version&&h(a)}else h(a);return f.get(a)}}}function R(a,b,c){let d,e,f;function g(b,g,h){0!==h&&(a.drawElementsInstanced(d,g,e,b*f,h),c.update(g,d,h))}this.setMode=function(a){d=a},this.setIndex=function(a){e=a.type,f=a.bytesPerElement},this.render=function(b,g){a.drawElements(d,g,e,b*f),c.update(g,d,1)},this.renderInstances=g,this.renderMultiDraw=function(a,f,g){if(0===g)return;b.get("WEBGL_multi_draw").multiDrawElementsWEBGL(d,f,0,e,a,0,g);let h=0;for(let a=0;a<g;a++)h+=f[a];c.update(h,d,1)},this.renderMultiDrawInstances=function(a,h,i,j){if(0===i)return;let k=b.get("WEBGL_multi_draw");if(null===k)for(let b=0;b<a.length;b++)g(a[b]/f,h[b],j[b]);else{k.multiDrawElementsInstancedWEBGL(d,h,0,e,a,0,j,0,i);let b=0;for(let a=0;a<i;a++)b+=h[a]*j[a];c.update(b,d,1)}}}function S(a){let b={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:b,programs:null,autoReset:!0,reset:function(){b.calls=0,b.triangles=0,b.points=0,b.lines=0},update:function(c,d,e){switch(b.calls++,d){case a.TRIANGLES:b.triangles+=c/3*e;break;case a.LINES:b.lines+=c/2*e;break;case a.LINE_STRIP:b.lines+=e*(c-1);break;case a.LINE_LOOP:b.lines+=e*c;break;case a.POINTS:b.points+=e*c;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",d)}}}}function T(a,b,c){let d=new WeakMap,e=new j.IUQ;return{update:function(f,g,h){let i=f.morphTargetInfluences,k=g.morphAttributes.position||g.morphAttributes.normal||g.morphAttributes.color,l=void 0!==k?k.length:0,m=d.get(g);if(void 0===m||m.count!==l){void 0!==m&&m.texture.dispose();let a=void 0!==g.morphAttributes.position,c=void 0!==g.morphAttributes.normal,f=void 0!==g.morphAttributes.color,h=g.morphAttributes.position||[],i=g.morphAttributes.normal||[],k=g.morphAttributes.color||[],n=0;!0===a&&(n=1),!0===c&&(n=2),!0===f&&(n=3);let o=g.attributes.position.count*n,p=1;o>b.maxTextureSize&&(p=Math.ceil(o/b.maxTextureSize),o=b.maxTextureSize);let q=new Float32Array(o*p*4*l),r=new j.rFo(q,o,p,l);r.type=j.RQf,r.needsUpdate=!0;let s=4*n;for(let b=0;b<l;b++){let d=h[b],g=i[b],j=k[b],l=o*p*4*b;for(let b=0;b<d.count;b++){let h=b*s;!0===a&&(e.fromBufferAttribute(d,b),q[l+h+0]=e.x,q[l+h+1]=e.y,q[l+h+2]=e.z,q[l+h+3]=0),!0===c&&(e.fromBufferAttribute(g,b),q[l+h+4]=e.x,q[l+h+5]=e.y,q[l+h+6]=e.z,q[l+h+7]=0),!0===f&&(e.fromBufferAttribute(j,b),q[l+h+8]=e.x,q[l+h+9]=e.y,q[l+h+10]=e.z,q[l+h+11]=4===j.itemSize?e.w:1)}}m={count:l,texture:r,size:new j.I9Y(o,p)},d.set(g,m),g.addEventListener("dispose",function a(){r.dispose(),d.delete(g),g.removeEventListener("dispose",a)})}if(!0===f.isInstancedMesh&&null!==f.morphTexture)h.getUniforms().setValue(a,"morphTexture",f.morphTexture,c);else{let b=0;for(let a=0;a<i.length;a++)b+=i[a];let c=g.morphTargetsRelative?1:1-b;h.getUniforms().setValue(a,"morphTargetBaseInfluence",c),h.getUniforms().setValue(a,"morphTargetInfluences",i)}h.getUniforms().setValue(a,"morphTargetsTexture",m.texture,c),h.getUniforms().setValue(a,"morphTargetsTextureSize",m.size)}}}class U{constructor(a,b,c){if(this.renderer=a,this.DEFAULT_NUMVIEWS=2,this.maxNumViews=0,this.gl=c,this.extensions=b,this.available=this.extensions.has("OCULUS_multiview"),this.available){let a=this.extensions.get("OCULUS_multiview");this.maxNumViews=this.gl.getParameter(a.MAX_VIEWS_OVR),this.mat4=[],this.mat3=[],this.cameraArray=[];for(var d=0;d<this.maxNumViews;d++)this.mat4[d]=new j.kn4,this.mat3[d]=new j.dwI}}getCameraArray(a){return a.isArrayCamera?a.cameras:(this.cameraArray[0]=a,this.cameraArray)}updateCameraProjectionMatricesUniform(a,b){for(var c=this.getCameraArray(a),d=0;d<c.length;d++)this.mat4[d].copy(c[d].projectionMatrix);b.setValue(this.gl,"projectionMatrices",this.mat4)}updateCameraViewMatricesUniform(a,b){for(var c=this.getCameraArray(a),d=0;d<c.length;d++)this.mat4[d].copy(c[d].matrixWorldInverse);b.setValue(this.gl,"viewMatrices",this.mat4)}updateObjectMatricesUniforms(a,b,c){for(var d=this.getCameraArray(b),e=0;e<d.length;e++)this.mat4[e].multiplyMatrices(d[e].matrixWorldInverse,a.matrixWorld),this.mat3[e].getNormalMatrix(this.mat4[e]);c.setValue(this.gl,"modelViewMatrices",this.mat4),c.setValue(this.gl,"normalMatrices",this.mat3)}}function V(a,b,c,d){let e=new WeakMap;function f(a){let b=a.target;b.removeEventListener("dispose",f),c.remove(b.instanceMatrix),null!==b.instanceColor&&c.remove(b.instanceColor)}return{update:function(g){let h=d.render.frame,i=g.geometry,j=b.get(g,i);if(e.get(j)!==h&&(b.update(j),e.set(j,h)),g.isInstancedMesh&&(!1===g.hasEventListener("dispose",f)&&g.addEventListener("dispose",f),e.get(g)!==h&&(c.update(g.instanceMatrix,a.ARRAY_BUFFER),null!==g.instanceColor&&c.update(g.instanceColor,a.ARRAY_BUFFER),e.set(g,h))),g.isSkinnedMesh){let a=g.skeleton;e.get(a)!==h&&(a.update(),e.set(a,h))}return j},dispose:function(){e=new WeakMap}}}let W=new j.gPd,X=new j.VCu(1,1),Y=new j.rFo,Z=new j.dYF,$=new j.b4q,_=[],aa=[],ab=new Float32Array(16),ac=new Float32Array(9),ad=new Float32Array(4);function ae(a,b,c){let d=a[0];if(d<=0||d>0)return a;let e=b*c,f=_[e];if(void 0===f&&(f=new Float32Array(e),_[e]=f),0!==b){d.toArray(f,0);for(let d=1,e=0;d!==b;++d)e+=c,a[d].toArray(f,e)}return f}function af(a,b){if(a.length!==b.length)return!1;for(let c=0,d=a.length;c<d;c++)if(a[c]!==b[c])return!1;return!0}function ag(a,b){for(let c=0,d=b.length;c<d;c++)a[c]=b[c]}function ah(a,b){let c=aa[b];void 0===c&&(c=new Int32Array(b),aa[b]=c);for(let d=0;d!==b;++d)c[d]=a.allocateTextureUnit();return c}function ai(a,b){let c=this.cache;c[0]!==b&&(a.uniform1f(this.addr,b),c[0]=b)}function aj(a,b){let c=this.cache;if(void 0!==b.x)(c[0]!==b.x||c[1]!==b.y)&&(a.uniform2f(this.addr,b.x,b.y),c[0]=b.x,c[1]=b.y);else{if(af(c,b))return;a.uniform2fv(this.addr,b),ag(c,b)}}function ak(a,b){let c=this.cache;if(void 0!==b.x)(c[0]!==b.x||c[1]!==b.y||c[2]!==b.z)&&(a.uniform3f(this.addr,b.x,b.y,b.z),c[0]=b.x,c[1]=b.y,c[2]=b.z);else if(void 0!==b.r)(c[0]!==b.r||c[1]!==b.g||c[2]!==b.b)&&(a.uniform3f(this.addr,b.r,b.g,b.b),c[0]=b.r,c[1]=b.g,c[2]=b.b);else{if(af(c,b))return;a.uniform3fv(this.addr,b),ag(c,b)}}function al(a,b){let c=this.cache;if(void 0!==b.x)(c[0]!==b.x||c[1]!==b.y||c[2]!==b.z||c[3]!==b.w)&&(a.uniform4f(this.addr,b.x,b.y,b.z,b.w),c[0]=b.x,c[1]=b.y,c[2]=b.z,c[3]=b.w);else{if(af(c,b))return;a.uniform4fv(this.addr,b),ag(c,b)}}function am(a,b){let c=this.cache,d=b.elements;if(void 0===d){if(af(c,b))return;a.uniformMatrix2fv(this.addr,!1,b),ag(c,b)}else{if(af(c,d))return;ad.set(d),a.uniformMatrix2fv(this.addr,!1,ad),ag(c,d)}}function an(a,b){let c=this.cache,d=b.elements;if(void 0===d){if(af(c,b))return;a.uniformMatrix3fv(this.addr,!1,b),ag(c,b)}else{if(af(c,d))return;ac.set(d),a.uniformMatrix3fv(this.addr,!1,ac),ag(c,d)}}function ao(a,b){let c=this.cache,d=b.elements;if(void 0===d){if(af(c,b))return;a.uniformMatrix4fv(this.addr,!1,b),ag(c,b)}else{if(af(c,d))return;ab.set(d),a.uniformMatrix4fv(this.addr,!1,ab),ag(c,d)}}function ap(a,b){let c=this.cache;c[0]!==b&&(a.uniform1i(this.addr,b),c[0]=b)}function aq(a,b){let c=this.cache;if(void 0!==b.x)(c[0]!==b.x||c[1]!==b.y)&&(a.uniform2i(this.addr,b.x,b.y),c[0]=b.x,c[1]=b.y);else{if(af(c,b))return;a.uniform2iv(this.addr,b),ag(c,b)}}function ar(a,b){let c=this.cache;if(void 0!==b.x)(c[0]!==b.x||c[1]!==b.y||c[2]!==b.z)&&(a.uniform3i(this.addr,b.x,b.y,b.z),c[0]=b.x,c[1]=b.y,c[2]=b.z);else{if(af(c,b))return;a.uniform3iv(this.addr,b),ag(c,b)}}function as(a,b){let c=this.cache;if(void 0!==b.x)(c[0]!==b.x||c[1]!==b.y||c[2]!==b.z||c[3]!==b.w)&&(a.uniform4i(this.addr,b.x,b.y,b.z,b.w),c[0]=b.x,c[1]=b.y,c[2]=b.z,c[3]=b.w);else{if(af(c,b))return;a.uniform4iv(this.addr,b),ag(c,b)}}function at(a,b){let c=this.cache;c[0]!==b&&(a.uniform1ui(this.addr,b),c[0]=b)}function au(a,b){let c=this.cache;if(void 0!==b.x)(c[0]!==b.x||c[1]!==b.y)&&(a.uniform2ui(this.addr,b.x,b.y),c[0]=b.x,c[1]=b.y);else{if(af(c,b))return;a.uniform2uiv(this.addr,b),ag(c,b)}}function av(a,b){let c=this.cache;if(void 0!==b.x)(c[0]!==b.x||c[1]!==b.y||c[2]!==b.z)&&(a.uniform3ui(this.addr,b.x,b.y,b.z),c[0]=b.x,c[1]=b.y,c[2]=b.z);else{if(af(c,b))return;a.uniform3uiv(this.addr,b),ag(c,b)}}function aw(a,b){let c=this.cache;if(void 0!==b.x)(c[0]!==b.x||c[1]!==b.y||c[2]!==b.z||c[3]!==b.w)&&(a.uniform4ui(this.addr,b.x,b.y,b.z,b.w),c[0]=b.x,c[1]=b.y,c[2]=b.z,c[3]=b.w);else{if(af(c,b))return;a.uniform4uiv(this.addr,b),ag(c,b)}}function ax(a,b,c){let d,e=this.cache,f=c.allocateTextureUnit();e[0]!==f&&(a.uniform1i(this.addr,f),e[0]=f),this.type===a.SAMPLER_2D_SHADOW?(X.compareFunction=j.TiK,d=X):d=W,c.setTexture2D(b||d,f)}function ay(a,b,c){let d=this.cache,e=c.allocateTextureUnit();d[0]!==e&&(a.uniform1i(this.addr,e),d[0]=e),c.setTexture3D(b||Z,e)}function az(a,b,c){let d=this.cache,e=c.allocateTextureUnit();d[0]!==e&&(a.uniform1i(this.addr,e),d[0]=e),c.setTextureCube(b||$,e)}function aA(a,b,c){let d=this.cache,e=c.allocateTextureUnit();d[0]!==e&&(a.uniform1i(this.addr,e),d[0]=e),c.setTexture2DArray(b||Y,e)}function aB(a,b){a.uniform1fv(this.addr,b)}function aC(a,b){let c=ae(b,this.size,2);a.uniform2fv(this.addr,c)}function aD(a,b){let c=ae(b,this.size,3);a.uniform3fv(this.addr,c)}function aE(a,b){let c=ae(b,this.size,4);a.uniform4fv(this.addr,c)}function aF(a,b){let c=ae(b,this.size,4);a.uniformMatrix2fv(this.addr,!1,c)}function aG(a,b){let c=ae(b,this.size,9);a.uniformMatrix3fv(this.addr,!1,c)}function aH(a,b){let c=ae(b,this.size,16);a.uniformMatrix4fv(this.addr,!1,c)}function aI(a,b){a.uniform1iv(this.addr,b)}function aJ(a,b){a.uniform2iv(this.addr,b)}function aK(a,b){a.uniform3iv(this.addr,b)}function aL(a,b){a.uniform4iv(this.addr,b)}function aM(a,b){a.uniform1uiv(this.addr,b)}function aN(a,b){a.uniform2uiv(this.addr,b)}function aO(a,b){a.uniform3uiv(this.addr,b)}function aP(a,b){a.uniform4uiv(this.addr,b)}function aQ(a,b,c){let d=this.cache,e=b.length,f=ah(c,e);af(d,f)||(a.uniform1iv(this.addr,f),ag(d,f));for(let a=0;a!==e;++a)c.setTexture2D(b[a]||W,f[a])}function aR(a,b,c){let d=this.cache,e=b.length,f=ah(c,e);af(d,f)||(a.uniform1iv(this.addr,f),ag(d,f));for(let a=0;a!==e;++a)c.setTexture3D(b[a]||Z,f[a])}function aS(a,b,c){let d=this.cache,e=b.length,f=ah(c,e);af(d,f)||(a.uniform1iv(this.addr,f),ag(d,f));for(let a=0;a!==e;++a)c.setTextureCube(b[a]||$,f[a])}function aT(a,b,c){let d=this.cache,e=b.length,f=ah(c,e);af(d,f)||(a.uniform1iv(this.addr,f),ag(d,f));for(let a=0;a!==e;++a)c.setTexture2DArray(b[a]||Y,f[a])}class aU{constructor(a,b,c){this.id=a,this.addr=c,this.cache=[],this.type=b.type,this.setValue=function(a){switch(a){case 5126:return ai;case 35664:return aj;case 35665:return ak;case 35666:return al;case 35674:return am;case 35675:return an;case 35676:return ao;case 5124:case 35670:return ap;case 35667:case 35671:return aq;case 35668:case 35672:return ar;case 35669:case 35673:return as;case 5125:return at;case 36294:return au;case 36295:return av;case 36296:return aw;case 35678:case 36198:case 36298:case 36306:case 35682:return ax;case 35679:case 36299:case 36307:return ay;case 35680:case 36300:case 36308:case 36293:return az;case 36289:case 36303:case 36311:case 36292:return aA}}(b.type)}}class aV{constructor(a,b,c){this.id=a,this.addr=c,this.cache=[],this.type=b.type,this.size=b.size,this.setValue=function(a){switch(a){case 5126:return aB;case 35664:return aC;case 35665:return aD;case 35666:return aE;case 35674:return aF;case 35675:return aG;case 35676:return aH;case 5124:case 35670:return aI;case 35667:case 35671:return aJ;case 35668:case 35672:return aK;case 35669:case 35673:return aL;case 5125:return aM;case 36294:return aN;case 36295:return aO;case 36296:return aP;case 35678:case 36198:case 36298:case 36306:case 35682:return aQ;case 35679:case 36299:case 36307:return aR;case 35680:case 36300:case 36308:case 36293:return aS;case 36289:case 36303:case 36311:case 36292:return aT}}(b.type)}}class aW{constructor(a){this.id=a,this.seq=[],this.map={}}setValue(a,b,c){let d=this.seq;for(let e=0,f=d.length;e!==f;++e){let f=d[e];f.setValue(a,b[f.id],c)}}}let aX=/(\w+)(\])?(\[|\.)?/g;function aY(a,b){a.seq.push(b),a.map[b.id]=b}class aZ{constructor(a,b){this.seq=[],this.map={};let c=a.getProgramParameter(b,a.ACTIVE_UNIFORMS);for(let d=0;d<c;++d){let c=a.getActiveUniform(b,d),e=a.getUniformLocation(b,c.name);!function(a,b,c){let d=a.name,e=d.length;for(aX.lastIndex=0;;){let f=aX.exec(d),g=aX.lastIndex,h=f[1],i="]"===f[2],j=f[3];if(i&&(h|=0),void 0===j||"["===j&&g+2===e){aY(c,void 0===j?new aU(h,a,b):new aV(h,a,b));break}{let a=c.map[h];void 0===a&&aY(c,a=new aW(h)),c=a}}}(c,e,this)}}setValue(a,b,c,d){let e=this.map[b];void 0!==e&&e.setValue(a,c,d)}setOptional(a,b,c){let d=b[c];void 0!==d&&this.setValue(a,c,d)}static upload(a,b,c,d){for(let e=0,f=b.length;e!==f;++e){let f=b[e],g=c[f.id];!1!==g.needsUpdate&&f.setValue(a,g.value,d)}}static seqWithValue(a,b){let c=[];for(let d=0,e=a.length;d!==e;++d){let e=a[d];e.id in b&&c.push(e)}return c}}function a$(a,b,c){let d=a.createShader(b);return a.shaderSource(d,c),a.compileShader(d),d}let a_=0,a0=new j.dwI;function a1(a,b,c){let d=a.getShaderParameter(b,a.COMPILE_STATUS),e=a.getShaderInfoLog(b).trim();if(d&&""===e)return"";let f=/ERROR: 0:(\d+)/.exec(e);if(!f)return e;{let d=parseInt(f[1]);return c.toUpperCase()+"\n\n"+e+"\n\n"+function(a,b){let c=a.split("\n"),d=[],e=Math.max(b-6,0),f=Math.min(b+6,c.length);for(let a=e;a<f;a++){let e=a+1;d.push(`${e===b?">":" "} ${e}: ${c[a]}`)}return d.join("\n")}(a.getShaderSource(b),d)}}let a2=new j.Pq0;function a3(a){return""!==a}function a4(a,b){let c=b.numSpotLightShadows+b.numSpotLightMaps-b.numSpotLightShadowsWithMaps;return a.replace(/NUM_DIR_LIGHTS/g,b.numDirLights).replace(/NUM_SPOT_LIGHTS/g,b.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,b.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,c).replace(/NUM_RECT_AREA_LIGHTS/g,b.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,b.numPointLights).replace(/NUM_HEMI_LIGHTS/g,b.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,b.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,b.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,b.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,b.numPointLightShadows)}function a5(a,b){return a.replace(/NUM_CLIPPING_PLANES/g,b.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,b.numClippingPlanes-b.numClipIntersection)}let a6=/^[ \t]*#include +<([\w\d./]+)>/gm;function a7(a){return a.replace(a6,a9)}let a8=new Map;function a9(a,b){let c=m[b];if(void 0===c){let a=a8.get(b);if(void 0!==a)c=m[a],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',b,a);else throw Error("Can not resolve #include <"+b+">")}return a7(c)}let ba=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function bb(a){return a.replace(ba,bc)}function bc(a,b,c,d){let e="";for(let a=parseInt(b);a<parseInt(c);a++)e+=d.replace(/\[\s*i\s*\]/g,"[ "+a+" ]").replace(/UNROLLED_LOOP_INDEX/g,a);return e}function bd(a){let b=`precision ${a.precision} float;
	precision ${a.precision} int;
	precision ${a.precision} sampler2D;
	precision ${a.precision} samplerCube;
	precision ${a.precision} sampler3D;
	precision ${a.precision} sampler2DArray;
	precision ${a.precision} sampler2DShadow;
	precision ${a.precision} samplerCubeShadow;
	precision ${a.precision} sampler2DArrayShadow;
	precision ${a.precision} isampler2D;
	precision ${a.precision} isampler3D;
	precision ${a.precision} isamplerCube;
	precision ${a.precision} isampler2DArray;
	precision ${a.precision} usampler2D;
	precision ${a.precision} usampler3D;
	precision ${a.precision} usamplerCube;
	precision ${a.precision} usampler2DArray;
	`;return"highp"===a.precision?b+="\n#define HIGH_PRECISION":"mediump"===a.precision?b+="\n#define MEDIUM_PRECISION":"lowp"===a.precision&&(b+="\n#define LOW_PRECISION"),b}function be(a,b,c,d){let e,f,g,h,i,k,l=a.getContext(),n=c.defines,o=c.vertexShader,p=c.fragmentShader,q=(i="SHADOWMAP_TYPE_BASIC",c.shadowMapType===j.QP0?i="SHADOWMAP_TYPE_PCF":c.shadowMapType===j.Wk7?i="SHADOWMAP_TYPE_PCF_SOFT":c.shadowMapType===j.RyA&&(i="SHADOWMAP_TYPE_VSM"),i),r=function(a){let b="ENVMAP_TYPE_CUBE";if(a.envMap)switch(a.envMapMode){case j.hy7:case j.xFO:b="ENVMAP_TYPE_CUBE";break;case j.Om:b="ENVMAP_TYPE_CUBE_UV"}return b}(c),s=(k="ENVMAP_MODE_REFLECTION",c.envMap&&c.envMapMode===j.xFO&&(k="ENVMAP_MODE_REFRACTION"),k),t=function(a){let b="ENVMAP_BLENDING_NONE";if(a.envMap)switch(a.combine){case j.caT:b="ENVMAP_BLENDING_MULTIPLY";break;case j.KRh:b="ENVMAP_BLENDING_MIX";break;case j.XrR:b="ENVMAP_BLENDING_ADD"}return b}(c),u=function(a){let b=a.envMapCubeUVHeight;if(null===b)return null;let c=Math.log2(b)-2;return{texelWidth:1/(3*Math.max(Math.pow(2,c),112)),texelHeight:1/b,maxMip:c}}(c),v=[c.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",c.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(a3).join("\n"),w=function(a){let b=[];for(let c in a){let d=a[c];!1!==d&&b.push("#define "+c+" "+d)}return b.join("\n")}(n),x=l.createProgram(),y=c.glslVersion?"#version "+c.glslVersion+"\n":"",z=c.numMultiviewViews;c.isRawShaderMaterial?((e=["#define SHADER_TYPE "+c.shaderType,"#define SHADER_NAME "+c.shaderName,w].filter(a3).join("\n")).length>0&&(e+="\n"),(f=["#define SHADER_TYPE "+c.shaderType,"#define SHADER_NAME "+c.shaderName,w].filter(a3).join("\n")).length>0&&(f+="\n")):(e=[bd(c),"#define SHADER_TYPE "+c.shaderType,"#define SHADER_NAME "+c.shaderName,w,c.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",c.batching?"#define USE_BATCHING":"",c.batchingColor?"#define USE_BATCHING_COLOR":"",c.instancing?"#define USE_INSTANCING":"",c.instancingColor?"#define USE_INSTANCING_COLOR":"",c.instancingMorph?"#define USE_INSTANCING_MORPH":"",c.useFog&&c.fog?"#define USE_FOG":"",c.useFog&&c.fogExp2?"#define FOG_EXP2":"",c.map?"#define USE_MAP":"",c.envMap?"#define USE_ENVMAP":"",c.envMap?"#define "+s:"",c.lightMap?"#define USE_LIGHTMAP":"",c.aoMap?"#define USE_AOMAP":"",c.bumpMap?"#define USE_BUMPMAP":"",c.normalMap?"#define USE_NORMALMAP":"",c.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",c.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",c.displacementMap?"#define USE_DISPLACEMENTMAP":"",c.emissiveMap?"#define USE_EMISSIVEMAP":"",c.anisotropy?"#define USE_ANISOTROPY":"",c.anisotropyMap?"#define USE_ANISOTROPYMAP":"",c.clearcoatMap?"#define USE_CLEARCOATMAP":"",c.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",c.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",c.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",c.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",c.specularMap?"#define USE_SPECULARMAP":"",c.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",c.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",c.roughnessMap?"#define USE_ROUGHNESSMAP":"",c.metalnessMap?"#define USE_METALNESSMAP":"",c.alphaMap?"#define USE_ALPHAMAP":"",c.alphaHash?"#define USE_ALPHAHASH":"",c.transmission?"#define USE_TRANSMISSION":"",c.transmissionMap?"#define USE_TRANSMISSIONMAP":"",c.thicknessMap?"#define USE_THICKNESSMAP":"",c.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",c.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",c.mapUv?"#define MAP_UV "+c.mapUv:"",c.alphaMapUv?"#define ALPHAMAP_UV "+c.alphaMapUv:"",c.lightMapUv?"#define LIGHTMAP_UV "+c.lightMapUv:"",c.aoMapUv?"#define AOMAP_UV "+c.aoMapUv:"",c.emissiveMapUv?"#define EMISSIVEMAP_UV "+c.emissiveMapUv:"",c.bumpMapUv?"#define BUMPMAP_UV "+c.bumpMapUv:"",c.normalMapUv?"#define NORMALMAP_UV "+c.normalMapUv:"",c.displacementMapUv?"#define DISPLACEMENTMAP_UV "+c.displacementMapUv:"",c.metalnessMapUv?"#define METALNESSMAP_UV "+c.metalnessMapUv:"",c.roughnessMapUv?"#define ROUGHNESSMAP_UV "+c.roughnessMapUv:"",c.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+c.anisotropyMapUv:"",c.clearcoatMapUv?"#define CLEARCOATMAP_UV "+c.clearcoatMapUv:"",c.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+c.clearcoatNormalMapUv:"",c.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+c.clearcoatRoughnessMapUv:"",c.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+c.iridescenceMapUv:"",c.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+c.iridescenceThicknessMapUv:"",c.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+c.sheenColorMapUv:"",c.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+c.sheenRoughnessMapUv:"",c.specularMapUv?"#define SPECULARMAP_UV "+c.specularMapUv:"",c.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+c.specularColorMapUv:"",c.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+c.specularIntensityMapUv:"",c.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+c.transmissionMapUv:"",c.thicknessMapUv?"#define THICKNESSMAP_UV "+c.thicknessMapUv:"",c.vertexTangents&&!1===c.flatShading?"#define USE_TANGENT":"",c.vertexColors?"#define USE_COLOR":"",c.vertexAlphas?"#define USE_COLOR_ALPHA":"",c.vertexUv1s?"#define USE_UV1":"",c.vertexUv2s?"#define USE_UV2":"",c.vertexUv3s?"#define USE_UV3":"",c.pointsUvs?"#define USE_POINTS_UV":"",c.flatShading?"#define FLAT_SHADED":"",c.skinning?"#define USE_SKINNING":"",c.morphTargets?"#define USE_MORPHTARGETS":"",c.morphNormals&&!1===c.flatShading?"#define USE_MORPHNORMALS":"",c.morphColors?"#define USE_MORPHCOLORS":"",c.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+c.morphTextureStride:"",c.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+c.morphTargetsCount:"",c.doubleSided?"#define DOUBLE_SIDED":"",c.flipSided?"#define FLIP_SIDED":"",c.shadowMapEnabled?"#define USE_SHADOWMAP":"",c.shadowMapEnabled?"#define "+q:"",c.sizeAttenuation?"#define USE_SIZEATTENUATION":"",c.numLightProbes>0?"#define USE_LIGHT_PROBES":"",c.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",c.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","	uniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif","\n"].filter(a3).join("\n"),f=[bd(c),"#define SHADER_TYPE "+c.shaderType,"#define SHADER_NAME "+c.shaderName,w,c.useFog&&c.fog?"#define USE_FOG":"",c.useFog&&c.fogExp2?"#define FOG_EXP2":"",c.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",c.map?"#define USE_MAP":"",c.matcap?"#define USE_MATCAP":"",c.envMap?"#define USE_ENVMAP":"",c.envMap?"#define "+r:"",c.envMap?"#define "+s:"",c.envMap?"#define "+t:"",u?"#define CUBEUV_TEXEL_WIDTH "+u.texelWidth:"",u?"#define CUBEUV_TEXEL_HEIGHT "+u.texelHeight:"",u?"#define CUBEUV_MAX_MIP "+u.maxMip+".0":"",c.lightMap?"#define USE_LIGHTMAP":"",c.aoMap?"#define USE_AOMAP":"",c.bumpMap?"#define USE_BUMPMAP":"",c.normalMap?"#define USE_NORMALMAP":"",c.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",c.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",c.emissiveMap?"#define USE_EMISSIVEMAP":"",c.anisotropy?"#define USE_ANISOTROPY":"",c.anisotropyMap?"#define USE_ANISOTROPYMAP":"",c.clearcoat?"#define USE_CLEARCOAT":"",c.clearcoatMap?"#define USE_CLEARCOATMAP":"",c.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",c.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",c.dispersion?"#define USE_DISPERSION":"",c.iridescence?"#define USE_IRIDESCENCE":"",c.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",c.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",c.specularMap?"#define USE_SPECULARMAP":"",c.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",c.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",c.roughnessMap?"#define USE_ROUGHNESSMAP":"",c.metalnessMap?"#define USE_METALNESSMAP":"",c.alphaMap?"#define USE_ALPHAMAP":"",c.alphaTest?"#define USE_ALPHATEST":"",c.alphaHash?"#define USE_ALPHAHASH":"",c.sheen?"#define USE_SHEEN":"",c.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",c.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",c.transmission?"#define USE_TRANSMISSION":"",c.transmissionMap?"#define USE_TRANSMISSIONMAP":"",c.thicknessMap?"#define USE_THICKNESSMAP":"",c.vertexTangents&&!1===c.flatShading?"#define USE_TANGENT":"",c.vertexColors||c.instancingColor||c.batchingColor?"#define USE_COLOR":"",c.vertexAlphas?"#define USE_COLOR_ALPHA":"",c.vertexUv1s?"#define USE_UV1":"",c.vertexUv2s?"#define USE_UV2":"",c.vertexUv3s?"#define USE_UV3":"",c.pointsUvs?"#define USE_POINTS_UV":"",c.gradientMap?"#define USE_GRADIENTMAP":"",c.flatShading?"#define FLAT_SHADED":"",c.doubleSided?"#define DOUBLE_SIDED":"",c.flipSided?"#define FLIP_SIDED":"",c.shadowMapEnabled?"#define USE_SHADOWMAP":"",c.shadowMapEnabled?"#define "+q:"",c.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",c.numLightProbes>0?"#define USE_LIGHT_PROBES":"",c.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",c.decodeVideoTextureEmissive?"#define DECODE_VIDEO_TEXTURE_EMISSIVE":"",c.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",c.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",c.toneMapping!==j.y_p?"#define TONE_MAPPING":"",c.toneMapping!==j.y_p?m.tonemapping_pars_fragment:"",c.toneMapping!==j.y_p?function(a,b){let c;switch(b){case j.kyO:c="Linear";break;case j.Mjd:c="Reinhard";break;case j.nNL:c="Cineon";break;case j.FV:c="ACESFilmic";break;case j.LAk:c="AgX";break;case j.aJ8:c="Neutral";break;case j.g7M:c="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",b),c="Linear"}return"vec3 "+a+"( vec3 color ) { return "+c+"ToneMapping( color ); }"}("toneMapping",c.toneMapping):"",c.dithering?"#define DITHERING":"",c.opaque?"#define OPAQUE":"",m.colorspace_pars_fragment,function(a,b){let c=function(a){j.ppV._getMatrix(a0,j.ppV.workingColorSpace,a);let b=`mat3( ${a0.elements.map(a=>a.toFixed(4))} )`;switch(j.ppV.getTransfer(a)){case j.VxR:return[b,"LinearTransferOETF"];case j.KLL:return[b,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space: ",a),[b,"LinearTransferOETF"]}}(b);return`vec4 ${a}( vec4 value ) {
	return ${c[1]}( vec4( value.rgb * ${c[0]}, value.a ) );
}`}("linearToOutputTexel",c.outputColorSpace),function(){j.ppV.getLuminanceCoefficients(a2);let a=a2.x.toFixed(4),b=a2.y.toFixed(4),c=a2.z.toFixed(4);return`float luminance( const in vec3 rgb ) {
	const vec3 weights = vec3( ${a}, ${b}, ${c} );
	return dot( weights, rgb );
}`}(),c.useDepthPacking?"#define DEPTH_PACKING "+c.depthPacking:"","\n"].filter(a3).join("\n")),o=a5(o=a4(o=a7(o),c),c),p=a5(p=a4(p=a7(p),c),c),o=bb(o),p=bb(p),!0!==c.isRawShaderMaterial&&(y="#version 300 es\n",e=[v,"#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+e,f=["#define varying in",c.glslVersion===j.Wdf?"":"layout(location = 0) out highp vec4 pc_fragColor;",c.glslVersion===j.Wdf?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+f,z>0&&(e=(e=["#extension GL_OVR_multiview : require","layout(num_views = "+z+") in;","#define VIEW_ID gl_ViewID_OVR"].join("\n")+"\n"+e).replace("uniform mat4 modelViewMatrix;\nuniform mat4 projectionMatrix;\nuniform mat4 viewMatrix;\nuniform mat3 normalMatrix;",["uniform mat4 modelViewMatrices["+z+"];","uniform mat4 projectionMatrices["+z+"];","uniform mat4 viewMatrices["+z+"];","uniform mat3 normalMatrices["+z+"];","#define modelViewMatrix modelViewMatrices[VIEW_ID]","#define projectionMatrix projectionMatrices[VIEW_ID]","#define viewMatrix viewMatrices[VIEW_ID]","#define normalMatrix normalMatrices[VIEW_ID]"].join("\n")),f=(f="#extension GL_OVR_multiview : require\n#define VIEW_ID gl_ViewID_OVR\n"+f).replace("uniform mat4 viewMatrix;",["uniform mat4 viewMatrices["+z+"];","#define viewMatrix viewMatrices[VIEW_ID]"].join("\n"))));let A=y+e+o,B=y+f+p,C=a$(l,l.VERTEX_SHADER,A),D=a$(l,l.FRAGMENT_SHADER,B);function E(b){if(a.debug.checkShaderErrors){let c=l.getProgramInfoLog(x).trim(),d=l.getShaderInfoLog(C).trim(),g=l.getShaderInfoLog(D).trim(),h=!0,i=!0;if(!1===l.getProgramParameter(x,l.LINK_STATUS))if(h=!1,"function"==typeof a.debug.onShaderError)a.debug.onShaderError(l,x,C,D);else{let a=a1(l,C,"vertex"),d=a1(l,D,"fragment");console.error("THREE.WebGLProgram: Shader Error "+l.getError()+" - VALIDATE_STATUS "+l.getProgramParameter(x,l.VALIDATE_STATUS)+"\n\nMaterial Name: "+b.name+"\nMaterial Type: "+b.type+"\n\nProgram Info Log: "+c+"\n"+a+"\n"+d)}else""!==c?console.warn("THREE.WebGLProgram: Program Info Log:",c):(""===d||""===g)&&(i=!1);i&&(b.diagnostics={runnable:h,programLog:c,vertexShader:{log:d,prefix:e},fragmentShader:{log:g,prefix:f}})}l.deleteShader(C),l.deleteShader(D),g=new aZ(l,x),h=function(a,b){let c={},d=a.getProgramParameter(b,a.ACTIVE_ATTRIBUTES);for(let e=0;e<d;e++){let d=a.getActiveAttrib(b,e),f=d.name,g=1;d.type===a.FLOAT_MAT2&&(g=2),d.type===a.FLOAT_MAT3&&(g=3),d.type===a.FLOAT_MAT4&&(g=4),c[f]={type:d.type,location:a.getAttribLocation(b,f),locationSize:g}}return c}(l,x)}l.attachShader(x,C),l.attachShader(x,D),void 0!==c.index0AttributeName?l.bindAttribLocation(x,0,c.index0AttributeName):!0===c.morphTargets&&l.bindAttribLocation(x,0,"position"),l.linkProgram(x),this.getUniforms=function(){return void 0===g&&E(this),g},this.getAttributes=function(){return void 0===h&&E(this),h};let F=!1===c.rendererExtensionParallelShaderCompile;return this.isReady=function(){return!1===F&&(F=l.getProgramParameter(x,37297)),F},this.destroy=function(){d.releaseStatesOfProgram(this),l.deleteProgram(x),this.program=void 0},this.type=c.shaderType,this.name=c.shaderName,this.id=a_++,this.cacheKey=b,this.usedTimes=1,this.program=x,this.vertexShader=C,this.fragmentShader=D,this.numMultiviewViews=z,this}let bf=0;class bg{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(a){let b=a.vertexShader,c=a.fragmentShader,d=this._getShaderStage(b),e=this._getShaderStage(c),f=this._getShaderCacheForMaterial(a);return!1===f.has(d)&&(f.add(d),d.usedTimes++),!1===f.has(e)&&(f.add(e),e.usedTimes++),this}remove(a){for(let b of this.materialCache.get(a))b.usedTimes--,0===b.usedTimes&&this.shaderCache.delete(b.code);return this.materialCache.delete(a),this}getVertexShaderID(a){return this._getShaderStage(a.vertexShader).id}getFragmentShaderID(a){return this._getShaderStage(a.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(a){let b=this.materialCache,c=b.get(a);return void 0===c&&(c=new Set,b.set(a,c)),c}_getShaderStage(a){let b=this.shaderCache,c=b.get(a);return void 0===c&&(c=new bh(a),b.set(a,c)),c}}class bh{constructor(a){this.id=bf++,this.code=a,this.usedTimes=0}}function bi(a,b,c,d,e,f,g){let h=new j.zgK,i=new bg,k=new Set,l=[],m=e.logarithmicDepthBuffer,n=e.vertexTextures,p=e.precision,q={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function r(a){return(k.add(a),0===a)?"uv":`uv${a}`}return{getParameters:function(f,h,l,s,t){let u,v,w,x,y=s.fog,z=t.geometry,A=f.isMeshStandardMaterial?s.environment:null,B=(f.isMeshStandardMaterial?c:b).get(f.envMap||A),C=B&&B.mapping===j.Om?B.image.height:null,D=q[f.type];null!==f.precision&&(p=e.getMaxPrecision(f.precision))!==f.precision&&console.warn("THREE.WebGLProgram.getParameters:",f.precision,"not supported, using",p,"instead.");let E=z.morphAttributes.position||z.morphAttributes.normal||z.morphAttributes.color,F=void 0!==E?E.length:0,G=0;if(void 0!==z.morphAttributes.position&&(G=1),void 0!==z.morphAttributes.normal&&(G=2),void 0!==z.morphAttributes.color&&(G=3),D){let a=o[D];u=a.vertexShader,v=a.fragmentShader}else u=f.vertexShader,v=f.fragmentShader,i.update(f),w=i.getVertexShaderID(f),x=i.getFragmentShaderID(f);let H=a.getRenderTarget(),I=a.state.buffers.depth.getReversed(),J=H&&H.isWebGLMultiviewRenderTarget?H.numViews:0,K=!0===t.isInstancedMesh,L=!0===t.isBatchedMesh,M=!!f.map,N=!!f.matcap,O=!!B,P=!!f.aoMap,Q=!!f.lightMap,R=!!f.bumpMap,S=!!f.normalMap,T=!!f.displacementMap,U=!!f.emissiveMap,V=!!f.metalnessMap,W=!!f.roughnessMap,X=f.anisotropy>0,Y=f.clearcoat>0,Z=f.dispersion>0,$=f.iridescence>0,_=f.sheen>0,aa=f.transmission>0,ab=X&&!!f.anisotropyMap,ac=Y&&!!f.clearcoatMap,ad=Y&&!!f.clearcoatNormalMap,ae=Y&&!!f.clearcoatRoughnessMap,af=$&&!!f.iridescenceMap,ag=$&&!!f.iridescenceThicknessMap,ah=_&&!!f.sheenColorMap,ai=_&&!!f.sheenRoughnessMap,aj=!!f.specularMap,ak=!!f.specularColorMap,al=!!f.specularIntensityMap,am=aa&&!!f.transmissionMap,an=aa&&!!f.thicknessMap,ao=!!f.gradientMap,ap=!!f.alphaMap,aq=f.alphaTest>0,ar=!!f.alphaHash,as=!!f.extensions,at=j.y_p;f.toneMapped&&(null===H||!0===H.isXRRenderTarget)&&(at=a.toneMapping);let au={shaderID:D,shaderType:f.type,shaderName:f.name,vertexShader:u,fragmentShader:v,defines:f.defines,customVertexShaderID:w,customFragmentShaderID:x,isRawShaderMaterial:!0===f.isRawShaderMaterial,glslVersion:f.glslVersion,precision:p,batching:L,batchingColor:L&&null!==t._colorsTexture,instancing:K,instancingColor:K&&null!==t.instanceColor,instancingMorph:K&&null!==t.morphTexture,supportsVertexTextures:n,numMultiviewViews:J,outputColorSpace:null===H?a.outputColorSpace:!0===H.isXRRenderTarget?H.texture.colorSpace:j.Zr2,alphaToCoverage:!!f.alphaToCoverage,map:M,matcap:N,envMap:O,envMapMode:O&&B.mapping,envMapCubeUVHeight:C,aoMap:P,lightMap:Q,bumpMap:R,normalMap:S,displacementMap:n&&T,emissiveMap:U,normalMapObjectSpace:S&&f.normalMapType===j.vyJ,normalMapTangentSpace:S&&f.normalMapType===j.bI3,metalnessMap:V,roughnessMap:W,anisotropy:X,anisotropyMap:ab,clearcoat:Y,clearcoatMap:ac,clearcoatNormalMap:ad,clearcoatRoughnessMap:ae,dispersion:Z,iridescence:$,iridescenceMap:af,iridescenceThicknessMap:ag,sheen:_,sheenColorMap:ah,sheenRoughnessMap:ai,specularMap:aj,specularColorMap:ak,specularIntensityMap:al,transmission:aa,transmissionMap:am,thicknessMap:an,gradientMap:ao,opaque:!1===f.transparent&&f.blending===j.NTi&&!1===f.alphaToCoverage,alphaMap:ap,alphaTest:aq,alphaHash:ar,combine:f.combine,mapUv:M&&r(f.map.channel),aoMapUv:P&&r(f.aoMap.channel),lightMapUv:Q&&r(f.lightMap.channel),bumpMapUv:R&&r(f.bumpMap.channel),normalMapUv:S&&r(f.normalMap.channel),displacementMapUv:T&&r(f.displacementMap.channel),emissiveMapUv:U&&r(f.emissiveMap.channel),metalnessMapUv:V&&r(f.metalnessMap.channel),roughnessMapUv:W&&r(f.roughnessMap.channel),anisotropyMapUv:ab&&r(f.anisotropyMap.channel),clearcoatMapUv:ac&&r(f.clearcoatMap.channel),clearcoatNormalMapUv:ad&&r(f.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:ae&&r(f.clearcoatRoughnessMap.channel),iridescenceMapUv:af&&r(f.iridescenceMap.channel),iridescenceThicknessMapUv:ag&&r(f.iridescenceThicknessMap.channel),sheenColorMapUv:ah&&r(f.sheenColorMap.channel),sheenRoughnessMapUv:ai&&r(f.sheenRoughnessMap.channel),specularMapUv:aj&&r(f.specularMap.channel),specularColorMapUv:ak&&r(f.specularColorMap.channel),specularIntensityMapUv:al&&r(f.specularIntensityMap.channel),transmissionMapUv:am&&r(f.transmissionMap.channel),thicknessMapUv:an&&r(f.thicknessMap.channel),alphaMapUv:ap&&r(f.alphaMap.channel),vertexTangents:!!z.attributes.tangent&&(S||X),vertexColors:f.vertexColors,vertexAlphas:!0===f.vertexColors&&!!z.attributes.color&&4===z.attributes.color.itemSize,pointsUvs:!0===t.isPoints&&!!z.attributes.uv&&(M||ap),fog:!!y,useFog:!0===f.fog,fogExp2:!!y&&y.isFogExp2,flatShading:!0===f.flatShading,sizeAttenuation:!0===f.sizeAttenuation,logarithmicDepthBuffer:m,reverseDepthBuffer:I,skinning:!0===t.isSkinnedMesh,morphTargets:void 0!==z.morphAttributes.position,morphNormals:void 0!==z.morphAttributes.normal,morphColors:void 0!==z.morphAttributes.color,morphTargetsCount:F,morphTextureStride:G,numDirLights:h.directional.length,numPointLights:h.point.length,numSpotLights:h.spot.length,numSpotLightMaps:h.spotLightMap.length,numRectAreaLights:h.rectArea.length,numHemiLights:h.hemi.length,numDirLightShadows:h.directionalShadowMap.length,numPointLightShadows:h.pointShadowMap.length,numSpotLightShadows:h.spotShadowMap.length,numSpotLightShadowsWithMaps:h.numSpotLightShadowsWithMaps,numLightProbes:h.numLightProbes,numClippingPlanes:g.numPlanes,numClipIntersection:g.numIntersection,dithering:f.dithering,shadowMapEnabled:a.shadowMap.enabled&&l.length>0,shadowMapType:a.shadowMap.type,toneMapping:at,decodeVideoTexture:M&&!0===f.map.isVideoTexture&&j.ppV.getTransfer(f.map.colorSpace)===j.KLL,decodeVideoTextureEmissive:U&&!0===f.emissiveMap.isVideoTexture&&j.ppV.getTransfer(f.emissiveMap.colorSpace)===j.KLL,premultipliedAlpha:f.premultipliedAlpha,doubleSided:f.side===j.$EB,flipSided:f.side===j.hsX,useDepthPacking:f.depthPacking>=0,depthPacking:f.depthPacking||0,index0AttributeName:f.index0AttributeName,extensionClipCullDistance:as&&!0===f.extensions.clipCullDistance&&d.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(as&&!0===f.extensions.multiDraw||L)&&d.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:d.has("KHR_parallel_shader_compile"),customProgramCacheKey:f.customProgramCacheKey()};return au.vertexUv1s=k.has(1),au.vertexUv2s=k.has(2),au.vertexUv3s=k.has(3),k.clear(),au},getProgramCacheKey:function(b){var c,d,e,f;let g=[];if(b.shaderID?g.push(b.shaderID):(g.push(b.customVertexShaderID),g.push(b.customFragmentShaderID)),void 0!==b.defines)for(let a in b.defines)g.push(a),g.push(b.defines[a]);return!1===b.isRawShaderMaterial&&(c=g,d=b,c.push(d.precision),c.push(d.outputColorSpace),c.push(d.envMapMode),c.push(d.envMapCubeUVHeight),c.push(d.mapUv),c.push(d.alphaMapUv),c.push(d.lightMapUv),c.push(d.aoMapUv),c.push(d.bumpMapUv),c.push(d.normalMapUv),c.push(d.displacementMapUv),c.push(d.emissiveMapUv),c.push(d.metalnessMapUv),c.push(d.roughnessMapUv),c.push(d.anisotropyMapUv),c.push(d.clearcoatMapUv),c.push(d.clearcoatNormalMapUv),c.push(d.clearcoatRoughnessMapUv),c.push(d.iridescenceMapUv),c.push(d.iridescenceThicknessMapUv),c.push(d.sheenColorMapUv),c.push(d.sheenRoughnessMapUv),c.push(d.specularMapUv),c.push(d.specularColorMapUv),c.push(d.specularIntensityMapUv),c.push(d.transmissionMapUv),c.push(d.thicknessMapUv),c.push(d.combine),c.push(d.fogExp2),c.push(d.sizeAttenuation),c.push(d.morphTargetsCount),c.push(d.morphAttributeCount),c.push(d.numDirLights),c.push(d.numPointLights),c.push(d.numSpotLights),c.push(d.numSpotLightMaps),c.push(d.numHemiLights),c.push(d.numRectAreaLights),c.push(d.numDirLightShadows),c.push(d.numPointLightShadows),c.push(d.numSpotLightShadows),c.push(d.numSpotLightShadowsWithMaps),c.push(d.numLightProbes),c.push(d.shadowMapType),c.push(d.toneMapping),c.push(d.numClippingPlanes),c.push(d.numClipIntersection),c.push(d.depthPacking),e=g,f=b,h.disableAll(),f.supportsVertexTextures&&h.enable(0),f.instancing&&h.enable(1),f.instancingColor&&h.enable(2),f.instancingMorph&&h.enable(3),f.matcap&&h.enable(4),f.envMap&&h.enable(5),f.normalMapObjectSpace&&h.enable(6),f.normalMapTangentSpace&&h.enable(7),f.clearcoat&&h.enable(8),f.iridescence&&h.enable(9),f.alphaTest&&h.enable(10),f.vertexColors&&h.enable(11),f.vertexAlphas&&h.enable(12),f.vertexUv1s&&h.enable(13),f.vertexUv2s&&h.enable(14),f.vertexUv3s&&h.enable(15),f.vertexTangents&&h.enable(16),f.anisotropy&&h.enable(17),f.alphaHash&&h.enable(18),f.batching&&h.enable(19),f.dispersion&&h.enable(20),f.batchingColor&&h.enable(21),e.push(h.mask),h.disableAll(),f.fog&&h.enable(0),f.useFog&&h.enable(1),f.flatShading&&h.enable(2),f.logarithmicDepthBuffer&&h.enable(3),f.reverseDepthBuffer&&h.enable(4),f.skinning&&h.enable(5),f.morphTargets&&h.enable(6),f.morphNormals&&h.enable(7),f.morphColors&&h.enable(8),f.premultipliedAlpha&&h.enable(9),f.shadowMapEnabled&&h.enable(10),f.doubleSided&&h.enable(11),f.flipSided&&h.enable(12),f.useDepthPacking&&h.enable(13),f.dithering&&h.enable(14),f.transmission&&h.enable(15),f.sheen&&h.enable(16),f.opaque&&h.enable(17),f.pointsUvs&&h.enable(18),f.decodeVideoTexture&&h.enable(19),f.decodeVideoTextureEmissive&&h.enable(20),f.alphaToCoverage&&h.enable(21),f.numMultiviewViews&&h.enable(21),e.push(h.mask),g.push(a.outputColorSpace)),g.push(b.customProgramCacheKey),g.join()},getUniforms:function(a){let b,c=q[a.type];if(c){let a=o[c];b=j.LlO.clone(a.uniforms)}else b=a.uniforms;return b},acquireProgram:function(b,c){let d;for(let a=0,b=l.length;a<b;a++){let b=l[a];if(b.cacheKey===c){d=b,++d.usedTimes;break}}return void 0===d&&(d=new be(a,c,b,f),l.push(d)),d},releaseProgram:function(a){if(0==--a.usedTimes){let b=l.indexOf(a);l[b]=l[l.length-1],l.pop(),a.destroy()}},releaseShaderCache:function(a){i.remove(a)},programs:l,dispose:function(){i.dispose()}}}function bj(){let a=new WeakMap;return{has:function(b){return a.has(b)},get:function(b){let c=a.get(b);return void 0===c&&(c={},a.set(b,c)),c},remove:function(b){a.delete(b)},update:function(b,c,d){a.get(b)[c]=d},dispose:function(){a=new WeakMap}}}function bk(a,b){return a.groupOrder!==b.groupOrder?a.groupOrder-b.groupOrder:a.renderOrder!==b.renderOrder?a.renderOrder-b.renderOrder:a.material.id!==b.material.id?a.material.id-b.material.id:a.z!==b.z?a.z-b.z:a.id-b.id}function bl(a,b){return a.groupOrder!==b.groupOrder?a.groupOrder-b.groupOrder:a.renderOrder!==b.renderOrder?a.renderOrder-b.renderOrder:a.z!==b.z?b.z-a.z:a.id-b.id}function bm(){let a=[],b=0,c=[],d=[],e=[];function f(c,d,e,f,g,h){let i=a[b];return void 0===i?(i={id:c.id,object:c,geometry:d,material:e,groupOrder:f,renderOrder:c.renderOrder,z:g,group:h},a[b]=i):(i.id=c.id,i.object=c,i.geometry=d,i.material=e,i.groupOrder=f,i.renderOrder=c.renderOrder,i.z=g,i.group=h),b++,i}return{opaque:c,transmissive:d,transparent:e,init:function(){b=0,c.length=0,d.length=0,e.length=0},push:function(a,b,g,h,i,j){let k=f(a,b,g,h,i,j);g.transmission>0?d.push(k):!0===g.transparent?e.push(k):c.push(k)},unshift:function(a,b,g,h,i,j){let k=f(a,b,g,h,i,j);g.transmission>0?d.unshift(k):!0===g.transparent?e.unshift(k):c.unshift(k)},finish:function(){for(let c=b,d=a.length;c<d;c++){let b=a[c];if(null===b.id)break;b.id=null,b.object=null,b.geometry=null,b.material=null,b.group=null}},sort:function(a,b){c.length>1&&c.sort(a||bk),d.length>1&&d.sort(b||bl),e.length>1&&e.sort(b||bl)}}}function bn(){let a=new WeakMap;return{get:function(b,c){let d,e=a.get(b);return void 0===e?(d=new bm,a.set(b,[d])):c>=e.length?(d=new bm,e.push(d)):d=e[c],d},dispose:function(){a=new WeakMap}}}function bo(){let a={};return{get:function(b){let c;if(void 0!==a[b.id])return a[b.id];switch(b.type){case"DirectionalLight":c={direction:new j.Pq0,color:new j.Q1f};break;case"SpotLight":c={position:new j.Pq0,direction:new j.Pq0,color:new j.Q1f,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":c={position:new j.Pq0,color:new j.Q1f,distance:0,decay:0};break;case"HemisphereLight":c={direction:new j.Pq0,skyColor:new j.Q1f,groundColor:new j.Q1f};break;case"RectAreaLight":c={color:new j.Q1f,position:new j.Pq0,halfWidth:new j.Pq0,halfHeight:new j.Pq0}}return a[b.id]=c,c}}}let bp=0;function bq(a,b){return 2*!!b.castShadow-2*!!a.castShadow+ +!!b.map-!!a.map}function br(a){let b=new bo,c=function(){let a={};return{get:function(b){let c;if(void 0!==a[b.id])return a[b.id];switch(b.type){case"DirectionalLight":case"SpotLight":c={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new j.I9Y};break;case"PointLight":c={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new j.I9Y,shadowCameraNear:1,shadowCameraFar:1e3}}return a[b.id]=c,c}}}(),d={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let a=0;a<9;a++)d.probe.push(new j.Pq0);let e=new j.Pq0,f=new j.kn4,g=new j.kn4;return{setup:function(e){let f=0,g=0,h=0;for(let a=0;a<9;a++)d.probe[a].set(0,0,0);let i=0,j=0,k=0,l=0,m=0,o=0,p=0,q=0,r=0,s=0,t=0;e.sort(bq);for(let a=0,n=e.length;a<n;a++){let n=e[a],u=n.color,v=n.intensity,w=n.distance,x=n.shadow&&n.shadow.map?n.shadow.map.texture:null;if(n.isAmbientLight)f+=u.r*v,g+=u.g*v,h+=u.b*v;else if(n.isLightProbe){for(let a=0;a<9;a++)d.probe[a].addScaledVector(n.sh.coefficients[a],v);t++}else if(n.isDirectionalLight){let a=b.get(n);if(a.color.copy(n.color).multiplyScalar(n.intensity),n.castShadow){let a=n.shadow,b=c.get(n);b.shadowIntensity=a.intensity,b.shadowBias=a.bias,b.shadowNormalBias=a.normalBias,b.shadowRadius=a.radius,b.shadowMapSize=a.mapSize,d.directionalShadow[i]=b,d.directionalShadowMap[i]=x,d.directionalShadowMatrix[i]=n.shadow.matrix,o++}d.directional[i]=a,i++}else if(n.isSpotLight){let a=b.get(n);a.position.setFromMatrixPosition(n.matrixWorld),a.color.copy(u).multiplyScalar(v),a.distance=w,a.coneCos=Math.cos(n.angle),a.penumbraCos=Math.cos(n.angle*(1-n.penumbra)),a.decay=n.decay,d.spot[k]=a;let e=n.shadow;if(n.map&&(d.spotLightMap[r]=n.map,r++,e.updateMatrices(n),n.castShadow&&s++),d.spotLightMatrix[k]=e.matrix,n.castShadow){let a=c.get(n);a.shadowIntensity=e.intensity,a.shadowBias=e.bias,a.shadowNormalBias=e.normalBias,a.shadowRadius=e.radius,a.shadowMapSize=e.mapSize,d.spotShadow[k]=a,d.spotShadowMap[k]=x,q++}k++}else if(n.isRectAreaLight){let a=b.get(n);a.color.copy(u).multiplyScalar(v),a.halfWidth.set(.5*n.width,0,0),a.halfHeight.set(0,.5*n.height,0),d.rectArea[l]=a,l++}else if(n.isPointLight){let a=b.get(n);if(a.color.copy(n.color).multiplyScalar(n.intensity),a.distance=n.distance,a.decay=n.decay,n.castShadow){let a=n.shadow,b=c.get(n);b.shadowIntensity=a.intensity,b.shadowBias=a.bias,b.shadowNormalBias=a.normalBias,b.shadowRadius=a.radius,b.shadowMapSize=a.mapSize,b.shadowCameraNear=a.camera.near,b.shadowCameraFar=a.camera.far,d.pointShadow[j]=b,d.pointShadowMap[j]=x,d.pointShadowMatrix[j]=n.shadow.matrix,p++}d.point[j]=a,j++}else if(n.isHemisphereLight){let a=b.get(n);a.skyColor.copy(n.color).multiplyScalar(v),a.groundColor.copy(n.groundColor).multiplyScalar(v),d.hemi[m]=a,m++}}l>0&&(!0===a.has("OES_texture_float_linear")?(d.rectAreaLTC1=n.LTC_FLOAT_1,d.rectAreaLTC2=n.LTC_FLOAT_2):(d.rectAreaLTC1=n.LTC_HALF_1,d.rectAreaLTC2=n.LTC_HALF_2)),d.ambient[0]=f,d.ambient[1]=g,d.ambient[2]=h;let u=d.hash;(u.directionalLength!==i||u.pointLength!==j||u.spotLength!==k||u.rectAreaLength!==l||u.hemiLength!==m||u.numDirectionalShadows!==o||u.numPointShadows!==p||u.numSpotShadows!==q||u.numSpotMaps!==r||u.numLightProbes!==t)&&(d.directional.length=i,d.spot.length=k,d.rectArea.length=l,d.point.length=j,d.hemi.length=m,d.directionalShadow.length=o,d.directionalShadowMap.length=o,d.pointShadow.length=p,d.pointShadowMap.length=p,d.spotShadow.length=q,d.spotShadowMap.length=q,d.directionalShadowMatrix.length=o,d.pointShadowMatrix.length=p,d.spotLightMatrix.length=q+r-s,d.spotLightMap.length=r,d.numSpotLightShadowsWithMaps=s,d.numLightProbes=t,u.directionalLength=i,u.pointLength=j,u.spotLength=k,u.rectAreaLength=l,u.hemiLength=m,u.numDirectionalShadows=o,u.numPointShadows=p,u.numSpotShadows=q,u.numSpotMaps=r,u.numLightProbes=t,d.version=bp++)},setupView:function(a,b){let c=0,h=0,i=0,j=0,k=0,l=b.matrixWorldInverse;for(let b=0,m=a.length;b<m;b++){let m=a[b];if(m.isDirectionalLight){let a=d.directional[c];a.direction.setFromMatrixPosition(m.matrixWorld),e.setFromMatrixPosition(m.target.matrixWorld),a.direction.sub(e),a.direction.transformDirection(l),c++}else if(m.isSpotLight){let a=d.spot[i];a.position.setFromMatrixPosition(m.matrixWorld),a.position.applyMatrix4(l),a.direction.setFromMatrixPosition(m.matrixWorld),e.setFromMatrixPosition(m.target.matrixWorld),a.direction.sub(e),a.direction.transformDirection(l),i++}else if(m.isRectAreaLight){let a=d.rectArea[j];a.position.setFromMatrixPosition(m.matrixWorld),a.position.applyMatrix4(l),g.identity(),f.copy(m.matrixWorld),f.premultiply(l),g.extractRotation(f),a.halfWidth.set(.5*m.width,0,0),a.halfHeight.set(0,.5*m.height,0),a.halfWidth.applyMatrix4(g),a.halfHeight.applyMatrix4(g),j++}else if(m.isPointLight){let a=d.point[h];a.position.setFromMatrixPosition(m.matrixWorld),a.position.applyMatrix4(l),h++}else if(m.isHemisphereLight){let a=d.hemi[k];a.direction.setFromMatrixPosition(m.matrixWorld),a.direction.transformDirection(l),k++}}},state:d}}function bs(a){let b=new br(a),c=[],d=[],e={lightsArray:c,shadowsArray:d,camera:null,lights:b,transmissionRenderTarget:{}};return{init:function(a){e.camera=a,c.length=0,d.length=0},state:e,setupLights:function(){b.setup(c)},setupLightsView:function(a){b.setupView(c,a)},pushLight:function(a){c.push(a)},pushShadow:function(a){d.push(a)}}}function bt(a){let b=new WeakMap;return{get:function(c,d=0){let e,f=b.get(c);return void 0===f?(e=new bs(a),b.set(c,[e])):d>=f.length?(e=new bs(a),f.push(e)):e=f[d],e},dispose:function(){b=new WeakMap}}}function bu(a,b,c){let d=new j.PPD,e=new j.I9Y,f=new j.I9Y,g=new j.IUQ,h=new j.CSG({depthPacking:j.N5j}),i=new j.aVO,k={},l=c.maxTextureSize,m={[j.hB5]:j.hsX,[j.hsX]:j.hB5,[j.$EB]:j.$EB},n=new j.BKk({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new j.I9Y},radius:{value:4}},vertexShader:"void main() {\n	gl_Position = vec4( position, 1.0 );\n}",fragmentShader:"uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n	const float samples = float( VSM_SAMPLES );\n	float mean = 0.0;\n	float squared_mean = 0.0;\n	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\n	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;\n	for ( float i = 0.0; i < samples; i ++ ) {\n		float uvOffset = uvStart + i * uvStride;\n		#ifdef HORIZONTAL_PASS\n			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\n			mean += distribution.x;\n			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n		#else\n			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\n			mean += depth;\n			squared_mean += depth * depth;\n		#endif\n	}\n	mean = mean / samples;\n	squared_mean = squared_mean / samples;\n	float std_dev = sqrt( squared_mean - mean * mean );\n	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}"}),o=n.clone();o.defines.HORIZONTAL_PASS=1;let p=new j.LoY;p.setAttribute("position",new j.THS(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));let q=new j.eaF(p,n),r=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=j.QP0;let s=this.type;function t(b,c,d,e){let f=null,g=!0===d.isPointLight?b.customDistanceMaterial:b.customDepthMaterial;if(void 0!==g)f=g;else if(f=!0===d.isPointLight?i:h,a.localClippingEnabled&&!0===c.clipShadows&&Array.isArray(c.clippingPlanes)&&0!==c.clippingPlanes.length||c.displacementMap&&0!==c.displacementScale||c.alphaMap&&c.alphaTest>0||c.map&&c.alphaTest>0){let a=f.uuid,b=c.uuid,d=k[a];void 0===d&&(d={},k[a]=d);let e=d[b];void 0===e&&(e=f.clone(),d[b]=e,c.addEventListener("dispose",u)),f=e}return f.visible=c.visible,f.wireframe=c.wireframe,e===j.RyA?f.side=null!==c.shadowSide?c.shadowSide:c.side:f.side=null!==c.shadowSide?c.shadowSide:m[c.side],f.alphaMap=c.alphaMap,f.alphaTest=c.alphaTest,f.map=c.map,f.clipShadows=c.clipShadows,f.clippingPlanes=c.clippingPlanes,f.clipIntersection=c.clipIntersection,f.displacementMap=c.displacementMap,f.displacementScale=c.displacementScale,f.displacementBias=c.displacementBias,f.wireframeLinewidth=c.wireframeLinewidth,f.linewidth=c.linewidth,!0===d.isPointLight&&!0===f.isMeshDistanceMaterial&&(a.properties.get(f).light=d),f}function u(a){for(let b in a.target.removeEventListener("dispose",u),k){let c=k[b],d=a.target.uuid;d in c&&(c[d].dispose(),delete c[d])}}this.render=function(c,h,i){if(!1===r.enabled||!1===r.autoUpdate&&!1===r.needsUpdate||0===c.length)return;let k=a.getRenderTarget(),m=a.getActiveCubeFace(),p=a.getActiveMipmapLevel(),u=a.state;u.setBlending(j.XIg),u.buffers.color.setClear(1,1,1,1),u.buffers.depth.setTest(!0),u.setScissorTest(!1);let v=s!==j.RyA&&this.type===j.RyA,w=s===j.RyA&&this.type!==j.RyA;for(let k=0,m=c.length;k<m;k++){let m=c[k],p=m.shadow;if(void 0===p){console.warn("THREE.WebGLShadowMap:",m,"has no shadow.");continue}if(!1===p.autoUpdate&&!1===p.needsUpdate)continue;e.copy(p.mapSize);let r=p.getFrameExtents();if(e.multiply(r),f.copy(p.mapSize),(e.x>l||e.y>l)&&(e.x>l&&(f.x=Math.floor(l/r.x),e.x=f.x*r.x,p.mapSize.x=f.x),e.y>l&&(f.y=Math.floor(l/r.y),e.y=f.y*r.y,p.mapSize.y=f.y)),null===p.map||!0===v||!0===w){let a=this.type!==j.RyA?{minFilter:j.hxR,magFilter:j.hxR}:{};null!==p.map&&p.map.dispose(),p.map=new j.nWS(e.x,e.y,a),p.map.texture.name=m.name+".shadowMap",p.camera.updateProjectionMatrix()}a.setRenderTarget(p.map),a.clear();let s=p.getViewportCount();for(let c=0;c<s;c++){let e=p.getViewport(c);g.set(f.x*e.x,f.y*e.y,f.x*e.z,f.y*e.w),u.viewport(g),p.updateMatrices(m,c),d=p.getFrustum(),function c(e,f,g,h,i){if(!1===e.visible)return;if(e.layers.test(f.layers)&&(e.isMesh||e.isLine||e.isPoints)&&(e.castShadow||e.receiveShadow&&i===j.RyA)&&(!e.frustumCulled||d.intersectsObject(e))){e.modelViewMatrix.multiplyMatrices(g.matrixWorldInverse,e.matrixWorld);let c=b.update(e),d=e.material;if(Array.isArray(d)){let b=c.groups;for(let j=0,k=b.length;j<k;j++){let k=b[j],l=d[k.materialIndex];if(l&&l.visible){let b=t(e,l,h,i);e.onBeforeShadow(a,e,f,g,c,b,k),a.renderBufferDirect(g,null,c,b,e,k),e.onAfterShadow(a,e,f,g,c,b,k)}}}else if(d.visible){let b=t(e,d,h,i);e.onBeforeShadow(a,e,f,g,c,b,null),a.renderBufferDirect(g,null,c,b,e,null),e.onAfterShadow(a,e,f,g,c,b,null)}}let k=e.children;for(let a=0,b=k.length;a<b;a++)c(k[a],f,g,h,i)}(h,i,p.camera,m,this.type)}!0!==p.isPointLightShadow&&this.type===j.RyA&&function(c,d){let f=b.update(q);n.defines.VSM_SAMPLES!==c.blurSamples&&(n.defines.VSM_SAMPLES=c.blurSamples,o.defines.VSM_SAMPLES=c.blurSamples,n.needsUpdate=!0,o.needsUpdate=!0),null===c.mapPass&&(c.mapPass=new j.nWS(e.x,e.y)),n.uniforms.shadow_pass.value=c.map.texture,n.uniforms.resolution.value=c.mapSize,n.uniforms.radius.value=c.radius,a.setRenderTarget(c.mapPass),a.clear(),a.renderBufferDirect(d,null,f,n,q,null),o.uniforms.shadow_pass.value=c.mapPass.texture,o.uniforms.resolution.value=c.mapSize,o.uniforms.radius.value=c.radius,a.setRenderTarget(c.map),a.clear(),a.renderBufferDirect(d,null,f,o,q,null)}(p,i),p.needsUpdate=!1}s=this.type,r.needsUpdate=!1,a.setRenderTarget(k,m,p)}}let bv={[j.eHc]:j.lGu,[j.brA]:j.K52,[j.U3G]:j.bw0,[j.xSv]:j.Gwm,[j.lGu]:j.eHc,[j.K52]:j.brA,[j.bw0]:j.U3G,[j.Gwm]:j.xSv};function bw(a,b){let c=new function(){let b=!1,c=new j.IUQ,d=null,e=new j.IUQ(0,0,0,0);return{setMask:function(c){d===c||b||(a.colorMask(c,c,c,c),d=c)},setLocked:function(a){b=a},setClear:function(b,d,f,g,h){!0===h&&(b*=g,d*=g,f*=g),c.set(b,d,f,g),!1===e.equals(c)&&(a.clearColor(b,d,f,g),e.copy(c))},reset:function(){b=!1,d=null,e.set(-1,0,0,0)}}},d=new function(){let c=!1,d=!1,e=null,f=null,g=null;return{setReversed:function(a){if(d!==a){let a=b.get("EXT_clip_control");d?a.clipControlEXT(a.LOWER_LEFT_EXT,a.ZERO_TO_ONE_EXT):a.clipControlEXT(a.LOWER_LEFT_EXT,a.NEGATIVE_ONE_TO_ONE_EXT);let c=g;g=null,this.setClear(c)}d=a},getReversed:function(){return d},setTest:function(b){b?O(a.DEPTH_TEST):P(a.DEPTH_TEST)},setMask:function(b){e===b||c||(a.depthMask(b),e=b)},setFunc:function(b){if(d&&(b=bv[b]),f!==b){switch(b){case j.eHc:a.depthFunc(a.NEVER);break;case j.lGu:a.depthFunc(a.ALWAYS);break;case j.brA:a.depthFunc(a.LESS);break;case j.xSv:a.depthFunc(a.LEQUAL);break;case j.U3G:a.depthFunc(a.EQUAL);break;case j.Gwm:a.depthFunc(a.GEQUAL);break;case j.K52:a.depthFunc(a.GREATER);break;case j.bw0:a.depthFunc(a.NOTEQUAL);break;default:a.depthFunc(a.LEQUAL)}f=b}},setLocked:function(a){c=a},setClear:function(b){g!==b&&(d&&(b=1-b),a.clearDepth(b),g=b)},reset:function(){c=!1,e=null,f=null,g=null,d=!1}}},e=new function(){let b=!1,c=null,d=null,e=null,f=null,g=null,h=null,i=null,j=null;return{setTest:function(c){b||(c?O(a.STENCIL_TEST):P(a.STENCIL_TEST))},setMask:function(d){c===d||b||(a.stencilMask(d),c=d)},setFunc:function(b,c,g){(d!==b||e!==c||f!==g)&&(a.stencilFunc(b,c,g),d=b,e=c,f=g)},setOp:function(b,c,d){(g!==b||h!==c||i!==d)&&(a.stencilOp(b,c,d),g=b,h=c,i=d)},setLocked:function(a){b=a},setClear:function(b){j!==b&&(a.clearStencil(b),j=b)},reset:function(){b=!1,c=null,d=null,e=null,f=null,g=null,h=null,i=null,j=null}}},f=new WeakMap,g=new WeakMap,h={},i={},k=new WeakMap,l=[],m=null,n=!1,o=null,p=null,q=null,r=null,s=null,t=null,u=null,v=new j.Q1f(0,0,0),w=0,x=!1,y=null,z=null,A=null,B=null,C=null,D=a.getParameter(a.MAX_COMBINED_TEXTURE_IMAGE_UNITS),E=!1,F=a.getParameter(a.VERSION);-1!==F.indexOf("WebGL")?E=parseFloat(/^WebGL (\d)/.exec(F)[1])>=1:-1!==F.indexOf("OpenGL ES")&&(E=parseFloat(/^OpenGL ES (\d)/.exec(F)[1])>=2);let G=null,H={},I=a.getParameter(a.SCISSOR_BOX),J=a.getParameter(a.VIEWPORT),K=new j.IUQ().fromArray(I),L=new j.IUQ().fromArray(J);function M(b,c,d,e){let f=new Uint8Array(4),g=a.createTexture();a.bindTexture(b,g),a.texParameteri(b,a.TEXTURE_MIN_FILTER,a.NEAREST),a.texParameteri(b,a.TEXTURE_MAG_FILTER,a.NEAREST);for(let g=0;g<d;g++)b===a.TEXTURE_3D||b===a.TEXTURE_2D_ARRAY?a.texImage3D(c,0,a.RGBA,1,1,e,0,a.RGBA,a.UNSIGNED_BYTE,f):a.texImage2D(c+g,0,a.RGBA,1,1,0,a.RGBA,a.UNSIGNED_BYTE,f);return g}let N={};function O(b){!0!==h[b]&&(a.enable(b),h[b]=!0)}function P(b){!1!==h[b]&&(a.disable(b),h[b]=!1)}N[a.TEXTURE_2D]=M(a.TEXTURE_2D,a.TEXTURE_2D,1),N[a.TEXTURE_CUBE_MAP]=M(a.TEXTURE_CUBE_MAP,a.TEXTURE_CUBE_MAP_POSITIVE_X,6),N[a.TEXTURE_2D_ARRAY]=M(a.TEXTURE_2D_ARRAY,a.TEXTURE_2D_ARRAY,1,1),N[a.TEXTURE_3D]=M(a.TEXTURE_3D,a.TEXTURE_3D,1,1),c.setClear(0,0,0,1),d.setClear(1),e.setClear(0),O(a.DEPTH_TEST),d.setFunc(j.xSv),T(!1),U(j.Vb5),O(a.CULL_FACE),S(j.XIg);let Q={[j.gO9]:a.FUNC_ADD,[j.FXf]:a.FUNC_SUBTRACT,[j.nST]:a.FUNC_REVERSE_SUBTRACT};Q[j.znC]=a.MIN,Q[j.$ei]=a.MAX;let R={[j.ojh]:a.ZERO,[j.qad]:a.ONE,[j.f4X]:a.SRC_COLOR,[j.ie2]:a.SRC_ALPHA,[j.hgQ]:a.SRC_ALPHA_SATURATE,[j.wn6]:a.DST_COLOR,[j.hdd]:a.DST_ALPHA,[j.LiQ]:a.ONE_MINUS_SRC_COLOR,[j.OuU]:a.ONE_MINUS_SRC_ALPHA,[j.aEY]:a.ONE_MINUS_DST_COLOR,[j.Nt7]:a.ONE_MINUS_DST_ALPHA,[j.RrE]:a.CONSTANT_COLOR,[j.$Yl]:a.ONE_MINUS_CONSTANT_COLOR,[j.e0p]:a.CONSTANT_ALPHA,[j.ov9]:a.ONE_MINUS_CONSTANT_ALPHA};function S(b,c,d,e,f,g,h,i,k,l){if(b===j.XIg){!0===n&&(P(a.BLEND),n=!1);return}if(!1===n&&(O(a.BLEND),n=!0),b!==j.bCz){if(b!==o||l!==x){if((p!==j.gO9||s!==j.gO9)&&(a.blendEquation(a.FUNC_ADD),p=j.gO9,s=j.gO9),l)switch(b){case j.NTi:a.blendFuncSeparate(a.ONE,a.ONE_MINUS_SRC_ALPHA,a.ONE,a.ONE_MINUS_SRC_ALPHA);break;case j.EZo:a.blendFunc(a.ONE,a.ONE);break;case j.Kwu:a.blendFuncSeparate(a.ZERO,a.ONE_MINUS_SRC_COLOR,a.ZERO,a.ONE);break;case j.EdD:a.blendFuncSeparate(a.ZERO,a.SRC_COLOR,a.ZERO,a.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",b)}else switch(b){case j.NTi:a.blendFuncSeparate(a.SRC_ALPHA,a.ONE_MINUS_SRC_ALPHA,a.ONE,a.ONE_MINUS_SRC_ALPHA);break;case j.EZo:a.blendFunc(a.SRC_ALPHA,a.ONE);break;case j.Kwu:a.blendFuncSeparate(a.ZERO,a.ONE_MINUS_SRC_COLOR,a.ZERO,a.ONE);break;case j.EdD:a.blendFunc(a.ZERO,a.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",b)}q=null,r=null,t=null,u=null,v.set(0,0,0),w=0,o=b,x=l}return}f=f||c,g=g||d,h=h||e,(c!==p||f!==s)&&(a.blendEquationSeparate(Q[c],Q[f]),p=c,s=f),(d!==q||e!==r||g!==t||h!==u)&&(a.blendFuncSeparate(R[d],R[e],R[g],R[h]),q=d,r=e,t=g,u=h),(!1===i.equals(v)||k!==w)&&(a.blendColor(i.r,i.g,i.b,k),v.copy(i),w=k),o=b,x=!1}function T(b){y!==b&&(b?a.frontFace(a.CW):a.frontFace(a.CCW),y=b)}function U(b){b!==j.WNZ?(O(a.CULL_FACE),b!==z&&(b===j.Vb5?a.cullFace(a.BACK):b===j.Jnc?a.cullFace(a.FRONT):a.cullFace(a.FRONT_AND_BACK))):P(a.CULL_FACE),z=b}function V(b,c,d){b?(O(a.POLYGON_OFFSET_FILL),(B!==c||C!==d)&&(a.polygonOffset(c,d),B=c,C=d)):P(a.POLYGON_OFFSET_FILL)}return{buffers:{color:c,depth:d,stencil:e},enable:O,disable:P,bindFramebuffer:function(b,c){return i[b]!==c&&(a.bindFramebuffer(b,c),i[b]=c,b===a.DRAW_FRAMEBUFFER&&(i[a.FRAMEBUFFER]=c),b===a.FRAMEBUFFER&&(i[a.DRAW_FRAMEBUFFER]=c),!0)},drawBuffers:function(b,c){let d=l,e=!1;if(b){void 0===(d=k.get(c))&&(d=[],k.set(c,d));let f=b.textures;if(d.length!==f.length||d[0]!==a.COLOR_ATTACHMENT0){for(let b=0,c=f.length;b<c;b++)d[b]=a.COLOR_ATTACHMENT0+b;d.length=f.length,e=!0}}else d[0]!==a.BACK&&(d[0]=a.BACK,e=!0);e&&a.drawBuffers(d)},useProgram:function(b){return m!==b&&(a.useProgram(b),m=b,!0)},setBlending:S,setMaterial:function(b,f){b.side===j.$EB?P(a.CULL_FACE):O(a.CULL_FACE);let g=b.side===j.hsX;f&&(g=!g),T(g),b.blending===j.NTi&&!1===b.transparent?S(j.XIg):S(b.blending,b.blendEquation,b.blendSrc,b.blendDst,b.blendEquationAlpha,b.blendSrcAlpha,b.blendDstAlpha,b.blendColor,b.blendAlpha,b.premultipliedAlpha),d.setFunc(b.depthFunc),d.setTest(b.depthTest),d.setMask(b.depthWrite),c.setMask(b.colorWrite);let h=b.stencilWrite;e.setTest(h),h&&(e.setMask(b.stencilWriteMask),e.setFunc(b.stencilFunc,b.stencilRef,b.stencilFuncMask),e.setOp(b.stencilFail,b.stencilZFail,b.stencilZPass)),V(b.polygonOffset,b.polygonOffsetFactor,b.polygonOffsetUnits),!0===b.alphaToCoverage?O(a.SAMPLE_ALPHA_TO_COVERAGE):P(a.SAMPLE_ALPHA_TO_COVERAGE)},setFlipSided:T,setCullFace:U,setLineWidth:function(b){b!==A&&(E&&a.lineWidth(b),A=b)},setPolygonOffset:V,setScissorTest:function(b){b?O(a.SCISSOR_TEST):P(a.SCISSOR_TEST)},activeTexture:function(b){void 0===b&&(b=a.TEXTURE0+D-1),G!==b&&(a.activeTexture(b),G=b)},bindTexture:function(b,c,d){void 0===d&&(d=null===G?a.TEXTURE0+D-1:G);let e=H[d];void 0===e&&(e={type:void 0,texture:void 0},H[d]=e),(e.type!==b||e.texture!==c)&&(G!==d&&(a.activeTexture(d),G=d),a.bindTexture(b,c||N[b]),e.type=b,e.texture=c)},unbindTexture:function(){let b=H[G];void 0!==b&&void 0!==b.type&&(a.bindTexture(b.type,null),b.type=void 0,b.texture=void 0)},compressedTexImage2D:function(){try{a.compressedTexImage2D.apply(a,arguments)}catch(a){console.error("THREE.WebGLState:",a)}},compressedTexImage3D:function(){try{a.compressedTexImage3D.apply(a,arguments)}catch(a){console.error("THREE.WebGLState:",a)}},texImage2D:function(){try{a.texImage2D.apply(a,arguments)}catch(a){console.error("THREE.WebGLState:",a)}},texImage3D:function(){try{a.texImage3D.apply(a,arguments)}catch(a){console.error("THREE.WebGLState:",a)}},updateUBOMapping:function(b,c){let d=g.get(c);void 0===d&&(d=new WeakMap,g.set(c,d));let e=d.get(b);void 0===e&&(e=a.getUniformBlockIndex(c,b.name),d.set(b,e))},uniformBlockBinding:function(b,c){let d=g.get(c).get(b);f.get(c)!==d&&(a.uniformBlockBinding(c,d,b.__bindingPointIndex),f.set(c,d))},texStorage2D:function(){try{a.texStorage2D.apply(a,arguments)}catch(a){console.error("THREE.WebGLState:",a)}},texStorage3D:function(){try{a.texStorage3D.apply(a,arguments)}catch(a){console.error("THREE.WebGLState:",a)}},texSubImage2D:function(){try{a.texSubImage2D.apply(a,arguments)}catch(a){console.error("THREE.WebGLState:",a)}},texSubImage3D:function(){try{a.texSubImage3D.apply(a,arguments)}catch(a){console.error("THREE.WebGLState:",a)}},compressedTexSubImage2D:function(){try{a.compressedTexSubImage2D.apply(a,arguments)}catch(a){console.error("THREE.WebGLState:",a)}},compressedTexSubImage3D:function(){try{a.compressedTexSubImage3D.apply(a,arguments)}catch(a){console.error("THREE.WebGLState:",a)}},scissor:function(b){!1===K.equals(b)&&(a.scissor(b.x,b.y,b.z,b.w),K.copy(b))},viewport:function(b){!1===L.equals(b)&&(a.viewport(b.x,b.y,b.z,b.w),L.copy(b))},reset:function(){a.disable(a.BLEND),a.disable(a.CULL_FACE),a.disable(a.DEPTH_TEST),a.disable(a.POLYGON_OFFSET_FILL),a.disable(a.SCISSOR_TEST),a.disable(a.STENCIL_TEST),a.disable(a.SAMPLE_ALPHA_TO_COVERAGE),a.blendEquation(a.FUNC_ADD),a.blendFunc(a.ONE,a.ZERO),a.blendFuncSeparate(a.ONE,a.ZERO,a.ONE,a.ZERO),a.blendColor(0,0,0,0),a.colorMask(!0,!0,!0,!0),a.clearColor(0,0,0,0),a.depthMask(!0),a.depthFunc(a.LESS),d.setReversed(!1),a.clearDepth(1),a.stencilMask(0xffffffff),a.stencilFunc(a.ALWAYS,0,0xffffffff),a.stencilOp(a.KEEP,a.KEEP,a.KEEP),a.clearStencil(0),a.cullFace(a.BACK),a.frontFace(a.CCW),a.polygonOffset(0,0),a.activeTexture(a.TEXTURE0),a.bindFramebuffer(a.FRAMEBUFFER,null),a.bindFramebuffer(a.DRAW_FRAMEBUFFER,null),a.bindFramebuffer(a.READ_FRAMEBUFFER,null),a.useProgram(null),a.lineWidth(1),a.scissor(0,0,a.canvas.width,a.canvas.height),a.viewport(0,0,a.canvas.width,a.canvas.height),h={},G=null,H={},i={},k=new WeakMap,l=[],m=null,n=!1,o=null,p=null,q=null,r=null,s=null,t=null,u=null,v=new j.Q1f(0,0,0),w=0,x=!1,y=null,z=null,A=null,B=null,C=null,K.set(0,0,a.canvas.width,a.canvas.height),L.set(0,0,a.canvas.width,a.canvas.height),c.reset(),d.reset(),e.reset()}}}function bx(a,b,c,d,e,f,g){let h,i=b.has("WEBGL_multisampled_render_to_texture")?b.get("WEBGL_multisampled_render_to_texture"):null,k="undefined"!=typeof navigator&&/OculusBrowser/g.test(navigator.userAgent),l=b.has("OCULUS_multiview")?b.get("OCULUS_multiview"):null,m=new j.I9Y,n=new WeakMap,o=new WeakMap,p=[],q=!1,r=!1;try{r="undefined"!=typeof OffscreenCanvas&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch(a){}function s(a,b){return r?new OffscreenCanvas(a,b):(0,j.qq$)("canvas")}function t(a,b,c){let d=1,e=U(a);if((e.width>c||e.height>c)&&(d=c/Math.max(e.width,e.height)),d<1)if("undefined"!=typeof HTMLImageElement&&a instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&a instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&a instanceof ImageBitmap||"undefined"!=typeof VideoFrame&&a instanceof VideoFrame){let c=Math.floor(d*e.width),f=Math.floor(d*e.height);void 0===h&&(h=s(c,f));let g=b?s(c,f):h;return g.width=c,g.height=f,g.getContext("2d").drawImage(a,0,0,c,f),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+e.width+"x"+e.height+") to ("+c+"x"+f+")."),g}else"data"in a&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+e.width+"x"+e.height+").");return a}function u(a){return a.generateMipmaps}function v(b){a.generateMipmap(b)}function w(c,d,e,f,g=!1){if(null!==c){if(void 0!==a[c])return a[c];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+c+"'")}let h=d;if(d===a.RED&&(e===a.FLOAT&&(h=a.R32F),e===a.HALF_FLOAT&&(h=a.R16F),e===a.UNSIGNED_BYTE&&(h=a.R8)),d===a.RED_INTEGER&&(e===a.UNSIGNED_BYTE&&(h=a.R8UI),e===a.UNSIGNED_SHORT&&(h=a.R16UI),e===a.UNSIGNED_INT&&(h=a.R32UI),e===a.BYTE&&(h=a.R8I),e===a.SHORT&&(h=a.R16I),e===a.INT&&(h=a.R32I)),d===a.RG&&(e===a.FLOAT&&(h=a.RG32F),e===a.HALF_FLOAT&&(h=a.RG16F),e===a.UNSIGNED_BYTE&&(h=a.RG8)),d===a.RG_INTEGER&&(e===a.UNSIGNED_BYTE&&(h=a.RG8UI),e===a.UNSIGNED_SHORT&&(h=a.RG16UI),e===a.UNSIGNED_INT&&(h=a.RG32UI),e===a.BYTE&&(h=a.RG8I),e===a.SHORT&&(h=a.RG16I),e===a.INT&&(h=a.RG32I)),d===a.RGB_INTEGER&&(e===a.UNSIGNED_BYTE&&(h=a.RGB8UI),e===a.UNSIGNED_SHORT&&(h=a.RGB16UI),e===a.UNSIGNED_INT&&(h=a.RGB32UI),e===a.BYTE&&(h=a.RGB8I),e===a.SHORT&&(h=a.RGB16I),e===a.INT&&(h=a.RGB32I)),d===a.RGBA_INTEGER&&(e===a.UNSIGNED_BYTE&&(h=a.RGBA8UI),e===a.UNSIGNED_SHORT&&(h=a.RGBA16UI),e===a.UNSIGNED_INT&&(h=a.RGBA32UI),e===a.BYTE&&(h=a.RGBA8I),e===a.SHORT&&(h=a.RGBA16I),e===a.INT&&(h=a.RGBA32I)),d===a.RGB&&e===a.UNSIGNED_INT_5_9_9_9_REV&&(h=a.RGB9_E5),d===a.RGBA){let b=g?j.VxR:j.ppV.getTransfer(f);e===a.FLOAT&&(h=a.RGBA32F),e===a.HALF_FLOAT&&(h=a.RGBA16F),e===a.UNSIGNED_BYTE&&(h=b===j.KLL?a.SRGB8_ALPHA8:a.RGBA8),e===a.UNSIGNED_SHORT_4_4_4_4&&(h=a.RGBA4),e===a.UNSIGNED_SHORT_5_5_5_1&&(h=a.RGB5_A1)}return(h===a.R16F||h===a.R32F||h===a.RG16F||h===a.RG32F||h===a.RGBA16F||h===a.RGBA32F)&&b.get("EXT_color_buffer_float"),h}function x(b,c){let d;return b?null===c||c===j.bkx||c===j.V3x?d=a.DEPTH24_STENCIL8:c===j.RQf?d=a.DEPTH32F_STENCIL8:c===j.cHt&&(d=a.DEPTH24_STENCIL8,console.warn("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):null===c||c===j.bkx||c===j.V3x?d=a.DEPTH_COMPONENT24:c===j.RQf?d=a.DEPTH_COMPONENT32F:c===j.cHt&&(d=a.DEPTH_COMPONENT16),d}function y(a,b){return!0===u(a)||a.isFramebufferTexture&&a.minFilter!==j.hxR&&a.minFilter!==j.k6q?Math.log2(Math.max(b.width,b.height))+1:void 0!==a.mipmaps&&a.mipmaps.length>0?a.mipmaps.length:a.isCompressedTexture&&Array.isArray(a.image)?b.mipmaps.length:1}function z(a){let b=a.target;b.removeEventListener("dispose",z),function(a){let b=d.get(a);if(void 0===b.__webglInit)return;let c=a.source,e=o.get(c);if(e){let d=e[b.__cacheKey];d.usedTimes--,0===d.usedTimes&&B(a),0===Object.keys(e).length&&o.delete(c)}d.remove(a)}(b),b.isVideoTexture&&n.delete(b)}function A(b){let c=b.target;c.removeEventListener("dispose",A),function(b){let c=d.get(b);if(b.depthTexture&&(b.depthTexture.dispose(),d.remove(b.depthTexture)),b.isWebGLCubeRenderTarget)for(let b=0;b<6;b++){if(Array.isArray(c.__webglFramebuffer[b]))for(let d=0;d<c.__webglFramebuffer[b].length;d++)a.deleteFramebuffer(c.__webglFramebuffer[b][d]);else a.deleteFramebuffer(c.__webglFramebuffer[b]);c.__webglDepthbuffer&&a.deleteRenderbuffer(c.__webglDepthbuffer[b])}else{if(Array.isArray(c.__webglFramebuffer))for(let b=0;b<c.__webglFramebuffer.length;b++)a.deleteFramebuffer(c.__webglFramebuffer[b]);else a.deleteFramebuffer(c.__webglFramebuffer);if(c.__webglDepthbuffer&&a.deleteRenderbuffer(c.__webglDepthbuffer),c.__webglMultisampledFramebuffer&&a.deleteFramebuffer(c.__webglMultisampledFramebuffer),c.__webglColorRenderbuffer)for(let b=0;b<c.__webglColorRenderbuffer.length;b++)c.__webglColorRenderbuffer[b]&&a.deleteRenderbuffer(c.__webglColorRenderbuffer[b]);c.__webglDepthRenderbuffer&&a.deleteRenderbuffer(c.__webglDepthRenderbuffer)}let e=b.textures;for(let b=0,c=e.length;b<c;b++){let c=d.get(e[b]);c.__webglTexture&&(a.deleteTexture(c.__webglTexture),g.memory.textures--),d.remove(e[b])}d.remove(b)}(c)}function B(b){let c=d.get(b);a.deleteTexture(c.__webglTexture);let e=b.source,f=o.get(e);delete f[c.__cacheKey],g.memory.textures--}let C=0;function D(b,e){let f=d.get(b);if(b.isVideoTexture&&function(a){let b=g.render.frame;n.get(a)!==b&&(n.set(a,b),a.update())}(b),!1===b.isRenderTargetTexture&&b.version>0&&f.__version!==b.version){let a=b.image;if(null===a)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(!1===a.complete)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else if(K(f,b,e))return}c.bindTexture(a.TEXTURE_2D,f.__webglTexture,a.TEXTURE0+e)}function E(b,e){let f=d.get(b);if(b.version>0&&f.__version!==b.version)return void K(f,b,e);c.bindTexture(a.TEXTURE_2D_ARRAY,f.__webglTexture,a.TEXTURE0+e)}let F={[j.GJx]:a.REPEAT,[j.ghU]:a.CLAMP_TO_EDGE,[j.kTW]:a.MIRRORED_REPEAT},G={[j.hxR]:a.NEAREST,[j.pHI]:a.NEAREST_MIPMAP_NEAREST,[j.Cfg]:a.NEAREST_MIPMAP_LINEAR,[j.k6q]:a.LINEAR,[j.kRr]:a.LINEAR_MIPMAP_NEAREST,[j.$_I]:a.LINEAR_MIPMAP_LINEAR},H={[j.amv]:a.NEVER,[j.FFZ]:a.ALWAYS,[j.vim]:a.LESS,[j.TiK]:a.LEQUAL,[j.kO0]:a.EQUAL,[j.gWB]:a.GEQUAL,[j.eoi]:a.GREATER,[j.jzd]:a.NOTEQUAL};function I(c,f){if((f.type===j.RQf&&!1===b.has("OES_texture_float_linear")&&(f.magFilter===j.k6q||f.magFilter===j.kRr||f.magFilter===j.Cfg||f.magFilter===j.$_I||f.minFilter===j.k6q||f.minFilter===j.kRr||f.minFilter===j.Cfg||f.minFilter===j.$_I)&&console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),a.texParameteri(c,a.TEXTURE_WRAP_S,F[f.wrapS]),a.texParameteri(c,a.TEXTURE_WRAP_T,F[f.wrapT]),(c===a.TEXTURE_3D||c===a.TEXTURE_2D_ARRAY)&&a.texParameteri(c,a.TEXTURE_WRAP_R,F[f.wrapR]),a.texParameteri(c,a.TEXTURE_MAG_FILTER,G[f.magFilter]),a.texParameteri(c,a.TEXTURE_MIN_FILTER,G[f.minFilter]),f.compareFunction&&(a.texParameteri(c,a.TEXTURE_COMPARE_MODE,a.COMPARE_REF_TO_TEXTURE),a.texParameteri(c,a.TEXTURE_COMPARE_FUNC,H[f.compareFunction])),!0===b.has("EXT_texture_filter_anisotropic"))&&f.magFilter!==j.hxR&&(f.minFilter===j.Cfg||f.minFilter===j.$_I)&&(f.type!==j.RQf||!1!==b.has("OES_texture_float_linear"))&&(f.anisotropy>1||d.get(f).__currentAnisotropy)){let g=b.get("EXT_texture_filter_anisotropic");a.texParameterf(c,g.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(f.anisotropy,e.getMaxAnisotropy())),d.get(f).__currentAnisotropy=f.anisotropy}}function J(b,c){let d=!1;void 0===b.__webglInit&&(b.__webglInit=!0,c.addEventListener("dispose",z));let e=c.source,f=o.get(e);void 0===f&&(f={},o.set(e,f));let h=function(a){let b=[];return b.push(a.wrapS),b.push(a.wrapT),b.push(a.wrapR||0),b.push(a.magFilter),b.push(a.minFilter),b.push(a.anisotropy),b.push(a.internalFormat),b.push(a.format),b.push(a.type),b.push(a.generateMipmaps),b.push(a.premultiplyAlpha),b.push(a.flipY),b.push(a.unpackAlignment),b.push(a.colorSpace),b.join()}(c);if(h!==b.__cacheKey){void 0===f[h]&&(f[h]={texture:a.createTexture(),usedTimes:0},g.memory.textures++,d=!0),f[h].usedTimes++;let e=f[b.__cacheKey];void 0!==e&&(f[b.__cacheKey].usedTimes--,0===e.usedTimes&&B(c)),b.__cacheKey=h,b.__webglTexture=f[h].texture}return d}function K(b,g,h){if(q)return g.isPendingDeferredUpload||(g.isPendingDeferredUpload=!0,p.push({textureProperties:b,texture:g,slot:h})),!1;let i=a.TEXTURE_2D;(g.isDataArrayTexture||g.isCompressedArrayTexture)&&(i=a.TEXTURE_2D_ARRAY),g.isData3DTexture&&(i=a.TEXTURE_3D);let k=J(b,g),l=g.source;c.bindTexture(i,b.__webglTexture,a.TEXTURE0+h);let m=d.get(l);if(l.version!==m.__version||!0===k){let b;c.activeTexture(a.TEXTURE0+h);let d=j.ppV.getPrimaries(j.ppV.workingColorSpace),n=g.colorSpace===j.jf0?null:j.ppV.getPrimaries(g.colorSpace),o=g.colorSpace===j.jf0||d===n?a.NONE:a.BROWSER_DEFAULT_WEBGL;a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,g.flipY),a.pixelStorei(a.UNPACK_PREMULTIPLY_ALPHA_WEBGL,g.premultiplyAlpha),a.pixelStorei(a.UNPACK_ALIGNMENT,g.unpackAlignment),a.pixelStorei(a.UNPACK_COLORSPACE_CONVERSION_WEBGL,o);let p=t(g.image,!1,e.maxTextureSize);p=T(g,p);let q=f.convert(g.format,g.colorSpace),r=f.convert(g.type),s=w(g.internalFormat,q,r,g.colorSpace,g.isVideoTexture);I(i,g);let z=g.mipmaps,A=!0!==g.isVideoTexture,B=void 0===m.__version||!0===k,C=l.dataReady,D=y(g,p);if(g.isDepthTexture)s=x(g.format===j.dcC,g.type),B&&(A?c.texStorage2D(a.TEXTURE_2D,1,s,p.width,p.height):c.texImage2D(a.TEXTURE_2D,0,s,p.width,p.height,0,q,r,null));else if(g.isDataTexture)if(z.length>0){A&&B&&c.texStorage2D(a.TEXTURE_2D,D,s,z[0].width,z[0].height);for(let d=0,e=z.length;d<e;d++)b=z[d],A?C&&c.texSubImage2D(a.TEXTURE_2D,d,0,0,b.width,b.height,q,r,b.data):c.texImage2D(a.TEXTURE_2D,d,s,b.width,b.height,0,q,r,b.data);g.generateMipmaps=!1}else A?(B&&c.texStorage2D(a.TEXTURE_2D,D,s,p.width,p.height),C&&c.texSubImage2D(a.TEXTURE_2D,0,0,0,p.width,p.height,q,r,p.data)):c.texImage2D(a.TEXTURE_2D,0,s,p.width,p.height,0,q,r,p.data);else if(g.isCompressedTexture)if(g.isCompressedArrayTexture){A&&B&&c.texStorage3D(a.TEXTURE_2D_ARRAY,D,s,z[0].width,z[0].height,p.depth);for(let d=0,e=z.length;d<e;d++)if(b=z[d],g.format!==j.GWd)if(null!==q)if(A){if(C)if(g.layerUpdates.size>0){let e=(0,j.Nex)(b.width,b.height,g.format,g.type);for(let f of g.layerUpdates){let g=b.data.subarray(f*e/b.data.BYTES_PER_ELEMENT,(f+1)*e/b.data.BYTES_PER_ELEMENT);c.compressedTexSubImage3D(a.TEXTURE_2D_ARRAY,d,0,0,f,b.width,b.height,1,q,g)}g.clearLayerUpdates()}else c.compressedTexSubImage3D(a.TEXTURE_2D_ARRAY,d,0,0,0,b.width,b.height,p.depth,q,b.data)}else c.compressedTexImage3D(a.TEXTURE_2D_ARRAY,d,s,b.width,b.height,p.depth,0,b.data,0,0);else console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else A?C&&c.texSubImage3D(a.TEXTURE_2D_ARRAY,d,0,0,0,b.width,b.height,p.depth,q,r,b.data):c.texImage3D(a.TEXTURE_2D_ARRAY,d,s,b.width,b.height,p.depth,0,q,r,b.data)}else{A&&B&&c.texStorage2D(a.TEXTURE_2D,D,s,z[0].width,z[0].height);for(let d=0,e=z.length;d<e;d++)b=z[d],g.format!==j.GWd?null!==q?A?C&&c.compressedTexSubImage2D(a.TEXTURE_2D,d,0,0,b.width,b.height,q,b.data):c.compressedTexImage2D(a.TEXTURE_2D,d,s,b.width,b.height,0,b.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):A?C&&c.texSubImage2D(a.TEXTURE_2D,d,0,0,b.width,b.height,q,r,b.data):c.texImage2D(a.TEXTURE_2D,d,s,b.width,b.height,0,q,r,b.data)}else if(g.isDataArrayTexture)if(A){if(B&&c.texStorage3D(a.TEXTURE_2D_ARRAY,D,s,p.width,p.height,p.depth),C)if(g.layerUpdates.size>0){let b=(0,j.Nex)(p.width,p.height,g.format,g.type);for(let d of g.layerUpdates){let e=p.data.subarray(d*b/p.data.BYTES_PER_ELEMENT,(d+1)*b/p.data.BYTES_PER_ELEMENT);c.texSubImage3D(a.TEXTURE_2D_ARRAY,0,0,0,d,p.width,p.height,1,q,r,e)}g.clearLayerUpdates()}else c.texSubImage3D(a.TEXTURE_2D_ARRAY,0,0,0,0,p.width,p.height,p.depth,q,r,p.data)}else c.texImage3D(a.TEXTURE_2D_ARRAY,0,s,p.width,p.height,p.depth,0,q,r,p.data);else if(g.isData3DTexture)A?(B&&c.texStorage3D(a.TEXTURE_3D,D,s,p.width,p.height,p.depth),C&&c.texSubImage3D(a.TEXTURE_3D,0,0,0,0,p.width,p.height,p.depth,q,r,p.data)):c.texImage3D(a.TEXTURE_3D,0,s,p.width,p.height,p.depth,0,q,r,p.data);else if(g.isFramebufferTexture){if(B)if(A)c.texStorage2D(a.TEXTURE_2D,D,s,p.width,p.height);else{let b=p.width,d=p.height;for(let e=0;e<D;e++)c.texImage2D(a.TEXTURE_2D,e,s,b,d,0,q,r,null),b>>=1,d>>=1}}else if(z.length>0){if(A&&B){let b=U(z[0]);c.texStorage2D(a.TEXTURE_2D,D,s,b.width,b.height)}for(let d=0,e=z.length;d<e;d++)b=z[d],A?C&&c.texSubImage2D(a.TEXTURE_2D,d,0,0,q,r,b):c.texImage2D(a.TEXTURE_2D,d,s,q,r,b);g.generateMipmaps=!1}else if(A){if(B){let b=U(p);c.texStorage2D(a.TEXTURE_2D,D,s,b.width,b.height)}C&&c.texSubImage2D(a.TEXTURE_2D,0,0,0,q,r,p)}else c.texImage2D(a.TEXTURE_2D,0,s,q,r,p);u(g)&&v(i),m.__version=l.version,g.onUpdate&&g.onUpdate(g)}return b.__version=g.version,!0}function L(b,e,g,h,j,k){let m=f.convert(g.format,g.colorSpace),n=f.convert(g.type),o=w(g.internalFormat,m,n,g.colorSpace),p=d.get(e),q=d.get(g);if(q.__renderTarget=e,!p.__hasExternalTextures){let b=Math.max(1,e.width>>k),d=Math.max(1,e.height>>k);!0===e.isWebGLMultiviewRenderTarget?c.texStorage3D(a.TEXTURE_2D_ARRAY,0,o,e.width,e.height,e.numViews):j===a.TEXTURE_3D||j===a.TEXTURE_2D_ARRAY?c.texImage3D(j,k,o,b,d,e.depth,0,m,n,null):c.texImage2D(j,k,o,b,d,0,m,n,null)}c.bindFramebuffer(a.FRAMEBUFFER,b);let r=S(e);!0===e.isWebGLMultiviewRenderTarget?r?l.framebufferTextureMultisampleMultiviewOVR(a.FRAMEBUFFER,a.COLOR_ATTACHMENT0,q.__webglTexture,0,R(e),0,e.numViews):l.framebufferTextureMultiviewOVR(a.FRAMEBUFFER,a.COLOR_ATTACHMENT0,q.__webglTexture,0,0,e.numViews):(j===a.TEXTURE_2D||j>=a.TEXTURE_CUBE_MAP_POSITIVE_X&&j<=a.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&(r?i.framebufferTexture2DMultisampleEXT(a.FRAMEBUFFER,h,j,q.__webglTexture,0,R(e)):a.framebufferTexture2D(a.FRAMEBUFFER,h,j,q.__webglTexture,k)),c.bindFramebuffer(a.FRAMEBUFFER,null)}function M(b,c,e){if(a.bindRenderbuffer(a.RENDERBUFFER,b),!0===c.isWebGLMultiviewRenderTarget){let b=S(c),e=c.numViews,f=c.depthTexture,g=a.DEPTH_COMPONENT24,h=a.DEPTH_ATTACHMENT;f&&f.isDepthTexture&&(f.type===j.RQf?g=a.DEPTH_COMPONENT32F:f.type===j.V3x&&(g=a.DEPTH24_STENCIL8,h=a.DEPTH_STENCIL_ATTACHMENT));let i=d.get(c.depthTexture).__webglTexture;void 0===i&&(i=a.createTexture(),a.bindTexture(a.TEXTURE_2D_ARRAY,i),a.texStorage3D(a.TEXTURE_2D_ARRAY,1,g,c.width,c.height,e)),b?l.framebufferTextureMultisampleMultiviewOVR(a.FRAMEBUFFER,h,i,0,R(c),0,e):l.framebufferTextureMultiviewOVR(a.FRAMEBUFFER,h,i,0,0,e)}else if(c.depthBuffer){let d=c.depthTexture,f=d&&d.isDepthTexture?d.type:null,g=x(c.stencilBuffer,f),h=c.stencilBuffer?a.DEPTH_STENCIL_ATTACHMENT:a.DEPTH_ATTACHMENT,j=R(c);S(c)?i.renderbufferStorageMultisampleEXT(a.RENDERBUFFER,j,g,c.width,c.height):e?a.renderbufferStorageMultisample(a.RENDERBUFFER,j,g,c.width,c.height):a.renderbufferStorage(a.RENDERBUFFER,g,c.width,c.height),a.framebufferRenderbuffer(a.FRAMEBUFFER,h,a.RENDERBUFFER,b)}else{let b=c.textures;for(let d=0;d<b.length;d++){let g=b[d],h=f.convert(g.format,g.colorSpace),j=f.convert(g.type),k=w(g.internalFormat,h,j,g.colorSpace),l=R(c);e&&!1===S(c)?a.renderbufferStorageMultisample(a.RENDERBUFFER,l,k,c.width,c.height):S(c)?i.renderbufferStorageMultisampleEXT(a.RENDERBUFFER,l,k,c.width,c.height):a.renderbufferStorage(a.RENDERBUFFER,k,c.width,c.height)}}a.bindRenderbuffer(a.RENDERBUFFER,null)}function N(b,e){if(e&&e.isWebGLCubeRenderTarget)throw Error("Depth Texture with cube render targets is not supported");if(c.bindFramebuffer(a.FRAMEBUFFER,b),!(e.depthTexture&&e.depthTexture.isDepthTexture))throw Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");let f=d.get(e.depthTexture);f.__renderTarget=e,f.__webglTexture&&e.depthTexture.image.width===e.width&&e.depthTexture.image.height===e.height||(e.depthTexture.image.width=e.width,e.depthTexture.image.height=e.height,e.depthTexture.needsUpdate=!0),1!=e.depthTexture.image.depth?E(e.depthTexture,0):D(e.depthTexture,0);let g=f.__webglTexture,h=R(e);if(!0===e.isWebGLMultiviewRenderTarget){let b=S(e),c=e.numViews;if(e.depthTexture.format===j.zdS)b?l.framebufferTextureMultisampleMultiviewOVR(a.FRAMEBUFFER,a.DEPTH_ATTACHMENT,g,0,h,0,c):l.framebufferTextureMultiviewOVR(a.FRAMEBUFFER,a.DEPTH_ATTACHMENT,g,0,0,c);else if(e.depthTexture.format===j.dcC)b?l.framebufferTextureMultisampleMultiviewOVR(a.FRAMEBUFFER,a.DEPTH_STENCIL_ATTACHMENT,g,0,h,0,c):l.framebufferTextureMultiviewOVR(a.FRAMEBUFFER,a.DEPTH_STENCIL_ATTACHMENT,g,0,0,c);else throw Error("Unknown depthTexture format")}else if(e.depthTexture.format===j.zdS)S(e)?i.framebufferTexture2DMultisampleEXT(a.FRAMEBUFFER,a.DEPTH_ATTACHMENT,a.TEXTURE_2D,g,0,h):a.framebufferTexture2D(a.FRAMEBUFFER,a.DEPTH_ATTACHMENT,a.TEXTURE_2D,g,0);else if(e.depthTexture.format===j.dcC)S(e)?i.framebufferTexture2DMultisampleEXT(a.FRAMEBUFFER,a.DEPTH_STENCIL_ATTACHMENT,a.TEXTURE_2D,g,0,h):a.framebufferTexture2D(a.FRAMEBUFFER,a.DEPTH_STENCIL_ATTACHMENT,a.TEXTURE_2D,g,0);else throw Error("Unknown depthTexture format")}function O(b){let e=d.get(b),f=!0===b.isWebGLCubeRenderTarget;if(e.__boundDepthTexture!==b.depthTexture){let a=b.depthTexture;if(e.__depthDisposeCallback&&e.__depthDisposeCallback(),a){let b=()=>{delete e.__boundDepthTexture,delete e.__depthDisposeCallback,a.removeEventListener("dispose",b)};a.addEventListener("dispose",b),e.__depthDisposeCallback=b}e.__boundDepthTexture=a}if(b.depthTexture&&!e.__autoAllocateDepthBuffer){if(f)throw Error("target.depthTexture not supported in Cube render targets");N(e.__webglFramebuffer,b)}else if(f){e.__webglDepthbuffer=[];for(let d=0;d<6;d++)if(c.bindFramebuffer(a.FRAMEBUFFER,e.__webglFramebuffer[d]),void 0===e.__webglDepthbuffer[d])e.__webglDepthbuffer[d]=a.createRenderbuffer(),M(e.__webglDepthbuffer[d],b,!1);else{let c=b.stencilBuffer?a.DEPTH_STENCIL_ATTACHMENT:a.DEPTH_ATTACHMENT,f=e.__webglDepthbuffer[d];a.bindRenderbuffer(a.RENDERBUFFER,f),a.framebufferRenderbuffer(a.FRAMEBUFFER,c,a.RENDERBUFFER,f)}}else if(c.bindFramebuffer(a.FRAMEBUFFER,e.__webglFramebuffer),void 0===e.__webglDepthbuffer)e.__webglDepthbuffer=a.createRenderbuffer(),M(e.__webglDepthbuffer,b,!1);else{let c=b.stencilBuffer?a.DEPTH_STENCIL_ATTACHMENT:a.DEPTH_ATTACHMENT,d=e.__webglDepthbuffer;a.bindRenderbuffer(a.RENDERBUFFER,d),a.framebufferRenderbuffer(a.FRAMEBUFFER,c,a.RENDERBUFFER,d)}c.bindFramebuffer(a.FRAMEBUFFER,null)}let P=[],Q=[];function R(a){return Math.min(e.maxSamples,a.samples)}function S(a){let c=d.get(a);return a.samples>0&&!0===b.has("WEBGL_multisampled_render_to_texture")&&!1!==c.__useRenderToTexture}function T(a,b){let c=a.colorSpace,d=a.format,e=a.type;return!0===a.isCompressedTexture||!0===a.isVideoTexture||c!==j.Zr2&&c!==j.jf0&&(j.ppV.getTransfer(c)===j.KLL?(d!==j.GWd||e!==j.OUM)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",c)),b}function U(a){return"undefined"!=typeof HTMLImageElement&&a instanceof HTMLImageElement?(m.width=a.naturalWidth||a.width,m.height=a.naturalHeight||a.height):"undefined"!=typeof VideoFrame&&a instanceof VideoFrame?(m.width=a.displayWidth,m.height=a.displayHeight):(m.width=a.width,m.height=a.height),m}this.allocateTextureUnit=function(){let a=C;return a>=e.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+a+" texture units while this GPU supports only "+e.maxTextures),C+=1,a},this.resetTextureUnits=function(){C=0},this.setTexture2D=D,this.setTexture2DArray=E,this.setTexture3D=function(b,e){let f=d.get(b);if(b.version>0&&f.__version!==b.version)return void K(f,b,e);c.bindTexture(a.TEXTURE_3D,f.__webglTexture,a.TEXTURE0+e)},this.setTextureCube=function(b,g){let h=d.get(b);if(b.version>0&&h.__version!==b.version)return void function(b,g,h){if(6!==g.image.length)return;let i=J(b,g),k=g.source;c.bindTexture(a.TEXTURE_CUBE_MAP,b.__webglTexture,a.TEXTURE0+h);let l=d.get(k);if(k.version!==l.__version||!0===i){let b;c.activeTexture(a.TEXTURE0+h);let d=j.ppV.getPrimaries(j.ppV.workingColorSpace),m=g.colorSpace===j.jf0?null:j.ppV.getPrimaries(g.colorSpace),n=g.colorSpace===j.jf0||d===m?a.NONE:a.BROWSER_DEFAULT_WEBGL;a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,g.flipY),a.pixelStorei(a.UNPACK_PREMULTIPLY_ALPHA_WEBGL,g.premultiplyAlpha),a.pixelStorei(a.UNPACK_ALIGNMENT,g.unpackAlignment),a.pixelStorei(a.UNPACK_COLORSPACE_CONVERSION_WEBGL,n);let o=g.isCompressedTexture||g.image[0].isCompressedTexture,p=g.image[0]&&g.image[0].isDataTexture,q=[];for(let a=0;a<6;a++)o||p?q[a]=p?g.image[a].image:g.image[a]:q[a]=t(g.image[a],!0,e.maxCubemapSize),q[a]=T(g,q[a]);let r=q[0],s=f.convert(g.format,g.colorSpace),x=f.convert(g.type),z=w(g.internalFormat,s,x,g.colorSpace),A=!0!==g.isVideoTexture,B=void 0===l.__version||!0===i,C=k.dataReady,D=y(g,r);if(I(a.TEXTURE_CUBE_MAP,g),o){A&&B&&c.texStorage2D(a.TEXTURE_CUBE_MAP,D,z,r.width,r.height);for(let d=0;d<6;d++){b=q[d].mipmaps;for(let e=0;e<b.length;e++){let f=b[e];g.format!==j.GWd?null!==s?A?C&&c.compressedTexSubImage2D(a.TEXTURE_CUBE_MAP_POSITIVE_X+d,e,0,0,f.width,f.height,s,f.data):c.compressedTexImage2D(a.TEXTURE_CUBE_MAP_POSITIVE_X+d,e,z,f.width,f.height,0,f.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):A?C&&c.texSubImage2D(a.TEXTURE_CUBE_MAP_POSITIVE_X+d,e,0,0,f.width,f.height,s,x,f.data):c.texImage2D(a.TEXTURE_CUBE_MAP_POSITIVE_X+d,e,z,f.width,f.height,0,s,x,f.data)}}}else{if(b=g.mipmaps,A&&B){b.length>0&&D++;let d=U(q[0]);c.texStorage2D(a.TEXTURE_CUBE_MAP,D,z,d.width,d.height)}for(let d=0;d<6;d++)if(p){A?C&&c.texSubImage2D(a.TEXTURE_CUBE_MAP_POSITIVE_X+d,0,0,0,q[d].width,q[d].height,s,x,q[d].data):c.texImage2D(a.TEXTURE_CUBE_MAP_POSITIVE_X+d,0,z,q[d].width,q[d].height,0,s,x,q[d].data);for(let e=0;e<b.length;e++){let f=b[e].image[d].image;A?C&&c.texSubImage2D(a.TEXTURE_CUBE_MAP_POSITIVE_X+d,e+1,0,0,f.width,f.height,s,x,f.data):c.texImage2D(a.TEXTURE_CUBE_MAP_POSITIVE_X+d,e+1,z,f.width,f.height,0,s,x,f.data)}}else{A?C&&c.texSubImage2D(a.TEXTURE_CUBE_MAP_POSITIVE_X+d,0,0,0,s,x,q[d]):c.texImage2D(a.TEXTURE_CUBE_MAP_POSITIVE_X+d,0,z,s,x,q[d]);for(let e=0;e<b.length;e++){let f=b[e];A?C&&c.texSubImage2D(a.TEXTURE_CUBE_MAP_POSITIVE_X+d,e+1,0,0,s,x,f.image[d]):c.texImage2D(a.TEXTURE_CUBE_MAP_POSITIVE_X+d,e+1,z,s,x,f.image[d])}}}u(g)&&v(a.TEXTURE_CUBE_MAP),l.__version=k.version,g.onUpdate&&g.onUpdate(g)}b.__version=g.version}(h,b,g);c.bindTexture(a.TEXTURE_CUBE_MAP,h.__webglTexture,a.TEXTURE0+g)},this.rebindTextures=function(b,c,e){let f=d.get(b);void 0!==c&&L(f.__webglFramebuffer,b,b.texture,a.COLOR_ATTACHMENT0,a.TEXTURE_2D,0),void 0!==e&&O(b)},this.uploadTexture=K,this.setupRenderTarget=function(b){let e=b.texture,h=d.get(b),i=d.get(e);b.addEventListener("dispose",A);let j=b.textures,k=!0===b.isWebGLCubeRenderTarget,l=j.length>1;if(!l&&(void 0===i.__webglTexture&&(i.__webglTexture=a.createTexture()),i.__version=e.version,g.memory.textures++),k){h.__webglFramebuffer=[];for(let b=0;b<6;b++)if(e.mipmaps&&e.mipmaps.length>0){h.__webglFramebuffer[b]=[];for(let c=0;c<e.mipmaps.length;c++)h.__webglFramebuffer[b][c]=a.createFramebuffer()}else h.__webglFramebuffer[b]=a.createFramebuffer()}else{if(e.mipmaps&&e.mipmaps.length>0){h.__webglFramebuffer=[];for(let b=0;b<e.mipmaps.length;b++)h.__webglFramebuffer[b]=a.createFramebuffer()}else h.__webglFramebuffer=a.createFramebuffer();if(l)for(let b=0,c=j.length;b<c;b++){let c=d.get(j[b]);void 0===c.__webglTexture&&(c.__webglTexture=a.createTexture(),g.memory.textures++)}if(b.samples>0&&!1===S(b)){h.__webglMultisampledFramebuffer=a.createFramebuffer(),h.__webglColorRenderbuffer=[],c.bindFramebuffer(a.FRAMEBUFFER,h.__webglMultisampledFramebuffer);for(let c=0;c<j.length;c++){let d=j[c];h.__webglColorRenderbuffer[c]=a.createRenderbuffer(),a.bindRenderbuffer(a.RENDERBUFFER,h.__webglColorRenderbuffer[c]);let e=f.convert(d.format,d.colorSpace),g=f.convert(d.type),i=w(d.internalFormat,e,g,d.colorSpace,!0===b.isXRRenderTarget),k=R(b);a.renderbufferStorageMultisample(a.RENDERBUFFER,k,i,b.width,b.height),a.framebufferRenderbuffer(a.FRAMEBUFFER,a.COLOR_ATTACHMENT0+c,a.RENDERBUFFER,h.__webglColorRenderbuffer[c])}a.bindRenderbuffer(a.RENDERBUFFER,null),b.depthBuffer&&(h.__webglDepthRenderbuffer=a.createRenderbuffer(),M(h.__webglDepthRenderbuffer,b,!0)),c.bindFramebuffer(a.FRAMEBUFFER,null)}}if(k){c.bindTexture(a.TEXTURE_CUBE_MAP,i.__webglTexture),I(a.TEXTURE_CUBE_MAP,e);for(let c=0;c<6;c++)if(e.mipmaps&&e.mipmaps.length>0)for(let d=0;d<e.mipmaps.length;d++)L(h.__webglFramebuffer[c][d],b,e,a.COLOR_ATTACHMENT0,a.TEXTURE_CUBE_MAP_POSITIVE_X+c,d);else L(h.__webglFramebuffer[c],b,e,a.COLOR_ATTACHMENT0,a.TEXTURE_CUBE_MAP_POSITIVE_X+c,0);u(e)&&v(a.TEXTURE_CUBE_MAP),c.unbindTexture()}else if(l){for(let e=0,f=j.length;e<f;e++){let f=j[e],g=d.get(f);c.bindTexture(a.TEXTURE_2D,g.__webglTexture),I(a.TEXTURE_2D,f),L(h.__webglFramebuffer,b,f,a.COLOR_ATTACHMENT0+e,a.TEXTURE_2D,0),u(f)&&v(a.TEXTURE_2D)}c.unbindTexture()}else{let d=a.TEXTURE_2D;if((b.isWebGL3DRenderTarget||b.isWebGLArrayRenderTarget)&&(d=b.isWebGL3DRenderTarget?a.TEXTURE_3D:a.TEXTURE_2D_ARRAY),!0===b.isWebGLMultiviewRenderTarget&&(d=a.TEXTURE_2D_ARRAY),c.bindTexture(d,i.__webglTexture),I(d,e),e.mipmaps&&e.mipmaps.length>0)for(let c=0;c<e.mipmaps.length;c++)L(h.__webglFramebuffer[c],b,e,a.COLOR_ATTACHMENT0,d,c);else L(h.__webglFramebuffer,b,e,a.COLOR_ATTACHMENT0,d,0);u(e)&&v(d),c.unbindTexture()}(b.depthBuffer||!0===b.isWebGLMultiviewRenderTarget)&&this.setupDepthRenderbuffer(b)},this.updateRenderTargetMipmap=function(b){let e=b.textures;for(let f=0,g=e.length;f<g;f++){let g=e[f];if(u(g)){let e=b.isWebGLCubeRenderTarget?a.TEXTURE_CUBE_MAP:b.isWebGL3DRenderTarget?a.TEXTURE_3D:b.isWebGLArrayRenderTarget||b.isCompressedArrayTexture?a.TEXTURE_2D_ARRAY:a.TEXTURE_2D,f=d.get(g).__webglTexture;c.bindTexture(e,f),v(e),c.unbindTexture()}}},this.updateMultisampleRenderTarget=function(b){if(b.samples>0){if(!1===S(b)){let e=b.textures,f=b.width,g=b.height,h=a.COLOR_BUFFER_BIT,i=b.stencilBuffer?a.DEPTH_STENCIL_ATTACHMENT:a.DEPTH_ATTACHMENT,j=d.get(b),l=e.length>1;if(l)for(let b=0;b<e.length;b++)c.bindFramebuffer(a.FRAMEBUFFER,j.__webglMultisampledFramebuffer),a.framebufferRenderbuffer(a.FRAMEBUFFER,a.COLOR_ATTACHMENT0+b,a.RENDERBUFFER,null),c.bindFramebuffer(a.FRAMEBUFFER,j.__webglFramebuffer),a.framebufferTexture2D(a.DRAW_FRAMEBUFFER,a.COLOR_ATTACHMENT0+b,a.TEXTURE_2D,null,0);c.bindFramebuffer(a.READ_FRAMEBUFFER,j.__webglMultisampledFramebuffer),c.bindFramebuffer(a.DRAW_FRAMEBUFFER,j.__webglFramebuffer);for(let c=0;c<e.length;c++){if(b.resolveDepthBuffer&&(b.depthBuffer&&(h|=a.DEPTH_BUFFER_BIT),b.stencilBuffer&&b.resolveStencilBuffer&&(h|=a.STENCIL_BUFFER_BIT)),l){a.framebufferRenderbuffer(a.READ_FRAMEBUFFER,a.COLOR_ATTACHMENT0,a.RENDERBUFFER,j.__webglColorRenderbuffer[c]);let b=d.get(e[c]).__webglTexture;a.framebufferTexture2D(a.DRAW_FRAMEBUFFER,a.COLOR_ATTACHMENT0,a.TEXTURE_2D,b,0)}a.blitFramebuffer(0,0,f,g,0,0,f,g,h,a.NEAREST),!0===k&&(P.length=0,Q.length=0,P.push(a.COLOR_ATTACHMENT0+c),b.depthBuffer&&!1===b.resolveDepthBuffer&&(P.push(i),Q.push(i),a.invalidateFramebuffer(a.DRAW_FRAMEBUFFER,Q)),a.invalidateFramebuffer(a.READ_FRAMEBUFFER,P))}if(c.bindFramebuffer(a.READ_FRAMEBUFFER,null),c.bindFramebuffer(a.DRAW_FRAMEBUFFER,null),l)for(let b=0;b<e.length;b++){c.bindFramebuffer(a.FRAMEBUFFER,j.__webglMultisampledFramebuffer),a.framebufferRenderbuffer(a.FRAMEBUFFER,a.COLOR_ATTACHMENT0+b,a.RENDERBUFFER,j.__webglColorRenderbuffer[b]);let f=d.get(e[b]).__webglTexture;c.bindFramebuffer(a.FRAMEBUFFER,j.__webglFramebuffer),a.framebufferTexture2D(a.DRAW_FRAMEBUFFER,a.COLOR_ATTACHMENT0+b,a.TEXTURE_2D,f,0)}c.bindFramebuffer(a.DRAW_FRAMEBUFFER,j.__webglMultisampledFramebuffer)}else if(b.depthBuffer&&!1===b.resolveDepthBuffer&&k){let c=b.stencilBuffer?a.DEPTH_STENCIL_ATTACHMENT:a.DEPTH_ATTACHMENT;a.invalidateFramebuffer(a.DRAW_FRAMEBUFFER,[c])}}},this.setupDepthTexture=N,this.setupDepthRenderbuffer=O,this.setupFrameBufferTexture=L,this.useMultisampledRTT=S,this.runDeferredUploads=function(){let a=q;for(let a of(q=!1,p))K(a.textureProperties,a.texture,a.slot),a.texture.isPendingDeferredUpload=!1;p=[],q=a},this.setDeferTextureUploads=function(a){q=a}}function by(a,b){return{convert:function(c,d=j.jf0){let e,f=j.ppV.getTransfer(d);if(c===j.OUM)return a.UNSIGNED_BYTE;if(c===j.Wew)return a.UNSIGNED_SHORT_4_4_4_4;if(c===j.gJ2)return a.UNSIGNED_SHORT_5_5_5_1;if(c===j.Dmk)return a.UNSIGNED_INT_5_9_9_9_REV;if(c===j.tJf)return a.BYTE;if(c===j.fBL)return a.SHORT;if(c===j.cHt)return a.UNSIGNED_SHORT;if(c===j.Yuy)return a.INT;if(c===j.bkx)return a.UNSIGNED_INT;if(c===j.RQf)return a.FLOAT;if(c===j.ix0)return a.HALF_FLOAT;if(c===j.wrO)return a.ALPHA;if(c===j.HIg)return a.RGB;if(c===j.GWd)return a.RGBA;if(c===j.Kzv)return a.LUMINANCE;if(c===j.CMB)return a.LUMINANCE_ALPHA;if(c===j.zdS)return a.DEPTH_COMPONENT;if(c===j.dcC)return a.DEPTH_STENCIL;if(c===j.VT0)return a.RED;if(c===j.ZQM)return a.RED_INTEGER;if(c===j.paN)return a.RG;if(c===j.TkQ)return a.RG_INTEGER;if(c===j.c90)return a.RGBA_INTEGER;if(c===j.IE4||c===j.Nz6||c===j.jR7||c===j.BXX)if(f===j.KLL){if(null===(e=b.get("WEBGL_compressed_texture_s3tc_srgb")))return null;if(c===j.IE4)return e.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(c===j.Nz6)return e.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(c===j.jR7)return e.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(c===j.BXX)return e.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else{if(null===(e=b.get("WEBGL_compressed_texture_s3tc")))return null;if(c===j.IE4)return e.COMPRESSED_RGB_S3TC_DXT1_EXT;if(c===j.Nz6)return e.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(c===j.jR7)return e.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(c===j.BXX)return e.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(c===j.k6Q||c===j.kTp||c===j.HXV||c===j.pBf){if(null===(e=b.get("WEBGL_compressed_texture_pvrtc")))return null;if(c===j.k6Q)return e.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(c===j.kTp)return e.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(c===j.HXV)return e.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(c===j.pBf)return e.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(c===j.CVz||c===j.Riy||c===j.KDk){if(null===(e=b.get("WEBGL_compressed_texture_etc")))return null;if(c===j.CVz||c===j.Riy)return f===j.KLL?e.COMPRESSED_SRGB8_ETC2:e.COMPRESSED_RGB8_ETC2;if(c===j.KDk)return f===j.KLL?e.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:e.COMPRESSED_RGBA8_ETC2_EAC}if(c===j.qa3||c===j.B_h||c===j.czI||c===j.rSH||c===j.Qrf||c===j.psI||c===j.a5J||c===j._QJ||c===j.uB5||c===j.lyL||c===j.bC7||c===j.y3Z||c===j.ojs||c===j.S$4){if(null===(e=b.get("WEBGL_compressed_texture_astc")))return null;if(c===j.qa3)return f===j.KLL?e.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:e.COMPRESSED_RGBA_ASTC_4x4_KHR;if(c===j.B_h)return f===j.KLL?e.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:e.COMPRESSED_RGBA_ASTC_5x4_KHR;if(c===j.czI)return f===j.KLL?e.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:e.COMPRESSED_RGBA_ASTC_5x5_KHR;if(c===j.rSH)return f===j.KLL?e.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:e.COMPRESSED_RGBA_ASTC_6x5_KHR;if(c===j.Qrf)return f===j.KLL?e.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:e.COMPRESSED_RGBA_ASTC_6x6_KHR;if(c===j.psI)return f===j.KLL?e.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:e.COMPRESSED_RGBA_ASTC_8x5_KHR;if(c===j.a5J)return f===j.KLL?e.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:e.COMPRESSED_RGBA_ASTC_8x6_KHR;if(c===j._QJ)return f===j.KLL?e.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:e.COMPRESSED_RGBA_ASTC_8x8_KHR;if(c===j.uB5)return f===j.KLL?e.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:e.COMPRESSED_RGBA_ASTC_10x5_KHR;if(c===j.lyL)return f===j.KLL?e.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:e.COMPRESSED_RGBA_ASTC_10x6_KHR;if(c===j.bC7)return f===j.KLL?e.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:e.COMPRESSED_RGBA_ASTC_10x8_KHR;if(c===j.y3Z)return f===j.KLL?e.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:e.COMPRESSED_RGBA_ASTC_10x10_KHR;if(c===j.ojs)return f===j.KLL?e.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:e.COMPRESSED_RGBA_ASTC_12x10_KHR;if(c===j.S$4)return f===j.KLL?e.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:e.COMPRESSED_RGBA_ASTC_12x12_KHR}if(c===j.Fn||c===j.H23||c===j.W9U){if(null===(e=b.get("EXT_texture_compression_bptc")))return null;if(c===j.Fn)return f===j.KLL?e.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:e.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(c===j.H23)return e.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(c===j.W9U)return e.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}if(c===j.Kef||c===j.XG_||c===j.HO_||c===j.CWW){if(null===(e=b.get("EXT_texture_compression_rgtc")))return null;if(c===j.Fn)return e.COMPRESSED_RED_RGTC1_EXT;if(c===j.XG_)return e.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(c===j.HO_)return e.COMPRESSED_RED_GREEN_RGTC2_EXT;if(c===j.CWW)return e.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}return c===j.V3x?a.UNSIGNED_INT_24_8:void 0!==a[c]?a[c]:null}}}class bz extends j.nWS{constructor(a,b,c,d={}){super(a,b,d),this.depthBuffer=!1,this.stencilBuffer=!1,this.numViews=c}copy(a){return super.copy(a),this.numViews=a.numViews,this}}bz.prototype.isWebGLMultiviewRenderTarget=!0;let bA=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,bB=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`;class bC{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(a,b,c){if(null===this.texture){let d=new j.gPd;a.properties.get(d).__webglTexture=b.texture,(b.depthNear!==c.depthNear||b.depthFar!==c.depthFar)&&(this.depthNear=b.depthNear,this.depthFar=b.depthFar),this.texture=d}}getMesh(a){if(null!==this.texture&&null===this.mesh){let b=a.cameras[0].viewport,c=new j.BKk({vertexShader:bA,fragmentShader:bB,uniforms:{depthColor:{value:this.texture},depthWidth:{value:b.z},depthHeight:{value:b.w}}});this.mesh=new j.eaF(new j.bdM(20,20),c)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}}class bD extends j.Qev{constructor(a,b,c,d){super();let e=this,f=null,g=1;var h=null;let i=null,l="local-floor",m=1,n=null,o=null;var p=[];let q=null,r=null,s=null,t=null,u=new bC,v=b.getContextAttributes(),w=null,x=null,y=[],z=[],A=new j.I9Y,B=null,C=new j.ubm;C.viewport=new j.IUQ;let D=new j.ubm;D.viewport=new j.IUQ;let E=[C,D],F=new j.nZQ,G=null,H=null;function I(a){let b=z.indexOf(a.inputSource);if(-1===b)return;let c=y[b];void 0!==c&&(c.update(a.inputSource,a.frame,n||i),c.dispatchEvent({type:a.type,data:a.inputSource}))}function J(){f.removeEventListener("select",I),f.removeEventListener("selectstart",I),f.removeEventListener("selectend",I),f.removeEventListener("squeeze",I),f.removeEventListener("squeezestart",I),f.removeEventListener("squeezeend",I),f.removeEventListener("end",J),f.removeEventListener("inputsourceschange",K);for(let a=0;a<y.length;a++){let b=z[a];null!==b&&(z[a]=null,y[a].disconnect(b))}G=null,H=null,u.reset(),e.isPresenting=!1,a.setRenderTarget(w),s=null,r=null,q=null,f=null,x=null,P.stop(),a.setPixelRatio(B),a.setSize(A.width,A.height,!1),e.dispatchEvent({type:"sessionend"})}function K(a){for(let b=0;b<a.removed.length;b++){let c=a.removed[b],d=z.indexOf(c);d>=0&&(z[d]=null,y[d].disconnect(c))}for(let b=0;b<a.added.length;b++){let c=a.added[b],d=z.indexOf(c);if(-1===d){for(let a=0;a<y.length;a++)if(a>=z.length){z.push(c),d=a;break}else if(null===z[a]){z[a]=c,d=a;break}if(-1===d)break}let e=y[d];e&&e.connect(c)}}this.cameraAutoUpdate=!0,this.layersEnabled=!1,this.enabled=!1,this.isPresenting=!1,this.isMultiview=!1,this.getCameraPose=function(){return o},this.getController=function(a){let b=y[a];return void 0===b&&(b=new j.R3r,y[a]=b),b.getTargetRaySpace()},this.getControllerGrip=function(a){let b=y[a];return void 0===b&&(b=new j.R3r,y[a]=b),b.getGripSpace()},this.getHand=function(a){let b=y[a];return void 0===b&&(b=new j.R3r,y[a]=b),b.getHandSpace()},this.setFramebufferScaleFactor=function(a){g=a,!0===e.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(a){l=a,!0===e.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return n||i},this.setReferenceSpace=function(a){n=a},this.getBaseLayer=function(){return null!==r?r:s},this.getBinding=function(){return q},this.getRenderTarget=function(){return x},this.getFrame=function(){return t},this.getSession=function(){return f},this.setSession=async function(h){if(null!==(f=h)){if(w=a.getRenderTarget(),f.addEventListener("select",I),f.addEventListener("selectstart",I),f.addEventListener("selectend",I),f.addEventListener("squeeze",I),f.addEventListener("squeezestart",I),f.addEventListener("squeezeend",I),f.addEventListener("end",J),f.addEventListener("inputsourceschange",K),!0!==v.xrCompatible&&await b.makeXRCompatible(),B=a.getPixelRatio(),a.getSize(A),"undefined"!=typeof XRWebGLBinding&&"createProjectionLayer"in XRWebGLBinding.prototype){let h=null,i=null,k=null;v.depth&&(k=v.stencil?b.DEPTH24_STENCIL8:b.DEPTH_COMPONENT24,h=v.stencil?j.dcC:j.zdS,i=v.stencil?j.V3x:j.bkx),e.isMultiview=d&&c.has("OCULUS_multiview");let l={colorFormat:b.RGBA8,depthFormat:k,scaleFactor:g};e.isMultiview&&(l.textureType="texture-array"),r=(q=new XRWebGLBinding(f,b)).createProjectionLayer(l),f.updateRenderState({layers:[r]}),a.setPixelRatio(1),a.setSize(r.textureWidth,r.textureHeight,!1);let m={format:j.GWd,type:j.OUM,depthTexture:new j.VCu(r.textureWidth,r.textureHeight,i,void 0,void 0,void 0,void 0,void 0,void 0,h),stencilBuffer:v.stencil,colorSpace:a.outputColorSpace,samples:4*!!v.antialias,resolveDepthBuffer:!1===r.ignoreDepthValues};if(e.isMultiview){let a=c.get("OCULUS_multiview");this.maxNumViews=b.getParameter(a.MAX_VIEWS_OVR),x=new bz(r.textureWidth,r.textureHeight,2,m)}else x=new j.nWS(r.textureWidth,r.textureHeight,m)}else{let c={antialias:v.antialias,alpha:!0,depth:v.depth,stencil:v.stencil,framebufferScaleFactor:g};s=new XRWebGLLayer(f,b,c),f.updateRenderState({baseLayer:s}),a.setPixelRatio(1),a.setSize(s.framebufferWidth,s.framebufferHeight,!1),x=new j.nWS(s.framebufferWidth,s.framebufferHeight,{format:j.GWd,type:j.OUM,colorSpace:a.outputColorSpace,stencilBuffer:v.stencil})}x.isXRRenderTarget=!0,this.setFoveation(m),n=null,i=await f.requestReferenceSpace(l),P.setContext(f),P.start(),e.isPresenting=!0,e.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(null!==f)return f.environmentBlendMode},this.addLayer=function(a){window.XRWebGLBinding&&this.layersEnabled&&f&&(p.push(a),this.updateLayers())},this.removeLayer=function(a){p.splice(p.indexOf(a),1),window.XRWebGLBinding&&this.layersEnabled&&f&&this.updateLayers()},this.updateLayers=function(){var a=p.map(function(a){return a});a.unshift(f.renderState.layers[0]),f.updateRenderState({layers:a})},this.getDepthTexture=function(){return u.getDepthTexture()};let L=new j.Pq0,M=new j.Pq0;function N(a,b){null===b?a.matrixWorld.copy(a.matrix):a.matrixWorld.multiplyMatrices(b.matrixWorld,a.matrix),a.matrixWorldInverse.copy(a.matrixWorld).invert()}this.setPoseTarget=function(a){void 0!==a&&(h=a)},this.updateCamera=function(a){if(null===f)return;let b=a.near,c=a.far;null!==u.texture&&(u.depthNear>0&&(b=u.depthNear),u.depthFar>0&&(c=u.depthFar)),F.near=D.near=C.near=b,F.far=D.far=C.far=c,(G!==F.near||H!==F.far)&&(f.updateRenderState({depthNear:F.near,depthFar:F.far}),G=F.near,H=F.far),C.layers.mask=2|a.layers.mask,D.layers.mask=4|a.layers.mask,F.layers.mask=C.layers.mask|D.layers.mask;let d=F.cameras;var e,g,i,k=h||a;let l=k.parent;N(F,l);for(let a=0;a<d.length;a++)N(d[a],l);2===d.length?function(a,b,c){L.setFromMatrixPosition(b.matrixWorld),M.setFromMatrixPosition(c.matrixWorld);let d=L.distanceTo(M),e=b.projectionMatrix.elements,f=c.projectionMatrix.elements,g=e[14]/(e[10]-1),h=e[14]/(e[10]+1),i=(e[9]+1)/e[5],j=(e[9]-1)/e[5],k=(e[8]-1)/e[0],l=(f[8]+1)/f[0],m=d/(-k+l),n=-(m*k);if(b.matrixWorld.decompose(a.position,a.quaternion,a.scale),a.translateX(n),a.translateZ(m),a.matrixWorld.compose(a.position,a.quaternion,a.scale),a.matrixWorldInverse.copy(a.matrixWorld).invert(),-1===e[10])a.projectionMatrix.copy(b.projectionMatrix),a.projectionMatrixInverse.copy(b.projectionMatrixInverse);else{let b=g+m,c=h+m;a.projectionMatrix.makePerspective(g*k-n,g*l+(d-n),i*h/c*b,j*h/c*b,b,c),a.projectionMatrixInverse.copy(a.projectionMatrix).invert()}}(F,C,D):F.projectionMatrix.copy(C.projectionMatrix),e=a,g=F,i=k,g.matrixWorld.decompose(g.position,g.quaternion,g.scale),null===i.parent?i.matrix.copy(g.matrixWorld):(i.matrix.copy(i.parent.matrixWorld),i.matrix.invert(),i.matrix.multiply(g.matrixWorld)),i.matrix.decompose(i.position,i.quaternion,i.scale),i.updateMatrixWorld(!0),e.projectionMatrix.copy(g.projectionMatrix),e.projectionMatrixInverse.copy(g.projectionMatrixInverse),e.isPerspectiveCamera&&(e.fov=2*j.a55*Math.atan(1/e.projectionMatrix.elements[5]),e.zoom=1)},this.getCamera=function(){return F},this.getFoveation=function(){if(null!==r||null!==s)return m},this.setFoveation=function(a){m=a,null!==r&&(r.fixedFoveation=a),null!==s&&void 0!==s.fixedFoveation&&(s.fixedFoveation=a)},this.hasDepthSensing=function(){return null!==u.texture},this.getDepthSensingMesh=function(){return u.getMesh(F)};let O=null,P=new k;P.setAnimationLoop(function(b,c){if(o=c.getViewerPose(n||i),t=c,null!==o){let b=o.views;null!==s&&(a.setRenderTargetFramebuffer(x,s.framebuffer),a.setRenderTarget(x));let c=!1;b.length!==F.cameras.length&&(F.cameras.length=0,c=!0);for(let d=0;d<b.length;d++){let e=b[d],f=null;if(null!==s)f=s.getViewport(e);else{let b=q.getViewSubImage(r,e);f=b.viewport,0===d&&(a.setRenderTargetTextures(x,b.colorTexture,r.ignoreDepthValues?void 0:b.depthStencilTexture),a.setRenderTarget(x))}let g=E[d];void 0===g&&((g=new j.ubm).layers.enable(d),g.viewport=new j.IUQ,E[d]=g),g.matrix.fromArray(e.transform.matrix),g.matrix.decompose(g.position,g.quaternion,g.scale),g.projectionMatrix.fromArray(e.projectionMatrix),g.projectionMatrixInverse.copy(g.projectionMatrix).invert(),g.viewport.set(f.x,f.y,f.width,f.height),0===d&&(F.matrix.copy(g.matrix),F.matrix.decompose(F.position,F.quaternion,F.scale)),!0===c&&F.cameras.push(g)}let d=f.enabledFeatures;if(d&&d.includes("depth-sensing")&&"gpu-optimized"==f.depthUsage&&q){let c=q.getDepthInformation(b[0]);c&&c.isValid&&c.texture&&u.init(a,c,f.renderState)}}for(let a=0;a<y.length;a++){let b=z[a],d=y[a];null!==b&&void 0!==d&&d.update(b,c,n||i)}O&&O(b,c),c.detectedPlanes&&e.dispatchEvent({type:"planesdetected",data:c}),t=null}),this.setAnimationLoop=function(a){O=a},this.dispose=function(){}}}let bE=new j.O9p,bF=new j.kn4;function bG(a,b){function c(a,b){!0===a.matrixAutoUpdate&&a.updateMatrix(),b.value.copy(a.matrix)}function d(a,d){a.opacity.value=d.opacity,d.color&&a.diffuse.value.copy(d.color),d.emissive&&a.emissive.value.copy(d.emissive).multiplyScalar(d.emissiveIntensity),d.map&&(a.map.value=d.map,c(d.map,a.mapTransform)),d.alphaMap&&(a.alphaMap.value=d.alphaMap,c(d.alphaMap,a.alphaMapTransform)),d.bumpMap&&(a.bumpMap.value=d.bumpMap,c(d.bumpMap,a.bumpMapTransform),a.bumpScale.value=d.bumpScale,d.side===j.hsX&&(a.bumpScale.value*=-1)),d.normalMap&&(a.normalMap.value=d.normalMap,c(d.normalMap,a.normalMapTransform),a.normalScale.value.copy(d.normalScale),d.side===j.hsX&&a.normalScale.value.negate()),d.displacementMap&&(a.displacementMap.value=d.displacementMap,c(d.displacementMap,a.displacementMapTransform),a.displacementScale.value=d.displacementScale,a.displacementBias.value=d.displacementBias),d.emissiveMap&&(a.emissiveMap.value=d.emissiveMap,c(d.emissiveMap,a.emissiveMapTransform)),d.specularMap&&(a.specularMap.value=d.specularMap,c(d.specularMap,a.specularMapTransform)),d.alphaTest>0&&(a.alphaTest.value=d.alphaTest);let e=b.get(d),f=e.envMap,g=e.envMapRotation;f&&(a.envMap.value=f,bE.copy(g),bE.x*=-1,bE.y*=-1,bE.z*=-1,f.isCubeTexture&&!1===f.isRenderTargetTexture&&(bE.y*=-1,bE.z*=-1),a.envMapRotation.value.setFromMatrix4(bF.makeRotationFromEuler(bE)),a.flipEnvMap.value=f.isCubeTexture&&!1===f.isRenderTargetTexture?-1:1,a.reflectivity.value=d.reflectivity,a.ior.value=d.ior,a.refractionRatio.value=d.refractionRatio),d.lightMap&&(a.lightMap.value=d.lightMap,a.lightMapIntensity.value=d.lightMapIntensity,c(d.lightMap,a.lightMapTransform)),d.aoMap&&(a.aoMap.value=d.aoMap,a.aoMapIntensity.value=d.aoMapIntensity,c(d.aoMap,a.aoMapTransform))}return{refreshFogUniforms:function(b,c){c.color.getRGB(b.fogColor.value,(0,j._Ut)(a)),c.isFog?(b.fogNear.value=c.near,b.fogFar.value=c.far):c.isFogExp2&&(b.fogDensity.value=c.density)},refreshMaterialUniforms:function(a,e,f,g,h){var i,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D;e.isMeshBasicMaterial||e.isMeshLambertMaterial?d(a,e):e.isMeshToonMaterial?(d(a,e),i=a,(k=e).gradientMap&&(i.gradientMap.value=k.gradientMap)):e.isMeshPhongMaterial?(d(a,e),l=a,m=e,l.specular.value.copy(m.specular),l.shininess.value=Math.max(m.shininess,1e-4)):e.isMeshStandardMaterial?(d(a,e),n=a,o=e,n.metalness.value=o.metalness,o.metalnessMap&&(n.metalnessMap.value=o.metalnessMap,c(o.metalnessMap,n.metalnessMapTransform)),n.roughness.value=o.roughness,o.roughnessMap&&(n.roughnessMap.value=o.roughnessMap,c(o.roughnessMap,n.roughnessMapTransform)),o.envMap&&(n.envMapIntensity.value=o.envMapIntensity),e.isMeshPhysicalMaterial&&(p=a,q=e,r=h,p.ior.value=q.ior,q.sheen>0&&(p.sheenColor.value.copy(q.sheenColor).multiplyScalar(q.sheen),p.sheenRoughness.value=q.sheenRoughness,q.sheenColorMap&&(p.sheenColorMap.value=q.sheenColorMap,c(q.sheenColorMap,p.sheenColorMapTransform)),q.sheenRoughnessMap&&(p.sheenRoughnessMap.value=q.sheenRoughnessMap,c(q.sheenRoughnessMap,p.sheenRoughnessMapTransform))),q.clearcoat>0&&(p.clearcoat.value=q.clearcoat,p.clearcoatRoughness.value=q.clearcoatRoughness,q.clearcoatMap&&(p.clearcoatMap.value=q.clearcoatMap,c(q.clearcoatMap,p.clearcoatMapTransform)),q.clearcoatRoughnessMap&&(p.clearcoatRoughnessMap.value=q.clearcoatRoughnessMap,c(q.clearcoatRoughnessMap,p.clearcoatRoughnessMapTransform)),q.clearcoatNormalMap&&(p.clearcoatNormalMap.value=q.clearcoatNormalMap,c(q.clearcoatNormalMap,p.clearcoatNormalMapTransform),p.clearcoatNormalScale.value.copy(q.clearcoatNormalScale),q.side===j.hsX&&p.clearcoatNormalScale.value.negate())),q.dispersion>0&&(p.dispersion.value=q.dispersion),q.iridescence>0&&(p.iridescence.value=q.iridescence,p.iridescenceIOR.value=q.iridescenceIOR,p.iridescenceThicknessMinimum.value=q.iridescenceThicknessRange[0],p.iridescenceThicknessMaximum.value=q.iridescenceThicknessRange[1],q.iridescenceMap&&(p.iridescenceMap.value=q.iridescenceMap,c(q.iridescenceMap,p.iridescenceMapTransform)),q.iridescenceThicknessMap&&(p.iridescenceThicknessMap.value=q.iridescenceThicknessMap,c(q.iridescenceThicknessMap,p.iridescenceThicknessMapTransform))),q.transmission>0&&(p.transmission.value=q.transmission,p.transmissionSamplerMap.value=r.texture,p.transmissionSamplerSize.value.set(r.width,r.height),q.transmissionMap&&(p.transmissionMap.value=q.transmissionMap,c(q.transmissionMap,p.transmissionMapTransform)),p.thickness.value=q.thickness,q.thicknessMap&&(p.thicknessMap.value=q.thicknessMap,c(q.thicknessMap,p.thicknessMapTransform)),p.attenuationDistance.value=q.attenuationDistance,p.attenuationColor.value.copy(q.attenuationColor)),q.anisotropy>0&&(p.anisotropyVector.value.set(q.anisotropy*Math.cos(q.anisotropyRotation),q.anisotropy*Math.sin(q.anisotropyRotation)),q.anisotropyMap&&(p.anisotropyMap.value=q.anisotropyMap,c(q.anisotropyMap,p.anisotropyMapTransform))),p.specularIntensity.value=q.specularIntensity,p.specularColor.value.copy(q.specularColor),q.specularColorMap&&(p.specularColorMap.value=q.specularColorMap,c(q.specularColorMap,p.specularColorMapTransform)),q.specularIntensityMap&&(p.specularIntensityMap.value=q.specularIntensityMap,c(q.specularIntensityMap,p.specularIntensityMapTransform)))):e.isMeshMatcapMaterial?(d(a,e),s=a,(t=e).matcap&&(s.matcap.value=t.matcap)):e.isMeshDepthMaterial?d(a,e):e.isMeshDistanceMaterial?(d(a,e),function(a,c){let d=b.get(c).light;a.referencePosition.value.setFromMatrixPosition(d.matrixWorld),a.nearDistance.value=d.shadow.camera.near,a.farDistance.value=d.shadow.camera.far}(a,e)):e.isMeshNormalMaterial?d(a,e):e.isLineBasicMaterial?(u=a,v=e,u.diffuse.value.copy(v.color),u.opacity.value=v.opacity,v.map&&(u.map.value=v.map,c(v.map,u.mapTransform)),e.isLineDashedMaterial&&(w=a,x=e,w.dashSize.value=x.dashSize,w.totalSize.value=x.dashSize+x.gapSize,w.scale.value=x.scale)):e.isPointsMaterial?(y=a,z=e,A=f,B=g,y.diffuse.value.copy(z.color),y.opacity.value=z.opacity,y.size.value=z.size*A,y.scale.value=.5*B,z.map&&(y.map.value=z.map,c(z.map,y.uvTransform)),z.alphaMap&&(y.alphaMap.value=z.alphaMap,c(z.alphaMap,y.alphaMapTransform)),z.alphaTest>0&&(y.alphaTest.value=z.alphaTest)):e.isSpriteMaterial?(C=a,D=e,C.diffuse.value.copy(D.color),C.opacity.value=D.opacity,C.rotation.value=D.rotation,D.map&&(C.map.value=D.map,c(D.map,C.mapTransform)),D.alphaMap&&(C.alphaMap.value=D.alphaMap,c(D.alphaMap,C.alphaMapTransform)),D.alphaTest>0&&(C.alphaTest.value=D.alphaTest)):e.isShadowMaterial?(a.color.value.copy(e.color),a.opacity.value=e.opacity):e.isShaderMaterial&&(e.uniformsNeedUpdate=!1)}}}function bH(a,b,c,d){let e={},f={},g=[],h=a.getParameter(a.MAX_UNIFORM_BUFFER_BINDINGS);function i(a){let b={boundary:0,storage:0};return"number"==typeof a||"boolean"==typeof a?(b.boundary=4,b.storage=4):a.isVector2?(b.boundary=8,b.storage=8):a.isVector3||a.isColor?(b.boundary=16,b.storage=12):a.isVector4?(b.boundary=16,b.storage=16):a.isMatrix3?(b.boundary=48,b.storage=48):a.isMatrix4?(b.boundary=64,b.storage=64):a.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",a),b}function j(b){let c=b.target;c.removeEventListener("dispose",j);let d=g.indexOf(c.__bindingPointIndex);g.splice(d,1),a.deleteBuffer(e[c.id]),delete e[c.id],delete f[c.id]}return{bind:function(a,b){let c=b.program;d.uniformBlockBinding(a,c)},update:function(c,k){let l=e[c.id];void 0===l&&(function(a){let b=a.uniforms,c=0;for(let a=0,d=b.length;a<d;a++){let d=Array.isArray(b[a])?b[a]:[b[a]];for(let a=0,b=d.length;a<b;a++){let b=d[a],e=Array.isArray(b.value)?b.value:[b.value];for(let a=0,d=e.length;a<d;a++){let d=i(e[a]),f=c%16,g=f%d.boundary,h=f+g;c+=g,0!==h&&16-h<d.storage&&(c+=16-h),b.__data=new Float32Array(d.storage/Float32Array.BYTES_PER_ELEMENT),b.__offset=c,c+=d.storage}}}let d=c%16;d>0&&(c+=16-d),a.__size=c,a.__cache={}}(c),l=function(b){let c=function(){for(let a=0;a<h;a++)if(-1===g.indexOf(a))return g.push(a),a;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}();b.__bindingPointIndex=c;let d=a.createBuffer(),e=b.__size,f=b.usage;return a.bindBuffer(a.UNIFORM_BUFFER,d),a.bufferData(a.UNIFORM_BUFFER,e,f),a.bindBuffer(a.UNIFORM_BUFFER,null),a.bindBufferBase(a.UNIFORM_BUFFER,c,d),d}(c),e[c.id]=l,c.addEventListener("dispose",j));let m=k.program;d.updateUBOMapping(c,m);let n=b.render.frame;f[c.id]!==n&&(function(b){let c=e[b.id],d=b.uniforms,f=b.__cache;a.bindBuffer(a.UNIFORM_BUFFER,c);for(let b=0,c=d.length;b<c;b++){let c=Array.isArray(d[b])?d[b]:[d[b]];for(let d=0,e=c.length;d<e;d++){let e=c[d];if(!0===function(a,b,c,d){let e=a.value,f=b+"_"+c;if(void 0===d[f])return"number"==typeof e||"boolean"==typeof e?d[f]=e:d[f]=e.clone(),!0;{let a=d[f];if("number"==typeof e||"boolean"==typeof e){if(a!==e)return d[f]=e,!0}else if(!1===a.equals(e))return a.copy(e),!0}return!1}(e,b,d,f)){let b=e.__offset,c=Array.isArray(e.value)?e.value:[e.value],d=0;for(let f=0;f<c.length;f++){let g=c[f],h=i(g);"number"==typeof g||"boolean"==typeof g?(e.__data[0]=g,a.bufferSubData(a.UNIFORM_BUFFER,b+d,e.__data)):g.isMatrix3?(e.__data[0]=g.elements[0],e.__data[1]=g.elements[1],e.__data[2]=g.elements[2],e.__data[3]=0,e.__data[4]=g.elements[3],e.__data[5]=g.elements[4],e.__data[6]=g.elements[5],e.__data[7]=0,e.__data[8]=g.elements[6],e.__data[9]=g.elements[7],e.__data[10]=g.elements[8],e.__data[11]=0):(g.toArray(e.__data,d),d+=h.storage/Float32Array.BYTES_PER_ELEMENT)}a.bufferSubData(a.UNIFORM_BUFFER,b,e.__data)}}}a.bindBuffer(a.UNIFORM_BUFFER,null)}(c),f[c.id]=n)},dispose:function(){for(let b in e)a.deleteBuffer(e[b]);g=[],e={},f={}}}}class bI{constructor(a={}){let b,c,d,e,f,g,h,i,m,n,o,p,q,r,y,z,A,B,C,D,E,F,G,H,I,J,{canvas:K=(0,j.lPF)(),context:L=null,depth:M=!0,stencil:N=!1,alpha:W=!1,antialias:X=!1,premultipliedAlpha:Y=!0,preserveDrawingBuffer:Z=!1,powerPreference:$="default",failIfMajorPerformanceCaveat:_=!1,reverseDepthBuffer:aa=!1,multiviewStereo:ab=!1}=a;if(this.isWebGLRenderer=!0,null!==L){if("undefined"!=typeof WebGLRenderingContext&&L instanceof WebGLRenderingContext)throw Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");b=L.getContextAttributes().alpha}else b=W;let ac=new Uint32Array(4),ad=new Int32Array(4),ae=null,af=null,ag=[],ah=[];this.domElement=K,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this._outputColorSpace=j.er$,this.toneMapping=j.y_p,this.toneMappingExposure=1;let ai=this,aj=!1,ak=0,al=0,am=null,an=-1,ao=null,ap=new j.IUQ,aq=new j.IUQ,ar=null,as=new j.Q1f(0),at=0,au=K.width,av=K.height,aw=1,ax=null,ay=null,az=new j.IUQ(0,0,au,av),aA=new j.IUQ(0,0,au,av),aB=!1,aC=new j.PPD,aD=!1,aE=!1;this.transmissionResolutionScale=1;let aF=new j.kn4,aG=new j.kn4,aH=new j.Pq0,aI=new j.IUQ,aJ={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0},aK=!1;function aL(){return null===am?aw:1}let aM=L;function aN(a,b){return K.getContext(a,b)}try{if("setAttribute"in K&&K.setAttribute("data-engine",`three.js r${j.sPf}`),K.addEventListener("webglcontextlost",aQ,!1),K.addEventListener("webglcontextrestored",aR,!1),K.addEventListener("webglcontextcreationerror",aS,!1),null===aM){let a="webgl2";if(aM=aN(a,{alpha:!0,depth:M,stencil:N,antialias:X,premultipliedAlpha:Y,preserveDrawingBuffer:Z,powerPreference:$,failIfMajorPerformanceCaveat:_}),null===aM)if(aN(a))throw Error("Error creating WebGL context with your selected attributes.");else throw Error("Error creating WebGL context.")}}catch(a){throw console.error("THREE.WebGLRenderer: "+a.message),a}function aO(){(c=new P(aM)).init(),H=new by(aM,c),d=new v(aM,c,a,H),e=new bw(aM,c),d.reverseDepthBuffer&&aa&&e.buffers.depth.setReversed(!0),f=new S(aM),g=new bj,h=new bx(aM,c,e,g,d,H,f),i=new x(ai),m=new O(ai),n=new l(aM),I=new t(aM,n),o=new Q(aM,n,f,I),p=new V(aM,o,n,f),E=new T(aM,d,h),A=new w(g),q=new bi(ai,i,m,c,d,I,A),r=new bG(ai,g),y=new bn,z=new bt(c),D=new s(ai,i,m,e,p,b,Y),C=new U(ai,c,aM),B=new bu(ai,p,d),J=new bH(aM,f,d,e),F=new u(aM,c,f),G=new R(aM,c,f),f.programs=q.programs,ai.capabilities=d,ai.extensions=c,ai.properties=g,ai.renderLists=y,ai.shadowMap=B,ai.state=e,ai.info=f}aO();let aP=new bD(ai,aM);function aQ(a){a.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),aj=!0}function aR(){console.log("THREE.WebGLRenderer: Context Restored."),aj=!1;let a=f.autoReset,b=B.enabled,c=B.autoUpdate,d=B.needsUpdate,e=B.type;aO(),f.autoReset=a,B.enabled=b,B.autoUpdate=c,B.needsUpdate=d,B.type=e}function aS(a){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",a.statusMessage)}function aT(a){var b;let c=a.target;c.removeEventListener("dispose",aT),function(a){let b=g.get(a).programs;void 0!==b&&(b.forEach(function(a){q.releaseProgram(a)}),a.isShaderMaterial&&q.releaseShaderCache(a))}(b=c),g.remove(b)}function aU(a,b,c){!0===a.transparent&&a.side===j.$EB&&!1===a.forceSinglePass?(a.side=j.hsX,a.needsUpdate=!0,a3(a,b,c),a.side=j.hB5,a.needsUpdate=!0,a3(a,b,c),a.side=j.$EB):a3(a,b,c)}this.xr=aP,this.getContext=function(){return aM},this.getContextAttributes=function(){return aM.getContextAttributes()},this.forceContextLoss=function(){let a=c.get("WEBGL_lose_context");a&&a.loseContext()},this.forceContextRestore=function(){let a=c.get("WEBGL_lose_context");a&&a.restoreContext()},this.getPixelRatio=function(){return aw},this.setPixelRatio=function(a){void 0!==a&&(aw=a,this.setSize(au,av,!1))},this.getSize=function(a){return a.set(au,av)},this.setSize=function(a,b,c=!0){if(aP.isPresenting)return void console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");au=a,av=b,K.width=Math.floor(a*aw),K.height=Math.floor(b*aw),!0===c&&(K.style.width=a+"px",K.style.height=b+"px"),this.setViewport(0,0,a,b)},this.getDrawingBufferSize=function(a){return a.set(au*aw,av*aw).floor()},this.setDrawingBufferSize=function(a,b,c){au=a,av=b,aw=c,K.width=Math.floor(a*c),K.height=Math.floor(b*c),this.setViewport(0,0,a,b)},this.getCurrentViewport=function(a){return a.copy(ap)},this.getViewport=function(a){return a.copy(az)},this.setViewport=function(a,b,c,d){a.isVector4?az.set(a.x,a.y,a.z,a.w):az.set(a,b,c,d),e.viewport(ap.copy(az).multiplyScalar(aw).round())},this.getScissor=function(a){return a.copy(aA)},this.setScissor=function(a,b,c,d){a.isVector4?aA.set(a.x,a.y,a.z,a.w):aA.set(a,b,c,d),e.scissor(aq.copy(aA).multiplyScalar(aw).round())},this.getScissorTest=function(){return aB},this.setScissorTest=function(a){e.setScissorTest(aB=a)},this.setOpaqueSort=function(a){ax=a},this.setTransparentSort=function(a){ay=a},this.getClearColor=function(a){return a.copy(D.getClearColor())},this.setClearColor=function(){D.setClearColor.apply(D,arguments)},this.getClearAlpha=function(){return D.getClearAlpha()},this.setClearAlpha=function(){D.setClearAlpha.apply(D,arguments)},this.clear=function(a=!0,b=!0,c=!0){let d=0;if(a){let a=!1;if(null!==am){let b=am.texture.format;a=b===j.c90||b===j.TkQ||b===j.ZQM}if(a){let a=am.texture.type,b=a===j.OUM||a===j.bkx||a===j.cHt||a===j.V3x||a===j.Wew||a===j.gJ2,c=D.getClearColor(),d=D.getClearAlpha(),e=c.r,f=c.g,g=c.b;b?(ac[0]=e,ac[1]=f,ac[2]=g,ac[3]=d,aM.clearBufferuiv(aM.COLOR,0,ac)):(ad[0]=e,ad[1]=f,ad[2]=g,ad[3]=d,aM.clearBufferiv(aM.COLOR,0,ad))}else d|=aM.COLOR_BUFFER_BIT}b&&(d|=aM.DEPTH_BUFFER_BIT),c&&(d|=aM.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(0xffffffff)),aM.clear(d)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){K.removeEventListener("webglcontextlost",aQ,!1),K.removeEventListener("webglcontextrestored",aR,!1),K.removeEventListener("webglcontextcreationerror",aS,!1),D.dispose(),y.dispose(),z.dispose(),g.dispose(),i.dispose(),m.dispose(),p.dispose(),I.dispose(),J.dispose(),q.dispose(),aP.dispose(),aP.removeEventListener("sessionstart",aW),aP.removeEventListener("sessionend",aX),aY.stop()},this.renderBufferDirect=function(a,b,f,k,l,p){let q;null===b&&(b=aJ);let s=l.isMesh&&0>l.matrixWorld.determinant(),t=function(a,b,c,f,k){var l,n;!0!==b.isScene&&(b=aJ),h.resetTextureUnits();let o=b.fog,p=f.isMeshStandardMaterial?b.environment:null,q=null===am?ai.outputColorSpace:!0===am.isXRRenderTarget?am.texture.colorSpace:j.Zr2,s=(f.isMeshStandardMaterial?m:i).get(f.envMap||p),t=!0===f.vertexColors&&!!c.attributes.color&&4===c.attributes.color.itemSize,u=!!c.attributes.tangent&&(!!f.normalMap||f.anisotropy>0),v=!!c.morphAttributes.position,w=!!c.morphAttributes.normal,x=!!c.morphAttributes.color,y=j.y_p;f.toneMapped&&(null===am||!0===am.isXRRenderTarget)&&(y=ai.toneMapping);let z=am&&am.isWebGLMultiviewRenderTarget?am.numViews:0,B=c.morphAttributes.position||c.morphAttributes.normal||c.morphAttributes.color,D=void 0!==B?B.length:0,F=g.get(f),G=af.state.lights;if(!0===aD&&(!0===aE||a!==ao)){let b=a===ao&&f.id===an;A.setState(f,a,b)}let H=!1;f.version===F.__version?F.needsLights&&F.lightsStateVersion!==G.state.version||F.outputColorSpace!==q||k.isBatchedMesh&&!1===F.batching?H=!0:k.isBatchedMesh||!0!==F.batching?k.isBatchedMesh&&!0===F.batchingColor&&null===k.colorTexture||k.isBatchedMesh&&!1===F.batchingColor&&null!==k.colorTexture||k.isInstancedMesh&&!1===F.instancing?H=!0:k.isInstancedMesh||!0!==F.instancing?k.isSkinnedMesh&&!1===F.skinning?H=!0:k.isSkinnedMesh||!0!==F.skinning?k.isInstancedMesh&&!0===F.instancingColor&&null===k.instanceColor||k.isInstancedMesh&&!1===F.instancingColor&&null!==k.instanceColor||k.isInstancedMesh&&!0===F.instancingMorph&&null===k.morphTexture||k.isInstancedMesh&&!1===F.instancingMorph&&null!==k.morphTexture||F.envMap!==s||!0===f.fog&&F.fog!==o||void 0!==F.numClippingPlanes&&(F.numClippingPlanes!==A.numPlanes||F.numIntersection!==A.numIntersection)||F.vertexAlphas!==t||F.vertexTangents!==u||F.morphTargets!==v||F.morphNormals!==w||F.morphColors!==x||F.toneMapping!==y||F.morphTargetsCount!==D?H=!0:F.numMultiviewViews!==z&&(H=!0):H=!0:H=!0:H=!0:(H=!0,F.__version=f.version);let I=F.currentProgram;!0===H&&(I=a3(f,b,k));let K=!1,L=!1,M=!1,N=I.getUniforms(),O=F.uniforms;if(e.useProgram(I.program)&&(K=!0,L=!0,M=!0),f.id!==an&&(an=f.id,L=!0),K||ao!==a){I.numMultiviewViews>0?(C.updateCameraProjectionMatricesUniform(a,N),C.updateCameraViewMatricesUniform(a,N)):(e.buffers.depth.getReversed()?(aF.copy(a.projectionMatrix),(0,j.xiE)(aF),(0,j.Mmk)(aF),N.setValue(aM,"projectionMatrix",aF)):N.setValue(aM,"projectionMatrix",a.projectionMatrix),N.setValue(aM,"viewMatrix",a.matrixWorldInverse));let b=N.map.cameraPosition;void 0!==b&&b.setValue(aM,aH.setFromMatrixPosition(a.matrixWorld)),d.logarithmicDepthBuffer&&N.setValue(aM,"logDepthBufFC",2/(Math.log(a.far+1)/Math.LN2)),(f.isMeshPhongMaterial||f.isMeshToonMaterial||f.isMeshLambertMaterial||f.isMeshBasicMaterial||f.isMeshStandardMaterial||f.isShaderMaterial)&&N.setValue(aM,"isOrthographic",!0===a.isOrthographicCamera),ao!==a&&(ao=a,L=!0,M=!0)}if(k.isSkinnedMesh){N.setOptional(aM,k,"bindMatrix"),N.setOptional(aM,k,"bindMatrixInverse");let a=k.skeleton;a&&(null===a.boneTexture&&a.computeBoneTexture(),N.setValue(aM,"boneTexture",a.boneTexture,h))}k.isBatchedMesh&&(N.setOptional(aM,k,"batchingTexture"),N.setValue(aM,"batchingTexture",k._matricesTexture,h),N.setOptional(aM,k,"batchingIdTexture"),N.setValue(aM,"batchingIdTexture",k._indirectTexture,h),N.setOptional(aM,k,"batchingColorTexture"),null!==k._colorsTexture&&N.setValue(aM,"batchingColorTexture",k._colorsTexture,h));let P=c.morphAttributes;if((void 0!==P.position||void 0!==P.normal||void 0!==P.color)&&E.update(k,c,I),(L||F.receiveShadow!==k.receiveShadow)&&(F.receiveShadow=k.receiveShadow,N.setValue(aM,"receiveShadow",k.receiveShadow)),f.isMeshGouraudMaterial&&null!==f.envMap&&(O.envMap.value=s,O.flipEnvMap.value=s.isCubeTexture&&!1===s.isRenderTargetTexture?-1:1),f.isMeshStandardMaterial&&null===f.envMap&&null!==b.environment&&(O.envMapIntensity.value=b.environmentIntensity),L&&(N.setValue(aM,"toneMappingExposure",ai.toneMappingExposure),F.needsLights&&(l=O,n=M,l.ambientLightColor.needsUpdate=n,l.lightProbe.needsUpdate=n,l.directionalLights.needsUpdate=n,l.directionalLightShadows.needsUpdate=n,l.pointLights.needsUpdate=n,l.pointLightShadows.needsUpdate=n,l.spotLights.needsUpdate=n,l.spotLightShadows.needsUpdate=n,l.rectAreaLights.needsUpdate=n,l.hemisphereLights.needsUpdate=n),o&&!0===f.fog&&r.refreshFogUniforms(O,o),r.refreshMaterialUniforms(O,f,aw,av,af.state.transmissionRenderTarget[a.id]),aZ.upload(aM,a4(F),O,h)),f.isShaderMaterial&&!0===f.uniformsNeedUpdate&&(aZ.upload(aM,a4(F),O,h),f.uniformsNeedUpdate=!1),f.isSpriteMaterial&&N.setValue(aM,"center",k.center),I.numMultiviewViews>0?C.updateObjectMatricesUniforms(k,a,N):(N.setValue(aM,"modelViewMatrix",k.modelViewMatrix),N.setValue(aM,"normalMatrix",k.normalMatrix)),N.setValue(aM,"modelMatrix",k.matrixWorld),f.isShaderMaterial||f.isRawShaderMaterial){let a=f.uniformsGroups;for(let b=0,c=a.length;b<c;b++){let c=a[b];J.update(c,I),J.bind(c,I)}}return I}(a,b,f,k,l);e.setMaterial(k,s);let u=f.index,v=1;if(!0===k.wireframe){if(void 0===(u=o.getWireframeAttribute(f)))return;v=2}let w=f.drawRange,x=f.attributes.position,y=w.start*v,z=(w.start+w.count)*v;null!==p&&(y=Math.max(y,p.start*v),z=Math.min(z,(p.start+p.count)*v)),null!==u?(y=Math.max(y,0),z=Math.min(z,u.count)):null!=x&&(y=Math.max(y,0),z=Math.min(z,x.count));let B=z-y;if(B<0||B===1/0)return;I.setup(l,k,t,f,u);let D=F;if(null!==u&&(q=n.get(u),(D=G).setIndex(q)),l.isMesh)!0===k.wireframe?(e.setLineWidth(k.wireframeLinewidth*aL()),D.setMode(aM.LINES)):D.setMode(aM.TRIANGLES);else if(l.isLine){let a=k.linewidth;void 0===a&&(a=1),e.setLineWidth(a*aL()),l.isLineSegments?D.setMode(aM.LINES):l.isLineLoop?D.setMode(aM.LINE_LOOP):D.setMode(aM.LINE_STRIP)}else l.isPoints?D.setMode(aM.POINTS):l.isSprite&&D.setMode(aM.TRIANGLES);if(l.isBatchedMesh)if(null!==l._multiDrawInstances)D.renderMultiDrawInstances(l._multiDrawStarts,l._multiDrawCounts,l._multiDrawCount,l._multiDrawInstances);else if(c.get("WEBGL_multi_draw"))D.renderMultiDraw(l._multiDrawStarts,l._multiDrawCounts,l._multiDrawCount);else{let a=l._multiDrawStarts,b=l._multiDrawCounts,c=l._multiDrawCount,d=u?n.get(u).bytesPerElement:1,e=g.get(k).currentProgram.getUniforms();for(let f=0;f<c;f++)e.setValue(aM,"_gl_DrawID",f),D.render(a[f]/d,b[f])}else if(l.isInstancedMesh)D.renderInstances(y,B,l.count);else if(f.isInstancedBufferGeometry){let a=void 0!==f._maxInstanceCount?f._maxInstanceCount:1/0,b=Math.min(f.instanceCount,a);D.renderInstances(y,B,b)}else D.render(y,B)},this.compile=function(a,b,c=null){null===c&&(c=a),(af=z.get(c)).init(b),ah.push(af),c.traverseVisible(function(a){a.isLight&&a.layers.test(b.layers)&&(af.pushLight(a),a.castShadow&&af.pushShadow(a))}),a!==c&&a.traverseVisible(function(a){a.isLight&&a.layers.test(b.layers)&&(af.pushLight(a),a.castShadow&&af.pushShadow(a))}),af.setupLights();let d=new Set;return a.traverse(function(a){if(!(a.isMesh||a.isPoints||a.isLine||a.isSprite))return;let b=a.material;if(b)if(Array.isArray(b))for(let e=0;e<b.length;e++){let f=b[e];aU(f,c,a),d.add(f)}else aU(b,c,a),d.add(b)}),ah.pop(),af=null,d},this.compileAsync=function(a,b,d=null){let e=this.compile(a,b,d);return new Promise(b=>{function d(){if(e.forEach(function(a){g.get(a).currentProgram.isReady()&&e.delete(a)}),0===e.size)return void b(a);setTimeout(d,10)}null!==c.get("KHR_parallel_shader_compile")?d():setTimeout(d,10)})};let aV=null;function aW(){aY.stop()}function aX(){aY.start()}let aY=new k;function a$(a,b,c,d){if(!1===a.visible)return;if(a.layers.test(b.layers)){if(a.isGroup)c=a.renderOrder;else if(a.isLOD)!0===a.autoUpdate&&a.update(b);else if(a.isLight)af.pushLight(a),a.castShadow&&af.pushShadow(a);else if(a.isSprite){if(!a.frustumCulled||aC.intersectsSprite(a)){d&&aI.setFromMatrixPosition(a.matrixWorld).applyMatrix4(aG);let b=p.update(a),e=a.material;e.visible&&ae.push(a,b,e,c,aI.z,null)}}else if((a.isMesh||a.isLine||a.isPoints)&&(!a.frustumCulled||aC.intersectsObject(a))){let b=p.update(a),e=a.material;if(d&&(void 0!==a.boundingSphere?(null===a.boundingSphere&&a.computeBoundingSphere(),aI.copy(a.boundingSphere.center)):(null===b.boundingSphere&&b.computeBoundingSphere(),aI.copy(b.boundingSphere.center)),aI.applyMatrix4(a.matrixWorld).applyMatrix4(aG)),Array.isArray(e)){let d=b.groups;for(let f=0,g=d.length;f<g;f++){let g=d[f],h=e[g.materialIndex];h&&h.visible&&ae.push(a,b,h,c,aI.z,g)}}else e.visible&&ae.push(a,b,e,c,aI.z,null)}}let e=a.children;for(let a=0,f=e.length;a<f;a++)a$(e[a],b,c,d)}function a_(a,b,c,d){let f=a.opaque,g=a.transmissive,h=a.transparent;af.setupLightsView(c),!0===aD&&A.setGlobalState(ai.clippingPlanes,c),d&&e.viewport(ap.copy(d)),f.length>0&&a1(f,b,c),g.length>0&&a1(g,b,c),h.length>0&&a1(h,b,c),e.buffers.depth.setTest(!0),e.buffers.depth.setMask(!0),e.buffers.color.setMask(!0),e.setPolygonOffset(!1)}function a0(a,b,d,e){if(null!==(!0===d.isScene?d.overrideMaterial:null))return;void 0===af.state.transmissionRenderTarget[e.id]&&(af.state.transmissionRenderTarget[e.id]=new j.nWS(1,1,{generateMipmaps:!0,type:c.has("EXT_color_buffer_half_float")||c.has("EXT_color_buffer_float")?j.ix0:j.OUM,minFilter:j.$_I,samples:4,stencilBuffer:N,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:j.ppV.workingColorSpace}));let f=af.state.transmissionRenderTarget[e.id],g=e.viewport||ap;f.setSize(g.z*ai.transmissionResolutionScale,g.w*ai.transmissionResolutionScale);let i=ai.getRenderTarget();ai.setRenderTarget(f),ai.getClearColor(as),(at=ai.getClearAlpha())<1&&ai.setClearColor(0xffffff,.5),ai.clear(),aK&&D.render(d);let k=ai.toneMapping;ai.toneMapping=j.y_p;let l=e.viewport;if(void 0!==e.viewport&&(e.viewport=void 0),af.setupLightsView(e),!0===aD&&A.setGlobalState(ai.clippingPlanes,e),a1(a,d,e),h.updateMultisampleRenderTarget(f),h.updateRenderTargetMipmap(f),!1===c.has("WEBGL_multisampled_render_to_texture")){let a=!1;for(let c=0,f=b.length;c<f;c++){let f=b[c],g=f.object,h=f.geometry,i=f.material,k=f.group;if(i.side===j.$EB&&g.layers.test(e.layers)){let b=i.side;i.side=j.hsX,i.needsUpdate=!0,a2(g,d,e,h,i,k),i.side=b,i.needsUpdate=!0,a=!0}}!0===a&&(h.updateMultisampleRenderTarget(f),h.updateRenderTargetMipmap(f))}ai.setRenderTarget(i),ai.setClearColor(as,at),void 0!==l&&(e.viewport=l),ai.toneMapping=k}function a1(a,b,c){let d=!0===b.isScene?b.overrideMaterial:null;for(let e=0,f=a.length;e<f;e++){let f=a[e],g=f.object,h=f.geometry,i=null===d?f.material:d,j=f.group;g.layers.test(c.layers)&&a2(g,b,c,h,i,j)}}function a2(a,b,c,d,e,f){a.onBeforeRender(ai,b,c,d,e,f),a.modelViewMatrix.multiplyMatrices(c.matrixWorldInverse,a.matrixWorld),a.normalMatrix.getNormalMatrix(a.modelViewMatrix),e.onBeforeRender(ai,b,c,d,a,f),!0===e.transparent&&e.side===j.$EB&&!1===e.forceSinglePass?(e.side=j.hsX,e.needsUpdate=!0,ai.renderBufferDirect(c,b,d,e,a,f),e.side=j.hB5,e.needsUpdate=!0,ai.renderBufferDirect(c,b,d,e,a,f),e.side=j.$EB):ai.renderBufferDirect(c,b,d,e,a,f),a.onAfterRender(ai,b,c,d,e,f)}function a3(a,b,c){var d;!0!==b.isScene&&(b=aJ);let e=g.get(a),f=af.state.lights,h=af.state.shadowsArray,j=f.state.version,k=q.getParameters(a,f.state,h,b,c),l=q.getProgramCacheKey(k),n=e.programs;e.environment=a.isMeshStandardMaterial?b.environment:null,e.fog=b.fog,e.envMap=(a.isMeshStandardMaterial?m:i).get(a.envMap||e.environment),e.envMapRotation=null!==e.environment&&null===a.envMap?b.environmentRotation:a.envMapRotation,void 0===n&&(a.addEventListener("dispose",aT),e.programs=n=new Map);let o=n.get(l);if(void 0!==o){if(e.currentProgram===o&&e.lightsStateVersion===j)return a5(a,k),o}else k.uniforms=q.getUniforms(a),a.onBeforeCompile(k,ai),o=q.acquireProgram(k,l),n.set(l,o),e.uniforms=k.uniforms;let p=e.uniforms;return(a.isShaderMaterial||a.isRawShaderMaterial)&&!0!==a.clipping||(p.clippingPlanes=A.uniform),a5(a,k),e.needsLights=(d=a).isMeshLambertMaterial||d.isMeshToonMaterial||d.isMeshPhongMaterial||d.isMeshStandardMaterial||d.isShadowMaterial||d.isShaderMaterial&&!0===d.lights,e.lightsStateVersion=j,e.needsLights&&(p.ambientLightColor.value=f.state.ambient,p.lightProbe.value=f.state.probe,p.directionalLights.value=f.state.directional,p.directionalLightShadows.value=f.state.directionalShadow,p.spotLights.value=f.state.spot,p.spotLightShadows.value=f.state.spotShadow,p.rectAreaLights.value=f.state.rectArea,p.ltc_1.value=f.state.rectAreaLTC1,p.ltc_2.value=f.state.rectAreaLTC2,p.pointLights.value=f.state.point,p.pointLightShadows.value=f.state.pointShadow,p.hemisphereLights.value=f.state.hemi,p.directionalShadowMap.value=f.state.directionalShadowMap,p.directionalShadowMatrix.value=f.state.directionalShadowMatrix,p.spotShadowMap.value=f.state.spotShadowMap,p.spotLightMatrix.value=f.state.spotLightMatrix,p.spotLightMap.value=f.state.spotLightMap,p.pointShadowMap.value=f.state.pointShadowMap,p.pointShadowMatrix.value=f.state.pointShadowMatrix),e.currentProgram=o,e.uniformsList=null,o}function a4(a){if(null===a.uniformsList){let b=a.currentProgram.getUniforms();a.uniformsList=aZ.seqWithValue(b.seq,a.uniforms)}return a.uniformsList}function a5(a,b){let c=g.get(a);c.outputColorSpace=b.outputColorSpace,c.batching=b.batching,c.batchingColor=b.batchingColor,c.instancing=b.instancing,c.instancingColor=b.instancingColor,c.instancingMorph=b.instancingMorph,c.skinning=b.skinning,c.morphTargets=b.morphTargets,c.morphNormals=b.morphNormals,c.morphColors=b.morphColors,c.morphTargetsCount=b.morphTargetsCount,c.numClippingPlanes=b.numClippingPlanes,c.numIntersection=b.numClipIntersection,c.vertexAlphas=b.vertexAlphas,c.vertexTangents=b.vertexTangents,c.toneMapping=b.toneMapping,c.numMultiviewViews=b.numMultiviewViews}aY.setAnimationLoop(function(a){aV&&aV(a)}),"undefined"!=typeof self&&aY.setContext(self),this.setAnimationLoop=function(a){aV=a,aP.setAnimationLoop(a),null===a?aY.stop():aY.start()},aP.addEventListener("sessionstart",aW),aP.addEventListener("sessionend",aX),this.render=function(a,b){if(void 0!==b&&!0!==b.isCamera)return void console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");if(!0===aj)return;if(!0===a.matrixWorldAutoUpdate&&a.updateMatrixWorld(),null===b.parent&&!0===b.matrixWorldAutoUpdate&&b.updateMatrixWorld(),!0===aP.enabled&&!0===aP.isPresenting&&(!0===aP.cameraAutoUpdate&&aP.updateCamera(b),b=aP.getCamera()),!0===a.isScene&&a.onBeforeRender(ai,a,b,am),(af=z.get(a,ah.length)).init(b),ah.push(af),aG.multiplyMatrices(b.projectionMatrix,b.matrixWorldInverse),aC.setFromProjectionMatrix(aG),aE=this.localClippingEnabled,aD=A.init(this.clippingPlanes,aE),(ae=y.get(a,ag.length)).init(),ag.push(ae),!0===aP.enabled&&!0===aP.isPresenting){let a=ai.xr.getDepthSensingMesh();null!==a&&a$(a,b,-1/0,ai.sortObjects)}a$(a,b,0,ai.sortObjects),ae.finish(),!0===ai.sortObjects&&ae.sort(ax,ay),(aK=!1===aP.enabled||!1===aP.isPresenting||!1===aP.hasDepthSensing())&&D.addToRenderList(ae,a),this.info.render.frame++,!0===aD&&A.beginShadows();let c=af.state.shadowsArray;B.render(c,a,b),!0===aD&&A.endShadows(),!0===this.info.autoReset&&this.info.reset();let d=ae.opaque,e=ae.transmissive;if(af.setupLights(),b.isArrayCamera){let c=b.cameras;if(e.length>0)for(let b=0,f=c.length;b<f;b++)a0(d,e,a,c[b]);if(aK&&D.render(a),aP.enabled&&aP.isMultiview)h.setDeferTextureUploads(!0),a_(ae,a,b,b.cameras[0].viewport);else for(let b=0,d=c.length;b<d;b++){let d=c[b];a_(ae,a,d,d.viewport)}}else e.length>0&&a0(d,e,a,b),aK&&D.render(a),a_(ae,a,b);null!==am&&0===al&&(h.updateMultisampleRenderTarget(am),h.updateRenderTargetMipmap(am)),!0===a.isScene&&a.onAfterRender(ai,a,b),I.resetDefaultState(),an=-1,ao=null,ah.pop(),ah.length>0?(af=ah[ah.length-1],!0===aD&&A.setGlobalState(ai.clippingPlanes,af.state.camera)):af=null,ag.pop(),ae=ag.length>0?ag[ag.length-1]:null},this.setTexture2D=function(){var a=!1;return function(b,c){b&&b.isWebGLRenderTarget&&(a||(console.warn("THREE.WebGLRenderer.setTexture2D: don't use render targets as textures. Use their .texture property instead."),a=!0),b=b.texture),h.setTexture2D(b,c)}}(),this.getActiveCubeFace=function(){return ak},this.getActiveMipmapLevel=function(){return al},this.getRenderTarget=function(){return am},this.setRenderTargetTextures=function(a,b,d){g.get(a.texture).__webglTexture=b,g.get(a.depthTexture).__webglTexture=d;let e=g.get(a);e.__hasExternalTextures=!0,e.__autoAllocateDepthBuffer=void 0===d,e.__autoAllocateDepthBuffer||am&&am.isWebGLMultiviewRenderTarget||!0!==c.has("WEBGL_multisampled_render_to_texture")||(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),e.__useRenderToTexture=!1)},this.setRenderTargetFramebuffer=function(a,b){let c=g.get(a);c.__webglFramebuffer=b,c.__useDefaultFramebuffer=void 0===b};let a6=aM.createFramebuffer();this.setRenderTarget=function(a,b=0,c=0){null===a&&this.xr.isPresenting&&(a=this.xr.getRenderTarget()),am=a,ak=b,al=c;let d=!0,f=null,i=!1,j=!1;if(a){let k=g.get(a);if(void 0!==k.__useDefaultFramebuffer)e.bindFramebuffer(aM.FRAMEBUFFER,null),d=!1;else if(void 0===k.__webglFramebuffer)h.setupRenderTarget(a);else if(k.__hasExternalTextures)h.rebindTextures(a,g.get(a.texture).__webglTexture,g.get(a.depthTexture).__webglTexture);else if(a.depthBuffer){let b=a.depthTexture;if(k.__boundDepthTexture!==b){if(null!==b&&g.has(b)&&(a.width!==b.image.width||a.height!==b.image.height))throw Error("WebGLRenderTarget: Attached DepthTexture is initialized to the incorrect size.");h.setupDepthRenderbuffer(a)}}let l=a.texture;(l.isData3DTexture||l.isDataArrayTexture||l.isCompressedArrayTexture)&&(j=!0);let m=g.get(a).__webglFramebuffer;a.isWebGLCubeRenderTarget?(f=Array.isArray(m[b])?m[b][c]:m[b],i=!0):f=a.samples>0&&!1===h.useMultisampledRTT(a)?g.get(a).__webglMultisampledFramebuffer:Array.isArray(m)?m[c]:m,ap.copy(a.viewport),aq.copy(a.scissor),ar=a.scissorTest}else ap.copy(az).multiplyScalar(aw).floor(),aq.copy(aA).multiplyScalar(aw).floor(),ar=aB;if(0!==c&&(f=a6),e.bindFramebuffer(aM.FRAMEBUFFER,f)&&d&&e.drawBuffers(a,f),e.viewport(ap),e.scissor(aq),e.setScissorTest(ar),i){let d=g.get(a.texture);aM.framebufferTexture2D(aM.FRAMEBUFFER,aM.COLOR_ATTACHMENT0,aM.TEXTURE_CUBE_MAP_POSITIVE_X+b,d.__webglTexture,c)}else if(j){let d=g.get(a.texture);aM.framebufferTextureLayer(aM.FRAMEBUFFER,aM.COLOR_ATTACHMENT0,d.__webglTexture,c,b)}else if(null!==a&&0!==c){let b=g.get(a.texture);aM.framebufferTexture2D(aM.FRAMEBUFFER,aM.COLOR_ATTACHMENT0,aM.TEXTURE_2D,b.__webglTexture,c)}an=-1},this.readRenderTargetPixels=function(a,b,c,f,h,i,j){if(!(a&&a.isWebGLRenderTarget))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let k=g.get(a).__webglFramebuffer;if(a.isWebGLCubeRenderTarget&&void 0!==j&&(k=k[j]),k){e.bindFramebuffer(aM.FRAMEBUFFER,k);try{let e=a.texture,g=e.format,j=e.type;if(!d.textureFormatReadable(g))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");if(!d.textureTypeReadable(j))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");b>=0&&b<=a.width-f&&c>=0&&c<=a.height-h&&aM.readPixels(b,c,f,h,H.convert(g),H.convert(j),i)}finally{let a=null!==am?g.get(am).__webglFramebuffer:null;e.bindFramebuffer(aM.FRAMEBUFFER,a)}}},this.readRenderTargetPixelsAsync=async function(a,b,c,f,h,i,k){if(!(a&&a.isWebGLRenderTarget))throw Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let l=g.get(a).__webglFramebuffer;if(a.isWebGLCubeRenderTarget&&void 0!==k&&(l=l[k]),l){let k=a.texture,m=k.format,n=k.type;if(!d.textureFormatReadable(m))throw Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!d.textureTypeReadable(n))throw Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");if(b>=0&&b<=a.width-f&&c>=0&&c<=a.height-h){e.bindFramebuffer(aM.FRAMEBUFFER,l);let a=aM.createBuffer();aM.bindBuffer(aM.PIXEL_PACK_BUFFER,a),aM.bufferData(aM.PIXEL_PACK_BUFFER,i.byteLength,aM.STREAM_READ),aM.readPixels(b,c,f,h,H.convert(m),H.convert(n),0);let d=null!==am?g.get(am).__webglFramebuffer:null;e.bindFramebuffer(aM.FRAMEBUFFER,d);let k=aM.fenceSync(aM.SYNC_GPU_COMMANDS_COMPLETE,0);return aM.flush(),await (0,j.jej)(aM,k,4),aM.bindBuffer(aM.PIXEL_PACK_BUFFER,a),aM.getBufferSubData(aM.PIXEL_PACK_BUFFER,0,i),aM.deleteBuffer(a),aM.deleteSync(k),i}throw Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: requested read bounds are out of range.")}},this.copyFramebufferToTexture=function(a,b=null,c=0){!0!==a.isTexture&&((0,j.mcG)("WebGLRenderer: copyFramebufferToTexture function signature has changed."),b=arguments[0]||null,a=arguments[1]);let d=Math.pow(2,-c),f=Math.floor(a.image.width*d),g=Math.floor(a.image.height*d),i=null!==b?b.x:0,k=null!==b?b.y:0;h.setTexture2D(a,0),aM.copyTexSubImage2D(aM.TEXTURE_2D,c,0,0,i,k,f,g),e.unbindTexture()};let a7=aM.createFramebuffer(),a8=aM.createFramebuffer();this.copyTextureToTexture=function(a,b,c=null,d=null,f=0,i=null){let k,l,m,n,o,p,q,r,s,t;!0!==a.isTexture&&((0,j.mcG)("WebGLRenderer: copyTextureToTexture function signature has changed."),d=arguments[0]||null,a=arguments[1],b=arguments[2],i=arguments[3]||0,c=null),null===i&&(0!==f?((0,j.mcG)("WebGLRenderer: copyTextureToTexture function signature has changed to support src and dst mipmap levels."),i=f,f=0):i=0);let u=a.isCompressedTexture?a.mipmaps[i]:a.image;if(null!==c)k=c.max.x-c.min.x,l=c.max.y-c.min.y,m=c.isBox3?c.max.z-c.min.z:1,n=c.min.x,o=c.min.y,p=c.isBox3?c.min.z:0;else{let b=Math.pow(2,-f);k=Math.floor(u.width*b),l=Math.floor(u.height*b),m=a.isDataArrayTexture?u.depth:a.isData3DTexture?Math.floor(u.depth*b):1,n=0,o=0,p=0}null!==d?(q=d.x,r=d.y,s=d.z):(q=0,r=0,s=0);let v=H.convert(b.format),w=H.convert(b.type);b.isData3DTexture?(h.setTexture3D(b,0),t=aM.TEXTURE_3D):b.isDataArrayTexture||b.isCompressedArrayTexture?(h.setTexture2DArray(b,0),t=aM.TEXTURE_2D_ARRAY):(h.setTexture2D(b,0),t=aM.TEXTURE_2D),aM.pixelStorei(aM.UNPACK_FLIP_Y_WEBGL,b.flipY),aM.pixelStorei(aM.UNPACK_PREMULTIPLY_ALPHA_WEBGL,b.premultiplyAlpha),aM.pixelStorei(aM.UNPACK_ALIGNMENT,b.unpackAlignment);let x=aM.getParameter(aM.UNPACK_ROW_LENGTH),y=aM.getParameter(aM.UNPACK_IMAGE_HEIGHT),z=aM.getParameter(aM.UNPACK_SKIP_PIXELS),A=aM.getParameter(aM.UNPACK_SKIP_ROWS),B=aM.getParameter(aM.UNPACK_SKIP_IMAGES);aM.pixelStorei(aM.UNPACK_ROW_LENGTH,u.width),aM.pixelStorei(aM.UNPACK_IMAGE_HEIGHT,u.height),aM.pixelStorei(aM.UNPACK_SKIP_PIXELS,n),aM.pixelStorei(aM.UNPACK_SKIP_ROWS,o),aM.pixelStorei(aM.UNPACK_SKIP_IMAGES,p);let C=a.isDataArrayTexture||a.isData3DTexture,D=b.isDataArrayTexture||b.isData3DTexture;if(a.isDepthTexture){let c=g.get(a),d=g.get(b),h=g.get(c.__renderTarget),j=g.get(d.__renderTarget);e.bindFramebuffer(aM.READ_FRAMEBUFFER,h.__webglFramebuffer),e.bindFramebuffer(aM.DRAW_FRAMEBUFFER,j.__webglFramebuffer);for(let c=0;c<m;c++)C&&(aM.framebufferTextureLayer(aM.READ_FRAMEBUFFER,aM.COLOR_ATTACHMENT0,g.get(a).__webglTexture,f,p+c),aM.framebufferTextureLayer(aM.DRAW_FRAMEBUFFER,aM.COLOR_ATTACHMENT0,g.get(b).__webglTexture,i,s+c)),aM.blitFramebuffer(n,o,k,l,q,r,k,l,aM.DEPTH_BUFFER_BIT,aM.NEAREST);e.bindFramebuffer(aM.READ_FRAMEBUFFER,null),e.bindFramebuffer(aM.DRAW_FRAMEBUFFER,null)}else if(0!==f||a.isRenderTargetTexture||g.has(a)){let c=g.get(a),d=g.get(b);e.bindFramebuffer(aM.READ_FRAMEBUFFER,a7),e.bindFramebuffer(aM.DRAW_FRAMEBUFFER,a8);for(let a=0;a<m;a++)C?aM.framebufferTextureLayer(aM.READ_FRAMEBUFFER,aM.COLOR_ATTACHMENT0,c.__webglTexture,f,p+a):aM.framebufferTexture2D(aM.READ_FRAMEBUFFER,aM.COLOR_ATTACHMENT0,aM.TEXTURE_2D,c.__webglTexture,f),D?aM.framebufferTextureLayer(aM.DRAW_FRAMEBUFFER,aM.COLOR_ATTACHMENT0,d.__webglTexture,i,s+a):aM.framebufferTexture2D(aM.DRAW_FRAMEBUFFER,aM.COLOR_ATTACHMENT0,aM.TEXTURE_2D,d.__webglTexture,i),0!==f?aM.blitFramebuffer(n,o,k,l,q,r,k,l,aM.COLOR_BUFFER_BIT,aM.NEAREST):D?aM.copyTexSubImage3D(t,i,q,r,s+a,n,o,k,l):aM.copyTexSubImage2D(t,i,q,r,n,o,k,l);e.bindFramebuffer(aM.READ_FRAMEBUFFER,null),e.bindFramebuffer(aM.DRAW_FRAMEBUFFER,null)}else D?a.isDataTexture||a.isData3DTexture?aM.texSubImage3D(t,i,q,r,s,k,l,m,v,w,u.data):b.isCompressedArrayTexture?aM.compressedTexSubImage3D(t,i,q,r,s,k,l,m,v,u.data):aM.texSubImage3D(t,i,q,r,s,k,l,m,v,w,u):a.isDataTexture?aM.texSubImage2D(aM.TEXTURE_2D,i,q,r,k,l,v,w,u.data):a.isCompressedTexture?aM.compressedTexSubImage2D(aM.TEXTURE_2D,i,q,r,u.width,u.height,v,u.data):aM.texSubImage2D(aM.TEXTURE_2D,i,q,r,k,l,v,w,u);aM.pixelStorei(aM.UNPACK_ROW_LENGTH,x),aM.pixelStorei(aM.UNPACK_IMAGE_HEIGHT,y),aM.pixelStorei(aM.UNPACK_SKIP_PIXELS,z),aM.pixelStorei(aM.UNPACK_SKIP_ROWS,A),aM.pixelStorei(aM.UNPACK_SKIP_IMAGES,B),0===i&&b.generateMipmaps&&aM.generateMipmap(t),e.unbindTexture()},this.copyTextureToTexture3D=function(a,b,c=null,d=null,e=0){return!0!==a.isTexture&&((0,j.mcG)("WebGLRenderer: copyTextureToTexture3D function signature has changed."),c=arguments[0]||null,d=arguments[1]||null,a=arguments[2],b=arguments[3],e=arguments[4]||0),(0,j.mcG)('WebGLRenderer: copyTextureToTexture3D function has been deprecated. Use "copyTextureToTexture" instead.'),this.copyTextureToTexture(a,b,c,d,e)},this.initRenderTarget=function(a){void 0===g.get(a).__webglFramebuffer&&h.setupRenderTarget(a)},this.initTexture=function(a){a.isCubeTexture?h.setTextureCube(a,0):a.isData3DTexture?h.setTexture3D(a,0):a.isDataArrayTexture||a.isCompressedArrayTexture?h.setTexture2DArray(a,0):h.setTexture2D(a,0),e.unbindTexture()},this.resetState=function(){ak=0,al=0,am=null,e.reset(),I.reset()},"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return j.TdN}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(a){this._outputColorSpace=a;let b=this.getContext();b.drawingBufferColorspace=j.ppV._getDrawingBufferColorSpace(a),b.unpackColorSpace=j.ppV._getUnpackColorSpace()}}var bJ={8167:a=>{var b=Object.prototype.toString;a.exports=function(a){return a.BYTES_PER_ELEMENT&&"[object ArrayBuffer]"===b.call(a.buffer)||Array.isArray(a)}},5734:a=>{a.exports=function(a,b){return"number"==typeof a?a:"number"==typeof b?b:0}},7961:(a,b)=>{b.byteLength=function(a){var b=h(a),c=b[0],d=b[1];return 3*(c+d)/4-d},b.toByteArray=function(a){var b,c,f=h(a),g=f[0],i=f[1],j=new e(3*(g+i)/4-i),k=0,l=i>0?g-4:g;for(c=0;c<l;c+=4)b=d[a.charCodeAt(c)]<<18|d[a.charCodeAt(c+1)]<<12|d[a.charCodeAt(c+2)]<<6|d[a.charCodeAt(c+3)],j[k++]=b>>16&255,j[k++]=b>>8&255,j[k++]=255&b;return 2===i&&(b=d[a.charCodeAt(c)]<<2|d[a.charCodeAt(c+1)]>>4,j[k++]=255&b),1===i&&(b=d[a.charCodeAt(c)]<<10|d[a.charCodeAt(c+1)]<<4|d[a.charCodeAt(c+2)]>>2,j[k++]=b>>8&255,j[k++]=255&b),j},b.fromByteArray=function(a){for(var b,d=a.length,e=d%3,f=[],g=0,h=d-e;g<h;g+=16383)f.push(function(a,b,d){for(var e,f=[],g=b;g<d;g+=3)f.push(c[(e=(a[g]<<16&0xff0000)+(a[g+1]<<8&65280)+(255&a[g+2]))>>18&63]+c[e>>12&63]+c[e>>6&63]+c[63&e]);return f.join("")}(a,g,g+16383>h?h:g+16383));return 1===e?f.push(c[(b=a[d-1])>>2]+c[b<<4&63]+"=="):2===e&&f.push(c[(b=(a[d-2]<<8)+a[d-1])>>10]+c[b>>4&63]+c[b<<2&63]+"="),f.join("")};for(var c=[],d=[],e="undefined"!=typeof Uint8Array?Uint8Array:Array,f="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",g=0;g<64;++g)c[g]=f[g],d[f.charCodeAt(g)]=g;function h(a){var b=a.length;if(b%4>0)throw Error("Invalid string. Length must be a multiple of 4");var c=a.indexOf("=");return -1===c&&(c=b),[c,c===b?0:4-c%4]}d[45]=62,d[95]=63},911:(a,b,c)=>{var d=c(9922).hp;a.exports=function(a,b){if(d.isBuffer(a)&&d.isBuffer(b)){if("function"==typeof a.equals)return a.equals(b);if(a.length!==b.length)return!1;for(var c=0;c<a.length;c++)if(a[c]!==b[c])return!1;return!0}}},9922:(a,b,c)=>{let d=c(7961),e=c(1024),f="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;function g(a){if(a>0x7fffffff)throw RangeError('The value "'+a+'" is invalid for option "size"');let b=new Uint8Array(a);return Object.setPrototypeOf(b,h.prototype),b}function h(a,b,c){if("number"==typeof a){if("string"==typeof b)throw TypeError('The "string" argument must be of type string. Received type number');return k(a)}return i(a,b,c)}function i(a,b,c){if("string"==typeof a){var d=b;if("string"==typeof d&&""!==d||(d="utf8"),!h.isEncoding(d))throw TypeError("Unknown encoding: "+d);let c=0|o(a,d),e=g(c),f=e.write(a,d);return f!==c&&(e=e.slice(0,f)),e}if(ArrayBuffer.isView(a)){if(M(a,Uint8Array)){let b=new Uint8Array(a);return m(b.buffer,b.byteOffset,b.byteLength)}return l(a)}if(null==a)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof a);if(M(a,ArrayBuffer)||a&&M(a.buffer,ArrayBuffer)||"undefined"!=typeof SharedArrayBuffer&&(M(a,SharedArrayBuffer)||a&&M(a.buffer,SharedArrayBuffer)))return m(a,b,c);if("number"==typeof a)throw TypeError('The "value" argument must not be of type number. Received type number');let e=a.valueOf&&a.valueOf();if(null!=e&&e!==a)return h.from(e,b,c);let f=function(a){var b;if(h.isBuffer(a)){let b=0|n(a.length),c=g(b);return 0===c.length||a.copy(c,0,0,b),c}return void 0!==a.length?"number"!=typeof a.length||(b=a.length)!=b?g(0):l(a):"Buffer"===a.type&&Array.isArray(a.data)?l(a.data):void 0}(a);if(f)return f;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof a[Symbol.toPrimitive])return h.from(a[Symbol.toPrimitive]("string"),b,c);throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof a)}function j(a){if("number"!=typeof a)throw TypeError('"size" argument must be of type number');if(a<0)throw RangeError('The value "'+a+'" is invalid for option "size"')}function k(a){return j(a),g(a<0?0:0|n(a))}function l(a){let b=a.length<0?0:0|n(a.length),c=g(b);for(let d=0;d<b;d+=1)c[d]=255&a[d];return c}function m(a,b,c){let d;if(b<0||a.byteLength<b)throw RangeError('"offset" is outside of buffer bounds');if(a.byteLength<b+(c||0))throw RangeError('"length" is outside of buffer bounds');return Object.setPrototypeOf(d=void 0===b&&void 0===c?new Uint8Array(a):void 0===c?new Uint8Array(a,b):new Uint8Array(a,b,c),h.prototype),d}function n(a){if(a>=0x7fffffff)throw RangeError("Attempt to allocate Buffer larger than maximum size: 0x7fffffff bytes");return 0|a}function o(a,b){if(h.isBuffer(a))return a.length;if(ArrayBuffer.isView(a)||M(a,ArrayBuffer))return a.byteLength;if("string"!=typeof a)throw TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof a);let c=a.length,d=arguments.length>2&&!0===arguments[2];if(!d&&0===c)return 0;let e=!1;for(;;)switch(b){case"ascii":case"latin1":case"binary":return c;case"utf8":case"utf-8":return J(a).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*c;case"hex":return c>>>1;case"base64":return K(a).length;default:if(e)return d?-1:J(a).length;b=(""+b).toLowerCase(),e=!0}}function p(a,b,c){let e=!1;if((void 0===b||b<0)&&(b=0),b>this.length||((void 0===c||c>this.length)&&(c=this.length),c<=0)||(c>>>=0)<=(b>>>=0))return"";for(a||(a="utf8");;)switch(a){case"hex":return function(a,b,c){let d=a.length;(!b||b<0)&&(b=0),(!c||c<0||c>d)&&(c=d);let e="";for(let d=b;d<c;++d)e+=N[a[d]];return e}(this,b,c);case"utf8":case"utf-8":return t(this,b,c);case"ascii":return function(a,b,c){let d="";c=Math.min(a.length,c);for(let e=b;e<c;++e)d+=String.fromCharCode(127&a[e]);return d}(this,b,c);case"latin1":case"binary":return function(a,b,c){let d="";c=Math.min(a.length,c);for(let e=b;e<c;++e)d+=String.fromCharCode(a[e]);return d}(this,b,c);case"base64":var f,g,h;return f=this,g=b,h=c,0===g&&h===f.length?d.fromByteArray(f):d.fromByteArray(f.slice(g,h));case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return function(a,b,c){let d=a.slice(b,c),e="";for(let a=0;a<d.length-1;a+=2)e+=String.fromCharCode(d[a]+256*d[a+1]);return e}(this,b,c);default:if(e)throw TypeError("Unknown encoding: "+a);a=(a+"").toLowerCase(),e=!0}}function q(a,b,c){let d=a[b];a[b]=a[c],a[c]=d}function r(a,b,c,d,e){var f;if(0===a.length)return -1;if("string"==typeof c?(d=c,c=0):c>0x7fffffff?c=0x7fffffff:c<-0x80000000&&(c=-0x80000000),(f=c*=1)!=f&&(c=e?0:a.length-1),c<0&&(c=a.length+c),c>=a.length){if(e)return -1;c=a.length-1}else if(c<0){if(!e)return -1;c=0}if("string"==typeof b&&(b=h.from(b,d)),h.isBuffer(b))return 0===b.length?-1:s(a,b,c,d,e);if("number"==typeof b)return b&=255,"function"==typeof Uint8Array.prototype.indexOf?e?Uint8Array.prototype.indexOf.call(a,b,c):Uint8Array.prototype.lastIndexOf.call(a,b,c):s(a,[b],c,d,e);throw TypeError("val must be string, number or Buffer")}function s(a,b,c,d,e){let f,g=1,h=a.length,i=b.length;if(void 0!==d&&("ucs2"===(d=String(d).toLowerCase())||"ucs-2"===d||"utf16le"===d||"utf-16le"===d)){if(a.length<2||b.length<2)return -1;g=2,h/=2,i/=2,c/=2}function j(a,b){return 1===g?a[b]:a.readUInt16BE(b*g)}if(e){let d=-1;for(f=c;f<h;f++)if(j(a,f)===j(b,-1===d?0:f-d)){if(-1===d&&(d=f),f-d+1===i)return d*g}else -1!==d&&(f-=f-d),d=-1}else for(c+i>h&&(c=h-i),f=c;f>=0;f--){let c=!0;for(let d=0;d<i;d++)if(j(a,f+d)!==j(b,d)){c=!1;break}if(c)return f}return -1}function t(a,b,c){c=Math.min(a.length,c);let d=[],e=b;for(;e<c;){let b=a[e],f=null,g=b>239?4:b>223?3:b>191?2:1;if(e+g<=c){let c,d,h,i;switch(g){case 1:b<128&&(f=b);break;case 2:128==(192&(c=a[e+1]))&&(i=(31&b)<<6|63&c)>127&&(f=i);break;case 3:c=a[e+1],d=a[e+2],128==(192&c)&&128==(192&d)&&(i=(15&b)<<12|(63&c)<<6|63&d)>2047&&(i<55296||i>57343)&&(f=i);break;case 4:c=a[e+1],d=a[e+2],h=a[e+3],128==(192&c)&&128==(192&d)&&128==(192&h)&&(i=(15&b)<<18|(63&c)<<12|(63&d)<<6|63&h)>65535&&i<1114112&&(f=i)}}null===f?(f=65533,g=1):f>65535&&(f-=65536,d.push(f>>>10&1023|55296),f=56320|1023&f),d.push(f),e+=g}let f=d.length;if(f<=u)return String.fromCharCode.apply(String,d);let g="",h=0;for(;h<f;)g+=String.fromCharCode.apply(String,d.slice(h,h+=u));return g}b.hp=h,b.IS=50,h.TYPED_ARRAY_SUPPORT=function(){try{let a=new Uint8Array(1),b={foo:function(){return 42}};return Object.setPrototypeOf(b,Uint8Array.prototype),Object.setPrototypeOf(a,b),42===a.foo()}catch(a){return!1}}(),h.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(h.prototype,"parent",{enumerable:!0,get:function(){if(h.isBuffer(this))return this.buffer}}),Object.defineProperty(h.prototype,"offset",{enumerable:!0,get:function(){if(h.isBuffer(this))return this.byteOffset}}),h.poolSize=8192,h.from=function(a,b,c){return i(a,b,c)},Object.setPrototypeOf(h.prototype,Uint8Array.prototype),Object.setPrototypeOf(h,Uint8Array),h.alloc=function(a,b,c){return j(a),a<=0?g(a):void 0!==b?"string"==typeof c?g(a).fill(b,c):g(a).fill(b):g(a)},h.allocUnsafe=function(a){return k(a)},h.allocUnsafeSlow=function(a){return k(a)},h.isBuffer=function(a){return null!=a&&!0===a._isBuffer&&a!==h.prototype},h.compare=function(a,b){if(M(a,Uint8Array)&&(a=h.from(a,a.offset,a.byteLength)),M(b,Uint8Array)&&(b=h.from(b,b.offset,b.byteLength)),!h.isBuffer(a)||!h.isBuffer(b))throw TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(a===b)return 0;let c=a.length,d=b.length;for(let e=0,f=Math.min(c,d);e<f;++e)if(a[e]!==b[e]){c=a[e],d=b[e];break}return c<d?-1:+(d<c)},h.isEncoding=function(a){switch(String(a).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},h.concat=function(a,b){let c;if(!Array.isArray(a))throw TypeError('"list" argument must be an Array of Buffers');if(0===a.length)return h.alloc(0);if(void 0===b)for(b=0,c=0;c<a.length;++c)b+=a[c].length;let d=h.allocUnsafe(b),e=0;for(c=0;c<a.length;++c){let b=a[c];if(M(b,Uint8Array))e+b.length>d.length?(h.isBuffer(b)||(b=h.from(b)),b.copy(d,e)):Uint8Array.prototype.set.call(d,b,e);else{if(!h.isBuffer(b))throw TypeError('"list" argument must be an Array of Buffers');b.copy(d,e)}e+=b.length}return d},h.byteLength=o,h.prototype._isBuffer=!0,h.prototype.swap16=function(){let a=this.length;if(a%2!=0)throw RangeError("Buffer size must be a multiple of 16-bits");for(let b=0;b<a;b+=2)q(this,b,b+1);return this},h.prototype.swap32=function(){let a=this.length;if(a%4!=0)throw RangeError("Buffer size must be a multiple of 32-bits");for(let b=0;b<a;b+=4)q(this,b,b+3),q(this,b+1,b+2);return this},h.prototype.swap64=function(){let a=this.length;if(a%8!=0)throw RangeError("Buffer size must be a multiple of 64-bits");for(let b=0;b<a;b+=8)q(this,b,b+7),q(this,b+1,b+6),q(this,b+2,b+5),q(this,b+3,b+4);return this},h.prototype.toString=function(){let a=this.length;return 0===a?"":0==arguments.length?t(this,0,a):p.apply(this,arguments)},h.prototype.toLocaleString=h.prototype.toString,h.prototype.equals=function(a){if(!h.isBuffer(a))throw TypeError("Argument must be a Buffer");return this===a||0===h.compare(this,a)},h.prototype.inspect=function(){let a="",c=b.IS;return a=this.toString("hex",0,c).replace(/(.{2})/g,"$1 ").trim(),this.length>c&&(a+=" ... "),"<Buffer "+a+">"},f&&(h.prototype[f]=h.prototype.inspect),h.prototype.compare=function(a,b,c,d,e){if(M(a,Uint8Array)&&(a=h.from(a,a.offset,a.byteLength)),!h.isBuffer(a))throw TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof a);if(void 0===b&&(b=0),void 0===c&&(c=a?a.length:0),void 0===d&&(d=0),void 0===e&&(e=this.length),b<0||c>a.length||d<0||e>this.length)throw RangeError("out of range index");if(d>=e&&b>=c)return 0;if(d>=e)return -1;if(b>=c)return 1;if(this===a)return 0;let f=(e>>>=0)-(d>>>=0),g=(c>>>=0)-(b>>>=0),i=Math.min(f,g),j=this.slice(d,e),k=a.slice(b,c);for(let a=0;a<i;++a)if(j[a]!==k[a]){f=j[a],g=k[a];break}return f<g?-1:+(g<f)},h.prototype.includes=function(a,b,c){return -1!==this.indexOf(a,b,c)},h.prototype.indexOf=function(a,b,c){return r(this,a,b,c,!0)},h.prototype.lastIndexOf=function(a,b,c){return r(this,a,b,c,!1)},h.prototype.write=function(a,b,c,d){var e,f,g,h,i,j,k,l;if(void 0===b)d="utf8",c=this.length,b=0;else if(void 0===c&&"string"==typeof b)d=b,c=this.length,b=0;else{if(!isFinite(b))throw Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");b>>>=0,isFinite(c)?(c>>>=0,void 0===d&&(d="utf8")):(d=c,c=void 0)}let m=this.length-b;if((void 0===c||c>m)&&(c=m),a.length>0&&(c<0||b<0)||b>this.length)throw RangeError("Attempt to write outside buffer bounds");d||(d="utf8");let n=!1;for(;;)switch(d){case"hex":return function(a,b,c,d){let e;c=Number(c)||0;let f=a.length-c;d?(d=Number(d))>f&&(d=f):d=f;let g=b.length;for(d>g/2&&(d=g/2),e=0;e<d;++e){var h;let d=parseInt(b.substr(2*e,2),16);if((h=d)!=h)break;a[c+e]=d}return e}(this,a,b,c);case"utf8":case"utf-8":return e=b,f=c,L(J(a,this.length-e),this,e,f);case"ascii":case"latin1":case"binary":return g=b,h=c,L(function(a){let b=[];for(let c=0;c<a.length;++c)b.push(255&a.charCodeAt(c));return b}(a),this,g,h);case"base64":return i=b,j=c,L(K(a),this,i,j);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return k=b,l=c,L(function(a,b){let c,d,e=[];for(let f=0;f<a.length&&!((b-=2)<0);++f)d=(c=a.charCodeAt(f))>>8,e.push(c%256),e.push(d);return e}(a,this.length-k),this,k,l);default:if(n)throw TypeError("Unknown encoding: "+d);d=(""+d).toLowerCase(),n=!0}},h.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};let u=4096;function v(a,b,c){if(a%1!=0||a<0)throw RangeError("offset is not uint");if(a+b>c)throw RangeError("Trying to access beyond buffer length")}function w(a,b,c,d,e,f){if(!h.isBuffer(a))throw TypeError('"buffer" argument must be a Buffer instance');if(b>e||b<f)throw RangeError('"value" argument is out of bounds');if(c+d>a.length)throw RangeError("Index out of range")}function x(a,b,c,d,e){F(b,d,e,a,c,7);let f=Number(b&BigInt(0xffffffff));a[c++]=f,f>>=8,a[c++]=f,f>>=8,a[c++]=f,f>>=8,a[c++]=f;let g=Number(b>>BigInt(32)&BigInt(0xffffffff));return a[c++]=g,g>>=8,a[c++]=g,g>>=8,a[c++]=g,g>>=8,a[c++]=g,c}function y(a,b,c,d,e){F(b,d,e,a,c,7);let f=Number(b&BigInt(0xffffffff));a[c+7]=f,f>>=8,a[c+6]=f,f>>=8,a[c+5]=f,f>>=8,a[c+4]=f;let g=Number(b>>BigInt(32)&BigInt(0xffffffff));return a[c+3]=g,g>>=8,a[c+2]=g,g>>=8,a[c+1]=g,g>>=8,a[c]=g,c+8}function z(a,b,c,d,e,f){if(c+d>a.length||c<0)throw RangeError("Index out of range")}function A(a,b,c,d,f){return b*=1,c>>>=0,f||z(a,0,c,4),e.write(a,b,c,d,23,4),c+4}function B(a,b,c,d,f){return b*=1,c>>>=0,f||z(a,0,c,8),e.write(a,b,c,d,52,8),c+8}h.prototype.slice=function(a,b){let c=this.length;(a=~~a)<0?(a+=c)<0&&(a=0):a>c&&(a=c),(b=void 0===b?c:~~b)<0?(b+=c)<0&&(b=0):b>c&&(b=c),b<a&&(b=a);let d=this.subarray(a,b);return Object.setPrototypeOf(d,h.prototype),d},h.prototype.readUintLE=h.prototype.readUIntLE=function(a,b,c){a>>>=0,b>>>=0,c||v(a,b,this.length);let d=this[a],e=1,f=0;for(;++f<b&&(e*=256);)d+=this[a+f]*e;return d},h.prototype.readUintBE=h.prototype.readUIntBE=function(a,b,c){a>>>=0,b>>>=0,c||v(a,b,this.length);let d=this[a+--b],e=1;for(;b>0&&(e*=256);)d+=this[a+--b]*e;return d},h.prototype.readUint8=h.prototype.readUInt8=function(a,b){return a>>>=0,b||v(a,1,this.length),this[a]},h.prototype.readUint16LE=h.prototype.readUInt16LE=function(a,b){return a>>>=0,b||v(a,2,this.length),this[a]|this[a+1]<<8},h.prototype.readUint16BE=h.prototype.readUInt16BE=function(a,b){return a>>>=0,b||v(a,2,this.length),this[a]<<8|this[a+1]},h.prototype.readUint32LE=h.prototype.readUInt32LE=function(a,b){return a>>>=0,b||v(a,4,this.length),(this[a]|this[a+1]<<8|this[a+2]<<16)+0x1000000*this[a+3]},h.prototype.readUint32BE=h.prototype.readUInt32BE=function(a,b){return a>>>=0,b||v(a,4,this.length),0x1000000*this[a]+(this[a+1]<<16|this[a+2]<<8|this[a+3])},h.prototype.readBigUInt64LE=O(function(a){G(a>>>=0,"offset");let b=this[a],c=this[a+7];void 0!==b&&void 0!==c||H(a,this.length-8);let d=b+256*this[++a]+65536*this[++a]+0x1000000*this[++a],e=this[++a]+256*this[++a]+65536*this[++a]+0x1000000*c;return BigInt(d)+(BigInt(e)<<BigInt(32))}),h.prototype.readBigUInt64BE=O(function(a){G(a>>>=0,"offset");let b=this[a],c=this[a+7];void 0!==b&&void 0!==c||H(a,this.length-8);let d=0x1000000*b+65536*this[++a]+256*this[++a]+this[++a],e=0x1000000*this[++a]+65536*this[++a]+256*this[++a]+c;return(BigInt(d)<<BigInt(32))+BigInt(e)}),h.prototype.readIntLE=function(a,b,c){a>>>=0,b>>>=0,c||v(a,b,this.length);let d=this[a],e=1,f=0;for(;++f<b&&(e*=256);)d+=this[a+f]*e;return d>=(e*=128)&&(d-=Math.pow(2,8*b)),d},h.prototype.readIntBE=function(a,b,c){a>>>=0,b>>>=0,c||v(a,b,this.length);let d=b,e=1,f=this[a+--d];for(;d>0&&(e*=256);)f+=this[a+--d]*e;return f>=(e*=128)&&(f-=Math.pow(2,8*b)),f},h.prototype.readInt8=function(a,b){return a>>>=0,b||v(a,1,this.length),128&this[a]?-1*(255-this[a]+1):this[a]},h.prototype.readInt16LE=function(a,b){a>>>=0,b||v(a,2,this.length);let c=this[a]|this[a+1]<<8;return 32768&c?0xffff0000|c:c},h.prototype.readInt16BE=function(a,b){a>>>=0,b||v(a,2,this.length);let c=this[a+1]|this[a]<<8;return 32768&c?0xffff0000|c:c},h.prototype.readInt32LE=function(a,b){return a>>>=0,b||v(a,4,this.length),this[a]|this[a+1]<<8|this[a+2]<<16|this[a+3]<<24},h.prototype.readInt32BE=function(a,b){return a>>>=0,b||v(a,4,this.length),this[a]<<24|this[a+1]<<16|this[a+2]<<8|this[a+3]},h.prototype.readBigInt64LE=O(function(a){G(a>>>=0,"offset");let b=this[a],c=this[a+7];return void 0!==b&&void 0!==c||H(a,this.length-8),(BigInt(this[a+4]+256*this[a+5]+65536*this[a+6]+(c<<24))<<BigInt(32))+BigInt(b+256*this[++a]+65536*this[++a]+0x1000000*this[++a])}),h.prototype.readBigInt64BE=O(function(a){G(a>>>=0,"offset");let b=this[a],c=this[a+7];return void 0!==b&&void 0!==c||H(a,this.length-8),(BigInt((b<<24)+65536*this[++a]+256*this[++a]+this[++a])<<BigInt(32))+BigInt(0x1000000*this[++a]+65536*this[++a]+256*this[++a]+c)}),h.prototype.readFloatLE=function(a,b){return a>>>=0,b||v(a,4,this.length),e.read(this,a,!0,23,4)},h.prototype.readFloatBE=function(a,b){return a>>>=0,b||v(a,4,this.length),e.read(this,a,!1,23,4)},h.prototype.readDoubleLE=function(a,b){return a>>>=0,b||v(a,8,this.length),e.read(this,a,!0,52,8)},h.prototype.readDoubleBE=function(a,b){return a>>>=0,b||v(a,8,this.length),e.read(this,a,!1,52,8)},h.prototype.writeUintLE=h.prototype.writeUIntLE=function(a,b,c,d){a*=1,b>>>=0,c>>>=0,d||w(this,a,b,c,Math.pow(2,8*c)-1,0);let e=1,f=0;for(this[b]=255&a;++f<c&&(e*=256);)this[b+f]=a/e&255;return b+c},h.prototype.writeUintBE=h.prototype.writeUIntBE=function(a,b,c,d){a*=1,b>>>=0,c>>>=0,d||w(this,a,b,c,Math.pow(2,8*c)-1,0);let e=c-1,f=1;for(this[b+e]=255&a;--e>=0&&(f*=256);)this[b+e]=a/f&255;return b+c},h.prototype.writeUint8=h.prototype.writeUInt8=function(a,b,c){return a*=1,b>>>=0,c||w(this,a,b,1,255,0),this[b]=255&a,b+1},h.prototype.writeUint16LE=h.prototype.writeUInt16LE=function(a,b,c){return a*=1,b>>>=0,c||w(this,a,b,2,65535,0),this[b]=255&a,this[b+1]=a>>>8,b+2},h.prototype.writeUint16BE=h.prototype.writeUInt16BE=function(a,b,c){return a*=1,b>>>=0,c||w(this,a,b,2,65535,0),this[b]=a>>>8,this[b+1]=255&a,b+2},h.prototype.writeUint32LE=h.prototype.writeUInt32LE=function(a,b,c){return a*=1,b>>>=0,c||w(this,a,b,4,0xffffffff,0),this[b+3]=a>>>24,this[b+2]=a>>>16,this[b+1]=a>>>8,this[b]=255&a,b+4},h.prototype.writeUint32BE=h.prototype.writeUInt32BE=function(a,b,c){return a*=1,b>>>=0,c||w(this,a,b,4,0xffffffff,0),this[b]=a>>>24,this[b+1]=a>>>16,this[b+2]=a>>>8,this[b+3]=255&a,b+4},h.prototype.writeBigUInt64LE=O(function(a,b=0){return x(this,a,b,BigInt(0),BigInt("0xffffffffffffffff"))}),h.prototype.writeBigUInt64BE=O(function(a,b=0){return y(this,a,b,BigInt(0),BigInt("0xffffffffffffffff"))}),h.prototype.writeIntLE=function(a,b,c,d){if(a*=1,b>>>=0,!d){let d=Math.pow(2,8*c-1);w(this,a,b,c,d-1,-d)}let e=0,f=1,g=0;for(this[b]=255&a;++e<c&&(f*=256);)a<0&&0===g&&0!==this[b+e-1]&&(g=1),this[b+e]=(a/f|0)-g&255;return b+c},h.prototype.writeIntBE=function(a,b,c,d){if(a*=1,b>>>=0,!d){let d=Math.pow(2,8*c-1);w(this,a,b,c,d-1,-d)}let e=c-1,f=1,g=0;for(this[b+e]=255&a;--e>=0&&(f*=256);)a<0&&0===g&&0!==this[b+e+1]&&(g=1),this[b+e]=(a/f|0)-g&255;return b+c},h.prototype.writeInt8=function(a,b,c){return a*=1,b>>>=0,c||w(this,a,b,1,127,-128),a<0&&(a=255+a+1),this[b]=255&a,b+1},h.prototype.writeInt16LE=function(a,b,c){return a*=1,b>>>=0,c||w(this,a,b,2,32767,-32768),this[b]=255&a,this[b+1]=a>>>8,b+2},h.prototype.writeInt16BE=function(a,b,c){return a*=1,b>>>=0,c||w(this,a,b,2,32767,-32768),this[b]=a>>>8,this[b+1]=255&a,b+2},h.prototype.writeInt32LE=function(a,b,c){return a*=1,b>>>=0,c||w(this,a,b,4,0x7fffffff,-0x80000000),this[b]=255&a,this[b+1]=a>>>8,this[b+2]=a>>>16,this[b+3]=a>>>24,b+4},h.prototype.writeInt32BE=function(a,b,c){return a*=1,b>>>=0,c||w(this,a,b,4,0x7fffffff,-0x80000000),a<0&&(a=0xffffffff+a+1),this[b]=a>>>24,this[b+1]=a>>>16,this[b+2]=a>>>8,this[b+3]=255&a,b+4},h.prototype.writeBigInt64LE=O(function(a,b=0){return x(this,a,b,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),h.prototype.writeBigInt64BE=O(function(a,b=0){return y(this,a,b,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),h.prototype.writeFloatLE=function(a,b,c){return A(this,a,b,!0,c)},h.prototype.writeFloatBE=function(a,b,c){return A(this,a,b,!1,c)},h.prototype.writeDoubleLE=function(a,b,c){return B(this,a,b,!0,c)},h.prototype.writeDoubleBE=function(a,b,c){return B(this,a,b,!1,c)},h.prototype.copy=function(a,b,c,d){if(!h.isBuffer(a))throw TypeError("argument should be a Buffer");if(c||(c=0),d||0===d||(d=this.length),b>=a.length&&(b=a.length),b||(b=0),d>0&&d<c&&(d=c),d===c||0===a.length||0===this.length)return 0;if(b<0)throw RangeError("targetStart out of bounds");if(c<0||c>=this.length)throw RangeError("Index out of range");if(d<0)throw RangeError("sourceEnd out of bounds");d>this.length&&(d=this.length),a.length-b<d-c&&(d=a.length-b+c);let e=d-c;return this===a&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(b,c,d):Uint8Array.prototype.set.call(a,this.subarray(c,d),b),e},h.prototype.fill=function(a,b,c,d){let e;if("string"==typeof a){if("string"==typeof b?(d=b,b=0,c=this.length):"string"==typeof c&&(d=c,c=this.length),void 0!==d&&"string"!=typeof d)throw TypeError("encoding must be a string");if("string"==typeof d&&!h.isEncoding(d))throw TypeError("Unknown encoding: "+d);if(1===a.length){let b=a.charCodeAt(0);("utf8"===d&&b<128||"latin1"===d)&&(a=b)}}else"number"==typeof a?a&=255:"boolean"==typeof a&&(a=Number(a));if(b<0||this.length<b||this.length<c)throw RangeError("Out of range index");if(c<=b)return this;if(b>>>=0,c=void 0===c?this.length:c>>>0,a||(a=0),"number"==typeof a)for(e=b;e<c;++e)this[e]=a;else{let f=h.isBuffer(a)?a:h.from(a,d),g=f.length;if(0===g)throw TypeError('The value "'+a+'" is invalid for argument "value"');for(e=0;e<c-b;++e)this[e+b]=f[e%g]}return this};let C={};function D(a,b,c){C[a]=class extends c{constructor(){super(),Object.defineProperty(this,"message",{value:b.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${a}]`,this.stack,delete this.name}get code(){return a}set code(a){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:a,writable:!0})}toString(){return`${this.name} [${a}]: ${this.message}`}}}function E(a){let b="",c=a.length,d=+("-"===a[0]);for(;c>=d+4;c-=3)b=`_${a.slice(c-3,c)}${b}`;return`${a.slice(0,c)}${b}`}function F(a,b,c,d,e,f){if(a>c||a<b){let d,e="bigint"==typeof b?"n":"";throw d=f>3?0===b||b===BigInt(0)?`>= 0${e} and < 2${e} ** ${8*(f+1)}${e}`:`>= -(2${e} ** ${8*(f+1)-1}${e}) and < 2 ** ${8*(f+1)-1}${e}`:`>= ${b}${e} and <= ${c}${e}`,new C.ERR_OUT_OF_RANGE("value",d,a)}G(e,"offset"),void 0!==d[e]&&void 0!==d[e+f]||H(e,d.length-(f+1))}function G(a,b){if("number"!=typeof a)throw new C.ERR_INVALID_ARG_TYPE(b,"number",a)}function H(a,b,c){if(Math.floor(a)!==a)throw G(a,c),new C.ERR_OUT_OF_RANGE(c||"offset","an integer",a);if(b<0)throw new C.ERR_BUFFER_OUT_OF_BOUNDS;throw new C.ERR_OUT_OF_RANGE(c||"offset",`>= ${+!!c} and <= ${b}`,a)}D("ERR_BUFFER_OUT_OF_BOUNDS",function(a){return a?`${a} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),D("ERR_INVALID_ARG_TYPE",function(a,b){return`The "${a}" argument must be of type number. Received type ${typeof b}`},TypeError),D("ERR_OUT_OF_RANGE",function(a,b,c){let d=`The value of "${a}" is out of range.`,e=c;return Number.isInteger(c)&&Math.abs(c)>0x100000000?e=E(String(c)):"bigint"==typeof c&&(e=String(c),(c>BigInt(2)**BigInt(32)||c<-(BigInt(2)**BigInt(32)))&&(e=E(e)),e+="n"),d+=` It must be ${b}. Received ${e}`},RangeError);let I=/[^+/0-9A-Za-z-_]/g;function J(a,b){let c;b=b||1/0;let d=a.length,e=null,f=[];for(let g=0;g<d;++g){if((c=a.charCodeAt(g))>55295&&c<57344){if(!e){if(c>56319||g+1===d){(b-=3)>-1&&f.push(239,191,189);continue}e=c;continue}if(c<56320){(b-=3)>-1&&f.push(239,191,189),e=c;continue}c=65536+(e-55296<<10|c-56320)}else e&&(b-=3)>-1&&f.push(239,191,189);if(e=null,c<128){if((b-=1)<0)break;f.push(c)}else if(c<2048){if((b-=2)<0)break;f.push(c>>6|192,63&c|128)}else if(c<65536){if((b-=3)<0)break;f.push(c>>12|224,c>>6&63|128,63&c|128)}else{if(!(c<1114112))throw Error("Invalid code point");if((b-=4)<0)break;f.push(c>>18|240,c>>12&63|128,c>>6&63|128,63&c|128)}}return f}function K(a){return d.toByteArray(function(a){if((a=(a=a.split("=")[0]).trim().replace(I,"")).length<2)return"";for(;a.length%4!=0;)a+="=";return a}(a))}function L(a,b,c,d){let e;for(e=0;e<d&&!(e+c>=b.length||e>=a.length);++e)b[e+c]=a[e];return e}function M(a,b){return a instanceof b||null!=a&&null!=a.constructor&&null!=a.constructor.name&&a.constructor.name===b.name}let N=function(){let a="0123456789abcdef",b=Array(256);for(let c=0;c<16;++c){let d=16*c;for(let e=0;e<16;++e)b[d+e]=a[c]+a[e]}return b}();function O(a){return"undefined"==typeof BigInt?P:a}function P(){throw Error("BigInt not supported")}},9089:a=>{a.exports=function(a){var b=[];return b.toString=function(){return this.map(function(b){var c="",d=void 0!==b[5];return b[4]&&(c+="@supports (".concat(b[4],") {")),b[2]&&(c+="@media ".concat(b[2]," {")),d&&(c+="@layer".concat(b[5].length>0?" ".concat(b[5]):""," {")),c+=a(b),d&&(c+="}"),b[2]&&(c+="}"),b[4]&&(c+="}"),c}).join("")},b.i=function(a,c,d,e,f){"string"==typeof a&&(a=[[null,a,void 0]]);var g={};if(d)for(var h=0;h<this.length;h++){var i=this[h][0];null!=i&&(g[i]=!0)}for(var j=0;j<a.length;j++){var k=[].concat(a[j]);d&&g[k[0]]||(void 0!==f&&(void 0===k[5]||(k[1]="@layer".concat(k[5].length>0?" ".concat(k[5]):""," {").concat(k[1],"}")),k[5]=f),c&&(k[2]&&(k[1]="@media ".concat(k[2]," {").concat(k[1],"}")),k[2]=c),e&&(k[4]?(k[1]="@supports (".concat(k[4],") {").concat(k[1],"}"),k[4]=e):k[4]="".concat(e)),b.push(k))}},b}},6492:a=>{a.exports=function(a,b){return b||(b={}),a?(a=String(a.__esModule?a.default:a),/^['"].*['"]$/.test(a)&&(a=a.slice(1,-1)),b.hash&&(a+=b.hash),/["'() \t\n]|(%20)/.test(a)||b.needQuotes?'"'.concat(a.replace(/"/g,'\\"').replace(/\n/g,"\\n"),'"'):a):a}},963:a=>{a.exports=function(a){var b=a[1],c=a[3];if(!c)return b;if("function"==typeof btoa){var d=btoa(unescape(encodeURIComponent(JSON.stringify(c))));return[b].concat(["/*# ".concat("sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(d)," */")]).join("\n")}return[b].join("\n")}},8878:(a,b,c)=>{b.formatArgs=function(b){if(b[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+b[0]+(this.useColors?"%c ":" ")+"+"+a.exports.humanize(this.diff),!this.useColors)return;let c="color: "+this.color;b.splice(1,0,c,"color: inherit");let d=0,e=0;b[0].replace(/%[a-zA-Z%]/g,a=>{"%%"!==a&&(d++,"%c"===a&&(e=d))}),b.splice(e,0,c)},b.save=function(a){try{a?b.storage.setItem("debug",a):b.storage.removeItem("debug")}catch(a){}},b.load=function(){let a;try{a=b.storage.getItem("debug")}catch(a){}return!a&&"undefined"!=typeof process&&"env"in process&&(a=process.env.DEBUG),a},b.useColors=function(){let a;return"undefined"!=typeof window&&!!window.process&&("renderer"===window.process.type||!!window.process.__nwjs)||!("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&(a=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(a[1],10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},b.storage=function(){try{return localStorage}catch(a){}}(),b.destroy=(()=>{let a=!1;return()=>{a||(a=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),b.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],b.log=console.debug||console.log||(()=>{}),a.exports=c(8945)(b);let{formatters:d}=a.exports;d.j=function(a){try{return JSON.stringify(a)}catch(a){return"[UnexpectedJSONParseError]: "+a.message}}},8945:(a,b,c)=>{a.exports=function(a){function b(a){let c,e,f,g=null;function h(...a){if(!h.enabled)return;let d=Number(new Date);h.diff=d-(c||d),h.prev=c,h.curr=d,c=d,a[0]=b.coerce(a[0]),"string"!=typeof a[0]&&a.unshift("%O");let e=0;a[0]=a[0].replace(/%([a-zA-Z%])/g,(c,d)=>{if("%%"===c)return"%";e++;let f=b.formatters[d];if("function"==typeof f){let b=a[e];c=f.call(h,b),a.splice(e,1),e--}return c}),b.formatArgs.call(h,a),(h.log||b.log).apply(h,a)}return h.namespace=a,h.useColors=b.useColors(),h.color=b.selectColor(a),h.extend=d,h.destroy=b.destroy,Object.defineProperty(h,"enabled",{enumerable:!0,configurable:!1,get:()=>null!==g?g:(e!==b.namespaces&&(e=b.namespaces,f=b.enabled(a)),f),set:a=>{g=a}}),"function"==typeof b.init&&b.init(h),h}function d(a,c){let d=b(this.namespace+(void 0===c?":":c)+a);return d.log=this.log,d}function e(a,b){let c=0,d=0,e=-1,f=0;for(;c<a.length;)if(d<b.length&&(b[d]===a[c]||"*"===b[d]))"*"===b[d]?(e=d,f=c):c++,d++;else{if(-1===e)return!1;d=e+1,c=++f}for(;d<b.length&&"*"===b[d];)d++;return d===b.length}return b.debug=b,b.default=b,b.coerce=function(a){return a instanceof Error?a.stack||a.message:a},b.disable=function(){let a=[...b.names,...b.skips.map(a=>"-"+a)].join(",");return b.enable(""),a},b.enable=function(a){for(let c of(b.save(a),b.namespaces=a,b.names=[],b.skips=[],("string"==typeof a?a:"").trim().replace(" ",",").split(",").filter(Boolean)))"-"===c[0]?b.skips.push(c.slice(1)):b.names.push(c)},b.enabled=function(a){for(let c of b.skips)if(e(a,c))return!1;for(let c of b.names)if(e(a,c))return!0;return!1},b.humanize=c(9192),b.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(a).forEach(c=>{b[c]=a[c]}),b.names=[],b.skips=[],b.formatters={},b.selectColor=function(a){let c=0;for(let b=0;b<a.length;b++)c=(c<<5)-c+a.charCodeAt(b)|0;return b.colors[Math.abs(c)%b.colors.length]},b.enable(b.load()),b}},1124:(a,b,c)=>{var d=c(6240),e=Object.prototype.hasOwnProperty,f=Object.prototype.propertyIsEnumerable;function g(a,b,c){var f=b[c];if(null!=f){if(e.call(a,c)&&(void 0===a[c]||null===a[c]))throw TypeError("Cannot convert undefined or null to object ("+c+")");e.call(a,c)&&d(f)?a[c]=h(Object(a[c]),b[c]):a[c]=f}}function h(a,b){if(a===b)return a;for(var c in b=Object(b))e.call(b,c)&&g(a,b,c);if(Object.getOwnPropertySymbols)for(var d=Object.getOwnPropertySymbols(b),h=0;h<d.length;h++)f.call(b,d[h])&&g(a,b,d[h]);return a}a.exports=function(a){a=function(a){if(null==a)throw TypeError("Sources cannot be null or undefined");return Object(a)}(a);for(var b=1;b<arguments.length;b++)h(a,arguments[b]);return a}},8480:a=>{a.exports=function(a){switch(a){case"int8":return Int8Array;case"int16":return Int16Array;case"int32":return Int32Array;case"uint8":return Uint8Array;case"uint16":return Uint16Array;case"uint32":return Uint32Array;case"float32":return Float32Array;case"float64":return Float64Array;case"array":return Array;case"uint8_clamped":return Uint8ClampedArray}}},919:(a,b,c)=>{a.exports="undefined"!=typeof window?window:void 0!==c.g?c.g:"undefined"!=typeof self?self:{}},1024:(a,b)=>{b.read=function(a,b,c,d,e){var f,g,h=8*e-d-1,i=(1<<h)-1,j=i>>1,k=-7,l=c?e-1:0,m=c?-1:1,n=a[b+l];for(l+=m,f=n&(1<<-k)-1,n>>=-k,k+=h;k>0;f=256*f+a[b+l],l+=m,k-=8);for(g=f&(1<<-k)-1,f>>=-k,k+=d;k>0;g=256*g+a[b+l],l+=m,k-=8);if(0===f)f=1-j;else{if(f===i)return g?NaN:1/0*(n?-1:1);g+=Math.pow(2,d),f-=j}return(n?-1:1)*g*Math.pow(2,f-d)},b.write=function(a,b,c,d,e,f){var g,h,i,j=8*f-e-1,k=(1<<j)-1,l=k>>1,m=5960464477539062e-23*(23===e),n=d?0:f-1,o=d?1:-1,p=+(b<0||0===b&&1/b<0);for(isNaN(b=Math.abs(b))||b===1/0?(h=+!!isNaN(b),g=k):(g=Math.floor(Math.log(b)/Math.LN2),b*(i=Math.pow(2,-g))<1&&(g--,i*=2),(b+=g+l>=1?m/i:m*Math.pow(2,1-l))*i>=2&&(g++,i/=2),g+l>=k?(h=0,g=k):g+l>=1?(h=(b*i-1)*Math.pow(2,e),g+=l):(h=b*Math.pow(2,l-1)*Math.pow(2,e),g=0));e>=8;a[c+n]=255&h,n+=o,h/=256,e-=8);for(g=g<<e|h,j+=e;j>0;a[c+n]=255&g,n+=o,g/=256,j-=8);a[c+n-o]|=128*p}},2225:a=>{function b(a){return!!a.constructor&&"function"==typeof a.constructor.isBuffer&&a.constructor.isBuffer(a)}a.exports=function(a){return null!=a&&(b(a)||"function"==typeof a.readFloatLE&&"function"==typeof a.slice&&b(a.slice(0,0))||!!a._isBuffer)}},8847:a=>{a.exports=function(a){if(!a)return!1;var c=b.call(a);return"[object Function]"===c||"function"==typeof a&&"[object RegExp]"!==c||"undefined"!=typeof window&&(a===window.setTimeout||a===window.alert||a===window.confirm||a===window.prompt)};var b=Object.prototype.toString},6240:a=>{a.exports=function(a){var b=typeof a;return null!==a&&("object"===b||"function"===b)}},5651:(a,b,c)=>{var d=c(5406),e=c(4597),f=c(5734),g=["x","e","a","o","n","s","r","c","u","m","v","w","z"],h=["m","w"],i=["H","I","N","E","F","K","L","T","U","V","W","X","Y","Z"];function j(a){this.glyphs=[],this._measure=this.computeMetrics.bind(this),this.update(a)}function k(a,b){if(!a.chars||0===a.chars.length)return null;var c=m(a.chars,b);return c>=0?a.chars[c]:null}function l(a,b,c){if(!a.kernings||0===a.kernings.length)return 0;for(var d=a.kernings,e=0;e<d.length;e++){var f=d[e];if(f.first===b&&f.second===c)return f.amount}return 0}function m(a,b,c){for(var d=c=c||0;d<a.length;d++)if(a[d].id===b)return d;return -1}a.exports=function(a){return new j(a)},j.prototype.update=function(a){if(a=e({measure:this._measure},a),this._opt=a,this._opt.tabSize=f(this._opt.tabSize,4),!a.font)throw Error("must provide a valid bitmap font");var b,c=this.glyphs,h=a.text||"",j=a.font;this._setupSpaceGlyphs(j);var k=d.lines(h,a),n=a.width||0;c.length=0;var o=k.reduce(function(a,b){return Math.max(a,b.width,n)},0),p=0,q=0,r=f(a.lineHeight,j.common.lineHeight),s=j.common.base,t=r-s,u=a.letterSpacing||0,v=r*k.length-t,w="center"===(b=this._opt.align)?1:2*("right"===b);q-=v,this._width=o,this._height=v,this._descender=r-s,this._baseline=s,this._xHeight=function(a){for(var b=0;b<g.length;b++){var c=g[b].charCodeAt(0),d=m(a.chars,c);if(d>=0)return a.chars[d].height}return 0}(j),this._capHeight=function(a){for(var b=0;b<i.length;b++){var c=i[b].charCodeAt(0),d=m(a.chars,c);if(d>=0)return a.chars[d].height}return 0}(j),this._lineHeight=r,this._ascender=r-t-this._xHeight;var x=this;k.forEach(function(a,b){for(var d,e=a.start,f=a.end,g=a.width,i=e;i<f;i++){var k=h.charCodeAt(i),m=x.getGlyph(j,k);if(m){d&&(p+=l(j,d.id,m.id));var n=p;1===w?n+=(o-g)/2:2===w&&(n+=o-g),c.push({position:[n,q],data:m,index:i,line:b}),p+=m.xadvance+u,d=m}}q+=r,p=0}),this._linesTotal=k.length},j.prototype._setupSpaceGlyphs=function(a){if(this._fallbackSpaceGlyph=null,this._fallbackTabGlyph=null,a.chars&&0!==a.chars.length){var b=k(a,32)||function(a){for(var b=0;b<h.length;b++){var c=h[b].charCodeAt(0),d=m(a.chars,c);if(d>=0)return a.chars[d]}return 0}(a)||a.chars[0],c=this._opt.tabSize*b.xadvance;this._fallbackSpaceGlyph=b,this._fallbackTabGlyph=e(b,{x:0,y:0,xadvance:c,id:9,xoffset:0,yoffset:0,width:0,height:0})}},j.prototype.getGlyph=function(a,b){return k(a,b)||(9===b?this._fallbackTabGlyph:32===b?this._fallbackSpaceGlyph:null)},j.prototype.computeMetrics=function(a,b,c,d){var e,f=this._opt.letterSpacing||0,g=this._opt.font,h=0,i=0,j=0;if(!g.chars||0===g.chars.length)return{start:b,end:b,width:0};c=Math.min(a.length,c);for(var k=b;k<c;k++){var m,n=a.charCodeAt(k);if(m=this.getGlyph(g,n)){m.xoffset;var o=(h+=e?l(g,e.id,m.id):0)+m.xadvance+f,p=h+m.width;if(p>=d||o>=d)break;h=o,i=p,e=m}j++}return e&&(i+=e.xoffset),{start:b,end:b+j,width:i}},["width","height","descender","ascender","xHeight","baseline","capHeight","lineHeight"].forEach(function(a){Object.defineProperty(j.prototype,a,{get:Function(["return function "+a+"() {","  return this._"+a,"}"].join("\n"))(),configurable:!0})})},5751:(a,b,c)=>{var d=c(9922).hp,e=c(3558),f=function(){},g=c(1476),h=c(7034),i=c(7480),j=c(573),k=c(4597),l=self.XMLHttpRequest&&"withCredentials"in new XMLHttpRequest;a.exports=function(a,b){b="function"==typeof b?b:f,"string"==typeof a?a={uri:a}:a||(a={}),a.binary&&(a=function(a){if(l)return k(a,{responseType:"arraybuffer"});if(void 0===self.XMLHttpRequest)throw Error("your browser does not support XHR loading");var b=new self.XMLHttpRequest;return b.overrideMimeType("text/plain; charset=x-user-defined"),k({xhr:b},a)}(a)),e(a,function(c,e,k){if(c)return b(c);if(!/^2/.test(e.statusCode))return b(Error("http status code: "+e.statusCode));if(!k)return b(Error("no body result"));var l,m,n=!1;if(l=k,"[object ArrayBuffer]"===Object.prototype.toString.call(l)){var o=new Uint8Array(k);k=d.from(o,"binary")}j(k)&&(n=!0,"string"==typeof k&&(k=d.from(k,"binary"))),n||(d.isBuffer(k)&&(k=k.toString(a.encoding)),k=k.trim());try{var p=e.headers["content-type"];m=n?i(k):/json/.test(p)||"{"===k.charAt(0)?JSON.parse(k):/xml/.test(p)||"<"===k.charAt(0)?h(k):g(k)}catch(a){b(Error("error parsing font "+a.message)),b=f}b(null,m)})}},573:(a,b,c)=>{var d=c(9922).hp,e=c(911),f=d.from([66,77,70,3]);a.exports=function(a){return"string"==typeof a?"BMF"===a.substring(0,3):a.length>4&&e(a.slice(0,4),f)}},9192:a=>{function b(a,b,c,d){return Math.round(a/c)+" "+d+(b>=1.5*c?"s":"")}a.exports=function(a,c){c=c||{};var d,e,f=typeof a;if("string"===f&&a.length>0){var g=a;if(!((g=String(g)).length>100)){var h=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(g);if(h){var i=parseFloat(h[1]);switch((h[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*i;case"weeks":case"week":case"w":return 6048e5*i;case"days":case"day":case"d":return 864e5*i;case"hours":case"hour":case"hrs":case"hr":case"h":return 36e5*i;case"minutes":case"minute":case"mins":case"min":case"m":return 6e4*i;case"seconds":case"second":case"secs":case"sec":case"s":return 1e3*i;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return i}}}return}if("number"===f&&isFinite(a))return c.long?(e=Math.abs(a))>=864e5?b(a,e,864e5,"day"):e>=36e5?b(a,e,36e5,"hour"):e>=6e4?b(a,e,6e4,"minute"):e>=1e3?b(a,e,1e3,"second"):a+" ms":(d=Math.abs(a))>=864e5?Math.round(a/864e5)+"d":d>=36e5?Math.round(a/36e5)+"h":d>=6e4?Math.round(a/6e4)+"m":d>=1e3?Math.round(a/1e3)+"s":a+"ms";throw Error("val is not a non-empty string or a valid number. val="+JSON.stringify(a))}},1476:a=>{function b(a){return a&&0!==a.length?0===a.indexOf('"')||0===a.indexOf("'")?a.substring(1,a.length-1):-1!==a.indexOf(",")?a.split(",").map(function(a){return parseInt(a,10)}):parseInt(a,10):""}a.exports=function(a){if(!a)throw Error("no data provided");var c={pages:[],chars:[],kernings:[]},d=(a=a.toString().trim()).split(/\r\n?|\n/g);if(0===d.length)throw Error("no data in BMFont file");for(var e=0;e<d.length;e++){var f=function(a,c){if(!(a=a.replace(/\t+/g," ").trim()))return null;var d=a.indexOf(" ");if(-1===d)throw Error("no named row at line "+c);var e=a.substring(0,d);a=(a=(a=(a=a.substring(d+1)).replace(/letter=[\'\"]\S+[\'\"]/gi,"")).split("=")).map(function(a){return a.trim().match(/(".*?"|[^"\s]+)+(?=\s*|\s*$)/g)});for(var f=[],g=0;g<a.length;g++){var h=a[g];0===g?f.push({key:h[0],data:""}):g===a.length-1?f[f.length-1].data=b(h[0]):(f[f.length-1].data=b(h[0]),f.push({key:h[1],data:""}))}var i={key:e,data:{}};return f.forEach(function(a){i.data[a.key]=a.data}),i}(d[e],e);if(f)if("page"===f.key){if("number"!=typeof f.data.id)throw Error("malformed file at line "+e+" -- needs page id=N");if("string"!=typeof f.data.file)throw Error("malformed file at line "+e+' -- needs page file="path"');c.pages[f.data.id]=f.data.file}else"chars"===f.key||"kernings"===f.key||("char"===f.key?c.chars.push(f.data):"kerning"===f.key?c.kernings.push(f.data):c[f.key]=f.data)}return c}},7480:a=>{var b=[66,77,70];function c(a,b){for(var c=b;c<a.length&&0!==a[c];c++);return a.slice(b,c)}a.exports=function(a){if(a.length<6)throw Error("invalid buffer length for BMFont");if(!b.every(function(b,c){return a.readUInt8(c)===b}))throw Error("BMFont missing BMF byte header");var d=3;if(a.readUInt8(d++)>3)throw Error("Only supports BMFont Binary v3 (BMFont App v1.10)");for(var e={kernings:[],chars:[]},f=0;f<5;f++)d+=function(a,b,d){if(d>b.length-1)return 0;var e,f,g,h,i,j=b.readUInt8(d++),k=b.readInt32LE(d);switch(d+=4,j){case 1:e=d,(f={}).size=b.readInt16LE(e),f.smooth=(g=b.readUInt8(e+2))>>7&1,f.unicode=g>>6&1,f.italic=g>>5&1,f.bold=g>>4&1,g>>3&1&&(f.fixedHeight=1),f.charset=b.readUInt8(e+3)||"",f.stretchH=b.readUInt16LE(e+4),f.aa=b.readUInt8(e+6),f.padding=[b.readInt8(e+7),b.readInt8(e+8),b.readInt8(e+9),b.readInt8(e+10)],f.spacing=[b.readInt8(e+11),b.readInt8(e+12)],f.outline=b.readUInt8(e+13),f.face=c(b,e+14).toString("utf8"),a.info=f;break;case 2:h=d,(i={}).lineHeight=b.readUInt16LE(h),i.base=b.readUInt16LE(h+2),i.scaleW=b.readUInt16LE(h+4),i.scaleH=b.readUInt16LE(h+6),i.pages=b.readUInt16LE(h+8),b.readUInt8(h+10),i.packed=0,i.alphaChnl=b.readUInt8(h+11),i.redChnl=b.readUInt8(h+12),i.greenChnl=b.readUInt8(h+13),i.blueChnl=b.readUInt8(h+14),a.common=i;break;case 3:a.pages=function(a,b,d){for(var e=[],f=c(a,b),g=f.length+1,h=d/g,i=0;i<h;i++)e[i]=a.slice(b,b+f.length).toString("utf8"),b+=g;return e}(b,d,k);break;case 4:a.chars=function(a,b,c){for(var d=[],e=c/20,f=0;f<e;f++){var g={},h=20*f;g.id=a.readUInt32LE(b+0+h),g.x=a.readUInt16LE(b+4+h),g.y=a.readUInt16LE(b+6+h),g.width=a.readUInt16LE(b+8+h),g.height=a.readUInt16LE(b+10+h),g.xoffset=a.readInt16LE(b+12+h),g.yoffset=a.readInt16LE(b+14+h),g.xadvance=a.readInt16LE(b+16+h),g.page=a.readUInt8(b+18+h),g.chnl=a.readUInt8(b+19+h),d[f]=g}return d}(b,d,k);break;case 5:a.kernings=function(a,b,c){for(var d=[],e=c/10,f=0;f<e;f++){var g={},h=10*f;g.first=a.readUInt32LE(b+0+h),g.second=a.readUInt32LE(b+4+h),g.amount=a.readInt16LE(b+8+h),d[f]=g}return d}(b,d,k)}return 5+k}(e,a,d);return e}},7034:(a,b,c)=>{var d=c(7829),e=c(1896),f={scaleh:"scaleH",scalew:"scaleW",stretchh:"stretchH",lineheight:"lineHeight",alphachnl:"alphaChnl",redchnl:"redChnl",greenchnl:"greenChnl",bluechnl:"blueChnl"};function g(a){return(function(a){for(var b=[],c=0;c<a.attributes.length;c++)b.push(a.attributes[c]);return b})(a).reduce(function(a,b){var c;return a[f[(c=b.nodeName).toLowerCase()]||c]=b.nodeValue,a},{})}a.exports=function(a){var b=e(a=a.toString()),c={pages:[],chars:[],kernings:[]};["info","common"].forEach(function(a){var e=b.getElementsByTagName(a)[0];e&&(c[a]=d(g(e)))});var f=b.getElementsByTagName("pages")[0];if(!f)throw Error("malformed file -- no <pages> element");for(var h=f.getElementsByTagName("page"),i=0;i<h.length;i++){var j=h[i],k=parseInt(j.getAttribute("id"),10),l=j.getAttribute("file");if(isNaN(k))throw Error('malformed file -- page "id" attribute is NaN');if(!l)throw Error('malformed file -- needs page "file" attribute');c.pages[parseInt(k,10)]=l}return["chars","kernings"].forEach(function(a){var e=b.getElementsByTagName(a)[0];if(e)for(var f=a.substring(0,a.length-1),h=e.getElementsByTagName(f),i=0;i<h.length;i++){var j=h[i];c[a].push(d(g(j)))}}),c}},7829:a=>{var b="chasrset";a.exports=function(a){for(var c in b in(a=Object.assign({},a))&&(a.charset=a[b],delete a[b]),a)"face"!==c&&"charset"!==c&&(a[c]="padding"===c||"spacing"===c?a[c].split(",").map(function(a){return parseInt(a,10)}):parseInt(a[c],10));return a}},3216:a=>{var b=function(a){return a.replace(/^\s+|\s+$/g,"")};a.exports=function(a){if(!a)return{};for(var c,d={},e=b(a).split("\n"),f=0;f<e.length;f++){var g=e[f],h=g.indexOf(":"),i=b(g.slice(0,h)).toLowerCase(),j=b(g.slice(h+1));void 0===d[i]?d[i]=j:(c=d[i],"[object Array]"===Object.prototype.toString.call(c)?d[i].push(j):d[i]=[d[i],j])}return d}},9035:(a,b,c)=>{var d=c(8480),e=c(8167),f=c(2225),g=[0,2,3],h=[2,1,3];a.exports=function(a,b){a&&(e(a)||f(a))||(b=a||{},a=null);for(var c="string"==typeof(b="number"==typeof b?{count:b}:b||{}).type?b.type:"uint16",i="number"==typeof b.count?b.count:1,j=b.start||0,k=!1!==b.clockwise?g:h,l=k[0],m=k[1],n=k[2],o=6*i,p=a||new(d(c))(o),q=0,r=0;q<o;q+=6,r+=4){var s=q+j;p[s+0]=r+0,p[s+1]=r+1,p[s+2]=r+2,p[s+3]=r+l,p[s+4]=r+m,p[s+5]=r+n}return p}},4433:(a,b,c)=>{var d=c(5651),e=c(9035),f=c(7106),g=c(1684);a.exports=function(a){return new h(a)};class h extends THREE.BufferGeometry{constructor(a){super(),"string"==typeof a&&(a={text:a}),this._opt=Object.assign({},a),a&&this.update(a)}update(a){if("string"==typeof a&&(a={text:a}),!(a=Object.assign({},this._opt,a)).font)throw TypeError("must specify a { font } in options");this.layout=d(a);var b=!1!==a.flipY,c=a.font,g=c.common.scaleW,h=c.common.scaleH,i=this.layout.glyphs.filter(function(a){var b=a.data;return b.width*b.height>0});this.visibleGlyphs=i;var j=f.positions(i),k=f.uvs(i,g,h,b),l=e([],{clockwise:!0,type:"uint16",count:i.length});if(this.setIndex(l),this.setAttribute("position",new THREE.BufferAttribute(j,2)),this.setAttribute("uv",new THREE.BufferAttribute(k,2)),!a.multipage&&"page"in this.attributes)this.removeAttribute("page");else if(a.multipage){var m=f.pages(i);this.setAttribute("page",new THREE.BufferAttribute(m,1))}null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere()}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new THREE.Sphere);var a=this.attributes.position.array,b=this.attributes.position.itemSize;if(!a||!b||a.length<2)return this.boundingSphere.radius=0,void this.boundingSphere.center.set(0,0,0);g.computeSphere(a,this.boundingSphere),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.')}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new THREE.Box3);var a=this.boundingBox,b=this.attributes.position.array,c=this.attributes.position.itemSize;b&&c&&!(b.length<2)?g.computeBox(b,a):a.makeEmpty()}}},1684:a=>{var b={min:[0,0],max:[0,0]};function c(a){var c=a.length/2;b.min[0]=a[0],b.min[1]=a[1],b.max[0]=a[0],b.max[1]=a[1];for(var d=0;d<c;d++){var e=a[2*d+0],f=a[2*d+1];b.min[0]=Math.min(e,b.min[0]),b.min[1]=Math.min(f,b.min[1]),b.max[0]=Math.max(e,b.max[0]),b.max[1]=Math.max(f,b.max[1])}}a.exports.computeBox=function(a,d){c(a),d.min.set(b.min[0],b.min[1],0),d.max.set(b.max[0],b.max[1],0)},a.exports.computeSphere=function(a,d){c(a);var e=b.min[0],f=b.min[1],g=b.max[0]-e,h=b.max[1]-f,i=Math.sqrt(g*g+h*h);d.center.set(e+g/2,f+h/2,0),d.radius=i/2}},7106:a=>{a.exports.pages=function(a){var b=new Float32Array(4*a.length*1),c=0;return a.forEach(function(a){var d=a.data.page||0;b[c++]=d,b[c++]=d,b[c++]=d,b[c++]=d}),b},a.exports.uvs=function(a,b,c,d){var e=new Float32Array(4*a.length*2),f=0;return a.forEach(function(a){var g=a.data,h=g.x+g.width,i=g.y+g.height,j=g.x/b,k=g.y/c,l=h/b,m=i/c;d&&(k=(c-g.y)/c,m=(c-i)/c),e[f++]=j,e[f++]=k,e[f++]=j,e[f++]=m,e[f++]=l,e[f++]=m,e[f++]=l,e[f++]=k}),e},a.exports.positions=function(a){var b=new Float32Array(4*a.length*2),c=0;return a.forEach(function(a){var d=a.data,e=a.position[0]+d.xoffset,f=a.position[1]+d.yoffset,g=d.width,h=d.height;b[c++]=e,b[c++]=f,b[c++]=e,b[c++]=f+h,b[c++]=e+g,b[c++]=f+h,b[c++]=e+g,b[c++]=f}),b}},5406:a=>{var b=/\n/,c=/\s/;function d(a){return c.test(a)}function e(a,b,c,d){return{start:b,end:b+Math.min(d,c-b)}}a.exports=function(b,c){return a.exports.lines(b,c).map(function(a){return b.substring(a.start,a.end)}).join("\n")},a.exports.lines=function(a,c){if(0===(c=c||{}).width&&"nowrap"!==c.mode)return[];a=a||"";var f="number"==typeof c.width?c.width:Number.MAX_VALUE,g=Math.max(0,c.start||0),h="number"==typeof c.end?c.end:a.length,i=c.mode,j=c.measure||e;return"pre"===i?function(a,c,d,e,f){for(var g=[],h=d,i=d;i<e&&i<c.length;i++){var j=c.charAt(i),k=b.test(j);if(k||i===e-1){var l=a(c,h,k?i:i+1,f);g.push(l),h=i+1}}return g}(j,a,g,h,f):function(a,b,c,e,f,g){var h=[],i=f;for("nowrap"===g&&(i=Number.MAX_VALUE);c<e&&c<b.length;){for(var j=function(a,b,c,d){var e=a.indexOf("\n",c);return -1===e||e>d?d:e}(b,0,c,e);c<j&&d(b.charAt(c));)c++;var k=a(b,c,j,i),l=c+(k.end-k.start),m=l+1;if(l<j){for(;l>c&&!d(b.charAt(l));)l--;if(l===c)m>c+1&&m--,l=m;else for(m=l;l>c&&d(b.charAt(l-1));)l--}if(l>=c){var n=a(b,c,l,i);h.push(n)}c=m}return h}(j,a,g,h,f,i)}},3558:(a,b,c)=>{var d=c(919),e=c(8847),f=c(3216),g=c(4597);function h(a,b,c){var d=a;return e(b)?(c=b,"string"==typeof a&&(d={uri:a})):d=g(b,{uri:a}),d.callback=c,d}function i(a,b,c){return j(b=h(a,b,c))}function j(a){if(void 0===a.callback)throw Error("callback argument missing");var b=!1,c=function(c,d,e){b||(b=!0,a.callback(c,d,e))};function d(a){return clearTimeout(k),a instanceof Error||(a=Error(""+(a||"Unknown XMLHttpRequest Error"))),a.statusCode=0,c(a,r)}function e(){if(!h){clearTimeout(k);var b,d=r,e=null;return 0!==(b=a.useXDR&&void 0===j.status?200:1223===j.status?204:j.status)?(d={body:function(){var a=void 0;if(a=j.response?j.response:j.responseText||function(a){try{if("document"===a.responseType)return a.responseXML;var b=a.responseXML&&"parsererror"===a.responseXML.documentElement.nodeName;if(""===a.responseType&&!b)return a.responseXML}catch(a){}return null}(j),q)try{a=JSON.parse(a)}catch(a){}return a}(),statusCode:b,method:m,headers:{},url:l,rawRequest:j},j.getAllResponseHeaders&&(d.headers=f(j.getAllResponseHeaders()))):e=Error("Internal XMLHttpRequest Error"),c(e,d,d.body)}}var g,h,j=a.xhr||null;j||(j=a.cors||a.useXDR?new i.XDomainRequest:new i.XMLHttpRequest);var k,l=j.url=a.uri||a.url,m=j.method=a.method||"GET",n=a.body||a.data,o=j.headers=a.headers||{},p=!!a.sync,q=!1,r={body:void 0,headers:{},statusCode:0,method:m,url:l,rawRequest:j};if("json"in a&&!1!==a.json&&(q=!0,o.accept||o.Accept||(o.Accept="application/json"),"GET"!==m&&"HEAD"!==m&&(o["content-type"]||o["Content-Type"]||(o["Content-Type"]="application/json"),n=JSON.stringify(!0===a.json?n:a.json))),j.onreadystatechange=function(){4===j.readyState&&setTimeout(e,0)},j.onload=e,j.onerror=d,j.onprogress=function(){},j.onabort=function(){h=!0},j.ontimeout=d,j.open(m,l,!p,a.username,a.password),p||(j.withCredentials=!!a.withCredentials),!p&&a.timeout>0&&(k=setTimeout(function(){if(!h){h=!0,j.abort("timeout");var a=Error("XMLHttpRequest timeout");a.code="ETIMEDOUT",d(a)}},a.timeout)),j.setRequestHeader)for(g in o)o.hasOwnProperty(g)&&j.setRequestHeader(g,o[g]);else if(a.headers&&!function(a){for(var b in a)if(a.hasOwnProperty(b))return!1;return!0}(a.headers))throw Error("Headers cannot be set on an XDomainRequest object");return"responseType"in a&&(j.responseType=a.responseType),"beforeSend"in a&&"function"==typeof a.beforeSend&&a.beforeSend(j),j.send(n||null),j}a.exports=i,a.exports.default=i,i.XMLHttpRequest=d.XMLHttpRequest||function(){},i.XDomainRequest="withCredentials"in new i.XMLHttpRequest?i.XMLHttpRequest:d.XDomainRequest,function(a,b){for(var c=0;c<a.length;c++)b(a[c])}(["get","put","post","patch","head","delete"],function(a){i["delete"===a?"del":a]=function(b,c,d){return(c=h(b,c,d)).method=a.toUpperCase(),j(c)}})},1896:a=>{a.exports=void 0!==self.DOMParser?function(a){return(new self.DOMParser).parseFromString(a,"application/xml")}:void 0!==self.ActiveXObject&&new self.ActiveXObject("Microsoft.XMLDOM")?function(a){var b=new self.ActiveXObject("Microsoft.XMLDOM");return b.async="false",b.loadXML(a),b}:function(a){var b=document.createElement("div");return b.innerHTML=a,b}},4597:a=>{a.exports=function(){for(var a={},c=0;c<arguments.length;c++){var d=arguments[c];for(var e in d)b.call(d,e)&&(a[e]=d[e])}return a};var b=Object.prototype.hasOwnProperty},8132:()=>{window.aframeStats=function(a){var b=null;return{update:function(){var c;b("te").set((c=a.querySelectorAll("*"),Array.prototype.slice.call(c).filter(function(a){return a.isEntity}),c.length)),window.performance.getEntriesByName&&b("lt").set(window.performance.getEntriesByName("render-started")[0].startTime.toFixed(0))},start:function(){},end:function(){},attach:function(a){b=a},values:{te:{caption:"Entities"},lt:{caption:"Load Time"}},groups:[{caption:"A-Frame",values:["te","lt"]}],fractions:[]}}},3729:a=>{window.glStats=function(){var a=null,b=0,c=0,d=0,e=0,f=0,g=0,h=0;function i(a,b){return function(){b.apply(this,arguments),a.apply(this,arguments)}}return WebGLRenderingContext.prototype.drawArrays=i(WebGLRenderingContext.prototype.drawArrays,function(){b++,arguments[0]==this.POINTS?g+=arguments[2]:f+=arguments[2]}),WebGLRenderingContext.prototype.drawElements=i(WebGLRenderingContext.prototype.drawElements,function(){c++,e+=arguments[1]/3,f+=arguments[1]}),WebGLRenderingContext.prototype.useProgram=i(WebGLRenderingContext.prototype.useProgram,function(){d++}),WebGLRenderingContext.prototype.bindTexture=i(WebGLRenderingContext.prototype.bindTexture,function(){h++}),{update:function(){a("allcalls").set(b+c),a("drawElements").set(c),a("drawArrays").set(b),a("bindTexture").set(h),a("useProgram").set(d),a("glfaces").set(e),a("glvertices").set(f),a("glpoints").set(g)},start:function(){b=0,c=0,d=0,e=0,f=0,g=0,h=0},end:function(){},attach:function(b){a=b},values:{allcalls:{over:3e3,caption:"Calls (hook)"},drawelements:{caption:"drawElements (hook)"},drawarrays:{caption:"drawArrays (hook)"}},groups:[{caption:"WebGL",values:["allcalls","drawelements","drawarrays","useprogram","bindtexture","glfaces","glvertices","glpoints"]}],fractions:[{base:"allcalls",steps:["drawelements","drawarrays"]}]}},window.threeStats=function(a){var b=null;return{update:function(){b("renderer.info.memory.geometries").set(a.info.memory.geometries),b("renderer.info.programs").set(a.info.programs?.length??NaN),b("renderer.info.memory.textures").set(a.info.memory.textures),b("renderer.info.render.calls").set(a.info.render.calls),b("renderer.info.render.triangles").set(a.info.render.triangles),b("renderer.info.render.points").set(a.info.render.points)},start:function(){},end:function(){},attach:function(a){b=a},values:{"renderer.info.memory.geometries":{caption:"Geometries"},"renderer.info.memory.textures":{caption:"Textures"},"renderer.info.programs":{caption:"Programs"},"renderer.info.render.calls":{caption:"Calls"},"renderer.info.render.triangles":{caption:"Triangles",over:1e3},"renderer.info.render.points":{caption:"Points"}},groups:[{caption:"Three.js - Memory",values:["renderer.info.memory.geometries","renderer.info.programs","renderer.info.memory.textures"]},{caption:"Three.js - Render",values:["renderer.info.render.calls","renderer.info.render.triangles","renderer.info.render.points"]}],fractions:[]}},window.BrowserStats=function(){var a=null,b=0,c=0;window.performance&&!performance.memory&&(performance.memory={usedJSHeapSize:0,totalJSHeapSize:0}),0===performance.memory.totalJSHeapSize&&console.warn("totalJSHeapSize === 0... performance.memory is only available in Chrome .");var d=Math.log(1024);function e(a){var b=Math.floor(Math.log(a)/d);return Math.round(100*a/Math.pow(1024,b))/100}return{update:function(){b=e(performance.memory.usedJSHeapSize),c=e(performance.memory.totalJSHeapSize),a("memory").set(b),a("total").set(c)},start:function(){b=0},end:function(){},attach:function(b){a=b},values:{memory:{caption:"Used Memory",average:!0,avgMs:1e3,over:22},total:{caption:"Total Memory"}},groups:[{caption:"Browser",values:["memory","total"]}],fractions:[{base:"total",steps:["memory"]}]}},a.exports={glStats:window.glStats,threeStats:window.threeStats,BrowserStats:window.BrowserStats}},282:a=>{!function(){"performance"in window==0&&(window.performance={});var a=window.performance;if("now"in a==0){var b=Date.now();a.timing&&a.timing.navigationStart&&(b=a.timing.navigationStart),a.now=function(){return Date.now()-b}}a.mark||(a.mark=function(){}),a.measure||(a.measure=function(){})}(),window.rStats=function(a){function b(a,b){for(var c=Object.keys(a),d=0,e=c.length;d<e;d++)b(c[d])}var c=a||{},d=c.colours||["#850700","#c74900","#fcb300","#284280","#4c7c0c"],e=(c.CSSPath?c.CSSPath:"")+"rStats.css";(c.css||["https://fonts.googleapis.com/css?family=Roboto+Condensed:400,700,300",e]).forEach(function(a){var b;(b=document.createElement("link")).href=a,b.rel="stylesheet",b.type="text/css",document.getElementsByTagName("head")[0].appendChild(b)}),c.values||(c.values={});var f,g,h={};function i(a,b,c){var d=c||{},e=document.createElement("canvas"),f=e.getContext("2d"),g=0,h=0,i=d.color?d.color:"#666666",j=document.createElement("canvas"),k=j.getContext("2d");j.width=1,j.height=20,k.fillStyle="#444444",k.fillRect(0,0,1,20),k.fillStyle=i,k.fillRect(0,10,1,10),k.fillStyle="#ffffff",k.globalAlpha=.5,k.fillRect(0,10,1,1),k.globalAlpha=1;var l=document.createElement("canvas"),m=l.getContext("2d");return l.width=1,l.height=20,m.fillStyle="#444444",m.fillRect(0,0,1,20),m.fillStyle="#b70000",m.fillRect(0,10,1,10),m.globalAlpha=.5,m.fillStyle="#ffffff",m.fillRect(0,10,1,1),m.globalAlpha=1,e.width=200,e.height=10,e.style.width=e.width+"px",e.style.height=e.height+"px",e.className="rs-canvas",a.appendChild(e),f.fillStyle="#444444",f.fillRect(0,0,e.width,e.height),{draw:function(a,b){(h+=.1*(a-h))>(g*=.99)&&(g=h),f.drawImage(e,1,0,e.width-1,e.height,0,0,e.width-1,e.height),b?f.drawImage(l,e.width-1,e.height-h*e.height/g-10):f.drawImage(j,e.width-1,e.height-h*e.height/g-10)}}}function j(a,c){var e=document.createElement("canvas"),f=e.getContext("2d");return e.width=200,e.height=10*c,e.style.width=e.width+"px",e.style.height=e.height+"px",e.className="rs-canvas",a.appendChild(e),f.fillStyle="#444444",f.fillRect(0,0,e.width,e.height),{draw:function(a){f.drawImage(e,1,0,e.width-1,e.height,0,0,e.width-1,e.height);var c=0;b(a,function(b){var g=a[b]*e.height;f.fillStyle=d[b],f.fillRect(e.width-1,c,1,g),c+=g})}}}function k(a,b){var d,e=0,f=0,h=0,j=0,k=performance.now(),l=0,m=document.createElement("div"),n=document.createElement("span"),o=document.createElement("div"),p=document.createTextNode(""),q=c?c.values[a.toLowerCase()]:null,r=new i(m,a,q),s=!1;function t(a){if(q&&q.average){j+=a,l++;var b=performance.now();b-k>=(q.avgMs||1e3)&&(h=j/l,j=0,k=b,l=0)}}function u(){d=performance.now(),c.userTimingAPI&&performance.mark(a+"-start"),s=!0}function v(){e=performance.now()-d,c.userTimingAPI&&(performance.mark(a+"-end"),s&&performance.measure(a,a+"-start",a+"-end")),t(e)}return n.className="rs-counter-id",n.textContent=q&&q.caption?q.caption:a,o.className="rs-counter-value",o.appendChild(p),m.appendChild(n),m.appendChild(o),b?b.div.appendChild(m):g.appendChild(m),d=performance.now(),{set:function(a){t(e=a)},start:u,tick:function(){v(),u()},end:v,frame:function(){var a=performance.now(),b=a-d;f++,b>1e3&&(e=q&&!1===q.interpolate?f:1e3*f/b,f=0,d=a,t(e))},value:function(){return e},draw:function(){p.nodeValue=Math.round(100*(q&&q.average?h:e))/100;var a=q&&(q.below&&e<q.below||q.over&&e>q.over);r.draw(e,a),m.className=a?"rs-counter-base alarm":"rs-counter-base"}}}function l(a){var d=a.toLowerCase();if(void 0===d&&(d="default"),h[d])return h[d];var e=null;c&&c.groups&&b(c.groups,function(a){var b=c.groups[parseInt(a,10)];e||-1===b.values.indexOf(d.toLowerCase())||(e=b)});var f=new k(d,e);return h[d]=f,f}function m(){b(c.plugins,function(a){c.plugins[a].update()}),b(h,function(a){h[a].draw()}),c&&c.fractions&&b(c.fractions,function(a){var d=c.fractions[parseInt(a,10)],e=[],f=h[d.base.toLowerCase()];f&&(f=f.value(),b(c.fractions[a].steps,function(b){var d=h[c.fractions[a].steps[parseInt(b,10)].toLowerCase()];d&&e.push(d.value()/f)})),d.graph.draw(e)})}return function(){if(c.plugins){c.values||(c.values={}),c.groups||(c.groups=[]),c.fractions||(c.fractions=[]);for(var a=0;a<c.plugins.length;a++)c.plugins[a].attach(l),b(c.plugins[a].values,function(b){c.values[b]=c.plugins[a].values[b]}),c.groups=c.groups.concat(c.plugins[a].groups),c.fractions=c.fractions.concat(c.plugins[a].fractions)}else c.plugins={};(f=document.createElement("div")).className="rs-base",(g=document.createElement("div")).className="rs-container",g.style.height="auto",f.appendChild(g),document.body.appendChild(f),c&&(c.groups&&b(c.groups,function(a){var b=c.groups[parseInt(a,10)],d=document.createElement("div");d.className="rs-group",b.div=d;var e=document.createElement("h1");e.textContent=b.caption,e.addEventListener("click",(function(a){this.classList.toggle("hidden"),a.preventDefault()}).bind(d)),g.appendChild(e),g.appendChild(d)}),c.fractions&&b(c.fractions,function(a){var e=c.fractions[parseInt(a,10)],f=document.createElement("div");f.className="rs-fraction";var h=document.createElement("div");h.className="rs-legend";var i=0;b(c.fractions[a].steps,function(b){var e=document.createElement("p");e.textContent=c.fractions[a].steps[b],e.style.color=d[i],h.appendChild(e),i++}),f.appendChild(h),f.style.height=10*i+"px",e.div=f,e.graph=new j(f,i),g.appendChild(f)}))}(),function(a){return a?l(a):{element:f,update:m}}},a.exports=window.rStats},2535:a=>{a.exports={base64:function(a,b){return"data:"+a+";base64,"+b},isMobile:function(){var a,b=!1;return a=navigator.userAgent||navigator.vendor||window.opera,(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(a)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(a.substr(0,4)))&&(b=!0),b},isIOS:function(){return/(iPad|iPhone|iPod)/g.test(navigator.userAgent)},isIFrame:function(){try{return window.self!==window.top}catch(a){return!0}},appendQueryParameter:function(a,b,c){var d=0>a.indexOf("?")?"?":"&";return a+(d+b+"=")+c},getQueryParameter:function(a){var b=RegExp("[\\?&]"+(a=a.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]"))+"=([^&#]*)").exec(location.search);return null===b?"":decodeURIComponent(b[1].replace(/\+/g," "))},isLandscapeMode:function(){return 90==window.orientation||-90==window.orientation}}},5928:(a,b,c)=>{var d,e=c(2535);a.exports=(d=navigator.userAgent||navigator.vendor||window.opera).match(/iPhone/i)||d.match(/iPod/i)?function(){var a=null;this.request=function(){a||(a=setInterval(function(){window.location.href="/",setTimeout(window.stop,0)},15e3))},this.release=function(){a&&(clearInterval(a),a=null)}}:function(){var a=document.createElement("video");a.addEventListener("ended",function(){a.play()}),this.request=function(){a.paused&&(a.src=e.base64("video/webm","GkXfowEAAAAAAAAfQoaBAUL3gQFC8oEEQvOBCEKChHdlYm1Ch4ECQoWBAhhTgGcBAAAAAAAH4xFNm3RALE27i1OrhBVJqWZTrIHfTbuMU6uEFlSua1OsggEwTbuMU6uEHFO7a1OsggfG7AEAAAAAAACkAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAVSalmAQAAAAAAAEUq17GDD0JATYCNTGF2ZjU2LjQwLjEwMVdBjUxhdmY1Ni40MC4xMDFzpJAGSJTMbsLpDt/ySkipgX1fRImIQO1MAAAAAAAWVK5rAQAAAAAAADuuAQAAAAAAADLXgQFzxYEBnIEAIrWcg3VuZIaFVl9WUDmDgQEj44OEO5rKAOABAAAAAAAABrCBsLqBkB9DtnUBAAAAAAAAo+eBAKOmgQAAgKJJg0IAAV4BHsAHBIODCoAACmH2MAAAZxgz4dPSTFi5JACjloED6ACmAECSnABMQAADYAAAWi0quoCjloEH0ACmAECSnABNwAADYAAAWi0quoCjloELuACmAECSnABNgAADYAAAWi0quoCjloEPoACmAECSnABNYAADYAAAWi0quoCjloETiACmAECSnABNIAADYAAAWi0quoAfQ7Z1AQAAAAAAAJTnghdwo5aBAAAApgBAkpwATOAAA2AAAFotKrqAo5aBA+gApgBAkpwATMAAA2AAAFotKrqAo5aBB9AApgBAkpwATIAAA2AAAFotKrqAo5aBC7gApgBAkpwATEAAA2AAAFotKrqAo5aBD6AApgDAkpwAQ2AAA2AAAFotKrqAo5aBE4gApgBAkpwATCAAA2AAAFotKrqAH0O2dQEAAAAAAACU54Iu4KOWgQAAAKYAQJKcAEvAAANgAABaLSq6gKOWgQPoAKYAQJKcAEtgAANgAABaLSq6gKOWgQfQAKYAQJKcAEsAAANgAABaLSq6gKOWgQu4AKYAQJKcAEqAAANgAABaLSq6gKOWgQ+gAKYAQJKcAEogAANgAABaLSq6gKOWgROIAKYAQJKcAEnAAANgAABaLSq6gB9DtnUBAAAAAAAAlOeCRlCjloEAAACmAECSnABJgAADYAAAWi0quoCjloED6ACmAECSnABJIAADYAAAWi0quoCjloEH0ACmAMCSnABDYAADYAAAWi0quoCjloELuACmAECSnABI4AADYAAAWi0quoCjloEPoACmAECSnABIoAADYAAAWi0quoCjloETiACmAECSnABIYAADYAAAWi0quoAfQ7Z1AQAAAAAAAJTngl3Ao5aBAAAApgBAkpwASCAAA2AAAFotKrqAo5aBA+gApgBAkpwASAAAA2AAAFotKrqAo5aBB9AApgBAkpwAR8AAA2AAAFotKrqAo5aBC7gApgBAkpwAR4AAA2AAAFotKrqAo5aBD6AApgBAkpwAR2AAA2AAAFotKrqAo5aBE4gApgBAkpwARyAAA2AAAFotKrqAH0O2dQEAAAAAAACU54J1MKOWgQAAAKYAwJKcAENgAANgAABaLSq6gKOWgQPoAKYAQJKcAEbgAANgAABaLSq6gKOWgQfQAKYAQJKcAEagAANgAABaLSq6gKOWgQu4AKYAQJKcAEaAAANgAABaLSq6gKOWgQ+gAKYAQJKcAEZAAANgAABaLSq6gKOWgROIAKYAQJKcAEYAAANgAABaLSq6gB9DtnUBAAAAAAAAlOeCjKCjloEAAACmAECSnABF4AADYAAAWi0quoCjloED6ACmAECSnABFwAADYAAAWi0quoCjloEH0ACmAECSnABFoAADYAAAWi0quoCjloELuACmAECSnABFgAADYAAAWi0quoCjloEPoACmAMCSnABDYAADYAAAWi0quoCjloETiACmAECSnABFYAADYAAAWi0quoAfQ7Z1AQAAAAAAAJTngqQQo5aBAAAApgBAkpwARUAAA2AAAFotKrqAo5aBA+gApgBAkpwARSAAA2AAAFotKrqAo5aBB9AApgBAkpwARQAAA2AAAFotKrqAo5aBC7gApgBAkpwARQAAA2AAAFotKrqAo5aBD6AApgBAkpwAROAAA2AAAFotKrqAo5aBE4gApgBAkpwARMAAA2AAAFotKrqAH0O2dQEAAAAAAACU54K7gKOWgQAAAKYAQJKcAESgAANgAABaLSq6gKOWgQPoAKYAQJKcAESAAANgAABaLSq6gKOWgQfQAKYAwJKcAENgAANgAABaLSq6gKOWgQu4AKYAQJKcAERgAANgAABaLSq6gKOWgQ+gAKYAQJKcAERAAANgAABaLSq6gKOWgROIAKYAQJKcAEQgAANgAABaLSq6gB9DtnUBAAAAAAAAlOeC0vCjloEAAACmAECSnABEIAADYAAAWi0quoCjloED6ACmAECSnABEAAADYAAAWi0quoCjloEH0ACmAECSnABD4AADYAAAWi0quoCjloELuACmAECSnABDwAADYAAAWi0quoCjloEPoACmAECSnABDoAADYAAAWi0quoCjloETiACmAECSnABDgAADYAAAWi0quoAcU7trAQAAAAAAABG7j7OBALeK94EB8YIBd/CBAw=="),a.play())},this.release=function(){a.pause(),a.src=""}}},8217:(a,b,c)=>{c.d(b,{A:()=>u});var d=c(963),e=c.n(d),f=c(9089),g=c.n(f),h=c(6492),i=c.n(h),j=new URL(c(9169),c.b),k=new URL(c(6085),c.b),l=new URL(c(3931),c.b),m=new URL(c(7889),c.b),n=new URL(c(6517),c.b),o=g()(e()),p=i()(j),q=i()(k),r=i()(l),s=i()(m),t=i()(n);o.push([a.id,`/* .a-fullscreen means not embedded. */
html.a-fullscreen {
  bottom: 0;
  left: 0;
  position: fixed;
  right: 0;
  top: 0;
}

html.a-fullscreen body {
  height: 100%;
  margin: 0;
  overflow: hidden;
  padding: 0;
  width: 100%;
}

/* Class is removed when doing <a-scene embedded>. */
html.a-fullscreen .a-canvas {
  width: 100% !important;
  height: 100% !important;
  top: 0 !important;
  left: 0 !important;
  right: 0 !important;
  bottom: 0 !important;
  position: fixed !important;
}

html:not(.a-fullscreen) .a-enter-vr,
html:not(.a-fullscreen) .a-enter-ar {
  right: 5px;
  bottom: 5px;
}

html:not(.a-fullscreen) .a-enter-ar {
  right: 60px;
}

/* In chrome mobile the user agent stylesheet set it to white  */
:-webkit-full-screen {
  background-color: transparent;
}

.a-hidden {
  display: none !important;
}

.a-canvas {
  height: 100%;
  left: 0;
  position: absolute;
  top: 0;
  width: 100%;
}

.a-canvas.a-grab-cursor:hover {
  cursor: grab;
  cursor: -moz-grab;
  cursor: -webkit-grab;
}

canvas.a-canvas.a-mouse-cursor-hover:hover {
  cursor: pointer;
}

.a-inspector-loader {
  background-color: #ed3160;
  position: fixed;
  left: 3px;
  top: 3px;
  padding: 6px 10px;
  color: #fff;
  text-decoration: none;
  font-size: 12px;
  font-family: Roboto,sans-serif;
  text-align: center;
  z-index: 99999;
  width: 204px;
}

/* Inspector loader animation */
@keyframes dots-1 { from { opacity: 0; } 25% { opacity: 1; } }
@keyframes dots-2 { from { opacity: 0; } 50% { opacity: 1; } }
@keyframes dots-3 { from { opacity: 0; } 75% { opacity: 1; } }
@-webkit-keyframes dots-1 { from { opacity: 0; } 25% { opacity: 1; } }
@-webkit-keyframes dots-2 { from { opacity: 0; } 50% { opacity: 1; } }
@-webkit-keyframes dots-3 { from { opacity: 0; } 75% { opacity: 1; } }

.a-inspector-loader .dots span {
  animation: dots-1 2s infinite steps(1);
  -webkit-animation: dots-1 2s infinite steps(1);
}

.a-inspector-loader .dots span:first-child + span {
  animation-name: dots-2;
  -webkit-animation-name: dots-2;
}

.a-inspector-loader .dots span:first-child + span + span {
  animation-name: dots-3;
  -webkit-animation-name: dots-3;
}

a-scene {
  display: block;
  position: relative;
  height: 100%;
  width: 100%;
}

a-assets,
a-scene video,
a-scene img,
a-scene audio {
  display: none;
}

.a-enter-vr-modal,
.a-orientation-modal {
  font-family: Consolas, Andale Mono, Courier New, monospace;
}

.a-enter-vr-modal a {
  border-bottom: 1px solid #fff;
  padding: 2px 0;
  text-decoration: none;
  transition: .1s color ease-in;
}

.a-enter-vr-modal a:hover {
  background-color: #fff;
  color: #111;
  padding: 2px 4px;
  position: relative;
  left: -4px;
}

.a-enter-vr,
.a-enter-ar {
  font-family: sans-serif, monospace;
  font-size: 13px;
  width: 100%;
  font-weight: 200;
  line-height: 16px;
  position: absolute;
  right: 20px;
  bottom: 20px;
}

.a-enter-ar.xr {
  right: 90px;
}

.a-enter-vr-button,
.a-enter-vr-modal,
.a-enter-vr-modal a {
  color: #fff;
  user-select: none;
  outline: none;
}

.a-enter-vr-button {
  background: rgba(0, 0, 0, 0.35) url(${p}) 50% 50% no-repeat;
}

.a-enter-ar-button {
  background: rgba(0, 0, 0, 0.20) url(${q}) 50% 50% no-repeat;
}

.a-enter-vr.fullscreen .a-enter-vr-button {
  background-image: url(${r});
}

.a-enter-vr-button,
.a-enter-ar-button {
  background-size: 90% 90%;
  border: 0;
  bottom: 0;
  cursor: pointer;
  min-width: 58px;
  min-height: 34px;
  /* 1.74418604651 */
  /*
    In order to keep the aspect ratio when resizing
    padding-top percentages are relative to the containing block's width.
    http://stackoverflow.com/questions/12121090/responsively-change-div-size-keeping-aspect-ratio
  */
  padding-right: 0;
  padding-top: 0;
  position: absolute;
  right: 0;
  transition: background-color .05s ease;
  -webkit-transition: background-color .05s ease;
  z-index: 9999;
  border-radius: 8px;
  touch-action: manipulation; /* Prevent iOS double tap zoom on the button */
}

.a-enter-ar-button {
  background-size: 100% 90%;
  border-radius: 7px;
}

.a-enter-ar-button:active,
.a-enter-ar-button:hover,
.a-enter-vr-button:active,
.a-enter-vr-button:hover {
  background-color: #ef2d5e;
}

.a-enter-vr-button.resethover {
  background-color: rgba(0, 0, 0, 0.35);
}

.a-enter-vr-modal {
  background-color: #666;
  border-radius: 0;
  display: none;
  min-height: 32px;
  margin-right: 70px;
  padding: 9px;
  width: 280px;
  right: 2%;
  position: absolute;
}

.a-enter-vr-modal:after {
  border-bottom: 10px solid transparent;
  border-left: 10px solid #666;
  border-top: 10px solid transparent;
  display: inline-block;
  content: '';
  position: absolute;
  right: -5px;
  top: 5px;
  width: 0;
  height: 0;
}

.a-enter-vr-modal p,
.a-enter-vr-modal a {
  display: inline;
}

.a-enter-vr-modal p {
  margin: 0;
}

.a-enter-vr-modal p:after {
  content: ' ';
}

.a-orientation-modal {
  background: rgba(244, 244, 244, 1) url(${s}) center no-repeat;
  background-size: 50% 50%;
  bottom: 0;
  font-size: 14px;
  font-weight: 600;
  left: 0;
  line-height: 20px;
  right: 0;
  position: fixed;
  top: 0;
  z-index: 9999999;
}

.a-orientation-modal:after {
  color: #666;
  content: "Insert phone into Cardboard holder.";
  display: block;
  position: absolute;
  text-align: center;
  top: 70%;
  transform: translateY(-70%);
  width: 100%;
}

.a-orientation-modal button {
  background: url(${t}) no-repeat;
  border: none;
  height: 50px;
  text-indent: -9999px;
  width: 50px;
}

.a-loader-title {
  background-color: rgba(0, 0, 0, 0.6);
  font-family: sans-serif, monospace;
  text-align: center;
  font-size: 20px;
  height: 50px;
  font-weight: 300;
  line-height: 50px;
  position: absolute;
  right: 0px;
  left: 0px;
  top: 0px;
  color: white;
}

.a-modal {
  position: absolute;
  background: rgba(0, 0, 0, 0.60);
  background-size: 50% 50%;
  bottom: 0;
  font-size: 14px;
  font-weight: 600;
  left: 0;
  line-height: 20px;
  right: 0;
  position: fixed;
  top: 0;
  z-index: 9999999;
}

.a-dialog {
  position: relative;
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%);
  z-index: 199995;
  width: 300px;
  height: 200px;
  background-size: contain;
  background-color: white;
  font-family: sans-serif, monospace;
  font-size: 20px;
  border-radius: 3px;
  padding: 6px;
}

.a-dialog-text-container {
  width: 100%;
  height: 70%;
  align-self: flex-start;
  display: flex;
  justify-content: center;
  align-content: center;
  flex-direction: column;
}

.a-dialog-text {
  display: inline-block;
  font-weight: normal;
  font-size: 14pt;
  margin: 8px;
}

.a-dialog-buttons-container {
  display: inline-flex;
  align-self: flex-end;
  width: 100%;
  height: 30%;
}

.a-dialog-button {
  cursor: pointer;
  align-self: center;
  opacity: 0.9;
  height: 80%;
  width: 50%;
  font-size: 12pt;
  margin: 4px;
  border-radius: 2px;
  text-align:center;
  border: none;
  display: inline-block;
  -webkit-transition: all 0.25s ease-in-out;
  transition: all 0.25s ease-in-out;
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.10), 0 1px 2px rgba(0, 0, 0, 0.20);
  user-select: none;
}

.a-dialog-permission-button:hover {
  box-shadow: 0 7px 14px rgba(0,0,0,0.20), 0 2px 2px rgba(0,0,0,0.20);
}

.a-dialog-allow-button {
  background-color: #00ceff;
}

.a-dialog-deny-button {
  background-color: #ff005b;
}

.a-dialog-ok-button {
  background-color: #00ceff;
  width: 100%;
}

.a-dom-overlay:not(.a-no-style) {
  overflow: hidden;
  position: absolute;
  pointer-events: none;
  box-sizing: border-box;
  bottom: 0;
  left: 0;
  right: 0;
  top: 0;
  padding: 1em;
}

.a-dom-overlay:not(.a-no-style)>* {
  pointer-events: auto;
}
`,"",{version:3,sources:["webpack://./src/style/aframe.css"],names:[],mappings:"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",sourcesContent:["/* .a-fullscreen means not embedded. */\nhtml.a-fullscreen {\n  bottom: 0;\n  left: 0;\n  position: fixed;\n  right: 0;\n  top: 0;\n}\n\nhtml.a-fullscreen body {\n  height: 100%;\n  margin: 0;\n  overflow: hidden;\n  padding: 0;\n  width: 100%;\n}\n\n/* Class is removed when doing <a-scene embedded>. */\nhtml.a-fullscreen .a-canvas {\n  width: 100% !important;\n  height: 100% !important;\n  top: 0 !important;\n  left: 0 !important;\n  right: 0 !important;\n  bottom: 0 !important;\n  position: fixed !important;\n}\n\nhtml:not(.a-fullscreen) .a-enter-vr,\nhtml:not(.a-fullscreen) .a-enter-ar {\n  right: 5px;\n  bottom: 5px;\n}\n\nhtml:not(.a-fullscreen) .a-enter-ar {\n  right: 60px;\n}\n\n/* In chrome mobile the user agent stylesheet set it to white  */\n:-webkit-full-screen {\n  background-color: transparent;\n}\n\n.a-hidden {\n  display: none !important;\n}\n\n.a-canvas {\n  height: 100%;\n  left: 0;\n  position: absolute;\n  top: 0;\n  width: 100%;\n}\n\n.a-canvas.a-grab-cursor:hover {\n  cursor: grab;\n  cursor: -moz-grab;\n  cursor: -webkit-grab;\n}\n\ncanvas.a-canvas.a-mouse-cursor-hover:hover {\n  cursor: pointer;\n}\n\n.a-inspector-loader {\n  background-color: #ed3160;\n  position: fixed;\n  left: 3px;\n  top: 3px;\n  padding: 6px 10px;\n  color: #fff;\n  text-decoration: none;\n  font-size: 12px;\n  font-family: Roboto,sans-serif;\n  text-align: center;\n  z-index: 99999;\n  width: 204px;\n}\n\n/* Inspector loader animation */\n@keyframes dots-1 { from { opacity: 0; } 25% { opacity: 1; } }\n@keyframes dots-2 { from { opacity: 0; } 50% { opacity: 1; } }\n@keyframes dots-3 { from { opacity: 0; } 75% { opacity: 1; } }\n@-webkit-keyframes dots-1 { from { opacity: 0; } 25% { opacity: 1; } }\n@-webkit-keyframes dots-2 { from { opacity: 0; } 50% { opacity: 1; } }\n@-webkit-keyframes dots-3 { from { opacity: 0; } 75% { opacity: 1; } }\n\n.a-inspector-loader .dots span {\n  animation: dots-1 2s infinite steps(1);\n  -webkit-animation: dots-1 2s infinite steps(1);\n}\n\n.a-inspector-loader .dots span:first-child + span {\n  animation-name: dots-2;\n  -webkit-animation-name: dots-2;\n}\n\n.a-inspector-loader .dots span:first-child + span + span {\n  animation-name: dots-3;\n  -webkit-animation-name: dots-3;\n}\n\na-scene {\n  display: block;\n  position: relative;\n  height: 100%;\n  width: 100%;\n}\n\na-assets,\na-scene video,\na-scene img,\na-scene audio {\n  display: none;\n}\n\n.a-enter-vr-modal,\n.a-orientation-modal {\n  font-family: Consolas, Andale Mono, Courier New, monospace;\n}\n\n.a-enter-vr-modal a {\n  border-bottom: 1px solid #fff;\n  padding: 2px 0;\n  text-decoration: none;\n  transition: .1s color ease-in;\n}\n\n.a-enter-vr-modal a:hover {\n  background-color: #fff;\n  color: #111;\n  padding: 2px 4px;\n  position: relative;\n  left: -4px;\n}\n\n.a-enter-vr,\n.a-enter-ar {\n  font-family: sans-serif, monospace;\n  font-size: 13px;\n  width: 100%;\n  font-weight: 200;\n  line-height: 16px;\n  position: absolute;\n  right: 20px;\n  bottom: 20px;\n}\n\n.a-enter-ar.xr {\n  right: 90px;\n}\n\n.a-enter-vr-button,\n.a-enter-vr-modal,\n.a-enter-vr-modal a {\n  color: #fff;\n  user-select: none;\n  outline: none;\n}\n\n.a-enter-vr-button {\n  background: rgba(0, 0, 0, 0.35) url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='108' height='62' viewBox='0 0 108 62'%3E%3Ctitle%3Eaframe-vrmode-noborder-reduced-tracking%3C/title%3E%3Cpath d='M68.81,21.56H64.23v8.27h4.58a4.13,4.13,0,0,0,3.1-1.09,4.2,4.2,0,0,0,1-3,4.24,4.24,0,0,0-1-3A4.05,4.05,0,0,0,68.81,21.56Z' fill='%23fff'/%3E%3Cpath d='M96,0H12A12,12,0,0,0,0,12V50A12,12,0,0,0,12,62H96a12,12,0,0,0,12-12V12A12,12,0,0,0,96,0ZM41.9,46H34L24,16h8l6,21.84,6-21.84H52Zm39.29,0H73.44L68.15,35.39H64.23V46H57V16H68.81q5.32,0,8.34,2.37a8,8,0,0,1,3,6.69,9.68,9.68,0,0,1-1.27,5.18,8.9,8.9,0,0,1-4,3.34l6.26,12.11Z' fill='%23fff'/%3E%3C/svg%3E\") 50% 50% no-repeat;\n}\n\n.a-enter-ar-button {\n  background: rgba(0, 0, 0, 0.20) url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='108' height='62' viewBox='0 0 108 62'%3E%3Ctitle%3Eaframe-armode-noborder-reduced-tracking%3C/title%3E%3Cpath d='M96,0H12A12,12,0,0,0,0,12V50A12,12,0,0,0,12,62H96a12,12,0,0,0,12-12V12A12,12,0,0,0,96,0Zm8,50a8,8,0,0,1-8,8H12a8,8,0,0,1-8-8V12a8,8,0,0,1,8-8H96a8,8,0,0,1,8,8Z' fill='%23fff'/%3E%3Cpath d='M43.35,39.82H32.51L30.45,46H23.88L35,16h5.73L52,46H45.43Zm-9.17-5h7.5L37.91,23.58Z' fill='%23fff'/%3E%3Cpath d='M68.11,35H63.18V46H57V16H68.15q5.31,0,8.2,2.37a8.18,8.18,0,0,1,2.88,6.7,9.22,9.22,0,0,1-1.33,5.12,9.09,9.09,0,0,1-4,3.26l6.49,12.26V46H73.73Zm-4.93-5h5a5.09,5.09,0,0,0,3.6-1.18,4.21,4.21,0,0,0,1.28-3.27,4.56,4.56,0,0,0-1.2-3.34A5,5,0,0,0,68.15,21h-5Z' fill='%23fff'/%3E%3C/svg%3E\") 50% 50% no-repeat;\n}\n\n.a-enter-vr.fullscreen .a-enter-vr-button {\n  background-image: url(\"data:image/svg+xml,%3C%3Fxml version='1.0' encoding='UTF-8' standalone='no'%3F%3E%3Csvg width='108' height='62' viewBox='0 0 108 62' version='1.1' id='svg320' sodipodi:docname='fullscreen-aframe.svg' xml:space='preserve' inkscape:version='1.2.1 (9c6d41e  2022-07-14)' xmlns:inkscape='http://www.inkscape.org/namespaces/inkscape' xmlns:sodipodi='http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd' xmlns='http://www.w3.org/2000/svg' xmlns:svg='http://www.w3.org/2000/svg' xmlns:rdf='http://www.w3.org/1999/02/22-rdf-syntax-ns%23' xmlns:cc='http://creativecommons.org/ns%23' xmlns:dc='http://purl.org/dc/elements/1.1/'%3E%3Cdefs id='defs324' /%3E%3Csodipodi:namedview id='namedview322' pagecolor='%23ffffff' bordercolor='%23000000' borderopacity='0.25' inkscape:showpageshadow='2' inkscape:pageopacity='0.0' inkscape:pagecheckerboard='0' inkscape:deskcolor='%23d1d1d1' showgrid='false' inkscape:zoom='3.8064516' inkscape:cx='91.423729' inkscape:cy='-1.4449153' inkscape:window-width='1440' inkscape:window-height='847' inkscape:window-x='32' inkscape:window-y='25' inkscape:window-maximized='0' inkscape:current-layer='svg320' /%3E%3Ctitle id='title312'%3Eaframe-armode-noborder-reduced-tracking%3C/title%3E%3Cpath d='M96 0H12A12 12 0 0 0 0 12V50A12 12 0 0 0 12 62H96a12 12 0 0 0 12-12V12A12 12 0 0 0 96 0Zm8 50a8 8 0 0 1-8 8H12a8 8 0 0 1-8-8V12a8 8 0 0 1 8-8H96a8 8 0 0 1 8 8Z' fill='%23fff' id='path314' style='fill:%23ffffff' /%3E%3Cg id='g356' transform='translate(-206.61017 -232.61864)'%3E%3C/g%3E%3Cg id='g358' transform='translate(-206.61017 -232.61864)'%3E%3C/g%3E%3Cg id='g360' transform='translate(-206.61017 -232.61864)'%3E%3C/g%3E%3Cg id='g362' transform='translate(-206.61017 -232.61864)'%3E%3C/g%3E%3Cg id='g364' transform='translate(-206.61017 -232.61864)'%3E%3C/g%3E%3Cg id='g366' transform='translate(-206.61017 -232.61864)'%3E%3C/g%3E%3Cg id='g368' transform='translate(-206.61017 -232.61864)'%3E%3C/g%3E%3Cg id='g370' transform='translate(-206.61017 -232.61864)'%3E%3C/g%3E%3Cg id='g372' transform='translate(-206.61017 -232.61864)'%3E%3C/g%3E%3Cg id='g374' transform='translate(-206.61017 -232.61864)'%3E%3C/g%3E%3Cg id='g376' transform='translate(-206.61017 -232.61864)'%3E%3C/g%3E%3Cg id='g378' transform='translate(-206.61017 -232.61864)'%3E%3C/g%3E%3Cg id='g380' transform='translate(-206.61017 -232.61864)'%3E%3C/g%3E%3Cg id='g382' transform='translate(-206.61017 -232.61864)'%3E%3C/g%3E%3Cg id='g384' transform='translate(-206.61017 -232.61864)'%3E%3C/g%3E%3Cmetadata id='metadata561'%3E%3Crdf:RDF%3E%3Ccc:Work rdf:about=''%3E%3Cdc:title%3Eaframe-armode-noborder-reduced-tracking%3C/dc:title%3E%3C/cc:Work%3E%3C/rdf:RDF%3E%3C/metadata%3E%3Cpath d='m 98.168511 40.083649 c 0 -1.303681 -0.998788 -2.358041 -2.239389 -2.358041 -1.230088 0.0031 -2.240892 1.05436 -2.240892 2.358041 v 4.881296 l -9.041661 -9.041662 c -0.874129 -0.875631 -2.288954 -0.875631 -3.16308 0 -0.874129 0.874126 -0.874129 2.293459 0 3.167585 l 8.995101 8.992101 h -4.858767 c -1.323206 0.0031 -2.389583 1.004796 -2.389583 2.239386 0 1.237598 1.066377 2.237888 2.389583 2.237888 h 10.154599 c 1.323206 0 2.388082 -0.998789 2.392587 -2.237888 -0.0044 -0.03305 -0.009 -0.05858 -0.0134 -0.09161 0.0046 -0.04207 0.0134 -0.08712 0.0134 -0.13066 V 40.085172 h -1.52e-4' id='path596' style='fill:%23ffffff%3Bstroke-width:1.50194' /%3E%3Cpath d='m 23.091002 35.921781 -9.026643 9.041662 v -4.881296 c 0 -1.303681 -1.009302 -2.355037 -2.242393 -2.358041 -1.237598 0 -2.237888 1.05436 -2.237888 2.358041 l -0.0031 10.016421 c 0 0.04356 0.01211 0.08862 0.0015 0.130659 -0.0031 0.03153 -0.009 0.05709 -0.01211 0.09161 0.0031 1.239099 1.069379 2.237888 2.391085 2.237888 h 10.156101 c 1.320202 0 2.388079 -1.000291 2.388079 -2.237888 0 -1.234591 -1.067877 -2.236383 -2.388079 -2.239387 h -4.858767 l 8.995101 -8.9921 c 0.871126 -0.874127 0.871126 -2.293459 0 -3.167586 -0.875628 -0.877132 -2.291957 -0.877132 -3.169087 -1.52e-4' id='path598' style='fill:%23ffffff%3Bstroke-width:1.50194' /%3E%3Cpath d='m 84.649572 25.978033 9.041662 -9.041664 v 4.881298 c 0 1.299176 1.010806 2.350532 2.240891 2.355037 1.240601 0 2.23939 -1.055861 2.23939 -2.355037 V 11.798242 c 0 -0.04356 -0.009 -0.08862 -0.0134 -0.127671 0.0044 -0.03153 0.009 -0.06157 0.0134 -0.09313 -0.0044 -1.240598 -1.069379 -2.2393873 -2.391085 -2.2393873 h -10.1546 c -1.323205 0 -2.38958 0.9987893 -2.38958 2.2393873 0 1.233091 1.066375 2.237887 2.38958 2.240891 h 4.858768 l -8.995102 8.9921 c -0.874129 0.872625 -0.874129 2.288954 0 3.161578 0.874127 0.880137 2.288951 0.880137 3.16308 1.5e-4' id='path600' style='fill:%23ffffff%3Bstroke-width:1.50194' /%3E%3Cpath d='m 17.264988 13.822853 h 4.857265 c 1.320202 -0.0031 2.388079 -1.0078 2.388079 -2.240889 0 -1.240601 -1.067877 -2.2393893 -2.388079 -2.2393893 H 11.967654 c -1.321707 0 -2.388082 0.9987883 -2.391085 2.2393893 0.0031 0.03153 0.009 0.06157 0.01211 0.09313 -0.0031 0.03905 -0.0015 0.08262 -0.0015 0.127671 l 0.0031 10.020926 c 0 1.299176 1.00029 2.355038 2.237887 2.355038 1.233092 -0.0044 2.242393 -1.055862 2.242393 -2.355038 v -4.881295 l 9.026644 9.041661 c 0.877132 0.878635 2.293459 0.878635 3.169087 0 0.871125 -0.872624 0.871125 -2.288953 0 -3.161577 l -8.995282 -8.993616' id='path602' style='fill:%23ffffff%3Bstroke-width:1.50194' /%3E%3C/svg%3E\");\n}\n\n.a-enter-vr-button,\n.a-enter-ar-button {\n  background-size: 90% 90%;\n  border: 0;\n  bottom: 0;\n  cursor: pointer;\n  min-width: 58px;\n  min-height: 34px;\n  /* 1.74418604651 */\n  /*\n    In order to keep the aspect ratio when resizing\n    padding-top percentages are relative to the containing block's width.\n    http://stackoverflow.com/questions/12121090/responsively-change-div-size-keeping-aspect-ratio\n  */\n  padding-right: 0;\n  padding-top: 0;\n  position: absolute;\n  right: 0;\n  transition: background-color .05s ease;\n  -webkit-transition: background-color .05s ease;\n  z-index: 9999;\n  border-radius: 8px;\n  touch-action: manipulation; /* Prevent iOS double tap zoom on the button */\n}\n\n.a-enter-ar-button {\n  background-size: 100% 90%;\n  border-radius: 7px;\n}\n\n.a-enter-ar-button:active,\n.a-enter-ar-button:hover,\n.a-enter-vr-button:active,\n.a-enter-vr-button:hover {\n  background-color: #ef2d5e;\n}\n\n.a-enter-vr-button.resethover {\n  background-color: rgba(0, 0, 0, 0.35);\n}\n\n.a-enter-vr-modal {\n  background-color: #666;\n  border-radius: 0;\n  display: none;\n  min-height: 32px;\n  margin-right: 70px;\n  padding: 9px;\n  width: 280px;\n  right: 2%;\n  position: absolute;\n}\n\n.a-enter-vr-modal:after {\n  border-bottom: 10px solid transparent;\n  border-left: 10px solid #666;\n  border-top: 10px solid transparent;\n  display: inline-block;\n  content: '';\n  position: absolute;\n  right: -5px;\n  top: 5px;\n  width: 0;\n  height: 0;\n}\n\n.a-enter-vr-modal p,\n.a-enter-vr-modal a {\n  display: inline;\n}\n\n.a-enter-vr-modal p {\n  margin: 0;\n}\n\n.a-enter-vr-modal p:after {\n  content: ' ';\n}\n\n.a-orientation-modal {\n  background: rgba(244, 244, 244, 1) url(data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20xmlns%3Axlink%3D%22http%3A//www.w3.org/1999/xlink%22%20version%3D%221.1%22%20x%3D%220px%22%20y%3D%220px%22%20viewBox%3D%220%200%2090%2090%22%20enable-background%3D%22new%200%200%2090%2090%22%20xml%3Aspace%3D%22preserve%22%3E%3Cpolygon%20points%3D%220%2C0%200%2C0%200%2C0%20%22%3E%3C/polygon%3E%3Cg%3E%3Cpath%20d%3D%22M71.545%2C48.145h-31.98V20.743c0-2.627-2.138-4.765-4.765-4.765H18.456c-2.628%2C0-4.767%2C2.138-4.767%2C4.765v42.789%20%20%20c0%2C2.628%2C2.138%2C4.766%2C4.767%2C4.766h5.535v0.959c0%2C2.628%2C2.138%2C4.765%2C4.766%2C4.765h42.788c2.628%2C0%2C4.766-2.137%2C4.766-4.765V52.914%20%20%20C76.311%2C50.284%2C74.173%2C48.145%2C71.545%2C48.145z%20M18.455%2C16.935h16.344c2.1%2C0%2C3.808%2C1.708%2C3.808%2C3.808v27.401H37.25V22.636%20%20%20c0-0.264-0.215-0.478-0.479-0.478H16.482c-0.264%2C0-0.479%2C0.214-0.479%2C0.478v36.585c0%2C0.264%2C0.215%2C0.478%2C0.479%2C0.478h7.507v7.644%20%20%20h-5.534c-2.101%2C0-3.81-1.709-3.81-3.81V20.743C14.645%2C18.643%2C16.354%2C16.935%2C18.455%2C16.935z%20M16.96%2C23.116h19.331v25.031h-7.535%20%20%20c-2.628%2C0-4.766%2C2.139-4.766%2C4.768v5.828h-7.03V23.116z%20M71.545%2C73.064H28.757c-2.101%2C0-3.81-1.708-3.81-3.808V52.914%20%20%20c0-2.102%2C1.709-3.812%2C3.81-3.812h42.788c2.1%2C0%2C3.809%2C1.71%2C3.809%2C3.812v16.343C75.354%2C71.356%2C73.645%2C73.064%2C71.545%2C73.064z%22%3E%3C/path%3E%3Cpath%20d%3D%22M28.919%2C58.424c-1.466%2C0-2.659%2C1.193-2.659%2C2.66c0%2C1.466%2C1.193%2C2.658%2C2.659%2C2.658c1.468%2C0%2C2.662-1.192%2C2.662-2.658%20%20%20C31.581%2C59.617%2C30.387%2C58.424%2C28.919%2C58.424z%20M28.919%2C62.786c-0.939%2C0-1.703-0.764-1.703-1.702c0-0.939%2C0.764-1.704%2C1.703-1.704%20%20%20c0.94%2C0%2C1.705%2C0.765%2C1.705%2C1.704C30.623%2C62.022%2C29.858%2C62.786%2C28.919%2C62.786z%22%3E%3C/path%3E%3Cpath%20d%3D%22M69.654%2C50.461H33.069c-0.264%2C0-0.479%2C0.215-0.479%2C0.479v20.288c0%2C0.264%2C0.215%2C0.478%2C0.479%2C0.478h36.585%20%20%20c0.263%2C0%2C0.477-0.214%2C0.477-0.478V50.939C70.131%2C50.676%2C69.917%2C50.461%2C69.654%2C50.461z%20M69.174%2C51.417V70.75H33.548V51.417H69.174z%22%3E%3C/path%3E%3Cpath%20d%3D%22M45.201%2C30.296c6.651%2C0%2C12.233%2C5.351%2C12.551%2C11.977l-3.033-2.638c-0.193-0.165-0.507-0.142-0.675%2C0.048%20%20%20c-0.174%2C0.198-0.153%2C0.501%2C0.045%2C0.676l3.883%2C3.375c0.09%2C0.075%2C0.198%2C0.115%2C0.312%2C0.115c0.141%2C0%2C0.273-0.061%2C0.362-0.166%20%20%20l3.371-3.877c0.173-0.2%2C0.151-0.502-0.047-0.675c-0.194-0.166-0.508-0.144-0.676%2C0.048l-2.592%2C2.979%20%20%20c-0.18-3.417-1.629-6.605-4.099-9.001c-2.538-2.461-5.877-3.817-9.404-3.817c-0.264%2C0-0.479%2C0.215-0.479%2C0.479%20%20%20C44.72%2C30.083%2C44.936%2C30.296%2C45.201%2C30.296z%22%3E%3C/path%3E%3C/g%3E%3C/svg%3E) center no-repeat;\n  background-size: 50% 50%;\n  bottom: 0;\n  font-size: 14px;\n  font-weight: 600;\n  left: 0;\n  line-height: 20px;\n  right: 0;\n  position: fixed;\n  top: 0;\n  z-index: 9999999;\n}\n\n.a-orientation-modal:after {\n  color: #666;\n  content: \"Insert phone into Cardboard holder.\";\n  display: block;\n  position: absolute;\n  text-align: center;\n  top: 70%;\n  transform: translateY(-70%);\n  width: 100%;\n}\n\n.a-orientation-modal button {\n  background: url(data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20xmlns%3Axlink%3D%22http%3A//www.w3.org/1999/xlink%22%20version%3D%221.1%22%20x%3D%220px%22%20y%3D%220px%22%20viewBox%3D%220%200%20100%20100%22%20enable-background%3D%22new%200%200%20100%20100%22%20xml%3Aspace%3D%22preserve%22%3E%3Cpath%20fill%3D%22%23000000%22%20d%3D%22M55.209%2C50l17.803-17.803c1.416-1.416%2C1.416-3.713%2C0-5.129c-1.416-1.417-3.713-1.417-5.129%2C0L50.08%2C44.872%20%20L32.278%2C27.069c-1.416-1.417-3.714-1.417-5.129%2C0c-1.417%2C1.416-1.417%2C3.713%2C0%2C5.129L44.951%2C50L27.149%2C67.803%20%20c-1.417%2C1.416-1.417%2C3.713%2C0%2C5.129c0.708%2C0.708%2C1.636%2C1.062%2C2.564%2C1.062c0.928%2C0%2C1.856-0.354%2C2.564-1.062L50.08%2C55.13l17.803%2C17.802%20%20c0.708%2C0.708%2C1.637%2C1.062%2C2.564%2C1.062s1.856-0.354%2C2.564-1.062c1.416-1.416%2C1.416-3.713%2C0-5.129L55.209%2C50z%22%3E%3C/path%3E%3C/svg%3E) no-repeat;\n  border: none;\n  height: 50px;\n  text-indent: -9999px;\n  width: 50px;\n}\n\n.a-loader-title {\n  background-color: rgba(0, 0, 0, 0.6);\n  font-family: sans-serif, monospace;\n  text-align: center;\n  font-size: 20px;\n  height: 50px;\n  font-weight: 300;\n  line-height: 50px;\n  position: absolute;\n  right: 0px;\n  left: 0px;\n  top: 0px;\n  color: white;\n}\n\n.a-modal {\n  position: absolute;\n  background: rgba(0, 0, 0, 0.60);\n  background-size: 50% 50%;\n  bottom: 0;\n  font-size: 14px;\n  font-weight: 600;\n  left: 0;\n  line-height: 20px;\n  right: 0;\n  position: fixed;\n  top: 0;\n  z-index: 9999999;\n}\n\n.a-dialog {\n  position: relative;\n  left: 50%;\n  top: 50%;\n  transform: translate(-50%, -50%);\n  z-index: 199995;\n  width: 300px;\n  height: 200px;\n  background-size: contain;\n  background-color: white;\n  font-family: sans-serif, monospace;\n  font-size: 20px;\n  border-radius: 3px;\n  padding: 6px;\n}\n\n.a-dialog-text-container {\n  width: 100%;\n  height: 70%;\n  align-self: flex-start;\n  display: flex;\n  justify-content: center;\n  align-content: center;\n  flex-direction: column;\n}\n\n.a-dialog-text {\n  display: inline-block;\n  font-weight: normal;\n  font-size: 14pt;\n  margin: 8px;\n}\n\n.a-dialog-buttons-container {\n  display: inline-flex;\n  align-self: flex-end;\n  width: 100%;\n  height: 30%;\n}\n\n.a-dialog-button {\n  cursor: pointer;\n  align-self: center;\n  opacity: 0.9;\n  height: 80%;\n  width: 50%;\n  font-size: 12pt;\n  margin: 4px;\n  border-radius: 2px;\n  text-align:center;\n  border: none;\n  display: inline-block;\n  -webkit-transition: all 0.25s ease-in-out;\n  transition: all 0.25s ease-in-out;\n  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.10), 0 1px 2px rgba(0, 0, 0, 0.20);\n  user-select: none;\n}\n\n.a-dialog-permission-button:hover {\n  box-shadow: 0 7px 14px rgba(0,0,0,0.20), 0 2px 2px rgba(0,0,0,0.20);\n}\n\n.a-dialog-allow-button {\n  background-color: #00ceff;\n}\n\n.a-dialog-deny-button {\n  background-color: #ff005b;\n}\n\n.a-dialog-ok-button {\n  background-color: #00ceff;\n  width: 100%;\n}\n\n.a-dom-overlay:not(.a-no-style) {\n  overflow: hidden;\n  position: absolute;\n  pointer-events: none;\n  box-sizing: border-box;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  top: 0;\n  padding: 1em;\n}\n\n.a-dom-overlay:not(.a-no-style)>* {\n  pointer-events: auto;\n}\n"],sourceRoot:""}]);let u=o},2470:(a,b,c)=>{c.d(b,{A:()=>h});var d=c(963),e=c.n(d),f=c(9089),g=c.n(f)()(e());g.push([a.id,".rs-base {\n  background-color: #333;\n  color: #fafafa;\n  border-radius: 0;\n  font: 10px monospace;\n  left: 5px;\n  line-height: 1em;\n  opacity: 0.85;\n  overflow: hidden;\n  padding: 10px;\n  position: fixed;\n  top: 5px;\n  width: 300px;\n  z-index: 10000;\n}\n\n.rs-base div.hidden {\n  display: none;\n}\n\n.rs-base h1 {\n  color: #fff;\n  cursor: pointer;\n  font-size: 1.4em;\n  font-weight: 300;\n  margin: 0 0 5px;\n  padding: 0;\n}\n\n.rs-group {\n  display: -webkit-box;\n  display: -webkit-flex;\n  display: flex;\n  -webkit-flex-direction: column-reverse;\n  flex-direction: column-reverse;\n  margin-bottom: 5px;\n}\n\n.rs-group:last-child {\n  margin-bottom: 0;\n}\n\n.rs-counter-base {\n  align-items: center;\n  display: -webkit-box;\n  display: -webkit-flex;\n  display: flex;\n  height: 10px;\n  -webkit-justify-content: space-between;\n  justify-content: space-between;\n  margin: 2px 0;\n}\n\n.rs-counter-base.alarm {\n  color: #b70000;\n  text-shadow: 0 0 0 #b70000,\n               0 0 1px #fff,\n               0 0 1px #fff,\n               0 0 2px #fff,\n               0 0 2px #fff,\n               0 0 3px #fff,\n               0 0 3px #fff,\n               0 0 4px #fff,\n               0 0 4px #fff;\n}\n\n.rs-counter-id {\n  font-weight: 300;\n  -webkit-box-ordinal-group: 0;\n  -webkit-order: 0;\n  order: 0;\n  width: 54px;\n}\n\n.rs-counter-value {\n  font-weight: 300;\n  -webkit-box-ordinal-group: 1;\n  -webkit-order: 1;\n  order: 1;\n  text-align: right;\n  width: 35px;\n}\n\n.rs-canvas {\n  -webkit-box-ordinal-group: 2;\n  -webkit-order: 2;\n  order: 2;\n}\n\n@media (min-width: 480px) {\n  .rs-base {\n    left: 20px;\n    top: 20px;\n  }\n}\n","",{version:3,sources:["webpack://./src/style/rStats.css"],names:[],mappings:"AAAA;EACE,sBAAsB;EACtB,cAAc;EACd,gBAAgB;EAChB,oBAAoB;EACpB,SAAS;EACT,gBAAgB;EAChB,aAAa;EACb,gBAAgB;EAChB,aAAa;EACb,eAAe;EACf,QAAQ;EACR,YAAY;EACZ,cAAc;AAChB;;AAEA;EACE,aAAa;AACf;;AAEA;EACE,WAAW;EACX,eAAe;EACf,gBAAgB;EAChB,gBAAgB;EAChB,eAAe;EACf,UAAU;AACZ;;AAEA;EACE,oBAAoB;EACpB,qBAAqB;EACrB,aAAa;EACb,sCAAsC;EACtC,8BAA8B;EAC9B,kBAAkB;AACpB;;AAEA;EACE,gBAAgB;AAClB;;AAEA;EACE,mBAAmB;EACnB,oBAAoB;EACpB,qBAAqB;EACrB,aAAa;EACb,YAAY;EACZ,sCAAsC;EACtC,8BAA8B;EAC9B,aAAa;AACf;;AAEA;EACE,cAAc;EACd;;;;;;;;2BAQyB;AAC3B;;AAEA;EACE,gBAAgB;EAChB,4BAA4B;EAC5B,gBAAgB;EAChB,QAAQ;EACR,WAAW;AACb;;AAEA;EACE,gBAAgB;EAChB,4BAA4B;EAC5B,gBAAgB;EAChB,QAAQ;EACR,iBAAiB;EACjB,WAAW;AACb;;AAEA;EACE,4BAA4B;EAC5B,gBAAgB;EAChB,QAAQ;AACV;;AAEA;EACE;IACE,UAAU;IACV,SAAS;EACX;AACF",sourcesContent:[".rs-base {\n  background-color: #333;\n  color: #fafafa;\n  border-radius: 0;\n  font: 10px monospace;\n  left: 5px;\n  line-height: 1em;\n  opacity: 0.85;\n  overflow: hidden;\n  padding: 10px;\n  position: fixed;\n  top: 5px;\n  width: 300px;\n  z-index: 10000;\n}\n\n.rs-base div.hidden {\n  display: none;\n}\n\n.rs-base h1 {\n  color: #fff;\n  cursor: pointer;\n  font-size: 1.4em;\n  font-weight: 300;\n  margin: 0 0 5px;\n  padding: 0;\n}\n\n.rs-group {\n  display: -webkit-box;\n  display: -webkit-flex;\n  display: flex;\n  -webkit-flex-direction: column-reverse;\n  flex-direction: column-reverse;\n  margin-bottom: 5px;\n}\n\n.rs-group:last-child {\n  margin-bottom: 0;\n}\n\n.rs-counter-base {\n  align-items: center;\n  display: -webkit-box;\n  display: -webkit-flex;\n  display: flex;\n  height: 10px;\n  -webkit-justify-content: space-between;\n  justify-content: space-between;\n  margin: 2px 0;\n}\n\n.rs-counter-base.alarm {\n  color: #b70000;\n  text-shadow: 0 0 0 #b70000,\n               0 0 1px #fff,\n               0 0 1px #fff,\n               0 0 2px #fff,\n               0 0 2px #fff,\n               0 0 3px #fff,\n               0 0 3px #fff,\n               0 0 4px #fff,\n               0 0 4px #fff;\n}\n\n.rs-counter-id {\n  font-weight: 300;\n  -webkit-box-ordinal-group: 0;\n  -webkit-order: 0;\n  order: 0;\n  width: 54px;\n}\n\n.rs-counter-value {\n  font-weight: 300;\n  -webkit-box-ordinal-group: 1;\n  -webkit-order: 1;\n  order: 1;\n  text-align: right;\n  width: 35px;\n}\n\n.rs-canvas {\n  -webkit-box-ordinal-group: 2;\n  -webkit-order: 2;\n  order: 2;\n}\n\n@media (min-width: 480px) {\n  .rs-base {\n    left: 20px;\n    top: 20px;\n  }\n}\n"],sourceRoot:""}]);let h=g},7180:(a,b,c)=>{c.r(b),c.d(b,{default:()=>r});var d=c(5072),e=c.n(d),f=c(7825),g=c.n(f),h=c(7659),i=c.n(h),j=c(5056),k=c.n(j),l=c(540),m=c.n(l),n=c(1113),o=c.n(n),p=c(8217),q={};q.styleTagTransform=o(),q.setAttributes=k(),q.insert=i().bind(null,"head"),q.domAPI=g(),q.insertStyleElement=m(),e()(p.A,q);let r=p.A&&p.A.locals?p.A.locals:void 0},9379:(a,b,c)=>{c.r(b),c.d(b,{default:()=>r});var d=c(5072),e=c.n(d),f=c(7825),g=c.n(f),h=c(7659),i=c.n(h),j=c(5056),k=c.n(j),l=c(540),m=c.n(l),n=c(1113),o=c.n(n),p=c(2470),q={};q.styleTagTransform=o(),q.setAttributes=k(),q.insert=i().bind(null,"head"),q.domAPI=g(),q.insertStyleElement=m(),e()(p.A,q);let r=p.A&&p.A.locals?p.A.locals:void 0},5072:a=>{var b=[];function c(a){for(var c=-1,d=0;d<b.length;d++)if(b[d].identifier===a){c=d;break}return c}function d(a,d){for(var e={},f=[],g=0;g<a.length;g++){var h=a[g],i=d.base?h[0]+d.base:h[0],j=e[i]||0,k="".concat(i," ").concat(j);e[i]=j+1;var l=c(k),m={css:h[1],media:h[2],sourceMap:h[3],supports:h[4],layer:h[5]};if(-1!==l)b[l].references++,b[l].updater(m);else{var n=function(a,b){var c=b.domAPI(b);return c.update(a),function(b){b?(b.css!==a.css||b.media!==a.media||b.sourceMap!==a.sourceMap||b.supports!==a.supports||b.layer!==a.layer)&&c.update(a=b):c.remove()}}(m,d);d.byIndex=g,b.splice(g,0,{identifier:k,updater:n,references:1})}f.push(k)}return f}a.exports=function(a,e){var f=d(a=a||[],e=e||{});return function(a){a=a||[];for(var g=0;g<f.length;g++){var h=c(f[g]);b[h].references--}for(var i=d(a,e),j=0;j<f.length;j++){var k=c(f[j]);0===b[k].references&&(b[k].updater(),b.splice(k,1))}f=i}}},7659:a=>{var b={};a.exports=function(a,c){var d=function(a){if(void 0===b[a]){var c=document.querySelector(a);if(window.HTMLIFrameElement&&c instanceof window.HTMLIFrameElement)try{c=c.contentDocument.head}catch(a){c=null}b[a]=c}return b[a]}(a);if(!d)throw Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");d.appendChild(c)}},540:a=>{a.exports=function(a){var b=document.createElement("style");return a.setAttributes(b,a.attributes),a.insert(b,a.options),b}},5056:(a,b,c)=>{a.exports=function(a){var b=c.nc;b&&a.setAttribute("nonce",b)}},7825:a=>{a.exports=function(a){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var b=a.insertStyleElement(a);return{update:function(c){var d,e,f;d="",c.supports&&(d+="@supports (".concat(c.supports,") {")),c.media&&(d+="@media ".concat(c.media," {")),(e=void 0!==c.layer)&&(d+="@layer".concat(c.layer.length>0?" ".concat(c.layer):""," {")),d+=c.css,e&&(d+="}"),c.media&&(d+="}"),c.supports&&(d+="}"),(f=c.sourceMap)&&"undefined"!=typeof btoa&&(d+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(f))))," */")),a.styleTagTransform(d,b,a.options)},remove:function(){var a;null!==(a=b).parentNode&&a.parentNode.removeChild(a)}}}},1113:a=>{a.exports=function(a,b){if(b.styleSheet)b.styleSheet.cssText=a;else{for(;b.firstChild;)b.removeChild(b.firstChild);b.appendChild(document.createTextNode(a))}}},3931:a=>{a.exports="data:image/svg+xml,%3C%3Fxml version=%271.0%27 encoding=%27UTF-8%27 standalone=%27no%27%3F%3E%3Csvg width=%27108%27 height=%2762%27 viewBox=%270 0 108 62%27 version=%271.1%27 id=%27svg320%27 sodipodi:docname=%27fullscreen-aframe.svg%27 xml:space=%27preserve%27 inkscape:version=%271.2.1 %289c6d41e  2022-07-14%29%27 xmlns:inkscape=%27http://www.inkscape.org/namespaces/inkscape%27 xmlns:sodipodi=%27http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd%27 xmlns=%27http://www.w3.org/2000/svg%27 xmlns:svg=%27http://www.w3.org/2000/svg%27 xmlns:rdf=%27http://www.w3.org/1999/02/22-rdf-syntax-ns%23%27 xmlns:cc=%27http://creativecommons.org/ns%23%27 xmlns:dc=%27http://purl.org/dc/elements/1.1/%27%3E%3Cdefs id=%27defs324%27 /%3E%3Csodipodi:namedview id=%27namedview322%27 pagecolor=%27%23ffffff%27 bordercolor=%27%23000000%27 borderopacity=%270.25%27 inkscape:showpageshadow=%272%27 inkscape:pageopacity=%270.0%27 inkscape:pagecheckerboard=%270%27 inkscape:deskcolor=%27%23d1d1d1%27 showgrid=%27false%27 inkscape:zoom=%273.8064516%27 inkscape:cx=%2791.423729%27 inkscape:cy=%27-1.4449153%27 inkscape:window-width=%271440%27 inkscape:window-height=%27847%27 inkscape:window-x=%2732%27 inkscape:window-y=%2725%27 inkscape:window-maximized=%270%27 inkscape:current-layer=%27svg320%27 /%3E%3Ctitle id=%27title312%27%3Eaframe-armode-noborder-reduced-tracking%3C/title%3E%3Cpath d=%27M96 0H12A12 12 0 0 0 0 12V50A12 12 0 0 0 12 62H96a12 12 0 0 0 12-12V12A12 12 0 0 0 96 0Zm8 50a8 8 0 0 1-8 8H12a8 8 0 0 1-8-8V12a8 8 0 0 1 8-8H96a8 8 0 0 1 8 8Z%27 fill=%27%23fff%27 id=%27path314%27 style=%27fill:%23ffffff%27 /%3E%3Cg id=%27g356%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g358%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g360%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g362%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g364%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g366%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g368%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g370%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g372%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g374%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g376%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g378%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g380%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g382%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g384%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cmetadata id=%27metadata561%27%3E%3Crdf:RDF%3E%3Ccc:Work rdf:about=%27%27%3E%3Cdc:title%3Eaframe-armode-noborder-reduced-tracking%3C/dc:title%3E%3C/cc:Work%3E%3C/rdf:RDF%3E%3C/metadata%3E%3Cpath d=%27m 98.168511 40.083649 c 0 -1.303681 -0.998788 -2.358041 -2.239389 -2.358041 -1.230088 0.0031 -2.240892 1.05436 -2.240892 2.358041 v 4.881296 l -9.041661 -9.041662 c -0.874129 -0.875631 -2.288954 -0.875631 -3.16308 0 -0.874129 0.874126 -0.874129 2.293459 0 3.167585 l 8.995101 8.992101 h -4.858767 c -1.323206 0.0031 -2.389583 1.004796 -2.389583 2.239386 0 1.237598 1.066377 2.237888 2.389583 2.237888 h 10.154599 c 1.323206 0 2.388082 -0.998789 2.392587 -2.237888 -0.0044 -0.03305 -0.009 -0.05858 -0.0134 -0.09161 0.0046 -0.04207 0.0134 -0.08712 0.0134 -0.13066 V 40.085172 h -1.52e-4%27 id=%27path596%27 style=%27fill:%23ffffff%3Bstroke-width:1.50194%27 /%3E%3Cpath d=%27m 23.091002 35.921781 -9.026643 9.041662 v -4.881296 c 0 -1.303681 -1.009302 -2.355037 -2.242393 -2.358041 -1.237598 0 -2.237888 1.05436 -2.237888 2.358041 l -0.0031 10.016421 c 0 0.04356 0.01211 0.08862 0.0015 0.130659 -0.0031 0.03153 -0.009 0.05709 -0.01211 0.09161 0.0031 1.239099 1.069379 2.237888 2.391085 2.237888 h 10.156101 c 1.320202 0 2.388079 -1.000291 2.388079 -2.237888 0 -1.234591 -1.067877 -2.236383 -2.388079 -2.239387 h -4.858767 l 8.995101 -8.9921 c 0.871126 -0.874127 0.871126 -2.293459 0 -3.167586 -0.875628 -0.877132 -2.291957 -0.877132 -3.169087 -1.52e-4%27 id=%27path598%27 style=%27fill:%23ffffff%3Bstroke-width:1.50194%27 /%3E%3Cpath d=%27m 84.649572 25.978033 9.041662 -9.041664 v 4.881298 c 0 1.299176 1.010806 2.350532 2.240891 2.355037 1.240601 0 2.23939 -1.055861 2.23939 -2.355037 V 11.798242 c 0 -0.04356 -0.009 -0.08862 -0.0134 -0.127671 0.0044 -0.03153 0.009 -0.06157 0.0134 -0.09313 -0.0044 -1.240598 -1.069379 -2.2393873 -2.391085 -2.2393873 h -10.1546 c -1.323205 0 -2.38958 0.9987893 -2.38958 2.2393873 0 1.233091 1.066375 2.237887 2.38958 2.240891 h 4.858768 l -8.995102 8.9921 c -0.874129 0.872625 -0.874129 2.288954 0 3.161578 0.874127 0.880137 2.288951 0.880137 3.16308 1.5e-4%27 id=%27path600%27 style=%27fill:%23ffffff%3Bstroke-width:1.50194%27 /%3E%3Cpath d=%27m 17.264988 13.822853 h 4.857265 c 1.320202 -0.0031 2.388079 -1.0078 2.388079 -2.240889 0 -1.240601 -1.067877 -2.2393893 -2.388079 -2.2393893 H 11.967654 c -1.321707 0 -2.388082 0.9987883 -2.391085 2.2393893 0.0031 0.03153 0.009 0.06157 0.01211 0.09313 -0.0031 0.03905 -0.0015 0.08262 -0.0015 0.127671 l 0.0031 10.020926 c 0 1.299176 1.00029 2.355038 2.237887 2.355038 1.233092 -0.0044 2.242393 -1.055862 2.242393 -2.355038 v -4.881295 l 9.026644 9.041661 c 0.877132 0.878635 2.293459 0.878635 3.169087 0 0.871125 -0.872624 0.871125 -2.288953 0 -3.161577 l -8.995282 -8.993616%27 id=%27path602%27 style=%27fill:%23ffffff%3Bstroke-width:1.50194%27 /%3E%3C/svg%3E"},6085:a=>{a.exports="data:image/svg+xml,%3Csvg xmlns=%27http://www.w3.org/2000/svg%27 width=%27108%27 height=%2762%27 viewBox=%270 0 108 62%27%3E%3Ctitle%3Eaframe-armode-noborder-reduced-tracking%3C/title%3E%3Cpath d=%27M96,0H12A12,12,0,0,0,0,12V50A12,12,0,0,0,12,62H96a12,12,0,0,0,12-12V12A12,12,0,0,0,96,0Zm8,50a8,8,0,0,1-8,8H12a8,8,0,0,1-8-8V12a8,8,0,0,1,8-8H96a8,8,0,0,1,8,8Z%27 fill=%27%23fff%27/%3E%3Cpath d=%27M43.35,39.82H32.51L30.45,46H23.88L35,16h5.73L52,46H45.43Zm-9.17-5h7.5L37.91,23.58Z%27 fill=%27%23fff%27/%3E%3Cpath d=%27M68.11,35H63.18V46H57V16H68.15q5.31,0,8.2,2.37a8.18,8.18,0,0,1,2.88,6.7,9.22,9.22,0,0,1-1.33,5.12,9.09,9.09,0,0,1-4,3.26l6.49,12.26V46H73.73Zm-4.93-5h5a5.09,5.09,0,0,0,3.6-1.18,4.21,4.21,0,0,0,1.28-3.27,4.56,4.56,0,0,0-1.2-3.34A5,5,0,0,0,68.15,21h-5Z%27 fill=%27%23fff%27/%3E%3C/svg%3E"},9169:a=>{a.exports="data:image/svg+xml,%3Csvg xmlns=%27http://www.w3.org/2000/svg%27 width=%27108%27 height=%2762%27 viewBox=%270 0 108 62%27%3E%3Ctitle%3Eaframe-vrmode-noborder-reduced-tracking%3C/title%3E%3Cpath d=%27M68.81,21.56H64.23v8.27h4.58a4.13,4.13,0,0,0,3.1-1.09,4.2,4.2,0,0,0,1-3,4.24,4.24,0,0,0-1-3A4.05,4.05,0,0,0,68.81,21.56Z%27 fill=%27%23fff%27/%3E%3Cpath d=%27M96,0H12A12,12,0,0,0,0,12V50A12,12,0,0,0,12,62H96a12,12,0,0,0,12-12V12A12,12,0,0,0,96,0ZM41.9,46H34L24,16h8l6,21.84,6-21.84H52Zm39.29,0H73.44L68.15,35.39H64.23V46H57V16H68.81q5.32,0,8.34,2.37a8,8,0,0,1,3,6.69,9.68,9.68,0,0,1-1.27,5.18,8.9,8.9,0,0,1-4,3.34l6.26,12.11Z%27 fill=%27%23fff%27/%3E%3C/svg%3E"},6517:a=>{a.exports="data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20xmlns%3Axlink%3D%22http%3A//www.w3.org/1999/xlink%22%20version%3D%221.1%22%20x%3D%220px%22%20y%3D%220px%22%20viewBox%3D%220%200%20100%20100%22%20enable-background%3D%22new%200%200%20100%20100%22%20xml%3Aspace%3D%22preserve%22%3E%3Cpath%20fill%3D%22%23000000%22%20d%3D%22M55.209%2C50l17.803-17.803c1.416-1.416%2C1.416-3.713%2C0-5.129c-1.416-1.417-3.713-1.417-5.129%2C0L50.08%2C44.872%20%20L32.278%2C27.069c-1.416-1.417-3.714-1.417-5.129%2C0c-1.417%2C1.416-1.417%2C3.713%2C0%2C5.129L44.951%2C50L27.149%2C67.803%20%20c-1.417%2C1.416-1.417%2C3.713%2C0%2C5.129c0.708%2C0.708%2C1.636%2C1.062%2C2.564%2C1.062c0.928%2C0%2C1.856-0.354%2C2.564-1.062L50.08%2C55.13l17.803%2C17.802%20%20c0.708%2C0.708%2C1.637%2C1.062%2C2.564%2C1.062s1.856-0.354%2C2.564-1.062c1.416-1.416%2C1.416-3.713%2C0-5.129L55.209%2C50z%22%3E%3C/path%3E%3C/svg%3E"},7889:a=>{a.exports="data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20xmlns%3Axlink%3D%22http%3A//www.w3.org/1999/xlink%22%20version%3D%221.1%22%20x%3D%220px%22%20y%3D%220px%22%20viewBox%3D%220%200%2090%2090%22%20enable-background%3D%22new%200%200%2090%2090%22%20xml%3Aspace%3D%22preserve%22%3E%3Cpolygon%20points%3D%220%2C0%200%2C0%200%2C0%20%22%3E%3C/polygon%3E%3Cg%3E%3Cpath%20d%3D%22M71.545%2C48.145h-31.98V20.743c0-2.627-2.138-4.765-4.765-4.765H18.456c-2.628%2C0-4.767%2C2.138-4.767%2C4.765v42.789%20%20%20c0%2C2.628%2C2.138%2C4.766%2C4.767%2C4.766h5.535v0.959c0%2C2.628%2C2.138%2C4.765%2C4.766%2C4.765h42.788c2.628%2C0%2C4.766-2.137%2C4.766-4.765V52.914%20%20%20C76.311%2C50.284%2C74.173%2C48.145%2C71.545%2C48.145z%20M18.455%2C16.935h16.344c2.1%2C0%2C3.808%2C1.708%2C3.808%2C3.808v27.401H37.25V22.636%20%20%20c0-0.264-0.215-0.478-0.479-0.478H16.482c-0.264%2C0-0.479%2C0.214-0.479%2C0.478v36.585c0%2C0.264%2C0.215%2C0.478%2C0.479%2C0.478h7.507v7.644%20%20%20h-5.534c-2.101%2C0-3.81-1.709-3.81-3.81V20.743C14.645%2C18.643%2C16.354%2C16.935%2C18.455%2C16.935z%20M16.96%2C23.116h19.331v25.031h-7.535%20%20%20c-2.628%2C0-4.766%2C2.139-4.766%2C4.768v5.828h-7.03V23.116z%20M71.545%2C73.064H28.757c-2.101%2C0-3.81-1.708-3.81-3.808V52.914%20%20%20c0-2.102%2C1.709-3.812%2C3.81-3.812h42.788c2.1%2C0%2C3.809%2C1.71%2C3.809%2C3.812v16.343C75.354%2C71.356%2C73.645%2C73.064%2C71.545%2C73.064z%22%3E%3C/path%3E%3Cpath%20d%3D%22M28.919%2C58.424c-1.466%2C0-2.659%2C1.193-2.659%2C2.66c0%2C1.466%2C1.193%2C2.658%2C2.659%2C2.658c1.468%2C0%2C2.662-1.192%2C2.662-2.658%20%20%20C31.581%2C59.617%2C30.387%2C58.424%2C28.919%2C58.424z%20M28.919%2C62.786c-0.939%2C0-1.703-0.764-1.703-1.702c0-0.939%2C0.764-1.704%2C1.703-1.704%20%20%20c0.94%2C0%2C1.705%2C0.765%2C1.705%2C1.704C30.623%2C62.022%2C29.858%2C62.786%2C28.919%2C62.786z%22%3E%3C/path%3E%3Cpath%20d%3D%22M69.654%2C50.461H33.069c-0.264%2C0-0.479%2C0.215-0.479%2C0.479v20.288c0%2C0.264%2C0.215%2C0.478%2C0.479%2C0.478h36.585%20%20%20c0.263%2C0%2C0.477-0.214%2C0.477-0.478V50.939C70.131%2C50.676%2C69.917%2C50.461%2C69.654%2C50.461z%20M69.174%2C51.417V70.75H33.548V51.417H69.174z%22%3E%3C/path%3E%3Cpath%20d%3D%22M45.201%2C30.296c6.651%2C0%2C12.233%2C5.351%2C12.551%2C11.977l-3.033-2.638c-0.193-0.165-0.507-0.142-0.675%2C0.048%20%20%20c-0.174%2C0.198-0.153%2C0.501%2C0.045%2C0.676l3.883%2C3.375c0.09%2C0.075%2C0.198%2C0.115%2C0.312%2C0.115c0.141%2C0%2C0.273-0.061%2C0.362-0.166%20%20%20l3.371-3.877c0.173-0.2%2C0.151-0.502-0.047-0.675c-0.194-0.166-0.508-0.144-0.676%2C0.048l-2.592%2C2.979%20%20%20c-0.18-3.417-1.629-6.605-4.099-9.001c-2.538-2.461-5.877-3.817-9.404-3.817c-0.264%2C0-0.479%2C0.215-0.479%2C0.479%20%20%20C44.72%2C30.083%2C44.936%2C30.296%2C45.201%2C30.296z%22%3E%3C/path%3E%3C/g%3E%3C/svg%3E"}},bK={};function bL(a){var b=bK[a];if(void 0!==b)return b.exports;var c=bK[a]={id:a,exports:{}};return bJ[a](c,c.exports,bL),c.exports}bL.m=bJ,bL.n=a=>{var b=a&&a.__esModule?()=>a.default:()=>a;return bL.d(b,{a:b}),b},bL.d=(a,b)=>{for(var c in b)bL.o(b,c)&&!bL.o(a,c)&&Object.defineProperty(a,c,{enumerable:!0,get:b[c]})},bL.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||Function("return this")()}catch(a){if("object"==typeof window)return window}}(),bL.o=(a,b)=>Object.prototype.hasOwnProperty.call(a,b),bL.r=a=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(a,"__esModule",{value:!0})},bL.b=document.baseURI||self.location.href,bL.nc=void 0;var bM={};bL.d(bM,{A:()=>kU});var bN={};bL.r(bN),bL.d(bN,{computeMikkTSpaceTangents:()=>c4,computeMorphedAttributes:()=>de,deepCloneAttribute:()=>c7,deinterleaveAttribute:()=>c9,deinterleaveGeometry:()=>da,estimateBytesUsed:()=>db,interleaveAttributes:()=>c8,mergeAttributes:()=>c6,mergeGeometries:()=>c5,mergeGroups:()=>df,mergeVertices:()=>dc,toCreasedNormals:()=>dg,toTrianglesDrawMode:()=>dd});var bO={};bL.r(bO),bL.d(bO,{checkARSupport:()=>e4,checkHeadsetConnected:()=>e3,checkVRSupport:()=>e5,isAppleVisionPro:()=>fb,isBrowserEnvironment:()=>fj,isFirefoxReality:()=>ff,isIOS:()=>fc,isIpad:()=>fa,isLandscape:()=>fi,isMobile:()=>e8,isMobileDeviceRequestingDesktopSite:()=>fd,isMobileVR:()=>fg,isNodeEnvironment:()=>fk,isOculusBrowser:()=>fe,isR7:()=>fh,isTablet:()=>e9,isWebXRAvailable:()=>e0});var bP={};bL.r(bP),bL.d(bP,{clearObject:()=>fo,createPool:()=>fn,removeUnusedKeys:()=>fp});var bQ={};bL.r(bQ),bL.d(bQ,{equals:()=>fw,isCoordinate:()=>fy,isCoordinates:()=>fx,parse:()=>fu,regex:()=>fs,stringify:()=>fv,toVector3:()=>fA});var bR={};bL.r(bR),bL.d(bR,{getComponentProperty:()=>fD,getComponentPropertyPath:()=>fC,setComponentProperty:()=>fE});var bS={};bL.r(bS),bL.d(bS,{parseUrl:()=>fK,validateCubemapSrc:()=>fJ,validateEnvMapSrc:()=>fI,validateSrc:()=>fH});var bT={};bL.r(bT),bL.d(bT,{createCompatibleTexture:()=>fW,handleTextureEvents:()=>fU,isCompatibleTexture:()=>fV,setTextureProperties:()=>fO,updateDistortionMap:()=>fR,updateEnvMap:()=>fT,updateMap:()=>fQ,updateMapMaterialFromData:()=>fP});var bU={};bL.r(bU),bL.d(bU,{parse:()=>fY,stringify:()=>fZ,toCamelCase:()=>f$});var bV={};bL.r(bV),bL.d(bV,{checkControllerPresentAndSetup:()=>f4,emitIfAxesChanged:()=>f7,findMatchingControllerWebXR:()=>f6,isControllerPresentWebXR:()=>f5,onButtonEvent:()=>f8});var bW={};bL.r(bW),bL.d(bW,{bind:()=>ga,checkHeadsetConnected:()=>gb,clone:()=>gk,coordinates:()=>bQ,debounce:()=>gh,debug:()=>eW,deepEqual:()=>gn,device:()=>bO,diff:()=>go,entity:()=>bR,extend:()=>gi,extendDeep:()=>gj,findAllScenes:()=>gu,forceCanvasResizeSafariMobile:()=>fF,getElData:()=>gr,getUrlParameter:()=>gs,isIOS:()=>gc,isIframed:()=>gt,isMobile:()=>gd,material:()=>bT,objectPool:()=>bP,shouldCaptureKeyEvent:()=>gp,split:()=>fB,splitString:()=>gq,srcLoader:()=>bS,styleParser:()=>bU,throttle:()=>ge,throttleLeadingAndTrailing:()=>gf,throttleTick:()=>gg,trackedControls:()=>bV});var bX={};bL.r(bX),bL.d(bX,{isSingleProperty:()=>gW,parseProperties:()=>g$,parseProperty:()=>g_,process:()=>gX,processPropertyDefinition:()=>gY,stringifyProperties:()=>g0,stringifyProperty:()=>g1});var bY={};bL.r(bY),bL.d(bY,{Component:()=>hc,components:()=>g2,registerComponent:()=>he,registrationOrderWarnings:()=>hd});var bZ={};bL.r(bZ),bL.d(bZ,{System:()=>hk,registerSystem:()=>hl,systems:()=>hj});var b$={update:null,begin:null,loopBegin:null,changeBegin:null,change:null,changeComplete:null,loopComplete:null,complete:null,loop:1,direction:"normal",autoplay:!0,timelineOffset:0},b_={duration:1e3,delay:0,endDelay:0,easing:"easeOutElastic(1, .5)",round:0},b0=["translateX","translateY","translateZ","rotate","rotateX","rotateY","rotateZ","scale","scaleX","scaleY","scaleZ","skew","skewX","skewY","perspective"],b1={CSS:{},springs:{}};function b2(a,b,c){return Math.min(Math.max(a,b),c)}function b3(a,b){return a.indexOf(b)>-1}function b4(a,b){return a.apply(null,b)}var b5=/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i,b6=/^rgb/,b7=/^hsl/,b8={arr:function(a){return Array.isArray(a)},obj:function(a){return b3(Object.prototype.toString.call(a),"Object")},pth:function(a){return b8.obj(a)&&a.hasOwnProperty("totalLength")},svg:function(a){return a instanceof SVGElement},inp:function(a){return a instanceof HTMLInputElement},dom:function(a){return a.nodeType||b8.svg(a)},str:function(a){return"string"==typeof a},fnc:function(a){return"function"==typeof a},und:function(a){return void 0===a},hex:function(a){return b5.test(a)},rgb:function(a){return b6.test(a)},hsl:function(a){return b7.test(a)},col:function(a){return b8.hex(a)||b8.rgb(a)||b8.hsl(a)},key:function(a){return!b$.hasOwnProperty(a)&&!b_.hasOwnProperty(a)&&"targets"!==a&&"keyframes"!==a}},b9=/\(([^)]+)\)/;function ca(a){var b=b9.exec(a);return b?b[1].split(",").map(function(a){return parseFloat(a)}):[]}function cb(a,b){var c=ca(a),d=b2(b8.und(c[0])?1:c[0],.1,100),e=b2(b8.und(c[1])?100:c[1],.1,100),f=b2(b8.und(c[2])?10:c[2],.1,100),g=b2(b8.und(c[3])?0:c[3],.1,100),h=Math.sqrt(e/d),i=f/(2*Math.sqrt(e*d)),j=i<1?h*Math.sqrt(1-i*i):0,k=i<1?(i*h-g)/j:-g+h;function l(a){var c=b?b*a/1e3:a;return c=i<1?Math.exp(-c*i*h)*(+Math.cos(j*c)+k*Math.sin(j*c)):(1+k*c)*Math.exp(-c*h),0===a||1===a?a:1-c}return b?l:function(){var b=b1.springs[a];if(b)return b;for(var c=1/6,d=0,e=0;;)if(1===l(d+=c)){if(++e>=16)break}else e=0;var f=d*c*1e3;return b1.springs[a]=f,f}}function cc(a,b){void 0===a&&(a=1),void 0===b&&(b=.5);var c=b2(a,1,10),d=b2(b,.1,2);return function(a){return 0===a||1===a?a:-c*Math.pow(2,10*(a-1))*Math.sin(2*Math.PI*(a-1-d/(2*Math.PI)*Math.asin(1/c))/d)}}function cd(a){return void 0===a&&(a=10),function(b){return 1/a*Math.round(b*a)}}var ce=function(){function a(a,b,c){return(((1-3*c+3*b)*a+(3*c-6*b))*a+3*b)*a}function b(a,b,c){return 3*(1-3*c+3*b)*a*a+2*(3*c-6*b)*a+3*b}return function(c,d,e,f){if(0<=c&&c<=1&&0<=e&&e<=1){var g=new Float32Array(11);if(c!==d||e!==f)for(var h=0;h<11;++h)g[h]=a(.1*h,c,e);return function(h){return c===d&&e===f||0===h||1===h?h:a(function(d){for(var f=0,h=1;10!==h&&g[h]<=d;++h)f+=.1;var i=f+(d-g[--h])/(g[h+1]-g[h])*.1,j=b(i,c,e);return j>=.001?function(c,d,e,f){for(var g=0;g<4;++g){var h=b(d,e,f);if(0===h)break;d-=(a(d,e,f)-c)/h}return d}(d,i,c,e):0===j?i:function(b,c,d,e,f){var g,h,i=0;do(g=a(h=c+(d-c)/2,e,f)-b)>0?d=h:c=h;while(Math.abs(g)>1e-7&&++i<10);return h}(d,f,f+.1,c,e)}(h),d,f)}}}}(),cf=function(){var a=["Quad","Cubic","Quart","Quint","Sine","Expo","Circ","Back","Elastic"],b={In:[[.55,.085,.68,.53],[.55,.055,.675,.19],[.895,.03,.685,.22],[.755,.05,.855,.06],[.47,0,.745,.715],[.95,.05,.795,.035],[.6,.04,.98,.335],[.6,-.28,.735,.045],cc],Out:[[.25,.46,.45,.94],[.215,.61,.355,1],[.165,.84,.44,1],[.23,1,.32,1],[.39,.575,.565,1],[.19,1,.22,1],[.075,.82,.165,1],[.175,.885,.32,1.275],function(a,b){return function(c){return 1-cc(a,b)(1-c)}}],InOut:[[.455,.03,.515,.955],[.645,.045,.355,1],[.77,0,.175,1],[.86,0,.07,1],[.445,.05,.55,.95],[1,0,0,1],[.785,.135,.15,.86],[.68,-.55,.265,1.55],function(a,b){return function(c){return c<.5?cc(a,b)(2*c)/2:1-cc(a,b)(-2*c+2)/2}}]},c={linear:[.25,.25,.75,.75]};for(var d in b)for(var e=0,f=b[d].length;e<f;e++)c["ease"+d+a[e]]=b[d][e];return c}();function cg(a,b){if(b8.fnc(a))return a;var c=a.split("(")[0],d=cf[c],e=ca(a);switch(c){case"spring":return cb(a,b);case"cubicBezier":return b4(ce,e);case"steps":return b4(cd,e);default:return b8.fnc(d)?b4(d,e):b4(ce,d)}}function ch(a){try{return document.querySelectorAll(a)}catch(a){return}}var ci=[];function cj(a,b){for(var c=ci,d=a.length,e=arguments.length>=2?arguments[1]:void 0,f=0;f<d;f++)if(f in a){var g=a[f];b.call(e,g,f,a)&&c.push(g)}return(ci=a).length=0,c}function ck(a,b){b||(b=[]);for(var c=0,d=a.length;c<d;c++){var e=a[c];Array.isArray(e)?ck(e,b):b.push(e)}return b}function cl(a){return b8.arr(a)?a:(b8.str(a)&&(a=ch(a)||a),a instanceof NodeList||a instanceof HTMLCollection?[].slice.call(a):[a])}function cm(a,b){return a.some(function(a){return a===b})}function cn(a){var b={};for(var c in a)b[c]=a[c];return b}function co(a,b){var c=cn(a);for(var d in a)c[d]=b.hasOwnProperty(d)?b[d]:a[d];return c}function cp(a,b){var c=cn(a);for(var d in b)c[d]=b8.und(a[d])?b[d]:a[d];return c}var cq=/rgb\((\d+,\s*[\d]+,\s*[\d]+)\)/g,cr=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,cs=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,ct=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g,cu=/hsla\((\d+),\s*([\d.]+)%,\s*([\d.]+)%,\s*([\d.]+)\)/g,cv=/([\+\-]?[0-9#\.]+)(%|px|pt|em|rem|in|cm|mm|ex|ch|pc|vw|vh|vmin|vmax|deg|rad|turn)?$/;function cw(a){var b=cv.exec(a);if(b)return b[2]}function cx(a,b){return b8.fnc(a)?a(b.target,b.id,b.total):a}function cy(a,b){return a.getAttribute(b)}function cz(a,b,c){if(cm([c,"deg","rad","turn"],cw(b)))return b;var d=b1.CSS[b+c];if(!b8.und(d))return d;var e=document.createElement(a.tagName),f=a.parentNode&&a.parentNode!==document?a.parentNode:document.body;f.appendChild(e),e.style.position="absolute",e.style.width=100+c;var g=100/e.offsetWidth;f.removeChild(e);var h=g*parseFloat(b);return b1.CSS[b+c]=h,h}function cA(a,b,c){if(b in a.style){var d=b.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),e=a.style[b]||getComputedStyle(a).getPropertyValue(d)||"0";return c?cz(a,e,c):e}}function cB(a,b){return b8.dom(a)&&!b8.inp(a)&&(cy(a,b)||b8.svg(a)&&a[b])?"attribute":b8.dom(a)&&cm(b0,b)?"transform":b8.dom(a)&&"transform"!==b&&cA(a,b)?"css":null!=a[b]?"object":void 0}var cC=/(\w+)\(([^)]*)\)/g;function cD(a){if(b8.dom(a)){for(var b,c=a.style.transform||"",d=new Map;b=cC.exec(c);)d.set(b[1],b[2]);return d}}function cE(a,b,c,d){switch(cB(a,b)){case"transform":var e,f;return e=b3(b,"scale")?1:0+(b3(b,"translate")||"perspective"===b?"px":b3(b,"rotate")||b3(b,"skew")?"deg":void 0),f=cD(a).get(b)||e,d&&(d.transforms.list.set(b,f),d.transforms.last=b),c?cz(a,f,c):f;case"css":return cA(a,b,c);case"attribute":return cy(a,b);default:return a[b]||0}}var cF=/^(\*=|\+=|-=)/;function cG(a,b){var c=cF.exec(a);if(!c)return a;var d=cw(a)||0,e=parseFloat(b),f=parseFloat(a.replace(c[0],""));switch(c[0][0]){case"+":return e+f+d;case"-":return e-f+d;case"*":return e*f+d}}var cH=/\s/g;function cI(a,b){if(b8.col(a)){var c,d,e,f;return c=a,b8.rgb(c)?(d=cq.exec(c))?"rgba("+d[1]+",1)":c:b8.hex(c)?(e=c.replace(cr,function(a,b,c,d){return b+b+c+c+d+d}),"rgba("+parseInt((f=cs.exec(e))[1],16)+","+parseInt(f[2],16)+","+parseInt(f[3],16)+",1)"):b8.hsl(c)?function(a){var b,c,d,e=ct.exec(a)||cu.exec(a),f=parseInt(e[1],10)/360,g=parseInt(e[2],10)/100,h=parseInt(e[3],10)/100,i=e[4]||1;function j(a,b,c){return c<0&&(c+=1),c>1&&(c-=1),c<1/6?a+6*(b-a)*c:c<.5?b:c<2/3?a+(b-a)*(2/3-c)*6:a}if(0==g)b=c=d=h;else{var k=h<.5?h*(1+g):h+g-h*g,l=2*h-k;b=j(l,k,f+1/3),c=j(l,k,f),d=j(l,k,f-1/3)}return"rgba("+255*b+","+255*c+","+255*d+","+i+")"}(c):void 0}var g=cw(a),h=g?a.substr(0,a.length-g.length):a;return b&&!cH.test(a)?h+b:h}function cJ(a,b){return Math.sqrt(Math.pow(b.x-a.x,2)+Math.pow(b.y-a.y,2))}function cK(a){for(var b,c=a.points,d=0,e=0;e<c.numberOfItems;e++){var f=c.getItem(e);e>0&&(d+=cJ(b,f)),b=f}return d}function cL(a){var b;if(a.getTotalLength)return a.getTotalLength();switch(a.tagName.toLowerCase()){case"circle":return 2*Math.PI*cy(a,"r");case"rect":return 2*cy(a,"width")+2*cy(a,"height");case"line":return cJ({x:cy(a,"x1"),y:cy(a,"y1")},{x:cy(a,"x2"),y:cy(a,"y2")});case"polyline":return cK(a);case"polygon":return b=a.points,cK(a)+cJ(b.getItem(b.numberOfItems-1),b.getItem(0))}}function cM(a,b){var c=b||{},d=c.el||function(a){for(var b=a.parentNode;b8.svg(b)&&(b=b.parentNode,b8.svg(b.parentNode)););return b}(a),e=d.getBoundingClientRect(),f=cy(d,"viewBox"),g=e.width,h=e.height,i=c.viewBox||(f?f.split(" "):[0,0,g,h]);return{el:d,viewBox:i,x:i[0]/1,y:i[1]/1,w:g/i[2],h:h/i[3]}}var cN=/-?\d*\.?\d+/g;function cO(a,b){var c=cI(b8.pth(a)?a.totalLength:a,b)+"";return{original:c,numbers:c.match(cN)?c.match(cN).map(Number):[0],strings:b8.str(a)||b?c.split(cN):[]}}function cP(a){return cj(a?ck(b8.arr(a)?a.map(cl):cl(a)):[],function(a,b,c){return c.indexOf(a)===b})}function cQ(a){var b=cP(a);return b.map(function(a,c){return{target:a,id:c,total:b.length,transforms:{list:cD(a)}}})}var cR=/^spring/,cS={css:function(a,b,c){return a.style[b]=c},attribute:function(a,b,c){return a.setAttribute(b,c)},object:function(a,b,c){return a[b]=c},transform:function(a,b,c,d,e){if(d.list.set(b,c),b===d.last||e){var f="";d.list.forEach(function(a,b){f+=b+"("+a+") "}),a.style.transform=f}}};function cT(a,b){for(var c=cQ(a),d=0,e=c.length;d<e;d++){var f=c[d];for(var g in b){var h=cx(b[g],f),i=f.target,j=cw(h),k=cE(i,g,j,f),l=cG(cI(h,j||cw(k)),k);cS[cB(i,g)](i,g,l,f.transforms,!0)}}}function cU(a,b){var c=a.length,d=function(a){return a.timelineOffset?a.timelineOffset:0},e={};return e.duration=c?Math.max.apply(Math,a.map(function(a){return d(a)+a.duration})):b.duration,e.delay=c?Math.min.apply(Math,a.map(function(a){return d(a)+a.delay})):b.delay,e.endDelay=c?e.duration-Math.max.apply(Math,a.map(function(a){return d(a)+a.duration-a.endDelay})):b.endDelay,e}var cV,cW=0,cX=[],cY=[],cZ=function(){function a(){cV=requestAnimationFrame(b)}function b(b){var c=cX.length;if(c){for(var d=0;d<c;){var e=cX[d];if(e.paused){var f=cX.indexOf(e);f>-1&&(cX.splice(f,1),c=cX.length)}else e.tick(b);d++}a()}else cV=cancelAnimationFrame(cV)}return a}();function c$(a){void 0===a&&(a={});var b,c,d,e,f,g,h,i,j,k,l=0,m=0,n=0,o=0,p=null;function q(){return window.Promise&&new Promise(function(a){return p=a})}var r=q(),s=(d=co(b$,b=a),f=function(a,b){var c=[],d=b.keyframes;for(var e in d&&(b=cp(function(a){for(var b=cj(ck(a.map(function(a){return Object.keys(a)})),function(a){return b8.key(a)}).reduce(function(a,b){return 0>a.indexOf(b)&&a.push(b),a},[]),c={},d=function(d){var e=b[d];c[e]=a.map(function(a){var b={};for(var c in a)b8.key(c)?c==e&&(b.value=a[c]):b[c]=a[c];return b})},e=0;e<b.length;e++)d(e);return c}(d),b)),b)b8.key(e)&&c.push({name:e,tweens:function(a,b){var c=cn(b);if(cR.test(c.easing)&&(c.duration=cb(c.easing)),b8.arr(a)){var d=a.length;2!==d||b8.obj(a[0])?b8.fnc(b.duration)||(c.duration=b.duration/d):a={value:a}}var e=b8.arr(a)?a:[a];return e.map(function(a,c){var d=b8.obj(a)&&!b8.pth(a)?a:{value:a};return b8.und(d.delay)&&(d.delay=c?0:b.delay),b8.und(d.endDelay)&&(d.endDelay=c===e.length-1?b.endDelay:0),d}).map(function(a){return cp(a,c)})}(b[e],a)});return c}(e=co(b_,b),b),i=cU((c=g=cQ(b.targets),h=cj(ck(c.map(function(a){return f.map(function(b){return function(a,b){var c=cB(a.target,b.name);if(c){var d,e=b.tweens.map(function(c){var e=function(a,b){var c={};for(var d in a){var e=cx(a[d],b);b8.arr(e)&&1===(e=e.map(function(a){return cx(a,b)})).length&&(e=e[0]),c[d]=e}return c.duration=parseFloat(c.duration),c.delay=parseFloat(c.delay),c}(c,a),f=e.value,g=b8.arr(f)?f[1]:f,h=cw(g),i=cE(a.target,b.name,h,a),j=d?d.to.original:i,k=b8.arr(f)?f[0]:j,l=cw(k)||cw(i),m=h||l;return b8.und(g)&&(g=j),e.from=cO(k,m),e.to=cO(cG(g,k),m),e.start=d?d.end:0,e.end=e.start+e.delay+e.duration+e.endDelay,e.easing=cg(e.easing,e.duration),e.isPath=b8.pth(f),e.isColor=b8.col(e.from.original),e.isColor&&(e.round=1),d=e,e}),f=e[e.length-1];return{type:c,property:b.name,animatable:a,tweens:e,duration:f.end,delay:e[0].delay,endDelay:f.endDelay}}}(a,b)})})),function(a){return!b8.und(a)})),e),j=cW,cW++,cp(d,{id:j,children:[],animatables:g,animations:h,duration:i.duration,delay:i.delay,endDelay:i.endDelay}));function t(){s.reversed=!s.reversed;for(var a=0,b=k.length;a<b;a++)k[a].reversed=s.reversed}function u(a){return s.reversed?s.duration-a:a}function v(){l=0,m=u(s.currentTime)*(1/c$.speed)}function w(a,b){b&&b.seek(a-b.timelineOffset)}function x(a){for(var b=0,c=s.animations,d=c.length;b<d;){var e=c[b],f=e.animatable,g=e.tweens,h=g.length-1,i=g[h];h&&(i=cj(g,function(b){return a<b.end})[0]||i);for(var j=b2(a-i.start-i.delay,0,i.duration)/i.duration,k=isNaN(j)?1:i.easing(j),l=i.to.strings,m=i.round,n=[],o=i.to.numbers.length,p=void 0,q=0;q<o;q++){var r=void 0,t=i.to.numbers[q],u=i.from.numbers[q]||0;r=i.isPath?function(a,b){function c(c){void 0===c&&(c=0);var d=b+c>=1?b+c:0;return a.el.getPointAtLength(d)}var d=cM(a.el,a.svg),e=c(),f=c(-1),g=c(1);switch(a.property){case"x":return(e.x-d.x)*d.w;case"y":return(e.y-d.y)*d.h;case"angle":return 180*Math.atan2(g.y-f.y,g.x-f.x)/Math.PI}}(i.value,k*t):u+k*(t-u),m&&(i.isColor&&q>2||(r=Math.round(r*m)/m)),n.push(r)}var v=l.length;if(v){p=l[0];for(var w=0;w<v;w++){l[w];var x=l[w+1],y=n[w];isNaN(y)||(p+=x?y+x:y+" ")}}else p=n[0];cS[e.type](f.target,e.property,p,f.transforms),e.currentValue=p,b++}}function y(a){s[a]&&!s.passThrough&&s[a](s)}function z(a){var b=s.duration,c=s.delay,d=b-s.endDelay,e=u(a);s.progress=b2(e/b*100,0,100),s.reversePlayback=e<s.currentTime,k&&function(a){if(s.reversePlayback)for(var b=o;b--;)w(a,k[b]);else for(var c=0;c<o;c++)w(a,k[c])}(e),!s.began&&s.currentTime>0&&(s.began=!0,y("begin"),y("loopBegin")),e<=c&&0!==s.currentTime&&x(0),(e>=d&&s.currentTime!==b||!b)&&x(b),e>c&&e<d?(s.changeBegan||(s.changeBegan=!0,s.changeCompleted=!1,y("changeBegin")),y("change"),x(e)):s.changeBegan&&(s.changeCompleted=!0,s.changeBegan=!1,y("changeComplete")),s.currentTime=b2(e,0,b),s.began&&y("update"),a>=b&&(m=0,s.remaining&&!0!==s.remaining&&s.remaining--,s.remaining?(l=n,y("loopComplete"),y("loopBegin"),"alternate"===s.direction&&t()):(s.paused=!0,s.completed||(s.completed=!0,y("loopComplete"),y("complete"),"Promise"in window&&(p(),r=q()))))}return s.reset=function(){var a=s.direction;s.passThrough=!1,s.currentTime=0,s.progress=0,s.paused=!0,s.began=!1,s.changeBegan=!1,s.completed=!1,s.changeCompleted=!1,s.reversePlayback=!1,s.reversed="reverse"===a,s.remaining=s.loop,k=s.children;for(var b=o=k.length;b--;)s.children[b].reset();(s.reversed&&!0!==s.loop||"alternate"===a&&1===s.loop)&&s.remaining++,x(0)},s.set=function(a,b){return cT(a,b),s},s.tick=function(a){n=a,l||(l=n),z((n+(m-l))*c$.speed)},s.seek=function(a){z(u(a))},s.pause=function(){s.paused=!0,v()},s.play=function(){s.paused&&(s.paused=!1,cX.push(s),v(),cV||cZ())},s.reverse=function(){t(),v()},s.restart=function(){s.reset(),s.play()},s.finished=r,s.reset(),s.autoplay&&s.play(),s}function c_(a,b){for(var c=b.length;c--;)cm(a,b[c].animatable.target)&&b.splice(c,1)}document.addEventListener("visibilitychange",function(){if(document.hidden){for(var a=0,b=cX.length;a<b;a++)activeInstance[a].pause();cY=cX.slice(0),cX=[]}else for(var c=0,d=cY.length;c<d;c++)cY[c].play()}),c$.version="3.0.0",c$.speed=1,c$.running=cX,c$.remove=function(a){for(var b=cP(a),c=cX.length;c--;){var d=cX[c],e=d.animations,f=d.children;c_(b,e);for(var g=f.length;g--;){var h=f[g],i=h.animations;c_(b,i),i.length||h.children.length||f.splice(g,1)}e.length||f.length||d.pause()}},c$.get=cE,c$.set=cT,c$.convertPx=cz,c$.path=function(a,b){var c=b8.str(a)?ch(a)[0]:a,d=b||100;return function(a){return{property:a,el:c,svg:cM(c),totalLength:cL(c)*(d/100)}}},c$.setDashoffset=function(a){var b=cL(a);return a.setAttribute("stroke-dasharray",b),b},c$.stagger=function(a,b){void 0===b&&(b={});var c=b.direction||"normal",d=b.easing?cg(b.easing):null,e=b.grid,f=b.axis,g=b.from||0,h="first"===g,i="center"===g,j="last"===g,k=b8.arr(a),l=k?parseFloat(a[0]):parseFloat(a),m=k?parseFloat(a[1]):0,n=cw(k?a[1]:a)||0,o=b.start||0+(k?l:0),p=[],q=0;return function(a,b,r){if(h&&(g=0),i&&(g=(r-1)/2),j&&(g=r-1),!p.length){for(var s=0;s<r;s++){if(e){var t=i?(e[0]-1)/2:g%e[0],u=i?(e[1]-1)/2:Math.floor(g/e[0]),v=t-s%e[0],w=u-Math.floor(s/e[0]),x=Math.sqrt(v*v+w*w);"x"===f&&(x=-v),"y"===f&&(x=-w),p.push(x)}else p.push(Math.abs(g-s));q=Math.max.apply(Math,p)}d&&(p=p.map(function(a){return d(a/q)*q})),"reverse"===c&&(p=p.map(function(a){return f?a<0?-1*a:-a:Math.abs(q-a)}))}return o+(k?(m-l)/q:l)*(Math.round(100*p[b])/100)+n}},c$.timeline=function(a){void 0===a&&(a={});var b=c$(a);return b.duration=0,b.add=function(c,d){var e=cX.indexOf(b),f=b.children;function g(a){a.passThrough=!0}e>-1&&cX.splice(e,1);for(var h=0;h<f.length;h++)g(f[h]);var i=cp(c,co(b_,a));i.targets=i.targets||a.targets;var j=b.duration;i.autoplay=!1,i.direction=b.direction,i.timelineOffset=b8.und(d)?j:cG(d,j),g(b),b.seek(i.timelineOffset);var k=c$(i);g(k),f.push(k);var l=cU(f,a);return b.delay=l.delay,b.endDelay=l.endDelay,b.duration=l.duration,b.seek(0),b.reset(),b.autoplay&&b.play(),b},b},c$.easing=cg,c$.penner=cf,c$.random=function(a,b){return Math.floor(Math.random()*(b-a+1))+a};let c0=i,c1=new WeakMap;class c2 extends c0.Loader{constructor(a){super(a),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(a){return this.decoderPath=a,this}setDecoderConfig(a){return this.decoderConfig=a,this}setWorkerLimit(a){return this.workerLimit=a,this}load(a,b,c,d){let e=new c0.FileLoader(this.manager);e.setPath(this.path),e.setResponseType("arraybuffer"),e.setRequestHeader(this.requestHeader),e.setWithCredentials(this.withCredentials),e.load(a,a=>{this.parse(a,b,d)},c,d)}parse(a,b,c=()=>{}){this.decodeDracoFile(a,b,null,null,c0.SRGBColorSpace,c).catch(c)}decodeDracoFile(a,b,c,d,e=c0.LinearSRGBColorSpace,f=()=>{}){let g={attributeIDs:c||this.defaultAttributeIDs,attributeTypes:d||this.defaultAttributeTypes,useUniqueIDs:!!c,vertexColorSpace:e};return this.decodeGeometry(a,g).then(b).catch(f)}decodeGeometry(a,b){let c,d=JSON.stringify(b);if(c1.has(a)){let b=c1.get(a);if(b.key===d)return b.promise;if(0===a.byteLength)throw Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let e=this.workerNextTaskID++,f=a.byteLength,g=this._getWorker(e,f).then(d=>(c=d,new Promise((d,f)=>{c._callbacks[e]={resolve:d,reject:f},c.postMessage({type:"decode",id:e,taskConfig:b,buffer:a},[a])}))).then(a=>this._createGeometry(a.geometry));return g.catch(()=>!0).then(()=>{c&&e&&this._releaseTask(c,e)}),c1.set(a,{key:d,promise:g}),g}_createGeometry(a){let b=new c0.BufferGeometry;a.index&&b.setIndex(new c0.BufferAttribute(a.index.array,1));for(let c=0;c<a.attributes.length;c++){let d=a.attributes[c],e=d.name,f=d.array,g=d.itemSize,h=new c0.BufferAttribute(f,g);"color"===e&&(this._assignVertexColorSpace(h,d.vertexColorSpace),h.normalized=f instanceof Float32Array==0),b.setAttribute(e,h)}return b}_assignVertexColorSpace(a,b){if(b!==c0.SRGBColorSpace)return;let c=new c0.Color;for(let b=0,d=a.count;b<d;b++)c.fromBufferAttribute(a,b),c0.ColorManagement.toWorkingColorSpace(c,c0.SRGBColorSpace),a.setXYZ(b,c.r,c.g,c.b)}_loadLibrary(a,b){let c=new c0.FileLoader(this.manager);return c.setPath(this.decoderPath),c.setResponseType(b),c.setWithCredentials(this.withCredentials),new Promise((b,d)=>{c.load(a,b,void 0,d)})}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;let a="object"!=typeof WebAssembly||"js"===this.decoderConfig.type,b=[];return a?b.push(this._loadLibrary("draco_decoder.js","text")):(b.push(this._loadLibrary("draco_wasm_wrapper.js","text")),b.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(b).then(b=>{let c=b[0];a||(this.decoderConfig.wasmBinary=b[1]);let d=c3.toString(),e=["/* draco decoder */",c,"","/* worker */",d.substring(d.indexOf("{")+1,d.lastIndexOf("}"))].join("\n");this.workerSourceURL=URL.createObjectURL(new Blob([e]))}),this.decoderPending}_getWorker(a,b){return this._initDecoder().then(()=>{if(this.workerPool.length<this.workerLimit){let a=new Worker(this.workerSourceURL);a._callbacks={},a._taskCosts={},a._taskLoad=0,a.postMessage({type:"init",decoderConfig:this.decoderConfig}),a.onmessage=function(b){let c=b.data;switch(c.type){case"decode":a._callbacks[c.id].resolve(c);break;case"error":a._callbacks[c.id].reject(c);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+c.type+'"')}},this.workerPool.push(a)}else this.workerPool.sort(function(a,b){return a._taskLoad>b._taskLoad?-1:1});let c=this.workerPool[this.workerPool.length-1];return c._taskCosts[a]=b,c._taskLoad+=b,c})}_releaseTask(a,b){a._taskLoad-=a._taskCosts[b],delete a._callbacks[b],delete a._taskCosts[b]}debug(){console.log("Task load: ",this.workerPool.map(a=>a._taskLoad))}dispose(){for(let a=0;a<this.workerPool.length;++a)this.workerPool[a].terminate();return this.workerPool.length=0,""!==this.workerSourceURL&&URL.revokeObjectURL(this.workerSourceURL),this}}function c3(){let a,b;onmessage=function(c){let d=c.data;switch(d.type){case"init":a=d.decoderConfig,b=new Promise(function(b){a.onModuleLoaded=function(a){b({draco:a})},DracoDecoderModule(a)});break;case"decode":let e=d.buffer,f=d.taskConfig;b.then(a=>{let b=a.draco,c=new b.Decoder;try{let a=function(a,b,c,d){let e,f,g=d.attributeIDs,h=d.attributeTypes,i=b.GetEncodedGeometryType(c);if(i===a.TRIANGULAR_MESH)e=new a.Mesh,f=b.DecodeArrayToMesh(c,c.byteLength,e);else{if(i!==a.POINT_CLOUD)throw Error("THREE.DRACOLoader: Unexpected geometry type.");e=new a.PointCloud,f=b.DecodeArrayToPointCloud(c,c.byteLength,e)}if(!f.ok()||0===e.ptr)throw Error("THREE.DRACOLoader: Decoding failed: "+f.error_msg());let j={index:null,attributes:[]};for(let c in g){let f,i,k=self[h[c]];if(d.useUniqueIDs)i=g[c],f=b.GetAttributeByUniqueId(e,i);else{if(i=b.GetAttributeId(e,a[g[c]]),-1===i)continue;f=b.GetAttribute(e,i)}let l=function(a,b,c,d,e,f){let g=f.num_components(),h=c.num_points()*g,i=h*e.BYTES_PER_ELEMENT,j=function(a,b){switch(b){case Float32Array:return a.DT_FLOAT32;case Int8Array:return a.DT_INT8;case Int16Array:return a.DT_INT16;case Int32Array:return a.DT_INT32;case Uint8Array:return a.DT_UINT8;case Uint16Array:return a.DT_UINT16;case Uint32Array:return a.DT_UINT32}}(a,e),k=a._malloc(i);b.GetAttributeDataArrayForAllPoints(c,f,j,i,k);let l=new e(a.HEAPF32.buffer,k,h).slice();return a._free(k),{name:d,array:l,itemSize:g}}(a,b,e,c,k,f);"color"===c&&(l.vertexColorSpace=d.vertexColorSpace),j.attributes.push(l)}return i===a.TRIANGULAR_MESH&&(j.index=function(a,b,c){let d=3*c.num_faces(),e=4*d,f=a._malloc(e);b.GetTrianglesUInt32Array(c,e,f);let g=new Uint32Array(a.HEAPF32.buffer,f,d).slice();return a._free(f),{array:g,itemSize:1}}(a,b,e)),a.destroy(e),j}(b,c,new Int8Array(e),f),g=a.attributes.map(a=>a.array.buffer);a.index&&g.push(a.index.array.buffer),self.postMessage({type:"decode",id:d.id,geometry:a},g)}catch(a){console.error(a),self.postMessage({type:"error",id:d.id,error:a.message})}finally{b.destroy(c)}})}}}function c4(a,b,c=!0){if(!b||!b.isReady)throw Error("BufferGeometryUtils: Initialized MikkTSpace library required.");if(!a.hasAttribute("position")||!a.hasAttribute("normal")||!a.hasAttribute("uv"))throw Error('BufferGeometryUtils: Tangents require "position", "normal", and "uv" attributes.');function d(a){if(a.normalized||a.isInterleavedBufferAttribute){let b=new Float32Array(a.count*a.itemSize);for(let c=0,d=0;c<a.count;c++)b[d++]=a.getX(c),b[d++]=a.getY(c),a.itemSize>2&&(b[d++]=a.getZ(c));return b}return a.array instanceof Float32Array?a.array:new Float32Array(a.array)}let e=a.index?a.toNonIndexed():a,f=b.generateTangents(d(e.attributes.position),d(e.attributes.normal),d(e.attributes.uv));if(c)for(let a=3;a<f.length;a+=4)f[a]*=-1;return e.setAttribute("tangent",new c0.BufferAttribute(f,4)),a!==e&&a.copy(e),a}function c5(a,b=!1){let c=null!==a[0].index,d=new Set(Object.keys(a[0].attributes)),e=new Set(Object.keys(a[0].morphAttributes)),f={},g={},h=a[0].morphTargetsRelative,i=new c0.BufferGeometry,j=0;for(let k=0;k<a.length;++k){let l=a[k],m=0;if(c!==(null!==l.index))return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index "+k+". All geometries must have compatible attributes; make sure index attribute exists among all geometries, or in none of them."),null;for(let a in l.attributes){if(!d.has(a))return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index "+k+'. All geometries must have compatible attributes; make sure "'+a+'" attribute exists among all geometries, or in none of them.'),null;void 0===f[a]&&(f[a]=[]),f[a].push(l.attributes[a]),m++}if(m!==d.size)return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index "+k+". Make sure all geometries have the same number of attributes."),null;if(h!==l.morphTargetsRelative)return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index "+k+". .morphTargetsRelative must be consistent throughout all geometries."),null;for(let a in l.morphAttributes){if(!e.has(a))return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index "+k+".  .morphAttributes must be consistent throughout all geometries."),null;void 0===g[a]&&(g[a]=[]),g[a].push(l.morphAttributes[a])}if(b){let a;if(c)a=l.index.count;else{if(void 0===l.attributes.position)return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index "+k+". The geometry must have either an index or a position attribute"),null;a=l.attributes.position.count}i.addGroup(j,a,k),j+=a}}if(c){let b=0,c=[];for(let d=0;d<a.length;++d){let e=a[d].index;for(let a=0;a<e.count;++a)c.push(e.getX(a)+b);b+=a[d].attributes.position.count}i.setIndex(c)}for(let a in f){let b=c6(f[a]);if(!b)return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed while trying to merge the "+a+" attribute."),null;i.setAttribute(a,b)}for(let a in g){let b=g[a][0].length;if(0===b)break;i.morphAttributes=i.morphAttributes||{},i.morphAttributes[a]=[];for(let c=0;c<b;++c){let b=[];for(let d=0;d<g[a].length;++d)b.push(g[a][d][c]);let d=c6(b);if(!d)return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed while trying to merge the "+a+" morphAttribute."),null;i.morphAttributes[a].push(d)}}return i}function c6(a){let b,c,d,e=-1,f=0;for(let g=0;g<a.length;++g){let h=a[g];if(void 0===b&&(b=h.array.constructor),b!==h.array.constructor)return console.error("THREE.BufferGeometryUtils: .mergeAttributes() failed. BufferAttribute.array must be of consistent array types across matching attributes."),null;if(void 0===c&&(c=h.itemSize),c!==h.itemSize)return console.error("THREE.BufferGeometryUtils: .mergeAttributes() failed. BufferAttribute.itemSize must be consistent across matching attributes."),null;if(void 0===d&&(d=h.normalized),d!==h.normalized)return console.error("THREE.BufferGeometryUtils: .mergeAttributes() failed. BufferAttribute.normalized must be consistent across matching attributes."),null;if(-1===e&&(e=h.gpuType),e!==h.gpuType)return console.error("THREE.BufferGeometryUtils: .mergeAttributes() failed. BufferAttribute.gpuType must be consistent across matching attributes."),null;f+=h.count*c}let g=new b(f),h=new c0.BufferAttribute(g,c,d),i=0;for(let b=0;b<a.length;++b){let d=a[b];if(d.isInterleavedBufferAttribute){let a=i/c;for(let b=0,e=d.count;b<e;b++)for(let e=0;e<c;e++){let c=d.getComponent(b,e);h.setComponent(b+a,e,c)}}else g.set(d.array,i);i+=d.count*c}return void 0!==e&&(h.gpuType=e),h}function c7(a){return a.isInstancedInterleavedBufferAttribute||a.isInterleavedBufferAttribute?c9(a):a.isInstancedBufferAttribute?(new c0.InstancedBufferAttribute).copy(a):(new c0.BufferAttribute).copy(a)}function c8(a){let b,c=0,d=0;for(let e=0,f=a.length;e<f;++e){let f=a[e];if(void 0===b&&(b=f.array.constructor),b!==f.array.constructor)return console.error("AttributeBuffers of different types cannot be interleaved"),null;c+=f.array.length,d+=f.itemSize}let e=new c0.InterleavedBuffer(new b(c),d),f=0,g=[],h=["getX","getY","getZ","getW"],i=["setX","setY","setZ","setW"];for(let b=0,c=a.length;b<c;b++){let c=a[b],d=c.itemSize,j=c.count,k=new c0.InterleavedBufferAttribute(e,d,f,c.normalized);g.push(k),f+=d;for(let a=0;a<j;a++)for(let b=0;b<d;b++)k[i[b]](a,c[h[b]](a))}return g}function c9(a){let b,c=a.data.array.constructor,d=a.count,e=a.itemSize,f=a.normalized,g=new c(d*e);b=a.isInstancedInterleavedBufferAttribute?new c0.InstancedBufferAttribute(g,e,f,a.meshPerAttribute):new c0.BufferAttribute(g,e,f);for(let c=0;c<d;c++)b.setX(c,a.getX(c)),e>=2&&b.setY(c,a.getY(c)),e>=3&&b.setZ(c,a.getZ(c)),e>=4&&b.setW(c,a.getW(c));return b}function da(a){let b=a.attributes,c=a.morphTargets,d=new Map;for(let a in b){let c=b[a];c.isInterleavedBufferAttribute&&(d.has(c)||d.set(c,c9(c)),b[a]=d.get(c))}for(let a in c){let b=c[a];b.isInterleavedBufferAttribute&&(d.has(b)||d.set(b,c9(b)),c[a]=d.get(b))}}function db(a){let b=0;for(let c in a.attributes){let d=a.getAttribute(c);b+=d.count*d.itemSize*d.array.BYTES_PER_ELEMENT}let c=a.getIndex();return b+(c?c.count*c.itemSize*c.array.BYTES_PER_ELEMENT:0)}function dc(a,b=1e-4){b=Math.max(b,Number.EPSILON);let c={},d=a.getIndex(),e=a.getAttribute("position"),f=d?d.count:e.count,g=0,h=Object.keys(a.attributes),i={},j={},k=[],l=["getX","getY","getZ","getW"],m=["setX","setY","setZ","setW"];for(let b=0,c=h.length;b<c;b++){let c=h[b],d=a.attributes[c];i[c]=new d.constructor(new d.array.constructor(d.count*d.itemSize),d.itemSize,d.normalized);let e=a.morphAttributes[c];e&&(j[c]||(j[c]=[]),e.forEach((a,b)=>{let d=new a.array.constructor(a.count*a.itemSize);j[c][b]=new a.constructor(d,a.itemSize,a.normalized)}))}let n=.5*b,o=Math.pow(10,Math.log10(1/b)),p=n*o;for(let b=0;b<f;b++){let e=d?d.getX(b):b,f="";for(let b=0,c=h.length;b<c;b++){let c=h[b],d=a.getAttribute(c),g=d.itemSize;for(let a=0;a<g;a++)f+=~~(d[l[a]](e)*o+p)+","}if(f in c)k.push(c[f]);else{for(let b=0,c=h.length;b<c;b++){let c=h[b],d=a.getAttribute(c),f=a.morphAttributes[c],k=d.itemSize,n=i[c],o=j[c];for(let a=0;a<k;a++){let b=l[a],c=m[a];if(n[c](g,d[b](e)),f)for(let a=0,d=f.length;a<d;a++)o[a][c](g,f[a][b](e))}}c[f]=g,k.push(g),g++}}let q=a.clone();for(let b in a.attributes){let a=i[b];if(q.setAttribute(b,new a.constructor(a.array.slice(0,g*a.itemSize),a.itemSize,a.normalized)),b in j)for(let a=0;a<j[b].length;a++){let c=j[b][a];q.morphAttributes[b][a]=new c.constructor(c.array.slice(0,g*c.itemSize),c.itemSize,c.normalized)}}return q.setIndex(k),q}function dd(a,b){if(b===c0.TrianglesDrawMode)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),a;if(b===c0.TriangleFanDrawMode||b===c0.TriangleStripDrawMode){let c=a.getIndex();if(null===c){let b=[],d=a.getAttribute("position");if(void 0===d)return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),a;for(let a=0;a<d.count;a++)b.push(a);a.setIndex(b),c=a.getIndex()}let d=c.count-2,e=[];if(b===c0.TriangleFanDrawMode)for(let a=1;a<=d;a++)e.push(c.getX(0)),e.push(c.getX(a)),e.push(c.getX(a+1));else for(let a=0;a<d;a++)a%2==0?(e.push(c.getX(a)),e.push(c.getX(a+1)),e.push(c.getX(a+2))):(e.push(c.getX(a+2)),e.push(c.getX(a+1)),e.push(c.getX(a)));e.length/3!==d&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");let f=a.clone();return f.setIndex(e),f.clearGroups(),f}return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",b),a}function de(a){let b,c,d,e,f,g,h,i,j,k,l=new c0.Vector3,m=new c0.Vector3,n=new c0.Vector3,o=new c0.Vector3,p=new c0.Vector3,q=new c0.Vector3,r=new c0.Vector3,s=new c0.Vector3,t=new c0.Vector3;function u(a,b,c,d,e,f,g,h){l.fromBufferAttribute(b,e),m.fromBufferAttribute(b,f),n.fromBufferAttribute(b,g);let i=a.morphTargetInfluences;if(c&&i){r.set(0,0,0),s.set(0,0,0),t.set(0,0,0);for(let a=0,b=c.length;a<b;a++){let b=i[a],h=c[a];0!==b&&(o.fromBufferAttribute(h,e),p.fromBufferAttribute(h,f),q.fromBufferAttribute(h,g),d?(r.addScaledVector(o,b),s.addScaledVector(p,b),t.addScaledVector(q,b)):(r.addScaledVector(o.sub(l),b),s.addScaledVector(p.sub(m),b),t.addScaledVector(q.sub(n),b)))}l.add(r),m.add(s),n.add(t)}a.isSkinnedMesh&&(a.applyBoneTransform(e,l),a.applyBoneTransform(f,m),a.applyBoneTransform(g,n)),h[3*e+0]=l.x,h[3*e+1]=l.y,h[3*e+2]=l.z,h[3*f+0]=m.x,h[3*f+1]=m.y,h[3*f+2]=m.z,h[3*g+0]=n.x,h[3*g+1]=n.y,h[3*g+2]=n.z}let v=a.geometry,w=a.material,x=v.index,y=v.attributes.position,z=v.morphAttributes.position,A=v.morphTargetsRelative,B=v.attributes.normal,C=v.morphAttributes.position,D=v.groups,E=v.drawRange,F=new Float32Array(y.count*y.itemSize),G=new Float32Array(B.count*B.itemSize);if(null!==x)if(Array.isArray(w))for(e=0,g=D.length;e<g;e++)for(j=Math.max((i=D[e]).start,E.start),k=Math.min(i.start+i.count,E.start+E.count),f=j,h=k;f<h;f+=3)b=x.getX(f),u(a,y,z,A,b,c=x.getX(f+1),d=x.getX(f+2),F),u(a,B,C,A,b,c,d,G);else for(j=Math.max(0,E.start),k=Math.min(x.count,E.start+E.count),e=j,g=k;e<g;e+=3)b=x.getX(e),u(a,y,z,A,b,c=x.getX(e+1),d=x.getX(e+2),F),u(a,B,C,A,b,c,d,G);else if(Array.isArray(w))for(e=0,g=D.length;e<g;e++)for(j=Math.max((i=D[e]).start,E.start),k=Math.min(i.start+i.count,E.start+E.count),f=j,h=k;f<h;f+=3)u(a,y,z,A,b=f,c=f+1,d=f+2,F),u(a,B,C,A,b,c,d,G);else for(j=Math.max(0,E.start),k=Math.min(y.count,E.start+E.count),e=j,g=k;e<g;e+=3)u(a,y,z,A,b=e,c=e+1,d=e+2,F),u(a,B,C,A,b,c,d,G);return{positionAttribute:y,normalAttribute:B,morphedPositionAttribute:new c0.Float32BufferAttribute(F,3),morphedNormalAttribute:new c0.Float32BufferAttribute(G,3)}}function df(a){if(0===a.groups.length)return console.warn("THREE.BufferGeometryUtils.mergeGroups(): No groups are defined. Nothing to merge."),a;let b=a.groups;if(b=b.sort((a,b)=>a.materialIndex!==b.materialIndex?a.materialIndex-b.materialIndex:a.start-b.start),null===a.getIndex()){let b=a.getAttribute("position"),c=[];for(let a=0;a<b.count;a+=3)c.push(a,a+1,a+2);a.setIndex(c)}let c=a.getIndex(),d=[];for(let a=0;a<b.length;a++){let e=b[a],f=e.start,g=f+e.count;for(let a=f;a<g;a++)d.push(c.getX(a))}a.dispose(),a.setIndex(d);let e=0;for(let a=0;a<b.length;a++){let c=b[a];c.start=e,e+=c.count}let f=b[0];a.groups=[f];for(let c=1;c<b.length;c++){let d=b[c];f.materialIndex===d.materialIndex?f.count+=d.count:(f=d,a.groups.push(f))}return a}function dg(a,b=Math.PI/3){let c=Math.cos(b),d=100*(1+1e-10),e=[new c0.Vector3,new c0.Vector3,new c0.Vector3],f=new c0.Vector3,g=new c0.Vector3,h=new c0.Vector3,i=new c0.Vector3;function j(a){return`${~~(a.x*d)},${~~(a.y*d)},${~~(a.z*d)}`}let k=a.index?a.toNonIndexed():a,l=k.attributes.position,m={};for(let a=0,b=l.count/3;a<b;a++){let b=3*a,c=e[0].fromBufferAttribute(l,b+0),d=e[1].fromBufferAttribute(l,b+1),h=e[2].fromBufferAttribute(l,b+2);f.subVectors(h,d),g.subVectors(c,d);let i=(new c0.Vector3).crossVectors(f,g).normalize();for(let a=0;a<3;a++){let b=j(e[a]);b in m||(m[b]=[]),m[b].push(i)}}let n=new Float32Array(3*l.count),o=new c0.BufferAttribute(n,3,!1);for(let a=0,b=l.count/3;a<b;a++){let b=3*a,d=e[0].fromBufferAttribute(l,b+0),k=e[1].fromBufferAttribute(l,b+1),n=e[2].fromBufferAttribute(l,b+2);f.subVectors(n,k),g.subVectors(d,k),h.crossVectors(f,g).normalize();for(let a=0;a<3;a++){let d=m[j(e[a])];i.set(0,0,0);for(let a=0,b=d.length;a<b;a++){let b=d[a];h.dot(b)>c&&i.add(b)}i.normalize(),o.setXYZ(b+a,i.x,i.y,i.z)}}return k.setAttribute("normal",o),k}class dh extends c0.Loader{constructor(a){super(a),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(a){return new dn(a)}),this.register(function(a){return new dp(a)}),this.register(function(a){return new dy(a)}),this.register(function(a){return new dz(a)}),this.register(function(a){return new dA(a)}),this.register(function(a){return new dr(a)}),this.register(function(a){return new ds(a)}),this.register(function(a){return new dt(a)}),this.register(function(a){return new du(a)}),this.register(function(a){return new dm(a)}),this.register(function(a){return new dv(a)}),this.register(function(a){return new dq(a)}),this.register(function(a){return new dx(a)}),this.register(function(a){return new dw(a)}),this.register(function(a){return new dk(a)}),this.register(function(a){return new dB(a)}),this.register(function(a){return new dC(a)})}load(a,b,c,d){let e,f=this;if(""!==this.resourcePath)e=this.resourcePath;else if(""!==this.path){let b=c0.LoaderUtils.extractUrlBase(a);e=c0.LoaderUtils.resolveURL(b,this.path)}else e=c0.LoaderUtils.extractUrlBase(a);this.manager.itemStart(a);let g=function(b){d?d(b):console.error(b),f.manager.itemError(a),f.manager.itemEnd(a)},h=new c0.FileLoader(this.manager);h.setPath(this.path),h.setResponseType("arraybuffer"),h.setRequestHeader(this.requestHeader),h.setWithCredentials(this.withCredentials),h.load(a,function(c){try{f.parse(c,e,function(c){b(c),f.manager.itemEnd(a)},g)}catch(a){g(a)}},c,g)}setDRACOLoader(a){return this.dracoLoader=a,this}setKTX2Loader(a){return this.ktx2Loader=a,this}setMeshoptDecoder(a){return this.meshoptDecoder=a,this}register(a){return -1===this.pluginCallbacks.indexOf(a)&&this.pluginCallbacks.push(a),this}unregister(a){return -1!==this.pluginCallbacks.indexOf(a)&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(a),1),this}parse(a,b,c,d){let e,f={},g={},h=new TextDecoder;if("string"==typeof a)e=JSON.parse(a);else if(a instanceof ArrayBuffer)if(h.decode(new Uint8Array(a,0,4))===dD){try{f[dj.KHR_BINARY_GLTF]=new dE(a)}catch(a){return void(d&&d(a))}e=JSON.parse(f[dj.KHR_BINARY_GLTF].content)}else e=JSON.parse(h.decode(a));else e=a;if(void 0===e.asset||e.asset.version[0]<2)return void(d&&d(Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported.")));let i=new dY(e,{path:b||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});i.fileLoader.setRequestHeader(this.requestHeader);for(let a=0;a<this.pluginCallbacks.length;a++){let b=this.pluginCallbacks[a](i);b.name||console.error("THREE.GLTFLoader: Invalid plugin found: missing name"),g[b.name]=b,f[b.name]=!0}if(e.extensionsUsed)for(let a=0;a<e.extensionsUsed.length;++a){let b=e.extensionsUsed[a],c=e.extensionsRequired||[];switch(b){case dj.KHR_MATERIALS_UNLIT:f[b]=new dl;break;case dj.KHR_DRACO_MESH_COMPRESSION:f[b]=new dF(e,this.dracoLoader);break;case dj.KHR_TEXTURE_TRANSFORM:f[b]=new dG;break;case dj.KHR_MESH_QUANTIZATION:f[b]=new dH;break;default:c.indexOf(b)>=0&&void 0===g[b]&&console.warn('THREE.GLTFLoader: Unknown extension "'+b+'".')}}i.setExtensions(f),i.setPlugins(g),i.parse(c,d)}parseAsync(a,b){let c=this;return new Promise(function(d,e){c.parse(a,b,d,e)})}}function di(){let a={};return{get:function(b){return a[b]},add:function(b,c){a[b]=c},remove:function(b){delete a[b]},removeAll:function(){a={}}}}let dj={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_DISPERSION:"KHR_materials_dispersion",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_ANISOTROPY:"KHR_materials_anisotropy",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_MATERIALS_BUMP:"EXT_materials_bump",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class dk{constructor(a){this.parser=a,this.name=dj.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){let a=this.parser,b=this.parser.json.nodes||[];for(let c=0,d=b.length;c<d;c++){let d=b[c];d.extensions&&d.extensions[this.name]&&void 0!==d.extensions[this.name].light&&a._addNodeRef(this.cache,d.extensions[this.name].light)}}_loadLight(a){let b,c=this.parser,d="light:"+a,e=c.cache.get(d);if(e)return e;let f=c.json,g=((f.extensions&&f.extensions[this.name]||{}).lights||[])[a],h=new c0.Color(0xffffff);void 0!==g.color&&h.setRGB(g.color[0],g.color[1],g.color[2],c0.LinearSRGBColorSpace);let i=void 0!==g.range?g.range:0;switch(g.type){case"directional":(b=new c0.DirectionalLight(h)).target.position.set(0,0,-1),b.add(b.target);break;case"point":(b=new c0.PointLight(h)).distance=i;break;case"spot":(b=new c0.SpotLight(h)).distance=i,g.spot=g.spot||{},g.spot.innerConeAngle=void 0!==g.spot.innerConeAngle?g.spot.innerConeAngle:0,g.spot.outerConeAngle=void 0!==g.spot.outerConeAngle?g.spot.outerConeAngle:Math.PI/4,b.angle=g.spot.outerConeAngle,b.penumbra=1-g.spot.innerConeAngle/g.spot.outerConeAngle,b.target.position.set(0,0,-1),b.add(b.target);break;default:throw Error("THREE.GLTFLoader: Unexpected light type: "+g.type)}return b.position.set(0,0,0),dU(b,g),void 0!==g.intensity&&(b.intensity=g.intensity),b.name=c.createUniqueName(g.name||"light_"+a),e=Promise.resolve(b),c.cache.add(d,e),e}getDependency(a,b){if("light"===a)return this._loadLight(b)}createNodeAttachment(a){let b=this,c=this.parser,d=c.json.nodes[a],e=(d.extensions&&d.extensions[this.name]||{}).light;return void 0===e?null:this._loadLight(e).then(function(a){return c._getNodeRef(b.cache,e,a)})}}class dl{constructor(){this.name=dj.KHR_MATERIALS_UNLIT}getMaterialType(){return c0.MeshBasicMaterial}extendParams(a,b,c){let d=[];a.color=new c0.Color(1,1,1),a.opacity=1;let e=b.pbrMetallicRoughness;if(e){if(Array.isArray(e.baseColorFactor)){let b=e.baseColorFactor;a.color.setRGB(b[0],b[1],b[2],c0.LinearSRGBColorSpace),a.opacity=b[3]}void 0!==e.baseColorTexture&&d.push(c.assignTexture(a,"map",e.baseColorTexture,c0.SRGBColorSpace))}return Promise.all(d)}}class dm{constructor(a){this.parser=a,this.name=dj.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(a,b){let c=this.parser.json.materials[a];if(!c.extensions||!c.extensions[this.name])return Promise.resolve();let d=c.extensions[this.name].emissiveStrength;return void 0!==d&&(b.emissiveIntensity=d),Promise.resolve()}}class dn{constructor(a){this.parser=a,this.name=dj.KHR_MATERIALS_CLEARCOAT}getMaterialType(a){let b=this.parser.json.materials[a];return b.extensions&&b.extensions[this.name]?c0.MeshPhysicalMaterial:null}extendMaterialParams(a,b){let c=this.parser,d=c.json.materials[a];if(!d.extensions||!d.extensions[this.name])return Promise.resolve();let e=[],f=d.extensions[this.name];if(void 0!==f.clearcoatFactor&&(b.clearcoat=f.clearcoatFactor),void 0!==f.clearcoatTexture&&e.push(c.assignTexture(b,"clearcoatMap",f.clearcoatTexture)),void 0!==f.clearcoatRoughnessFactor&&(b.clearcoatRoughness=f.clearcoatRoughnessFactor),void 0!==f.clearcoatRoughnessTexture&&e.push(c.assignTexture(b,"clearcoatRoughnessMap",f.clearcoatRoughnessTexture)),void 0!==f.clearcoatNormalTexture&&(e.push(c.assignTexture(b,"clearcoatNormalMap",f.clearcoatNormalTexture)),void 0!==f.clearcoatNormalTexture.scale)){let a=f.clearcoatNormalTexture.scale;b.clearcoatNormalScale=new c0.Vector2(a,a)}return Promise.all(e)}}class dp{constructor(a){this.parser=a,this.name=dj.KHR_MATERIALS_DISPERSION}getMaterialType(a){let b=this.parser.json.materials[a];return b.extensions&&b.extensions[this.name]?c0.MeshPhysicalMaterial:null}extendMaterialParams(a,b){let c=this.parser.json.materials[a];if(!c.extensions||!c.extensions[this.name])return Promise.resolve();let d=c.extensions[this.name];return b.dispersion=void 0!==d.dispersion?d.dispersion:0,Promise.resolve()}}class dq{constructor(a){this.parser=a,this.name=dj.KHR_MATERIALS_IRIDESCENCE}getMaterialType(a){let b=this.parser.json.materials[a];return b.extensions&&b.extensions[this.name]?c0.MeshPhysicalMaterial:null}extendMaterialParams(a,b){let c=this.parser,d=c.json.materials[a];if(!d.extensions||!d.extensions[this.name])return Promise.resolve();let e=[],f=d.extensions[this.name];return void 0!==f.iridescenceFactor&&(b.iridescence=f.iridescenceFactor),void 0!==f.iridescenceTexture&&e.push(c.assignTexture(b,"iridescenceMap",f.iridescenceTexture)),void 0!==f.iridescenceIor&&(b.iridescenceIOR=f.iridescenceIor),void 0===b.iridescenceThicknessRange&&(b.iridescenceThicknessRange=[100,400]),void 0!==f.iridescenceThicknessMinimum&&(b.iridescenceThicknessRange[0]=f.iridescenceThicknessMinimum),void 0!==f.iridescenceThicknessMaximum&&(b.iridescenceThicknessRange[1]=f.iridescenceThicknessMaximum),void 0!==f.iridescenceThicknessTexture&&e.push(c.assignTexture(b,"iridescenceThicknessMap",f.iridescenceThicknessTexture)),Promise.all(e)}}class dr{constructor(a){this.parser=a,this.name=dj.KHR_MATERIALS_SHEEN}getMaterialType(a){let b=this.parser.json.materials[a];return b.extensions&&b.extensions[this.name]?c0.MeshPhysicalMaterial:null}extendMaterialParams(a,b){let c=this.parser,d=c.json.materials[a];if(!d.extensions||!d.extensions[this.name])return Promise.resolve();let e=[];b.sheenColor=new c0.Color(0,0,0),b.sheenRoughness=0,b.sheen=1;let f=d.extensions[this.name];if(void 0!==f.sheenColorFactor){let a=f.sheenColorFactor;b.sheenColor.setRGB(a[0],a[1],a[2],c0.LinearSRGBColorSpace)}return void 0!==f.sheenRoughnessFactor&&(b.sheenRoughness=f.sheenRoughnessFactor),void 0!==f.sheenColorTexture&&e.push(c.assignTexture(b,"sheenColorMap",f.sheenColorTexture,c0.SRGBColorSpace)),void 0!==f.sheenRoughnessTexture&&e.push(c.assignTexture(b,"sheenRoughnessMap",f.sheenRoughnessTexture)),Promise.all(e)}}class ds{constructor(a){this.parser=a,this.name=dj.KHR_MATERIALS_TRANSMISSION}getMaterialType(a){let b=this.parser.json.materials[a];return b.extensions&&b.extensions[this.name]?c0.MeshPhysicalMaterial:null}extendMaterialParams(a,b){let c=this.parser,d=c.json.materials[a];if(!d.extensions||!d.extensions[this.name])return Promise.resolve();let e=[],f=d.extensions[this.name];return void 0!==f.transmissionFactor&&(b.transmission=f.transmissionFactor),void 0!==f.transmissionTexture&&e.push(c.assignTexture(b,"transmissionMap",f.transmissionTexture)),Promise.all(e)}}class dt{constructor(a){this.parser=a,this.name=dj.KHR_MATERIALS_VOLUME}getMaterialType(a){let b=this.parser.json.materials[a];return b.extensions&&b.extensions[this.name]?c0.MeshPhysicalMaterial:null}extendMaterialParams(a,b){let c=this.parser,d=c.json.materials[a];if(!d.extensions||!d.extensions[this.name])return Promise.resolve();let e=[],f=d.extensions[this.name];b.thickness=void 0!==f.thicknessFactor?f.thicknessFactor:0,void 0!==f.thicknessTexture&&e.push(c.assignTexture(b,"thicknessMap",f.thicknessTexture)),b.attenuationDistance=f.attenuationDistance||1/0;let g=f.attenuationColor||[1,1,1];return b.attenuationColor=(new c0.Color).setRGB(g[0],g[1],g[2],c0.LinearSRGBColorSpace),Promise.all(e)}}class du{constructor(a){this.parser=a,this.name=dj.KHR_MATERIALS_IOR}getMaterialType(a){let b=this.parser.json.materials[a];return b.extensions&&b.extensions[this.name]?c0.MeshPhysicalMaterial:null}extendMaterialParams(a,b){let c=this.parser.json.materials[a];if(!c.extensions||!c.extensions[this.name])return Promise.resolve();let d=c.extensions[this.name];return b.ior=void 0!==d.ior?d.ior:1.5,Promise.resolve()}}class dv{constructor(a){this.parser=a,this.name=dj.KHR_MATERIALS_SPECULAR}getMaterialType(a){let b=this.parser.json.materials[a];return b.extensions&&b.extensions[this.name]?c0.MeshPhysicalMaterial:null}extendMaterialParams(a,b){let c=this.parser,d=c.json.materials[a];if(!d.extensions||!d.extensions[this.name])return Promise.resolve();let e=[],f=d.extensions[this.name];b.specularIntensity=void 0!==f.specularFactor?f.specularFactor:1,void 0!==f.specularTexture&&e.push(c.assignTexture(b,"specularIntensityMap",f.specularTexture));let g=f.specularColorFactor||[1,1,1];return b.specularColor=(new c0.Color).setRGB(g[0],g[1],g[2],c0.LinearSRGBColorSpace),void 0!==f.specularColorTexture&&e.push(c.assignTexture(b,"specularColorMap",f.specularColorTexture,c0.SRGBColorSpace)),Promise.all(e)}}class dw{constructor(a){this.parser=a,this.name=dj.EXT_MATERIALS_BUMP}getMaterialType(a){let b=this.parser.json.materials[a];return b.extensions&&b.extensions[this.name]?c0.MeshPhysicalMaterial:null}extendMaterialParams(a,b){let c=this.parser,d=c.json.materials[a];if(!d.extensions||!d.extensions[this.name])return Promise.resolve();let e=[],f=d.extensions[this.name];return b.bumpScale=void 0!==f.bumpFactor?f.bumpFactor:1,void 0!==f.bumpTexture&&e.push(c.assignTexture(b,"bumpMap",f.bumpTexture)),Promise.all(e)}}class dx{constructor(a){this.parser=a,this.name=dj.KHR_MATERIALS_ANISOTROPY}getMaterialType(a){let b=this.parser.json.materials[a];return b.extensions&&b.extensions[this.name]?c0.MeshPhysicalMaterial:null}extendMaterialParams(a,b){let c=this.parser,d=c.json.materials[a];if(!d.extensions||!d.extensions[this.name])return Promise.resolve();let e=[],f=d.extensions[this.name];return void 0!==f.anisotropyStrength&&(b.anisotropy=f.anisotropyStrength),void 0!==f.anisotropyRotation&&(b.anisotropyRotation=f.anisotropyRotation),void 0!==f.anisotropyTexture&&e.push(c.assignTexture(b,"anisotropyMap",f.anisotropyTexture)),Promise.all(e)}}class dy{constructor(a){this.parser=a,this.name=dj.KHR_TEXTURE_BASISU}loadTexture(a){let b=this.parser,c=b.json,d=c.textures[a];if(!d.extensions||!d.extensions[this.name])return null;let e=d.extensions[this.name],f=b.options.ktx2Loader;if(!f){if(c.extensionsRequired&&c.extensionsRequired.indexOf(this.name)>=0)throw Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return b.loadTextureImage(a,e.source,f)}}class dz{constructor(a){this.parser=a,this.name=dj.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(a){let b=this.name,c=this.parser,d=c.json,e=d.textures[a];if(!e.extensions||!e.extensions[b])return null;let f=e.extensions[b],g=d.images[f.source],h=c.textureLoader;if(g.uri){let a=c.options.manager.getHandler(g.uri);null!==a&&(h=a)}return this.detectSupport().then(function(e){if(e)return c.loadTextureImage(a,f.source,h);if(d.extensionsRequired&&d.extensionsRequired.indexOf(b)>=0)throw Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return c.loadTexture(a)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(a){let b=new Image;b.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",b.onload=b.onerror=function(){a(1===b.height)}})),this.isSupported}}class dA{constructor(a){this.parser=a,this.name=dj.EXT_TEXTURE_AVIF,this.isSupported=null}loadTexture(a){let b=this.name,c=this.parser,d=c.json,e=d.textures[a];if(!e.extensions||!e.extensions[b])return null;let f=e.extensions[b],g=d.images[f.source],h=c.textureLoader;if(g.uri){let a=c.options.manager.getHandler(g.uri);null!==a&&(h=a)}return this.detectSupport().then(function(e){if(e)return c.loadTextureImage(a,f.source,h);if(d.extensionsRequired&&d.extensionsRequired.indexOf(b)>=0)throw Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");return c.loadTexture(a)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(a){let b=new Image;b.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=",b.onload=b.onerror=function(){a(1===b.height)}})),this.isSupported}}class dB{constructor(a){this.name=dj.EXT_MESHOPT_COMPRESSION,this.parser=a}loadBufferView(a){let b=this.parser.json,c=b.bufferViews[a];if(c.extensions&&c.extensions[this.name]){let a=c.extensions[this.name],d=this.parser.getDependency("buffer",a.buffer),e=this.parser.options.meshoptDecoder;if(!e||!e.supported){if(b.extensionsRequired&&b.extensionsRequired.indexOf(this.name)>=0)throw Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return d.then(function(b){let c=a.byteOffset||0,d=a.byteLength||0,f=a.count,g=a.byteStride,h=new Uint8Array(b,c,d);return e.decodeGltfBufferAsync?e.decodeGltfBufferAsync(f,g,h,a.mode,a.filter).then(function(a){return a.buffer}):e.ready.then(function(){let b=new ArrayBuffer(f*g);return e.decodeGltfBuffer(new Uint8Array(b),f,g,h,a.mode,a.filter),b})})}return null}}class dC{constructor(a){this.name=dj.EXT_MESH_GPU_INSTANCING,this.parser=a}createNodeMesh(a){let b=this.parser.json,c=b.nodes[a];if(!c.extensions||!c.extensions[this.name]||void 0===c.mesh)return null;for(let a of b.meshes[c.mesh].primitives)if(a.mode!==dL.TRIANGLES&&a.mode!==dL.TRIANGLE_STRIP&&a.mode!==dL.TRIANGLE_FAN&&void 0!==a.mode)return null;let d=c.extensions[this.name].attributes,e=[],f={};for(let a in d)e.push(this.parser.getDependency("accessor",d[a]).then(b=>(f[a]=b,f[a])));return e.length<1?null:(e.push(this.parser.createNodeMesh(a)),Promise.all(e).then(a=>{let b=a.pop(),c=b.isGroup?b.children:[b],d=a[0].count,e=[];for(let a of c){let b=new c0.Matrix4,c=new c0.Vector3,g=new c0.Quaternion,h=new c0.Vector3(1,1,1),i=new c0.InstancedMesh(a.geometry,a.material,d);for(let a=0;a<d;a++)f.TRANSLATION&&c.fromBufferAttribute(f.TRANSLATION,a),f.ROTATION&&g.fromBufferAttribute(f.ROTATION,a),f.SCALE&&h.fromBufferAttribute(f.SCALE,a),i.setMatrixAt(a,b.compose(c,g,h));for(let b in f)if("_COLOR_0"===b){let a=f[b];i.instanceColor=new c0.InstancedBufferAttribute(a.array,a.itemSize,a.normalized)}else"TRANSLATION"!==b&&"ROTATION"!==b&&"SCALE"!==b&&a.geometry.setAttribute(b,f[b]);c0.Object3D.prototype.copy.call(i,a),this.parser.assignFinalMaterial(i),e.push(i)}return b.isGroup?(b.clear(),b.add(...e),b):e[0]}))}}let dD="glTF";class dE{constructor(a){this.name=dj.KHR_BINARY_GLTF,this.content=null,this.body=null;let b=new DataView(a,0,12),c=new TextDecoder;if(this.header={magic:c.decode(new Uint8Array(a.slice(0,4))),version:b.getUint32(4,!0),length:b.getUint32(8,!0)},this.header.magic!==dD)throw Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw Error("THREE.GLTFLoader: Legacy binary file detected.");let d=this.header.length-12,e=new DataView(a,12),f=0;for(;f<d;){let b=e.getUint32(f,!0);f+=4;let d=e.getUint32(f,!0);if(f+=4,0x4e4f534a===d){let d=new Uint8Array(a,12+f,b);this.content=c.decode(d)}else if(5130562===d){let c=12+f;this.body=a.slice(c,c+b)}f+=b}if(null===this.content)throw Error("THREE.GLTFLoader: JSON content not found.")}}class dF{constructor(a,b){if(!b)throw Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=dj.KHR_DRACO_MESH_COMPRESSION,this.json=a,this.dracoLoader=b,this.dracoLoader.preload()}decodePrimitive(a,b){let c=this.json,d=this.dracoLoader,e=a.extensions[this.name].bufferView,f=a.extensions[this.name].attributes,g={},h={},i={};for(let a in f)g[dQ[a]||a.toLowerCase()]=f[a];for(let b in a.attributes){let d=dQ[b]||b.toLowerCase();if(void 0!==f[b]){let e=c.accessors[a.attributes[b]],f=dM[e.componentType];i[d]=f.name,h[d]=!0===e.normalized}}return b.getDependency("bufferView",e).then(function(a){return new Promise(function(b,c){d.decodeDracoFile(a,function(a){for(let b in a.attributes){let c=a.attributes[b],d=h[b];void 0!==d&&(c.normalized=d)}b(a)},g,i,c0.LinearSRGBColorSpace,c)})})}}class dG{constructor(){this.name=dj.KHR_TEXTURE_TRANSFORM}extendTexture(a,b){return(void 0!==b.texCoord&&b.texCoord!==a.channel||void 0!==b.offset||void 0!==b.rotation||void 0!==b.scale)&&(a=a.clone(),void 0!==b.texCoord&&(a.channel=b.texCoord),void 0!==b.offset&&a.offset.fromArray(b.offset),void 0!==b.rotation&&(a.rotation=b.rotation),void 0!==b.scale&&a.repeat.fromArray(b.scale),a.needsUpdate=!0),a}}class dH{constructor(){this.name=dj.KHR_MESH_QUANTIZATION}}class dI extends c0.Interpolant{constructor(a,b,c,d){super(a,b,c,d)}copySampleValue_(a){let b=this.resultBuffer,c=this.sampleValues,d=this.valueSize,e=a*d*3+d;for(let a=0;a!==d;a++)b[a]=c[e+a];return b}interpolate_(a,b,c,d){let e=this.resultBuffer,f=this.sampleValues,g=this.valueSize,h=2*g,i=3*g,j=d-b,k=(c-b)/j,l=k*k,m=l*k,n=a*i,o=n-i,p=-2*m+3*l,q=m-l,r=1-p,s=q-l+k;for(let a=0;a!==g;a++){let b=f[o+a+g],c=f[o+a+h]*j,d=f[n+a+g],i=f[n+a]*j;e[a]=r*b+s*c+p*d+q*i}return e}}let dJ=new c0.Quaternion;class dK extends dI{interpolate_(a,b,c,d){let e=super.interpolate_(a,b,c,d);return dJ.fromArray(e).normalize().toArray(e),e}}let dL={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6},dM={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},dN={9728:c0.NearestFilter,9729:c0.LinearFilter,9984:c0.NearestMipmapNearestFilter,9985:c0.LinearMipmapNearestFilter,9986:c0.NearestMipmapLinearFilter,9987:c0.LinearMipmapLinearFilter},dO={33071:c0.ClampToEdgeWrapping,33648:c0.MirroredRepeatWrapping,10497:c0.RepeatWrapping},dP={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},dQ={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},dR={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},dS={CUBICSPLINE:void 0,LINEAR:c0.InterpolateLinear,STEP:c0.InterpolateDiscrete};function dT(a,b,c){for(let d in c.extensions)void 0===a[d]&&(b.userData.gltfExtensions=b.userData.gltfExtensions||{},b.userData.gltfExtensions[d]=c.extensions[d])}function dU(a,b){void 0!==b.extras&&("object"==typeof b.extras?Object.assign(a.userData,b.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+b.extras))}function dV(a){let b="",c=Object.keys(a).sort();for(let d=0,e=c.length;d<e;d++)b+=c[d]+":"+a[c[d]]+";";return b}function dW(a){switch(a){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}let dX=new c0.Matrix4;class dY{constructor(a={},b={}){this.json=a,this.extensions={},this.plugins={},this.options=b,this.cache=new di,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let c=!1,d=-1,e=!1,f=-1;if("undefined"!=typeof navigator){let a=navigator.userAgent;c=!0===/^((?!chrome|android).)*safari/i.test(a);let b=a.match(/Version\/(\d+)/);d=c&&b?parseInt(b[1],10):-1,f=(e=a.indexOf("Firefox")>-1)?a.match(/Firefox\/([0-9]+)\./)[1]:-1}"undefined"==typeof createImageBitmap||c&&d<17||e&&f<98?this.textureLoader=new c0.TextureLoader(this.options.manager):this.textureLoader=new c0.ImageBitmapLoader(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new c0.FileLoader(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),"use-credentials"===this.options.crossOrigin&&this.fileLoader.setWithCredentials(!0)}setExtensions(a){this.extensions=a}setPlugins(a){this.plugins=a}parse(a,b){let c=this,d=this.json,e=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll(function(a){return a._markDefs&&a._markDefs()}),Promise.all(this._invokeAll(function(a){return a.beforeRoot&&a.beforeRoot()})).then(function(){return Promise.all([c.getDependencies("scene"),c.getDependencies("animation"),c.getDependencies("camera")])}).then(function(b){let f={scene:b[0][d.scene||0],scenes:b[0],animations:b[1],cameras:b[2],asset:d.asset,parser:c,userData:{}};return dT(e,f,d),dU(f,d),Promise.all(c._invokeAll(function(a){return a.afterRoot&&a.afterRoot(f)})).then(function(){for(let a of f.scenes)a.updateMatrixWorld();a(f)})}).catch(b)}_markDefs(){let a=this.json.nodes||[],b=this.json.skins||[],c=this.json.meshes||[];for(let c=0,d=b.length;c<d;c++){let d=b[c].joints;for(let b=0,c=d.length;b<c;b++)a[d[b]].isBone=!0}for(let b=0,d=a.length;b<d;b++){let d=a[b];void 0!==d.mesh&&(this._addNodeRef(this.meshCache,d.mesh),void 0!==d.skin&&(c[d.mesh].isSkinnedMesh=!0)),void 0!==d.camera&&this._addNodeRef(this.cameraCache,d.camera)}}_addNodeRef(a,b){void 0!==b&&(void 0===a.refs[b]&&(a.refs[b]=a.uses[b]=0),a.refs[b]++)}_getNodeRef(a,b,c){if(a.refs[b]<=1)return c;let d=c.clone(),e=(a,b)=>{let c=this.associations.get(a);for(let[d,f]of(null!=c&&this.associations.set(b,c),a.children.entries()))e(f,b.children[d])};return e(c,d),d.name+="_instance_"+a.uses[b]++,d}_invokeOne(a){let b=Object.values(this.plugins);b.push(this);for(let c=0;c<b.length;c++){let d=a(b[c]);if(d)return d}return null}_invokeAll(a){let b=Object.values(this.plugins);b.unshift(this);let c=[];for(let d=0;d<b.length;d++){let e=a(b[d]);e&&c.push(e)}return c}getDependency(a,b){let c=a+":"+b,d=this.cache.get(c);if(!d){switch(a){case"scene":d=this.loadScene(b);break;case"node":d=this._invokeOne(function(a){return a.loadNode&&a.loadNode(b)});break;case"mesh":d=this._invokeOne(function(a){return a.loadMesh&&a.loadMesh(b)});break;case"accessor":d=this.loadAccessor(b);break;case"bufferView":d=this._invokeOne(function(a){return a.loadBufferView&&a.loadBufferView(b)});break;case"buffer":d=this.loadBuffer(b);break;case"material":d=this._invokeOne(function(a){return a.loadMaterial&&a.loadMaterial(b)});break;case"texture":d=this._invokeOne(function(a){return a.loadTexture&&a.loadTexture(b)});break;case"skin":d=this.loadSkin(b);break;case"animation":d=this._invokeOne(function(a){return a.loadAnimation&&a.loadAnimation(b)});break;case"camera":d=this.loadCamera(b);break;default:if(!(d=this._invokeOne(function(c){return c!=this&&c.getDependency&&c.getDependency(a,b)})))throw Error("Unknown type: "+a)}this.cache.add(c,d)}return d}getDependencies(a){let b=this.cache.get(a);if(!b){let c=this;b=Promise.all((this.json[a+("mesh"===a?"es":"s")]||[]).map(function(b,d){return c.getDependency(a,d)})),this.cache.add(a,b)}return b}loadBuffer(a){let b=this.json.buffers[a],c=this.fileLoader;if(b.type&&"arraybuffer"!==b.type)throw Error("THREE.GLTFLoader: "+b.type+" buffer type is not supported.");if(void 0===b.uri&&0===a)return Promise.resolve(this.extensions[dj.KHR_BINARY_GLTF].body);let d=this.options;return new Promise(function(a,e){c.load(c0.LoaderUtils.resolveURL(b.uri,d.path),a,void 0,function(){e(Error('THREE.GLTFLoader: Failed to load buffer "'+b.uri+'".'))})})}loadBufferView(a){let b=this.json.bufferViews[a];return this.getDependency("buffer",b.buffer).then(function(a){let c=b.byteLength||0,d=b.byteOffset||0;return a.slice(d,d+c)})}loadAccessor(a){let b=this,c=this.json,d=this.json.accessors[a];if(void 0===d.bufferView&&void 0===d.sparse){let a=dP[d.type],b=dM[d.componentType],c=!0===d.normalized,e=new b(d.count*a);return Promise.resolve(new c0.BufferAttribute(e,a,c))}let e=[];return void 0!==d.bufferView?e.push(this.getDependency("bufferView",d.bufferView)):e.push(null),void 0!==d.sparse&&(e.push(this.getDependency("bufferView",d.sparse.indices.bufferView)),e.push(this.getDependency("bufferView",d.sparse.values.bufferView))),Promise.all(e).then(function(a){let e,f,g=a[0],h=dP[d.type],i=dM[d.componentType],j=i.BYTES_PER_ELEMENT,k=j*h,l=d.byteOffset||0,m=void 0!==d.bufferView?c.bufferViews[d.bufferView].byteStride:void 0,n=!0===d.normalized;if(m&&m!==k){let a=Math.floor(l/m),c="InterleavedBuffer:"+d.bufferView+":"+d.componentType+":"+a+":"+d.count,k=b.cache.get(c);k||(e=new i(g,a*m,d.count*m/j),k=new c0.InterleavedBuffer(e,m/j),b.cache.add(c,k)),f=new c0.InterleavedBufferAttribute(k,h,l%m/j,n)}else e=null===g?new i(d.count*h):new i(g,l,d.count*h),f=new c0.BufferAttribute(e,h,n);if(void 0!==d.sparse){let b=dP.SCALAR,c=dM[d.sparse.indices.componentType],e=d.sparse.indices.byteOffset||0,j=d.sparse.values.byteOffset||0,k=new c(a[1],e,d.sparse.count*b),l=new i(a[2],j,d.sparse.count*h);null!==g&&(f=new c0.BufferAttribute(f.array.slice(),f.itemSize,f.normalized)),f.normalized=!1;for(let a=0,b=k.length;a<b;a++){let b=k[a];if(f.setX(b,l[a*h]),h>=2&&f.setY(b,l[a*h+1]),h>=3&&f.setZ(b,l[a*h+2]),h>=4&&f.setW(b,l[a*h+3]),h>=5)throw Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}f.normalized=n}return f})}loadTexture(a){let b=this.json,c=this.options,d=b.textures[a].source,e=b.images[d],f=this.textureLoader;if(e.uri){let a=c.manager.getHandler(e.uri);null!==a&&(f=a)}return this.loadTextureImage(a,d,f)}loadTextureImage(a,b,c){let d=this,e=this.json,f=e.textures[a],g=e.images[b],h=(g.uri||g.bufferView)+":"+f.sampler;if(this.textureCache[h])return this.textureCache[h];let i=this.loadImageSource(b,c).then(function(b){b.flipY=!1,b.name=f.name||g.name||"",""===b.name&&"string"==typeof g.uri&&!1===g.uri.startsWith("data:image/")&&(b.name=g.uri);let c=(e.samplers||{})[f.sampler]||{};return b.magFilter=dN[c.magFilter]||c0.LinearFilter,b.minFilter=dN[c.minFilter]||c0.LinearMipmapLinearFilter,b.wrapS=dO[c.wrapS]||c0.RepeatWrapping,b.wrapT=dO[c.wrapT]||c0.RepeatWrapping,b.generateMipmaps=!b.isCompressedTexture&&b.minFilter!==c0.NearestFilter&&b.minFilter!==c0.LinearFilter,d.associations.set(b,{textures:a}),b}).catch(function(){return null});return this.textureCache[h]=i,i}loadImageSource(a,b){let c=this.json,d=this.options;if(void 0!==this.sourceCache[a])return this.sourceCache[a].then(a=>a.clone());let e=c.images[a],f=self.URL||self.webkitURL,g=e.uri||"",h=!1;if(void 0!==e.bufferView)g=this.getDependency("bufferView",e.bufferView).then(function(a){h=!0;let b=new Blob([a],{type:e.mimeType});return g=f.createObjectURL(b)});else if(void 0===e.uri)throw Error("THREE.GLTFLoader: Image "+a+" is missing URI and bufferView");let i=Promise.resolve(g).then(function(a){return new Promise(function(c,e){let f=c;!0===b.isImageBitmapLoader&&(f=function(a){let b=new c0.Texture(a);b.needsUpdate=!0,c(b)}),b.load(c0.LoaderUtils.resolveURL(a,d.path),f,void 0,e)})}).then(function(a){var b;return!0===h&&f.revokeObjectURL(g),dU(a,e),a.userData.mimeType=e.mimeType||((b=e.uri).search(/\.jpe?g($|\?)/i)>0||0===b.search(/^data\:image\/jpeg/)?"image/jpeg":b.search(/\.webp($|\?)/i)>0||0===b.search(/^data\:image\/webp/)?"image/webp":b.search(/\.ktx2($|\?)/i)>0||0===b.search(/^data\:image\/ktx2/)?"image/ktx2":"image/png"),a}).catch(function(a){throw console.error("THREE.GLTFLoader: Couldn't load texture",g),a});return this.sourceCache[a]=i,i}assignTexture(a,b,c,d){let e=this;return this.getDependency("texture",c.index).then(function(f){if(!f)return null;if(void 0!==c.texCoord&&c.texCoord>0&&((f=f.clone()).channel=c.texCoord),e.extensions[dj.KHR_TEXTURE_TRANSFORM]){let a=void 0!==c.extensions?c.extensions[dj.KHR_TEXTURE_TRANSFORM]:void 0;if(a){let b=e.associations.get(f);f=e.extensions[dj.KHR_TEXTURE_TRANSFORM].extendTexture(f,a),e.associations.set(f,b)}}return void 0!==d&&(f.colorSpace=d),a[b]=f,f})}assignFinalMaterial(a){let b=a.geometry,c=a.material,d=void 0===b.attributes.tangent,e=void 0!==b.attributes.color,f=void 0===b.attributes.normal;if(a.isPoints){let a="PointsMaterial:"+c.uuid,b=this.cache.get(a);b||(b=new c0.PointsMaterial,c0.Material.prototype.copy.call(b,c),b.color.copy(c.color),b.map=c.map,b.sizeAttenuation=!1,this.cache.add(a,b)),c=b}else if(a.isLine){let a="LineBasicMaterial:"+c.uuid,b=this.cache.get(a);b||(b=new c0.LineBasicMaterial,c0.Material.prototype.copy.call(b,c),b.color.copy(c.color),b.map=c.map,this.cache.add(a,b)),c=b}if(d||e||f){let a="ClonedMaterial:"+c.uuid+":";d&&(a+="derivative-tangents:"),e&&(a+="vertex-colors:"),f&&(a+="flat-shading:");let b=this.cache.get(a);b||(b=c.clone(),e&&(b.vertexColors=!0),f&&(b.flatShading=!0),d&&(b.normalScale&&(b.normalScale.y*=-1),b.clearcoatNormalScale&&(b.clearcoatNormalScale.y*=-1)),this.cache.add(a,b),this.associations.set(b,this.associations.get(c))),c=b}a.material=c}getMaterialType(){return c0.MeshStandardMaterial}loadMaterial(a){let b,c=this,d=this.json,e=this.extensions,f=d.materials[a],g={},h=[];if((f.extensions||{})[dj.KHR_MATERIALS_UNLIT]){let a=e[dj.KHR_MATERIALS_UNLIT];b=a.getMaterialType(),h.push(a.extendParams(g,f,c))}else{let d=f.pbrMetallicRoughness||{};if(g.color=new c0.Color(1,1,1),g.opacity=1,Array.isArray(d.baseColorFactor)){let a=d.baseColorFactor;g.color.setRGB(a[0],a[1],a[2],c0.LinearSRGBColorSpace),g.opacity=a[3]}void 0!==d.baseColorTexture&&h.push(c.assignTexture(g,"map",d.baseColorTexture,c0.SRGBColorSpace)),g.metalness=void 0!==d.metallicFactor?d.metallicFactor:1,g.roughness=void 0!==d.roughnessFactor?d.roughnessFactor:1,void 0!==d.metallicRoughnessTexture&&(h.push(c.assignTexture(g,"metalnessMap",d.metallicRoughnessTexture)),h.push(c.assignTexture(g,"roughnessMap",d.metallicRoughnessTexture))),b=this._invokeOne(function(b){return b.getMaterialType&&b.getMaterialType(a)}),h.push(Promise.all(this._invokeAll(function(b){return b.extendMaterialParams&&b.extendMaterialParams(a,g)})))}!0===f.doubleSided&&(g.side=c0.DoubleSide);let i=f.alphaMode||"OPAQUE";if("BLEND"===i?(g.transparent=!0,g.depthWrite=!1):(g.transparent=!1,"MASK"===i&&(g.alphaTest=void 0!==f.alphaCutoff?f.alphaCutoff:.5)),void 0!==f.normalTexture&&b!==c0.MeshBasicMaterial&&(h.push(c.assignTexture(g,"normalMap",f.normalTexture)),g.normalScale=new c0.Vector2(1,1),void 0!==f.normalTexture.scale)){let a=f.normalTexture.scale;g.normalScale.set(a,a)}if(void 0!==f.occlusionTexture&&b!==c0.MeshBasicMaterial&&(h.push(c.assignTexture(g,"aoMap",f.occlusionTexture)),void 0!==f.occlusionTexture.strength&&(g.aoMapIntensity=f.occlusionTexture.strength)),void 0!==f.emissiveFactor&&b!==c0.MeshBasicMaterial){let a=f.emissiveFactor;g.emissive=(new c0.Color).setRGB(a[0],a[1],a[2],c0.LinearSRGBColorSpace)}return void 0!==f.emissiveTexture&&b!==c0.MeshBasicMaterial&&h.push(c.assignTexture(g,"emissiveMap",f.emissiveTexture,c0.SRGBColorSpace)),Promise.all(h).then(function(){let d=new b(g);return f.name&&(d.name=f.name),dU(d,f),c.associations.set(d,{materials:a}),f.extensions&&dT(e,d,f),d})}createUniqueName(a){let b=c0.PropertyBinding.sanitizeNodeName(a||"");return b in this.nodeNamesUsed?b+"_"+ ++this.nodeNamesUsed[b]:(this.nodeNamesUsed[b]=0,b)}loadGeometries(a){let b=this,c=this.extensions,d=this.primitiveCache,e=[];for(let f=0,g=a.length;f<g;f++){let g=a[f],h=function(a){let b,c=a.extensions&&a.extensions[dj.KHR_DRACO_MESH_COMPRESSION];if(b=c?"draco:"+c.bufferView+":"+c.indices+":"+dV(c.attributes):a.indices+":"+dV(a.attributes)+":"+a.mode,void 0!==a.targets)for(let c=0,d=a.targets.length;c<d;c++)b+=":"+dV(a.targets[c]);return b}(g),i=d[h];if(i)e.push(i.promise);else{let a;a=g.extensions&&g.extensions[dj.KHR_DRACO_MESH_COMPRESSION]?function(a){return c[dj.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(a,b).then(function(c){return dZ(c,a,b)})}(g):dZ(new c0.BufferGeometry,g,b),d[h]={primitive:g,promise:a},e.push(a)}}return Promise.all(e)}loadMesh(a){let b=this,c=this.json,d=this.extensions,e=c.meshes[a],f=e.primitives,g=[];for(let a=0,b=f.length;a<b;a++){var h;let b=void 0===f[a].material?(void 0===(h=this.cache).DefaultMaterial&&(h.DefaultMaterial=new c0.MeshStandardMaterial({color:0xffffff,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:c0.FrontSide})),h.DefaultMaterial):this.getDependency("material",f[a].material);g.push(b)}return g.push(b.loadGeometries(f)),Promise.all(g).then(function(c){let g=c.slice(0,c.length-1),h=c[c.length-1],i=[];for(let c=0,j=h.length;c<j;c++){let j,k=h[c],l=f[c],m=g[c];if(l.mode===dL.TRIANGLES||l.mode===dL.TRIANGLE_STRIP||l.mode===dL.TRIANGLE_FAN||void 0===l.mode)!0===(j=!0===e.isSkinnedMesh?new c0.SkinnedMesh(k,m):new c0.Mesh(k,m)).isSkinnedMesh&&j.normalizeSkinWeights(),l.mode===dL.TRIANGLE_STRIP?j.geometry=dd(j.geometry,c0.TriangleStripDrawMode):l.mode===dL.TRIANGLE_FAN&&(j.geometry=dd(j.geometry,c0.TriangleFanDrawMode));else if(l.mode===dL.LINES)j=new c0.LineSegments(k,m);else if(l.mode===dL.LINE_STRIP)j=new c0.Line(k,m);else if(l.mode===dL.LINE_LOOP)j=new c0.LineLoop(k,m);else{if(l.mode!==dL.POINTS)throw Error("THREE.GLTFLoader: Primitive mode unsupported: "+l.mode);j=new c0.Points(k,m)}Object.keys(j.geometry.morphAttributes).length>0&&function(a,b){if(a.updateMorphTargets(),void 0!==b.weights)for(let c=0,d=b.weights.length;c<d;c++)a.morphTargetInfluences[c]=b.weights[c];if(b.extras&&Array.isArray(b.extras.targetNames)){let c=b.extras.targetNames;if(a.morphTargetInfluences.length===c.length){a.morphTargetDictionary={};for(let b=0,d=c.length;b<d;b++)a.morphTargetDictionary[c[b]]=b}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}(j,e),j.name=b.createUniqueName(e.name||"mesh_"+a),dU(j,e),l.extensions&&dT(d,j,l),b.assignFinalMaterial(j),i.push(j)}for(let c=0,d=i.length;c<d;c++)b.associations.set(i[c],{meshes:a,primitives:c});if(1===i.length)return e.extensions&&dT(d,i[0],e),i[0];let j=new c0.Group;e.extensions&&dT(d,j,e),b.associations.set(j,{meshes:a});for(let a=0,b=i.length;a<b;a++)j.add(i[a]);return j})}loadCamera(a){let b,c=this.json.cameras[a],d=c[c.type];if(d)return"perspective"===c.type?b=new c0.PerspectiveCamera(c0.MathUtils.radToDeg(d.yfov),d.aspectRatio||1,d.znear||1,d.zfar||2e6):"orthographic"===c.type&&(b=new c0.OrthographicCamera(-d.xmag,d.xmag,d.ymag,-d.ymag,d.znear,d.zfar)),c.name&&(b.name=this.createUniqueName(c.name)),dU(b,c),Promise.resolve(b);console.warn("THREE.GLTFLoader: Missing camera parameters.")}loadSkin(a){let b=this.json.skins[a],c=[];for(let a=0,d=b.joints.length;a<d;a++)c.push(this._loadNodeShallow(b.joints[a]));return void 0!==b.inverseBindMatrices?c.push(this.getDependency("accessor",b.inverseBindMatrices)):c.push(null),Promise.all(c).then(function(a){let c=a.pop(),d=[],e=[];for(let f=0,g=a.length;f<g;f++){let g=a[f];if(g){d.push(g);let a=new c0.Matrix4;null!==c&&a.fromArray(c.array,16*f),e.push(a)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',b.joints[f])}return new c0.Skeleton(d,e)})}loadAnimation(a){let b=this.json,c=this,d=b.animations[a],e=d.name?d.name:"animation_"+a,f=[],g=[],h=[],i=[],j=[];for(let a=0,b=d.channels.length;a<b;a++){let b=d.channels[a],c=d.samplers[b.sampler],e=b.target,k=e.node,l=void 0!==d.parameters?d.parameters[c.input]:c.input,m=void 0!==d.parameters?d.parameters[c.output]:c.output;void 0!==e.node&&(f.push(this.getDependency("node",k)),g.push(this.getDependency("accessor",l)),h.push(this.getDependency("accessor",m)),i.push(c),j.push(e))}return Promise.all([Promise.all(f),Promise.all(g),Promise.all(h),Promise.all(i),Promise.all(j)]).then(function(a){let b=a[0],d=a[1],f=a[2],g=a[3],h=a[4],i=[];for(let a=0,e=b.length;a<e;a++){let e=b[a],j=d[a],k=f[a],l=g[a],m=h[a];if(void 0===e)continue;e.updateMatrix&&e.updateMatrix();let n=c._createAnimationTracks(e,j,k,l,m);if(n)for(let a=0;a<n.length;a++)i.push(n[a])}return new c0.AnimationClip(e,void 0,i)})}createNodeMesh(a){let b=this.json,c=this,d=b.nodes[a];return void 0===d.mesh?null:c.getDependency("mesh",d.mesh).then(function(a){let b=c._getNodeRef(c.meshCache,d.mesh,a);return void 0!==d.weights&&b.traverse(function(a){if(a.isMesh)for(let b=0,c=d.weights.length;b<c;b++)a.morphTargetInfluences[b]=d.weights[b]}),b})}loadNode(a){let b=this.json.nodes[a],c=this._loadNodeShallow(a),d=[],e=b.children||[];for(let a=0,b=e.length;a<b;a++)d.push(this.getDependency("node",e[a]));let f=void 0===b.skin?Promise.resolve(null):this.getDependency("skin",b.skin);return Promise.all([c,Promise.all(d),f]).then(function(a){let b=a[0],c=a[1],d=a[2];null!==d&&b.traverse(function(a){a.isSkinnedMesh&&a.bind(d,dX)});for(let a=0,d=c.length;a<d;a++)b.add(c[a]);return b})}_loadNodeShallow(a){let b=this.json,c=this.extensions,d=this;if(void 0!==this.nodeCache[a])return this.nodeCache[a];let e=b.nodes[a],f=e.name?d.createUniqueName(e.name):"",g=[],h=d._invokeOne(function(b){return b.createNodeMesh&&b.createNodeMesh(a)});return h&&g.push(h),void 0!==e.camera&&g.push(d.getDependency("camera",e.camera).then(function(a){return d._getNodeRef(d.cameraCache,e.camera,a)})),d._invokeAll(function(b){return b.createNodeAttachment&&b.createNodeAttachment(a)}).forEach(function(a){g.push(a)}),this.nodeCache[a]=Promise.all(g).then(function(b){let g;if((g=!0===e.isBone?new c0.Bone:b.length>1?new c0.Group:1===b.length?b[0]:new c0.Object3D)!==b[0])for(let a=0,c=b.length;a<c;a++)g.add(b[a]);if(e.name&&(g.userData.name=e.name,g.name=f),dU(g,e),e.extensions&&dT(c,g,e),void 0!==e.matrix){let a=new c0.Matrix4;a.fromArray(e.matrix),g.applyMatrix4(a)}else void 0!==e.translation&&g.position.fromArray(e.translation),void 0!==e.rotation&&g.quaternion.fromArray(e.rotation),void 0!==e.scale&&g.scale.fromArray(e.scale);return d.associations.has(g)||d.associations.set(g,{}),d.associations.get(g).nodes=a,g}),this.nodeCache[a]}loadScene(a){let b=this.extensions,c=this.json.scenes[a],d=this,e=new c0.Group;c.name&&(e.name=d.createUniqueName(c.name)),dU(e,c),c.extensions&&dT(b,e,c);let f=c.nodes||[],g=[];for(let a=0,b=f.length;a<b;a++)g.push(d.getDependency("node",f[a]));return Promise.all(g).then(function(a){for(let b=0,c=a.length;b<c;b++)e.add(a[b]);return d.associations=(a=>{let b=new Map;for(let[a,c]of d.associations)(a instanceof c0.Material||a instanceof c0.Texture)&&b.set(a,c);return a.traverse(a=>{let c=d.associations.get(a);null!=c&&b.set(a,c)}),b})(e),e})}_createAnimationTracks(a,b,c,d,e){let f,g=[],h=a.name?a.name:a.uuid,i=[];switch(dR[e.path]===dR.weights?a.traverse(function(a){a.morphTargetInfluences&&i.push(a.name?a.name:a.uuid)}):i.push(h),dR[e.path]){case dR.weights:f=c0.NumberKeyframeTrack;break;case dR.rotation:f=c0.QuaternionKeyframeTrack;break;case dR.position:case dR.scale:f=c0.VectorKeyframeTrack;break;default:f=1===c.itemSize?c0.NumberKeyframeTrack:c0.VectorKeyframeTrack}let j=void 0!==d.interpolation?dS[d.interpolation]:c0.InterpolateLinear,k=this._getArrayFromAccessor(c);for(let a=0,c=i.length;a<c;a++){let c=new f(i[a]+"."+dR[e.path],b.array,k,j);"CUBICSPLINE"===d.interpolation&&this._createCubicSplineTrackInterpolant(c),g.push(c)}return g}_getArrayFromAccessor(a){let b=a.array;if(a.normalized){let a=dW(b.constructor),c=new Float32Array(b.length);for(let d=0,e=b.length;d<e;d++)c[d]=b[d]*a;b=c}return b}_createCubicSplineTrackInterpolant(a){a.createInterpolant=function(a){return new(this instanceof c0.QuaternionKeyframeTrack?dK:dI)(this.times,this.values,this.getValueSize()/3,a)},a.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0}}function dZ(a,b,c){let d=b.attributes,e=[];for(let b in d){let f=dQ[b]||b.toLowerCase();f in a.attributes||e.push(function(b,d){return c.getDependency("accessor",b).then(function(b){a.setAttribute(d,b)})}(d[b],f))}if(void 0!==b.indices&&!a.index){let d=c.getDependency("accessor",b.indices).then(function(b){a.setIndex(b)});e.push(d)}return c0.ColorManagement.workingColorSpace!==c0.LinearSRGBColorSpace&&"COLOR_0"in d&&console.warn(`THREE.GLTFLoader: Converting vertex colors from "srgb-linear" to "${c0.ColorManagement.workingColorSpace}" not supported.`),dU(a,b),function(a,b,c){let d=b.attributes,e=new c0.Box3;if(void 0===d.POSITION)return;{let a=c.json.accessors[d.POSITION],b=a.min,f=a.max;if(void 0===b||void 0===f)return console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");if(e.set(new c0.Vector3(b[0],b[1],b[2]),new c0.Vector3(f[0],f[1],f[2])),a.normalized){let b=dW(dM[a.componentType]);e.min.multiplyScalar(b),e.max.multiplyScalar(b)}}let f=b.targets;if(void 0!==f){let a=new c0.Vector3,b=new c0.Vector3;for(let d=0,e=f.length;d<e;d++){let e=f[d];if(void 0!==e.POSITION){let d=c.json.accessors[e.POSITION],f=d.min,g=d.max;if(void 0!==f&&void 0!==g){if(b.setX(Math.max(Math.abs(f[0]),Math.abs(g[0]))),b.setY(Math.max(Math.abs(f[1]),Math.abs(g[1]))),b.setZ(Math.max(Math.abs(f[2]),Math.abs(g[2]))),d.normalized){let a=dW(dM[d.componentType]);b.multiplyScalar(a)}a.max(b)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}e.expandByVector(a)}a.boundingBox=e;let g=new c0.Sphere;e.getCenter(g.center),g.radius=e.min.distanceTo(e.max)/2,a.boundingSphere=g}(a,b,c),Promise.all(e).then(function(){return void 0!==b.targets?function(a,b,c){let d=!1,e=!1,f=!1;for(let a=0,c=b.length;a<c;a++){let c=b[a];if(void 0!==c.POSITION&&(d=!0),void 0!==c.NORMAL&&(e=!0),void 0!==c.COLOR_0&&(f=!0),d&&e&&f)break}if(!d&&!e&&!f)return Promise.resolve(a);let g=[],h=[],i=[];for(let j=0,k=b.length;j<k;j++){let k=b[j];if(d){let b=void 0!==k.POSITION?c.getDependency("accessor",k.POSITION):a.attributes.position;g.push(b)}if(e){let b=void 0!==k.NORMAL?c.getDependency("accessor",k.NORMAL):a.attributes.normal;h.push(b)}if(f){let b=void 0!==k.COLOR_0?c.getDependency("accessor",k.COLOR_0):a.attributes.color;i.push(b)}}return Promise.all([Promise.all(g),Promise.all(h),Promise.all(i)]).then(function(b){let c=b[0],g=b[1],h=b[2];return d&&(a.morphAttributes.position=c),e&&(a.morphAttributes.normal=g),f&&(a.morphAttributes.color=h),a.morphTargetsRelative=!0,a})}(a,b.targets,c):a})}class d${constructor(a=4){this.pool=a,this.queue=[],this.workers=[],this.workersResolve=[],this.workerStatus=0}_initWorker(a){if(!this.workers[a]){let b=this.workerCreator();b.addEventListener("message",this._onMessage.bind(this,a)),this.workers[a]=b}}_getIdleWorker(){for(let a=0;a<this.pool;a++)if(!(this.workerStatus&1<<a))return a;return -1}_onMessage(a,b){let c=this.workersResolve[a];if(c&&c(b),this.queue.length){let{resolve:b,msg:c,transfer:d}=this.queue.shift();this.workersResolve[a]=b,this.workers[a].postMessage(c,d)}else this.workerStatus^=1<<a}setWorkerCreator(a){this.workerCreator=a}setWorkerLimit(a){this.pool=a}postMessage(a,b){return new Promise(c=>{let d=this._getIdleWorker();-1!==d?(this._initWorker(d),this.workerStatus|=1<<d,this.workersResolve[d]=c,this.workers[d].postMessage(a,b)):this.queue.push({resolve:c,msg:a,transfer:b})})}dispose(){this.workers.forEach(a=>a.terminate()),this.workersResolve.length=0,this.workers.length=0,this.queue.length=0,this.workerStatus=0}}class d_{constructor(){this.vkFormat=0,this.typeSize=1,this.pixelWidth=0,this.pixelHeight=0,this.pixelDepth=0,this.layerCount=0,this.faceCount=1,this.supercompressionScheme=0,this.levels=[],this.dataFormatDescriptor=[{vendorId:0,descriptorType:0,descriptorBlockSize:0,versionNumber:2,colorModel:0,colorPrimaries:1,transferFunction:2,flags:0,texelBlockDimension:[0,0,0,0],bytesPlane:[0,0,0,0,0,0,0,0],samples:[]}],this.keyValue={},this.globalData=null}}class d0{constructor(a,b,c,d){this._dataView=void 0,this._littleEndian=void 0,this._offset=void 0,this._dataView=new DataView(a.buffer,a.byteOffset+b,c),this._littleEndian=d,this._offset=0}_nextUint8(){let a=this._dataView.getUint8(this._offset);return this._offset+=1,a}_nextUint16(){let a=this._dataView.getUint16(this._offset,this._littleEndian);return this._offset+=2,a}_nextUint32(){let a=this._dataView.getUint32(this._offset,this._littleEndian);return this._offset+=4,a}_nextUint64(){let a=this._dataView.getUint32(this._offset,this._littleEndian)+0x100000000*this._dataView.getUint32(this._offset+4,this._littleEndian);return this._offset+=8,a}_nextInt32(){let a=this._dataView.getInt32(this._offset,this._littleEndian);return this._offset+=4,a}_nextUint8Array(a){let b=new Uint8Array(this._dataView.buffer,this._dataView.byteOffset+this._offset,a);return this._offset+=a,b}_skip(a){return this._offset+=a,this}_scan(a,b){void 0===b&&(b=0);let c=this._offset,d=0;for(;this._dataView.getUint8(this._offset)!==b&&d<a;)d++,this._offset++;return d<a&&this._offset++,new Uint8Array(this._dataView.buffer,this._dataView.byteOffset+c,d)}}new Uint8Array([0]);let d1=[171,75,84,88,32,50,48,187,13,10,26,10];function d2(a){return(new TextDecoder).decode(a)}var d3=bL(9922).hp;let d4={env:{emscripten_notify_memory_growth:function(a){f=new Uint8Array(e.exports.memory.buffer)}}};class d5{init(){return d||(d="undefined"!=typeof fetch?fetch("data:application/wasm;base64,"+d6).then(a=>a.arrayBuffer()).then(a=>WebAssembly.instantiate(a,d4)).then(this._init):WebAssembly.instantiate(d3.from(d6,"base64"),d4).then(this._init))}_init(a){e=a.instance,d4.env.emscripten_notify_memory_growth(0)}decode(a,b=0){if(!e)throw Error("ZSTDDecoder: Await .init() before decoding.");let c=a.byteLength,d=e.exports.malloc(c);f.set(a,d),b=b||Number(e.exports.ZSTD_findDecompressedSize(d,c));let g=e.exports.malloc(b),h=e.exports.ZSTD_decompress(g,b,d,c),i=f.slice(g,g+h);return e.exports.free(d),e.exports.free(g),i}}let d6="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IAMNACAEQQNxBEADQCACRQ0FIAAgAkF/aiICaiIDIAEgAmotAAA6AAAgA0EDcQ0ACwsgAkEDTQ0AA0AgACACQXxqIgJqIAEgAmooAgA2AgAgAkEDSw0ACwsgAkUNAgNAIAAgAkF/aiICaiABIAJqLQAAOgAAIAINAAsMAgsgAkEDTQ0AIAIhBANAIAMgASgCADYCACABQQRqIQEgA0EEaiEDIARBfGoiBEEDSw0ACyACQQNxIQILIAJFDQADQCADIAEtAAA6AAAgA0EBaiEDIAFBAWohASACQX9qIgINAAsLIAAL8wICAn8BfgJAIAJFDQAgACACaiIDQX9qIAE6AAAgACABOgAAIAJBA0kNACADQX5qIAE6AAAgACABOgABIANBfWogAToAACAAIAE6AAIgAkEHSQ0AIANBfGogAToAACAAIAE6AAMgAkEJSQ0AIABBACAAa0EDcSIEaiIDIAFB/wFxQYGChAhsIgE2AgAgAyACIARrQXxxIgRqIgJBfGogATYCACAEQQlJDQAgAyABNgIIIAMgATYCBCACQXhqIAE2AgAgAkF0aiABNgIAIARBGUkNACADIAE2AhggAyABNgIUIAMgATYCECADIAE2AgwgAkFwaiABNgIAIAJBbGogATYCACACQWhqIAE2AgAgAkFkaiABNgIAIAQgA0EEcUEYciIEayICQSBJDQAgAa0iBUIghiAFhCEFIAMgBGohAQNAIAEgBTcDGCABIAU3AxAgASAFNwMIIAEgBTcDACABQSBqIQEgAkFgaiICQR9LDQALCyAACy8BAn8gACgCBCAAKAIAQQJ0aiICLQACIQMgACACLwEAIAEgAi0AAxAIajYCACADCy8BAn8gACgCBCAAKAIAQQJ0aiICLQACIQMgACACLwEAIAEgAi0AAxAFajYCACADCx8AIAAgASACKAIEEAg2AgAgARAEGiAAIAJBCGo2AgQLCAAgAGdBH3MLugUBDX8jAEEQayIKJAACfyAEQQNNBEAgCkEANgIMIApBDGogAyAEEAsaIAAgASACIApBDGpBBBAVIgBBbCAAEAMbIAAgACAESxsMAQsgAEEAIAEoAgBBAXRBAmoQECENQVQgAygAACIGQQ9xIgBBCksNABogAiAAQQVqNgIAIAMgBGoiAkF8aiEMIAJBeWohDiACQXtqIRAgAEEGaiELQQQh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ASIDNgLE4AEgACgCvOABIQQgACABNgK84AEgACABIAJqNgK44AEgACABIAQgA2tqNgLA4AELpgEBAX8gACAAKALs4QEQFjYCyOABIABCADcD+OABIABCADcDuOABIABBwOABakIANwMAIABBqNAAaiIBQYyAgOAANgIAIABBADYCmOIBIABCADcDiOEBIABCAzcDgOEBIABBrNABakHgEikCADcCACAAQbTQAWpB6BIoAgA2AgAgACABNgIMIAAgAEGYIGo2AgggACAAQaAwajYCBCAAIABBEGo2AgALYQEBf0G4fyEDAkAgAUEDSQ0AIAIgABAhIgFBA3YiADYCCCACIAFBAXE2AgQgAiABQQF2QQNxIgM2AgACQCADQX9qIgFBAksNAAJAIAFBAWsOAgEAAgtBbA8LIAAhAwsgAwsMACAAIAEgAkEAEC4LiAQCA38CfiADEBYhBCAAQQBBKBAQIQAgBCACSwRAIAQPCyABRQRAQX8PCwJAAkAgA0EBRg0AIAEoAAAiBkGo6r5pRg0AQXYhAyAGQXBxQdDUtMIBRw0BQQghAyACQQhJDQEgAEEAQSgQECEAIAEoAAQhASAAQQE2AhQgACABrTcDAEEADwsgASACIAMQLyIDIAJLDQAgACADNgIYQXIhAyABIARqIgVBf2otAAAiAkEIcQ0AIAJBIHEiBkUEQEFwIQMgBS0AACIFQacBSw0BIAVBB3GtQgEgBUEDdkEKaq2GIgdCA4h+IAd8IQggBEEBaiEECyACQQZ2IQMgAkECdiEFAkAgAkEDcUF/aiICQQJLBEBBACECDAELAkACQAJAIAJBAWsOAgECAAsgASAEai0AACECIARBAWohBAwCCyABIARqLwAAIQIgBEECaiEEDAELIAEgBGooAAAhAiAEQQRqIQQLIAVBAXEhBQJ+AkACQAJAIANBf2oiA0ECTQRAIANBAWsOAgIDAQtCfyAGRQ0DGiABIARqMQAADAMLIAEgBGovAACtQoACfAwCCyABIARqKAAArQwBCyABIARqKQAACyEHIAAgBTYCICAAIAI2AhwgACAHNwMAQQAhAyAAQQA2AhQgACAHIAggBhsiBzcDCCAAIAdCgIAIIAdCgIAIVBs+AhALIAMLWwEBf0G4fyEDIAIQFiICIAFNBH8gACACakF/ai0AACIAQQNxQQJ0QaAeaigC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C0Egak8NAQsgByAHKQNoNwMQIAcgBykDYDcDCCAEIA0gB0EIaiAHQdwAaiAPIA4gESAQEB4hCwwBCyACIARqIQggBCAKEAcgAkERTwRAIARBEGohAgNAIAIgCkEQaiIKEAcgAkEQaiICIAhJDQALCyAIIAlrIQIgByATNgJcIAkgCCAOa0sEQCAJIAggEWtLBEBBbCELDAILIBAgAiAOayICaiIKIANqIBBNBEAgCCAKIAMQDxoMAgsgCCAKQQAgAmsQDyEIIAcgAiADaiIDNgJkIAggAmshCCAOIQILIAlBEE8EQCADIAhqIQMDQCAIIAIQByACQRBqIQIgCEEQaiIIIANJDQALDAELAkAgCUEHTQRAIAggAi0AADoAACAIIAItAAE6AAEgCCACLQACOgACIAggAi0AAzoAAyAIQQRqIAIgCUECdCIDQcAeaigCAGoiAhAXIAIgA0HgHmooAgBrIQIgBygCZCEDDAELIAggAhAMCyADQQlJDQAgAyAIaiEDIAhBCGoiCCACQQhqIgJrQQ9MBEADQCAIIAIQDCACQQhqIQIgCEEIaiIIIANJDQAMAgALAAsDQCAIIAIQByACQRBqIQIgCEEQaiIIIANJDQALCyAHQRhqEAQaIAsgDCALEAMiAhshDCAEIAQgC2ogAhshBCAFQX9qIgUNAAsgDBADDQFBbCEMIAdBGGoQBEECSQ0BQQAhCANAIAhBA0cEQCAAIAhBAnQiAmpBrNABaiACIAdqKAJENgIAIAhBAWohCAwBCwsgBygCXCEIC0G6fyEMIA8gCGsiACANIARrSw0AIAQEfyAEIAggABALIABqBUEACyABayEMCyAHQfAAaiQAIAwLkRcCFn8FfiMAQdABayIHJAAgByAAKALw4QEiCDYCvAEgASACaiESIAggACgCgOIBaiETAkACQCAFRQRAIAEhAwwBCyAAKALE4AEhESAAKALA4AEhFSAAKAK84AEhDyAAQQE2AozhAUEAIQgDQCAIQQNHBEAgByAIQQJ0IgJqIAAgAmpBrNABaigCADYCVCAIQQFqIQgMAQsLIAcgETYCZCAHIA82AmAgByABIA9rNgJoQWwhECAHQShqIAMgBBAGEAMNASAFQQQgBUEESBshFyAHQTxqIAdBKGogACgCABATIAdBxABqIAdBKGogACgCCBATIAdBzABqIAdB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IAdB0AFqJAAgEAslACAAQgA3AgAgAEEAOwEIIABBADoACyAAIAE2AgwgACACOgAKC7QFAQN/IwBBMGsiBCQAIABB/wFqIgVBfWohBgJAIAMvAQIEQCAEQRhqIAEgAhAGIgIQAw0BIARBEGogBEEYaiADEBwgBEEIaiAEQRhqIAMQHCAAIQMDQAJAIARBGGoQBCADIAZPckUEQCADIARBEGogBEEYahASOgAAIAMgBEEIaiAEQRhqEBI6AAEgBEEYahAERQ0BIANBAmohAwsgBUF+aiEFAn8DQEG6fyECIAMiASAFSw0FIAEgBEEQaiAEQRhqEBI6AAAgAUEBaiEDIARBGGoQBEEDRgRAQQIhAiAEQQhqDAILIAMgBUsNBSABIARBCGogBEEYahASOgABIAFBAmohA0EDIQIgBEEYahAEQQNHDQALIARBEGoLIQUgAyAFIARBGGoQEjoAACABIAJqIABrIQIMAwsgAyAEQRBqIARBGGoQEjoAAiADIARBCGogBEEYahASOgADIANBBGohAwwAAAsACyAEQRhqIAEgAhAGIgIQAw0AIARBEGogBEEYaiADEBwgBEEIaiAEQRhqIAMQHCAAIQMDQAJAIARBGGoQBCADIAZPckUEQCADIARBEGogBEEYahAROgAAIAMgBEEIaiAEQRhqEBE6AAEgBEEYahAERQ0BIANBAmohAwsgBUF+aiEFAn8DQEG6fyECIAMiASAFSw0EIAEgBEEQaiAEQRhqEBE6AAAgAUEBaiEDIARBGGoQBEEDRgRAQQIhAiAEQQhqDAILIAMgBUsNBCABIARBCGogBEEYahAROgABIAFBAmohA0EDIQIgBEEYahAEQQNHDQALIARBEGoLIQUgAyAFIARBGGoQEToAACABIAJqIABrIQIMAgsgAyAEQRBqIARBGGoQEToAAiADIARBCGogBEEYahAROgADIANBBGohAwwAAAsACyAEQTBqJAAgAgtpAQF/An8CQAJAIAJBB00NACABKAAAQbfIwuF+Rw0AIAAgASgABDYCmOIBQWIgAEEQaiABIAIQPiIDEAMNAhogAEKBgICAEDcDiOEBIAAgASADaiACIANrECoMAQsgACABIAIQKgtBAAsLrQMBBn8jAEGAAWsiAyQAQWIhCAJAIAJBCUkNACAAQZjQAGogAUEIaiIEIAJBeGogAEGY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wOABCwutAgIEfwF+IwBBQGoiBCQAAkACQCACQQhJDQAgASgAAEFwcUHQ1LTCAUcNACABIAIQIiEBIABCADcDCCAAQQA2AgQgACABNgIADAELIARBGGogASACEC0iAxADBEAgACADEBoMAQsgAwRAIABBuH8QGgwBCyACIAQoAjAiA2shAiABIANqIQMDQAJAIAAgAyACIARBCGoQLCIFEAMEfyAFBSACIAVBA2oiBU8NAUG4fwsQGgwCCyAGQQFqIQYgAiAFayECIAMgBWohAyAEKAIMRQ0ACyAEKAI4BEAgAkEDTQRAIABBuH8QGgwCCyADQQRqIQMLIAQoAighAiAEKQMYIQcgAEEANgIEIAAgAyABazYCACAAIAIgBmytIAcgB0J/URs3AwgLIARBQGskAAslAQF/IwBBEGsiAiQAIAIgACABEFEgAigCACEAIAJBEGokACAAC30BBH8jAEGQBGsiBCQAIARB/wE2AggCQCAEQRBqIARBCGogBEEMaiABIAIQFSIGEAMEQCAGIQUMAQtBVCEFIAQoAgwiB0EGSw0AIAMgBEEQaiAEKAIIIAcQQSIFEAMNACAAIAEgBmogAiAGayADEDwhBQsgBEGQBGokACAFC4cBAgJ/An5BABAWIQMCQANAIAEgA08EQAJAIAAoAABBcHFB0NS0wgFGBEAgACABECIiAhADRQ0BQn4PCyAAIAEQVSIEQn1WDQMgBCAFfCIFIARUIQJCfiEEIAINAyAAIAEQUiICEAMNAwsgASACayEBIAAgAmohAAwBCwtCfiAFIAEbIQQLIAQLPwIBfwF+IwBBMGsiAiQAAn5CfiACQQhqIAAgARAtDQAaQgAgAigCHEEBRg0AGiACKQMICyEDIAJBMGokACADC40BAQJ/IwBBMGsiASQAAkAgAEUNACAAKAKI4gENACABIABB/OEBaigCADYCKCABIAApAvThATcDICAAEDAgACgCqOIBIQIgASABKAIoNgIYIAEgASkDIDcDECACIAFBEGoQGyAAQQA2AqjiASABIAEoAig2AgggASABKQMgNwMAIAAgARAbCyABQTBqJAALKgECfyMAQRBrIgAkACAAQQA2AgggAEIANwMAIAAQWCEBIABBEGokACABC4cBAQN/IwBBEGsiAiQAAkAgACgCAEUgACgCBEVzDQAgAiAAKAIINgIIIAIgACkCADcDAAJ/IAIoAgAiAQRAIAIoAghBqOMJIAERBQAMAQtBqOMJECgLIgFFDQAgASAAKQIANwL04QEgAUH84QFqIAAoAgg2AgAgARBZIAEhAwsgAkEQaiQAIAMLywEBAn8jAEEgayIBJAAgAEGBgIDAADYCtOIBIABBADYCiOIBIABBADYC7OEBIABCADcDkOIBIABBADYCpOMJIABBADYC3OIBIABCADcCzOIBIABBADYCvOIBIABBADYCxOABIABCADcCnOIBIABBpOIBakIANwIAIABBrOIBakEANgIAIAFCADcCECABQgA3AhggASABKQMYNwMIIAEgASkDEDcDACABKAIIQQh2QQFxIQIgAEEANgLg4gEgACACNgKM4gEgAUEgaiQAC3YBA38jAEEwayIBJAAgAARAIAEgAEHE0AFqIgIoAgA2AiggASAAKQK80AE3AyAgACgCACEDIAEgAigCADYCGCABIAApArzQATcDECADIAFBEGoQGyABIAEoAig2AgggASABKQMgNwMAIAAgARAbCyABQTBqJAALzAEBAX8gACABKAK00AE2ApjiASAAIAEoAgQiAjYCwOABIAAgAjYCvOABIAAgAiABKAIIaiICNgK44AEgACACNgLE4AEgASgCuNABBEAgAEKBgICAEDcDiOEBIAAgAUGk0ABqNgIMIAAgAUGUIGo2AgggACABQZwwajYCBCAAIAFBDGo2AgAgAEGs0AFqIAFBqNABaigCADYCACAAQbDQAWogAUGs0AFqKAIANgIAIABBtNABaiABQbDQAWooAgA2AgAPCyAAQgA3A4jhAQs7ACACRQRAQbp/DwsgBEUEQEFsDwsgAiAEEGAEQCAAIAEgAiADIAQgBRBhDwsgACABIAIgAyAEIAUQZQtGAQF/IwBBEGsiBSQAIAVBCGogBBAOAn8gBS0ACQRAIAAgASACIAMgBBAyDAELIAAgASACIAMgBBA0CyEAIAVBEGokACAACzQAIAAgAyAEIAUQNiIFEAMEQCAFDwsgBSAESQR/IAEgAiADIAVqIAQgBWsgABA1BUG4fwsLRgEBfyMAQRBrIgUkACAFQQhqIAQQDgJ/IAUtAAkEQCAAIAEgAiADIAQQYgwBCyAAIAEgAiADIAQQNQshACAFQRBqJAAgAAtZAQF/QQ8hAiABIABJBEAgAUEE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",d7=(c0.SRGBTransfer,c0.LinearTransfer,c0.LinearTransfer,new WeakMap),d8,d9=0;class ea extends c0.Loader{constructor(a){super(a),this.transcoderPath="",this.transcoderBinary=null,this.transcoderPending=null,this.workerPool=new d$,this.workerSourceURL="",this.workerConfig=null,"undefined"!=typeof MSC_TRANSCODER&&console.warn('THREE.KTX2Loader: Please update to latest "basis_transcoder". "msc_basis_transcoder" is no longer supported in three.js r125+.')}setTranscoderPath(a){return this.transcoderPath=a,this}setWorkerLimit(a){return this.workerPool.setWorkerLimit(a),this}async detectSupportAsync(a){return this.workerConfig={astcSupported:await a.hasFeatureAsync("texture-compression-astc"),astcHDRSupported:!1,etc1Supported:await a.hasFeatureAsync("texture-compression-etc1"),etc2Supported:await a.hasFeatureAsync("texture-compression-etc2"),dxtSupported:await a.hasFeatureAsync("texture-compression-bc"),bptcSupported:await a.hasFeatureAsync("texture-compression-bptc"),pvrtcSupported:await a.hasFeatureAsync("texture-compression-pvrtc")},this}detectSupport(a){return!0===a.isWebGPURenderer?this.workerConfig={astcSupported:a.hasFeature("texture-compression-astc"),astcHDRSupported:!1,etc1Supported:a.hasFeature("texture-compression-etc1"),etc2Supported:a.hasFeature("texture-compression-etc2"),dxtSupported:a.hasFeature("texture-compression-bc"),bptcSupported:a.hasFeature("texture-compression-bptc"),pvrtcSupported:a.hasFeature("texture-compression-pvrtc")}:this.workerConfig={astcSupported:a.extensions.has("WEBGL_compressed_texture_astc"),astcHDRSupported:a.extensions.has("WEBGL_compressed_texture_astc")&&a.extensions.get("WEBGL_compressed_texture_astc").getSupportedProfiles().includes("hdr"),etc1Supported:a.extensions.has("WEBGL_compressed_texture_etc1"),etc2Supported:a.extensions.has("WEBGL_compressed_texture_etc"),dxtSupported:a.extensions.has("WEBGL_compressed_texture_s3tc"),bptcSupported:a.extensions.has("EXT_texture_compression_bptc"),pvrtcSupported:a.extensions.has("WEBGL_compressed_texture_pvrtc")||a.extensions.has("WEBKIT_WEBGL_compressed_texture_pvrtc")},this}init(){if(!this.transcoderPending){let a=new c0.FileLoader(this.manager);a.setPath(this.transcoderPath),a.setWithCredentials(this.withCredentials);let b=a.loadAsync("basis_transcoder.js"),c=new c0.FileLoader(this.manager);c.setPath(this.transcoderPath),c.setResponseType("arraybuffer"),c.setWithCredentials(this.withCredentials);let d=c.loadAsync("basis_transcoder.wasm");this.transcoderPending=Promise.all([b,d]).then(([a,b])=>{let c=ea.BasisWorker.toString(),d=["/* constants */","let _EngineFormat = "+JSON.stringify(ea.EngineFormat),"let _EngineType = "+JSON.stringify(ea.EngineType),"let _TranscoderFormat = "+JSON.stringify(ea.TranscoderFormat),"let _BasisFormat = "+JSON.stringify(ea.BasisFormat),"/* basis_transcoder.js */",a,"/* worker */",c.substring(c.indexOf("{")+1,c.lastIndexOf("}"))].join("\n");this.workerSourceURL=URL.createObjectURL(new Blob([d])),this.transcoderBinary=b,this.workerPool.setWorkerCreator(()=>{let a=new Worker(this.workerSourceURL),b=this.transcoderBinary.slice(0);return a.postMessage({type:"init",config:this.workerConfig,transcoderBinary:b},[b]),a})}),d9>0&&console.warn("THREE.KTX2Loader: Multiple active KTX2 loaders may cause performance issues. Use a single KTX2Loader instance, or call .dispose() on old instances."),d9++}return this.transcoderPending}load(a,b,c,d){if(null===this.workerConfig)throw Error("THREE.KTX2Loader: Missing initialization with `.detectSupport( renderer )`.");let e=new c0.FileLoader(this.manager);e.setResponseType("arraybuffer"),e.setWithCredentials(this.withCredentials),e.load(a,a=>{this.parse(a,b,d)},c,d)}parse(a,b,c){if(null===this.workerConfig)throw Error("THREE.KTX2Loader: Missing initialization with `.detectSupport( renderer )`.");if(d7.has(a))return d7.get(a).promise.then(b).catch(c);this._createTexture(a).then(a=>b?b(a):null).catch(c)}_createTextureFrom(a,b){let c,{type:d,error:e,data:{faces:f,width:g,height:h,format:i,type:j,dfdFlags:k}}=a;if("error"===d)return Promise.reject(e);if(6===b.faceCount)c=new c0.CompressedCubeTexture(f,i,j);else{let a=f[0].mipmaps;c=b.layerCount>1?new c0.CompressedArrayTexture(a,g,h,b.layerCount,i,j):new c0.CompressedTexture(a,g,h,i,j)}return c.minFilter=1===f[0].mipmaps.length?c0.LinearFilter:c0.LinearMipmapLinearFilter,c.magFilter=c0.LinearFilter,c.generateMipmaps=!1,c.needsUpdate=!0,c.colorSpace=ee(b),c.premultiplyAlpha=!!(1&k),c}async _createTexture(a,b={}){let c=function(a){let b=new Uint8Array(a.buffer,a.byteOffset,d1.length);if(b[0]!==d1[0]||b[1]!==d1[1]||b[2]!==d1[2]||b[3]!==d1[3]||b[4]!==d1[4]||b[5]!==d1[5]||b[6]!==d1[6]||b[7]!==d1[7]||b[8]!==d1[8]||b[9]!==d1[9]||b[10]!==d1[10]||b[11]!==d1[11])throw Error("Missing KTX 2.0 identifier.");let c=new d_,d=17*Uint32Array.BYTES_PER_ELEMENT,e=new d0(a,d1.length,d,!0);c.vkFormat=e._nextUint32(),c.typeSize=e._nextUint32(),c.pixelWidth=e._nextUint32(),c.pixelHeight=e._nextUint32(),c.pixelDepth=e._nextUint32(),c.layerCount=e._nextUint32(),c.faceCount=e._nextUint32();let f=e._nextUint32();c.supercompressionScheme=e._nextUint32();let g=e._nextUint32(),h=e._nextUint32(),i=e._nextUint32(),j=e._nextUint32(),k=e._nextUint64(),l=e._nextUint64(),m=new d0(a,d1.length+d,3*f*8,!0);for(let b=0;b<f;b++)c.levels.push({levelData:new Uint8Array(a.buffer,a.byteOffset+m._nextUint64(),m._nextUint64()),uncompressedByteLength:m._nextUint64()});let n=new d0(a,g,h,!0),o={vendorId:n._skip(4)._nextUint16(),descriptorType:n._nextUint16(),versionNumber:n._nextUint16(),descriptorBlockSize:n._nextUint16(),colorModel:n._nextUint8(),colorPrimaries:n._nextUint8(),transferFunction:n._nextUint8(),flags:n._nextUint8(),texelBlockDimension:[n._nextUint8(),n._nextUint8(),n._nextUint8(),n._nextUint8()],bytesPlane:[n._nextUint8(),n._nextUint8(),n._nextUint8(),n._nextUint8(),n._nextUint8(),n._nextUint8(),n._nextUint8(),n._nextUint8()],samples:[]},p=(o.descriptorBlockSize/4-6)/4;for(let a=0;a<p;a++){let b={bitOffset:n._nextUint16(),bitLength:n._nextUint8(),channelType:n._nextUint8(),samplePosition:[n._nextUint8(),n._nextUint8(),n._nextUint8(),n._nextUint8()],sampleLower:-1/0,sampleUpper:1/0};64&b.channelType?(b.sampleLower=n._nextInt32(),b.sampleUpper=n._nextInt32()):(b.sampleLower=n._nextUint32(),b.sampleUpper=n._nextUint32()),o.samples[a]=b}c.dataFormatDescriptor.length=0,c.dataFormatDescriptor.push(o);let q=new d0(a,i,j,!0);for(;q._offset<j;){let a=q._nextUint32(),b=q._scan(a),d=d2(b);if(c.keyValue[d]=q._nextUint8Array(a-b.byteLength-1),d.match(/^ktx/i)){let a=d2(c.keyValue[d]);c.keyValue[d]=a.substring(0,a.lastIndexOf("\0"))}q._skip(a%4?4-a%4:0)}if(l<=0)return c;let r=new d0(a,k,l,!0),s=r._nextUint16(),t=r._nextUint16(),u=r._nextUint32(),v=r._nextUint32(),w=r._nextUint32(),x=r._nextUint32(),y=[];for(let a=0;a<f;a++)y.push({imageFlags:r._nextUint32(),rgbSliceByteOffset:r._nextUint32(),rgbSliceByteLength:r._nextUint32(),alphaSliceByteOffset:r._nextUint32(),alphaSliceByteLength:r._nextUint32()});let z=k+r._offset,A=z+u,B=A+v,C=B+w,D=new Uint8Array(a.buffer,a.byteOffset+z,u),E=new Uint8Array(a.buffer,a.byteOffset+A,v);return c.globalData={endpointCount:s,selectorCount:t,imageDescs:y,endpointsData:D,selectorsData:E,tablesData:new Uint8Array(a.buffer,a.byteOffset+B,w),extendedData:new Uint8Array(a.buffer,a.byteOffset+C,x)},c}(new Uint8Array(a)),d=1000066e3===c.vkFormat&&167===c.dataFormatDescriptor[0].colorModel;if(0!==c.vkFormat&&(!d||this.workerConfig.astcHDRSupported))return async function(a){let b,c,{vkFormat:d}=a;if(void 0===ec[d])throw Error("THREE.KTX2Loader: Unsupported vkFormat.");2===a.supercompressionScheme&&(d8||(d8=new Promise(async a=>{let b=new d5;await b.init(),a(b)})),b=await d8);let e=[];for(let c=0;c<a.levels.length;c++){let f,g,h=Math.max(1,a.pixelWidth>>c),i=Math.max(1,a.pixelHeight>>c),j=a.pixelDepth?Math.max(1,a.pixelDepth>>c):0,k=a.levels[c];if(0===a.supercompressionScheme)f=k.levelData;else{if(2!==a.supercompressionScheme)throw Error("THREE.KTX2Loader: Unsupported supercompressionScheme.");f=b.decode(k.levelData,k.uncompressedByteLength)}g=ed[d]===c0.FloatType?new Float32Array(f.buffer,f.byteOffset,f.byteLength/Float32Array.BYTES_PER_ELEMENT):ed[d]===c0.HalfFloatType?new Uint16Array(f.buffer,f.byteOffset,f.byteLength/Uint16Array.BYTES_PER_ELEMENT):f,e.push({data:g,width:h,height:i,depth:j})}if(eb.has(ec[d]))c=0===a.pixelDepth?new c0.DataTexture(e[0].data,a.pixelWidth,a.pixelHeight):new c0.Data3DTexture(e[0].data,a.pixelWidth,a.pixelHeight,a.pixelDepth);else{if(a.pixelDepth>0)throw Error("THREE.KTX2Loader: Unsupported pixelDepth.");(c=new c0.CompressedTexture(e,a.pixelWidth,a.pixelHeight)).minFilter=1===e.length?c0.LinearFilter:c0.LinearMipmapLinearFilter,c.magFilter=c0.LinearFilter}return c.mipmaps=e,c.type=ed[d],c.format=ec[d],c.colorSpace=ee(a),c.needsUpdate=!0,Promise.resolve(c)}(c);let e=this.init().then(()=>this.workerPool.postMessage({type:"transcode",buffer:a,taskConfig:b},[a])).then(a=>this._createTextureFrom(a.data,c));return d7.set(a,{promise:e}),e}dispose(){return this.workerPool.dispose(),this.workerSourceURL&&URL.revokeObjectURL(this.workerSourceURL),d9--,this}}ea.BasisFormat={ETC1S:0,UASTC:1,UASTC_HDR:2},ea.TranscoderFormat={ETC1:0,ETC2:1,BC1:2,BC3:3,BC4:4,BC5:5,BC7_M6_OPAQUE_ONLY:6,BC7_M5:7,PVRTC1_4_RGB:8,PVRTC1_4_RGBA:9,ASTC_4x4:10,ATC_RGB:11,ATC_RGBA_INTERPOLATED_ALPHA:12,RGBA32:13,RGB565:14,BGR565:15,RGBA4444:16,BC6H:22,RGB_HALF:24,RGBA_HALF:25},ea.EngineFormat={RGBAFormat:c0.RGBAFormat,RGBA_ASTC_4x4_Format:c0.RGBA_ASTC_4x4_Format,RGB_BPTC_UNSIGNED_Format:c0.RGB_BPTC_UNSIGNED_Format,RGBA_BPTC_Format:c0.RGBA_BPTC_Format,RGBA_ETC2_EAC_Format:c0.RGBA_ETC2_EAC_Format,RGBA_PVRTC_4BPPV1_Format:c0.RGBA_PVRTC_4BPPV1_Format,RGBA_S3TC_DXT5_Format:c0.RGBA_S3TC_DXT5_Format,RGB_ETC1_Format:c0.RGB_ETC1_Format,RGB_ETC2_Format:c0.RGB_ETC2_Format,RGB_PVRTC_4BPPV1_Format:c0.RGB_PVRTC_4BPPV1_Format,RGBA_S3TC_DXT1_Format:c0.RGBA_S3TC_DXT1_Format},ea.EngineType={UnsignedByteType:c0.UnsignedByteType,HalfFloatType:c0.HalfFloatType,FloatType:c0.FloatType},ea.BasisWorker=function(){let a,b,c,d=_EngineFormat,e=_EngineType,f=_TranscoderFormat,g=_BasisFormat;self.addEventListener("message",function(d){var f;let h=d.data;switch(h.type){case"init":a=h.config,f=h.transcoderBinary,b=new Promise(a=>{BASIS(c={wasmBinary:f,onRuntimeInitialized:a})}).then(()=>{c.initializeBasis(),void 0===c.KTX2File&&console.warn("THREE.KTX2Loader: Please update Basis Universal transcoder.")});break;case"transcode":b.then(()=>{try{let{faces:b,buffers:d,width:f,height:k,hasAlpha:l,format:m,type:n,dfdFlags:o}=function(b){let d,f=new c.KTX2File(new Uint8Array(b));function h(){f.close(),f.delete()}if(!f.isValid())throw h(),Error("THREE.KTX2Loader:	Invalid or unsupported .ktx2 file");if(f.isUASTC())d=g.UASTC;else if(f.isETC1S())d=g.ETC1S;else{if(!f.isHDR())throw Error("THREE.KTX2Loader: Unknown Basis encoding");d=g.UASTC_HDR}let k=f.getWidth(),l=f.getHeight(),m=f.getLayers()||1,n=f.getLevels(),o=f.getFaces(),p=f.getHasAlpha(),q=f.getDFDFlags(),{transcoderFormat:r,engineFormat:s,engineType:t}=function(b,c,d,e){let f=i[b];for(let g=0;g<f.length;g++){let h=f[g];if((!h.if||a[h.if])&&h.basisFormat.includes(b)&&!(e&&h.transcoderFormat.length<2)&&(!h.needsPowerOfTwo||j(c)&&j(d)))return{transcoderFormat:h.transcoderFormat[+!!e],engineFormat:h.engineFormat[+!!e],engineType:h.engineType[0]}}throw Error("THREE.KTX2Loader: Failed to identify transcoding target.")}(d,k,l,p);if(!k||!l||!n)throw h(),Error("THREE.KTX2Loader:	Invalid texture");if(!f.startTranscoding())throw h(),Error("THREE.KTX2Loader: .startTranscoding failed");let u=[],v=[];for(let a=0;a<o;a++){let b=[];for(let c=0;c<n;c++){let d,g,i=[];for(let b=0;b<m;b++){let j=f.getImageLevelInfo(c,b,a);0!==a||0!==c||0!==b||j.origWidth%4==0&&j.origHeight%4==0||console.warn("THREE.KTX2Loader: ETC1S and UASTC textures should use multiple-of-four dimensions."),n>1?(d=j.origWidth,g=j.origHeight):(d=j.width,g=j.height);let k=new Uint8Array(f.getImageTranscodedSizeInBytes(c,b,0,r)),l=f.transcodeImage(k,c,b,a,r,0,-1,-1);if(t===e.HalfFloatType&&(k=new Uint16Array(k.buffer,k.byteOffset,k.byteLength/Uint16Array.BYTES_PER_ELEMENT)),!l)throw h(),Error("THREE.KTX2Loader: .transcodeImage failed.");i.push(k)}let j=function(a){if(1===a.length)return a[0];let b=0;for(let c=0;c<a.length;c++)b+=a[c].byteLength;let c=new Uint8Array(b),d=0;for(let b=0;b<a.length;b++){let e=a[b];c.set(e,d),d+=e.byteLength}return c}(i);b.push({data:j,width:d,height:g}),v.push(j.buffer)}u.push({mipmaps:b,width:k,height:l,format:s,type:t})}return h(),{faces:u,buffers:v,width:k,height:l,hasAlpha:p,dfdFlags:q,format:s,type:t}}(h.buffer);self.postMessage({type:"transcode",id:h.id,data:{faces:b,width:f,height:k,hasAlpha:l,format:m,type:n,dfdFlags:o}},d)}catch(a){console.error(a),self.postMessage({type:"error",id:h.id,error:a.message})}})}});let h=[{if:"astcSupported",basisFormat:[g.UASTC],transcoderFormat:[f.ASTC_4x4,f.ASTC_4x4],engineFormat:[d.RGBA_ASTC_4x4_Format,d.RGBA_ASTC_4x4_Format],engineType:[e.UnsignedByteType],priorityETC1S:1/0,priorityUASTC:1,needsPowerOfTwo:!1},{if:"bptcSupported",basisFormat:[g.ETC1S,g.UASTC],transcoderFormat:[f.BC7_M5,f.BC7_M5],engineFormat:[d.RGBA_BPTC_Format,d.RGBA_BPTC_Format],engineType:[e.UnsignedByteType],priorityETC1S:3,priorityUASTC:2,needsPowerOfTwo:!1},{if:"dxtSupported",basisFormat:[g.ETC1S,g.UASTC],transcoderFormat:[f.BC1,f.BC3],engineFormat:[d.RGBA_S3TC_DXT1_Format,d.RGBA_S3TC_DXT5_Format],engineType:[e.UnsignedByteType],priorityETC1S:4,priorityUASTC:5,needsPowerOfTwo:!1},{if:"etc2Supported",basisFormat:[g.ETC1S,g.UASTC],transcoderFormat:[f.ETC1,f.ETC2],engineFormat:[d.RGB_ETC2_Format,d.RGBA_ETC2_EAC_Format],engineType:[e.UnsignedByteType],priorityETC1S:1,priorityUASTC:3,needsPowerOfTwo:!1},{if:"etc1Supported",basisFormat:[g.ETC1S,g.UASTC],transcoderFormat:[f.ETC1],engineFormat:[d.RGB_ETC1_Format],engineType:[e.UnsignedByteType],priorityETC1S:2,priorityUASTC:4,needsPowerOfTwo:!1},{if:"pvrtcSupported",basisFormat:[g.ETC1S,g.UASTC],transcoderFormat:[f.PVRTC1_4_RGB,f.PVRTC1_4_RGBA],engineFormat:[d.RGB_PVRTC_4BPPV1_Format,d.RGBA_PVRTC_4BPPV1_Format],engineType:[e.UnsignedByteType],priorityETC1S:5,priorityUASTC:6,needsPowerOfTwo:!0},{if:"bptcSupported",basisFormat:[g.UASTC_HDR],transcoderFormat:[f.BC6H],engineFormat:[d.RGB_BPTC_UNSIGNED_Format],engineType:[e.HalfFloatType],priorityHDR:1,needsPowerOfTwo:!1},{basisFormat:[g.ETC1S,g.UASTC],transcoderFormat:[f.RGBA32,f.RGBA32],engineFormat:[d.RGBAFormat,d.RGBAFormat],engineType:[e.UnsignedByteType,e.UnsignedByteType],priorityETC1S:100,priorityUASTC:100,needsPowerOfTwo:!1},{basisFormat:[g.UASTC_HDR],transcoderFormat:[f.RGBA_HALF],engineFormat:[d.RGBAFormat],engineType:[e.HalfFloatType],priorityHDR:100,needsPowerOfTwo:!1}],i={[g.ETC1S]:h.filter(a=>a.basisFormat.includes(g.ETC1S)).sort((a,b)=>a.priorityUASTC-b.priorityUASTC),[g.UASTC]:h.filter(a=>a.basisFormat.includes(g.UASTC)).sort((a,b)=>a.priorityUASTC-b.priorityUASTC),[g.UASTC_HDR]:h.filter(a=>a.basisFormat.includes(g.UASTC_HDR)).sort((a,b)=>a.priorityHDR-b.priorityHDR)};function j(a){return a<=2||!(a&a-1)&&0!==a}};let eb=new Set([c0.RGBAFormat,c0.RGFormat,c0.RedFormat]),ec={109:c0.RGBAFormat,97:c0.RGBAFormat,37:c0.RGBAFormat,43:c0.RGBAFormat,103:c0.RGFormat,83:c0.RGFormat,16:c0.RGFormat,22:c0.RGFormat,100:c0.RedFormat,76:c0.RedFormat,15:c0.RedFormat,9:c0.RedFormat,1000066e3:c0.RGBA_ASTC_4x4_Format,166:c0.RGBA_ASTC_6x6_Format,165:c0.RGBA_ASTC_6x6_Format},ed={109:c0.FloatType,97:c0.HalfFloatType,37:c0.UnsignedByteType,43:c0.UnsignedByteType,103:c0.FloatType,83:c0.HalfFloatType,16:c0.UnsignedByteType,22:c0.UnsignedByteType,100:c0.FloatType,76:c0.HalfFloatType,15:c0.UnsignedByteType,9:c0.UnsignedByteType,1000066e3:c0.HalfFloatType,166:c0.UnsignedByteType,165:c0.UnsignedByteType};function ee(a){let b=a.dataFormatDescriptor[0];return 1===b.colorPrimaries?2===b.transferFunction?c0.SRGBColorSpace:c0.LinearSRGBColorSpace:10===b.colorPrimaries?2===b.transferFunction?"display-p3":"display-p3-linear":(0===b.colorPrimaries||console.warn(`THREE.KTX2Loader: Unsupported color primaries, "${b.colorPrimaries}"`),c0.NoColorSpace)}let ef={c:null,u:[new c0.Vector3,new c0.Vector3,new c0.Vector3],e:[]},eg={c:null,u:[new c0.Vector3,new c0.Vector3,new c0.Vector3],e:[]},eh=[[],[],[]],ei=[[],[],[]],ej=[],ek=new c0.Vector3,el=new c0.Vector3,em=new c0.Vector3,en=new c0.Vector3,eo=new c0.Vector3,ep=new c0.Vector3,eq=new c0.Matrix3,er=new c0.Box3,es=new c0.Matrix4,et=new c0.Matrix4,eu=new c0.Ray;class ev{constructor(a=new c0.Vector3,b=new c0.Vector3,c=new c0.Matrix3){this.center=a,this.halfSize=b,this.rotation=c}set(a,b,c){return this.center=a,this.halfSize=b,this.rotation=c,this}copy(a){return this.center.copy(a.center),this.halfSize.copy(a.halfSize),this.rotation.copy(a.rotation),this}clone(){return(new this.constructor).copy(this)}getSize(a){return a.copy(this.halfSize).multiplyScalar(2)}clampPoint(a,b){let c=this.halfSize;en.subVectors(a,this.center),this.rotation.extractBasis(ek,el,em),b.copy(this.center);let d=c0.MathUtils.clamp(en.dot(ek),-c.x,c.x);b.add(ek.multiplyScalar(d));let e=c0.MathUtils.clamp(en.dot(el),-c.y,c.y);b.add(el.multiplyScalar(e));let f=c0.MathUtils.clamp(en.dot(em),-c.z,c.z);return b.add(em.multiplyScalar(f)),b}containsPoint(a){return en.subVectors(a,this.center),this.rotation.extractBasis(ek,el,em),Math.abs(en.dot(ek))<=this.halfSize.x&&Math.abs(en.dot(el))<=this.halfSize.y&&Math.abs(en.dot(em))<=this.halfSize.z}intersectsBox3(a){return this.intersectsOBB(ew.fromBox3(a))}intersectsSphere(a){return this.clampPoint(a.center,ep),ep.distanceToSquared(a.center)<=a.radius*a.radius}intersectsOBB(a,b=Number.EPSILON){let c,d;ef.c=this.center,ef.e[0]=this.halfSize.x,ef.e[1]=this.halfSize.y,ef.e[2]=this.halfSize.z,this.rotation.extractBasis(ef.u[0],ef.u[1],ef.u[2]),eg.c=a.center,eg.e[0]=a.halfSize.x,eg.e[1]=a.halfSize.y,eg.e[2]=a.halfSize.z,a.rotation.extractBasis(eg.u[0],eg.u[1],eg.u[2]);for(let a=0;a<3;a++)for(let b=0;b<3;b++)eh[a][b]=ef.u[a].dot(eg.u[b]);en.subVectors(eg.c,ef.c),ej[0]=en.dot(ef.u[0]),ej[1]=en.dot(ef.u[1]),ej[2]=en.dot(ef.u[2]);for(let a=0;a<3;a++)for(let c=0;c<3;c++)ei[a][c]=Math.abs(eh[a][c])+b;for(let a=0;a<3;a++)if(c=ef.e[a],d=eg.e[0]*ei[a][0]+eg.e[1]*ei[a][1]+eg.e[2]*ei[a][2],Math.abs(ej[a])>c+d)return!1;for(let a=0;a<3;a++)if(c=ef.e[0]*ei[0][a]+ef.e[1]*ei[1][a]+ef.e[2]*ei[2][a],d=eg.e[a],Math.abs(ej[0]*eh[0][a]+ej[1]*eh[1][a]+ej[2]*eh[2][a])>c+d)return!1;return c=ef.e[1]*ei[2][0]+ef.e[2]*ei[1][0],d=eg.e[1]*ei[0][2]+eg.e[2]*ei[0][1],!(Math.abs(ej[2]*eh[1][0]-ej[1]*eh[2][0])>c+d||(c=ef.e[1]*ei[2][1]+ef.e[2]*ei[1][1],d=eg.e[0]*ei[0][2]+eg.e[2]*ei[0][0],Math.abs(ej[2]*eh[1][1]-ej[1]*eh[2][1])>c+d||(c=ef.e[1]*ei[2][2]+ef.e[2]*ei[1][2],d=eg.e[0]*ei[0][1]+eg.e[1]*ei[0][0],Math.abs(ej[2]*eh[1][2]-ej[1]*eh[2][2])>c+d||(c=ef.e[0]*ei[2][0]+ef.e[2]*ei[0][0],d=eg.e[1]*ei[1][2]+eg.e[2]*ei[1][1],Math.abs(ej[0]*eh[2][0]-ej[2]*eh[0][0])>c+d||(c=ef.e[0]*ei[2][1]+ef.e[2]*ei[0][1],d=eg.e[0]*ei[1][2]+eg.e[2]*ei[1][0],Math.abs(ej[0]*eh[2][1]-ej[2]*eh[0][1])>c+d||(c=ef.e[0]*ei[2][2]+ef.e[2]*ei[0][2],d=eg.e[0]*ei[1][1]+eg.e[1]*ei[1][0],Math.abs(ej[0]*eh[2][2]-ej[2]*eh[0][2])>c+d||(c=ef.e[0]*ei[1][0]+ef.e[1]*ei[0][0],d=eg.e[1]*ei[2][2]+eg.e[2]*ei[2][1],Math.abs(ej[1]*eh[0][0]-ej[0]*eh[1][0])>c+d||(c=ef.e[0]*ei[1][1]+ef.e[1]*ei[0][1],d=eg.e[0]*ei[2][2]+eg.e[2]*ei[2][0],Math.abs(ej[1]*eh[0][1]-ej[0]*eh[1][1])>c+d||(c=ef.e[0]*ei[1][2]+ef.e[1]*ei[0][2],d=eg.e[0]*ei[2][1]+eg.e[1]*ei[2][0],Math.abs(ej[1]*eh[0][2]-ej[0]*eh[1][2])>c+d)))))))))}intersectsPlane(a){this.rotation.extractBasis(ek,el,em);let b=this.halfSize.x*Math.abs(a.normal.dot(ek))+this.halfSize.y*Math.abs(a.normal.dot(el))+this.halfSize.z*Math.abs(a.normal.dot(em));return Math.abs(a.normal.dot(this.center)-a.constant)<=b}intersectRay(a,b){return this.getSize(eo),er.setFromCenterAndSize(en.set(0,0,0),eo),es.setFromMatrix3(this.rotation),es.setPosition(this.center),et.copy(es).invert(),eu.copy(a).applyMatrix4(et),eu.intersectBox(er,b)?b.applyMatrix4(es):null}intersectsRay(a){return null!==this.intersectRay(a,en)}fromBox3(a){return a.getCenter(this.center),a.getSize(this.halfSize).multiplyScalar(.5),this.rotation.identity(),this}equals(a){return a.center.equals(this.center)&&a.halfSize.equals(this.halfSize)&&a.rotation.equals(this.rotation)}applyMatrix4(a){let b=a.elements,c=en.set(b[0],b[1],b[2]).length(),d=en.set(b[4],b[5],b[6]).length(),e=en.set(b[8],b[9],b[10]).length();0>a.determinant()&&(c=-c),eq.setFromMatrix4(a);let f=1/c,g=1/d,h=1/e;return eq.elements[0]*=f,eq.elements[1]*=f,eq.elements[2]*=f,eq.elements[3]*=g,eq.elements[4]*=g,eq.elements[5]*=g,eq.elements[6]*=h,eq.elements[7]*=h,eq.elements[8]*=h,this.rotation.multiply(eq),this.halfSize.x*=c,this.halfSize.y*=d,this.halfSize.z*=e,en.setFromMatrixPosition(a),this.center.add(en),this}}let ew=new ev,ex=/^[og]\s*(.+)?/,ey=/^mtllib /,ez=/^usemtl /,eA=/^usemap /,eB=/\s+/,eC=new c0.Vector3,eD=new c0.Vector3,eE=new c0.Vector3,eF=new c0.Vector3,eG=new c0.Vector3,eH=new c0.Color;function eI(){let a={objects:[],object:{},vertices:[],normals:[],colors:[],uvs:[],materials:{},materialLibraries:[],startObject:function(a,b){if(this.object&&!1===this.object.fromDeclaration)return this.object.name=a,void(this.object.fromDeclaration=!1!==b);let c=this.object&&"function"==typeof this.object.currentMaterial?this.object.currentMaterial():void 0;if(this.object&&"function"==typeof this.object._finalize&&this.object._finalize(!0),this.object={name:a||"",fromDeclaration:!1!==b,geometry:{vertices:[],normals:[],colors:[],uvs:[],hasUVIndices:!1},materials:[],smooth:!0,startMaterial:function(a,b){let c=this._finalize(!1);c&&(c.inherited||c.groupCount<=0)&&this.materials.splice(c.index,1);let d={index:this.materials.length,name:a||"",mtllib:Array.isArray(b)&&b.length>0?b[b.length-1]:"",smooth:void 0!==c?c.smooth:this.smooth,groupStart:void 0!==c?c.groupEnd:0,groupEnd:-1,groupCount:-1,inherited:!1,clone:function(a){let b={index:"number"==typeof a?a:this.index,name:this.name,mtllib:this.mtllib,smooth:this.smooth,groupStart:0,groupEnd:-1,groupCount:-1,inherited:!1};return b.clone=this.clone.bind(b),b}};return this.materials.push(d),d},currentMaterial:function(){if(this.materials.length>0)return this.materials[this.materials.length-1]},_finalize:function(a){let b=this.currentMaterial();if(b&&-1===b.groupEnd&&(b.groupEnd=this.geometry.vertices.length/3,b.groupCount=b.groupEnd-b.groupStart,b.inherited=!1),a&&this.materials.length>1)for(let a=this.materials.length-1;a>=0;a--)this.materials[a].groupCount<=0&&this.materials.splice(a,1);return a&&0===this.materials.length&&this.materials.push({name:"",smooth:this.smooth}),b}},c&&c.name&&"function"==typeof c.clone){let a=c.clone(0);a.inherited=!0,this.object.materials.push(a)}this.objects.push(this.object)},finalize:function(){this.object&&"function"==typeof this.object._finalize&&this.object._finalize(!0)},parseVertexIndex:function(a,b){let c=parseInt(a,10);return 3*(c>=0?c-1:c+b/3)},parseNormalIndex:function(a,b){let c=parseInt(a,10);return 3*(c>=0?c-1:c+b/3)},parseUVIndex:function(a,b){let c=parseInt(a,10);return 2*(c>=0?c-1:c+b/2)},addVertex:function(a,b,c){let d=this.vertices,e=this.object.geometry.vertices;e.push(d[a+0],d[a+1],d[a+2]),e.push(d[b+0],d[b+1],d[b+2]),e.push(d[c+0],d[c+1],d[c+2])},addVertexPoint:function(a){let b=this.vertices;this.object.geometry.vertices.push(b[a+0],b[a+1],b[a+2])},addVertexLine:function(a){let b=this.vertices;this.object.geometry.vertices.push(b[a+0],b[a+1],b[a+2])},addNormal:function(a,b,c){let d=this.normals,e=this.object.geometry.normals;e.push(d[a+0],d[a+1],d[a+2]),e.push(d[b+0],d[b+1],d[b+2]),e.push(d[c+0],d[c+1],d[c+2])},addFaceNormal:function(a,b,c){let d=this.vertices,e=this.object.geometry.normals;eC.fromArray(d,a),eD.fromArray(d,b),eE.fromArray(d,c),eG.subVectors(eE,eD),eF.subVectors(eC,eD),eG.cross(eF),eG.normalize(),e.push(eG.x,eG.y,eG.z),e.push(eG.x,eG.y,eG.z),e.push(eG.x,eG.y,eG.z)},addColor:function(a,b,c){let d=this.colors,e=this.object.geometry.colors;void 0!==d[a]&&e.push(d[a+0],d[a+1],d[a+2]),void 0!==d[b]&&e.push(d[b+0],d[b+1],d[b+2]),void 0!==d[c]&&e.push(d[c+0],d[c+1],d[c+2])},addUV:function(a,b,c){let d=this.uvs,e=this.object.geometry.uvs;e.push(d[a+0],d[a+1]),e.push(d[b+0],d[b+1]),e.push(d[c+0],d[c+1])},addDefaultUV:function(){let a=this.object.geometry.uvs;a.push(0,0),a.push(0,0),a.push(0,0)},addUVLine:function(a){let b=this.uvs;this.object.geometry.uvs.push(b[a+0],b[a+1])},addFace:function(a,b,c,d,e,f,g,h,i){let j=this.vertices.length,k=this.parseVertexIndex(a,j),l=this.parseVertexIndex(b,j),m=this.parseVertexIndex(c,j);if(this.addVertex(k,l,m),this.addColor(k,l,m),void 0!==g&&""!==g){let a=this.normals.length;k=this.parseNormalIndex(g,a),l=this.parseNormalIndex(h,a),m=this.parseNormalIndex(i,a),this.addNormal(k,l,m)}else this.addFaceNormal(k,l,m);if(void 0!==d&&""!==d){let a=this.uvs.length;k=this.parseUVIndex(d,a),l=this.parseUVIndex(e,a),m=this.parseUVIndex(f,a),this.addUV(k,l,m),this.object.geometry.hasUVIndices=!0}else this.addDefaultUV()},addPointGeometry:function(a){this.object.geometry.type="Points";let b=this.vertices.length;for(let c=0,d=a.length;c<d;c++){let d=this.parseVertexIndex(a[c],b);this.addVertexPoint(d),this.addColor(d)}},addLineGeometry:function(a,b){this.object.geometry.type="Line";let c=this.vertices.length,d=this.uvs.length;for(let b=0,d=a.length;b<d;b++)this.addVertexLine(this.parseVertexIndex(a[b],c));for(let a=0,c=b.length;a<c;a++)this.addUVLine(this.parseUVIndex(b[a],d))}};return a.startObject("",!1),a}class eJ extends c0.Loader{constructor(a){super(a),this.materials=null}load(a,b,c,d){let e=this,f=new c0.FileLoader(this.manager);f.setPath(this.path),f.setRequestHeader(this.requestHeader),f.setWithCredentials(this.withCredentials),f.load(a,function(c){try{b(e.parse(c))}catch(b){d?d(b):console.error(b),e.manager.itemError(a)}},c,d)}setMaterials(a){return this.materials=a,this}parse(a){let b=new eI;-1!==a.indexOf("\r\n")&&(a=a.replace(/\r\n/g,"\n")),-1!==a.indexOf("\\\n")&&(a=a.replace(/\\\n/g,""));let c=a.split("\n"),d=[];for(let a=0,e=c.length;a<e;a++){let e=c[a].trimStart();if(0===e.length)continue;let f=e.charAt(0);if("#"!==f)if("v"===f){let a=e.split(eB);switch(a[0]){case"v":b.vertices.push(parseFloat(a[1]),parseFloat(a[2]),parseFloat(a[3])),a.length>=7?(eH.setRGB(parseFloat(a[4]),parseFloat(a[5]),parseFloat(a[6]),c0.SRGBColorSpace),b.colors.push(eH.r,eH.g,eH.b)):b.colors.push(void 0,void 0,void 0);break;case"vn":b.normals.push(parseFloat(a[1]),parseFloat(a[2]),parseFloat(a[3]));break;case"vt":b.uvs.push(parseFloat(a[1]),parseFloat(a[2]))}}else if("f"===f){let a=e.slice(1).trim().split(eB),c=[];for(let b=0,d=a.length;b<d;b++){let d=a[b];if(d.length>0){let a=d.split("/");c.push(a)}}let d=c[0];for(let a=1,e=c.length-1;a<e;a++){let e=c[a],f=c[a+1];b.addFace(d[0],e[0],f[0],d[1],e[1],f[1],d[2],e[2],f[2])}}else if("l"===f){let a=e.substring(1).trim().split(" "),c=[],d=[];if(-1===e.indexOf("/"))c=a;else for(let b=0,e=a.length;b<e;b++){let e=a[b].split("/");""!==e[0]&&c.push(e[0]),""!==e[1]&&d.push(e[1])}b.addLineGeometry(c,d)}else if("p"===f){let a=e.slice(1).trim().split(" ");b.addPointGeometry(a)}else if(null!==(d=ex.exec(e))){let a=(" "+d[0].slice(1).trim()).slice(1);b.startObject(a)}else if(ez.test(e))b.object.startMaterial(e.substring(7).trim(),b.materialLibraries);else if(ey.test(e))b.materialLibraries.push(e.substring(7).trim());else if(eA.test(e))console.warn('THREE.OBJLoader: Rendering identifier "usemap" not supported. Textures must be defined in MTL files.');else if("s"===f){if((d=e.split(" ")).length>1){let a=d[1].trim().toLowerCase();b.object.smooth="0"!==a&&"off"!==a}else b.object.smooth=!0;let a=b.object.currentMaterial();a&&(a.smooth=b.object.smooth)}else{if("\0"===e)continue;console.warn('THREE.OBJLoader: Unexpected line: "'+e+'"')}}b.finalize();let e=new c0.Group;if(e.materialLibraries=[].concat(b.materialLibraries),!0==(1!==b.objects.length||0!==b.objects[0].geometry.vertices.length))for(let a=0,c=b.objects.length;a<c;a++){let c,d=b.objects[a],f=d.geometry,g=d.materials,h="Line"===f.type,i="Points"===f.type,j=!1;if(0===f.vertices.length)continue;let k=new c0.BufferGeometry;k.setAttribute("position",new c0.Float32BufferAttribute(f.vertices,3)),f.normals.length>0&&k.setAttribute("normal",new c0.Float32BufferAttribute(f.normals,3)),f.colors.length>0&&(j=!0,k.setAttribute("color",new c0.Float32BufferAttribute(f.colors,3))),!0===f.hasUVIndices&&k.setAttribute("uv",new c0.Float32BufferAttribute(f.uvs,2));let l=[];for(let a=0,c=g.length;a<c;a++){let c=g[a],d=c.name+"_"+c.smooth+"_"+j,e=b.materials[d];if(null!==this.materials)if(e=this.materials.create(c.name),!h||!e||e instanceof c0.LineBasicMaterial){if(i&&e&&!(e instanceof c0.PointsMaterial)){let a=new c0.PointsMaterial({size:10,sizeAttenuation:!1});c0.Material.prototype.copy.call(a,e),a.color.copy(e.color),a.map=e.map,e=a}}else{let a=new c0.LineBasicMaterial;c0.Material.prototype.copy.call(a,e),a.color.copy(e.color),e=a}void 0===e&&((e=h?new c0.LineBasicMaterial:i?new c0.PointsMaterial({size:1,sizeAttenuation:!1}):new c0.MeshPhongMaterial).name=c.name,e.flatShading=!c.smooth,e.vertexColors=j,b.materials[d]=e),l.push(e)}if(l.length>1){for(let a=0,b=g.length;a<b;a++){let b=g[a];k.addGroup(b.groupStart,b.groupCount,a)}c=h?new c0.LineSegments(k,l):i?new c0.Points(k,l):new c0.Mesh(k,l)}else c=h?new c0.LineSegments(k,l[0]):i?new c0.Points(k,l[0]):new c0.Mesh(k,l[0]);c.name=d.name,e.add(c)}else if(b.vertices.length>0){let a=new c0.PointsMaterial({size:1,sizeAttenuation:!1}),c=new c0.BufferGeometry;c.setAttribute("position",new c0.Float32BufferAttribute(b.vertices,3)),b.colors.length>0&&void 0!==b.colors[0]&&(c.setAttribute("color",new c0.Float32BufferAttribute(b.colors,3)),a.vertexColors=!0);let d=new c0.Points(c,a);e.add(d)}return e}}class eK extends c0.Loader{constructor(a){super(a)}load(a,b,c,d){let e=this,f=""===this.path?c0.LoaderUtils.extractUrlBase(a):this.path,g=new c0.FileLoader(this.manager);g.setPath(this.path),g.setRequestHeader(this.requestHeader),g.setWithCredentials(this.withCredentials),g.load(a,function(c){try{b(e.parse(c,f))}catch(b){d?d(b):console.error(b),e.manager.itemError(a)}},c,d)}setMaterialOptions(a){return this.materialOptions=a,this}parse(a,b){let c=a.split("\n"),d={},e=/\s+/,f={};for(let a=0;a<c.length;a++){let b=c[a];if(0===(b=b.trim()).length||"#"===b.charAt(0))continue;let g=b.indexOf(" "),h=g>=0?b.substring(0,g):b;h=h.toLowerCase();let i=g>=0?b.substring(g+1):"";if(i=i.trim(),"newmtl"===h)d={name:i},f[i]=d;else if("ka"===h||"kd"===h||"ks"===h||"ke"===h){let a=i.split(e,3);d[h]=[parseFloat(a[0]),parseFloat(a[1]),parseFloat(a[2])]}else d[h]=i}let g=new eL(this.resourcePath||b,this.materialOptions);return g.setCrossOrigin(this.crossOrigin),g.setManager(this.manager),g.setMaterials(f),g}}class eL{constructor(a="",b={}){this.baseUrl=a,this.options=b,this.materialsInfo={},this.materials={},this.materialsArray=[],this.nameLookup={},this.crossOrigin="anonymous",this.side=void 0!==this.options.side?this.options.side:c0.FrontSide,this.wrap=void 0!==this.options.wrap?this.options.wrap:c0.RepeatWrapping}setCrossOrigin(a){return this.crossOrigin=a,this}setManager(a){this.manager=a}setMaterials(a){this.materialsInfo=this.convert(a),this.materials={},this.materialsArray=[],this.nameLookup={}}convert(a){if(!this.options)return a;let b={};for(let c in a){let d=a[c],e={};for(let a in b[c]=e,d){let b=!0,c=d[a],f=a.toLowerCase();switch(f){case"kd":case"ka":case"ks":this.options&&this.options.normalizeRGB&&(c=[c[0]/255,c[1]/255,c[2]/255]),this.options&&this.options.ignoreZeroRGBs&&0===c[0]&&0===c[1]&&0===c[2]&&(b=!1)}b&&(e[f]=c)}}return b}preload(){for(let a in this.materialsInfo)this.create(a)}getIndex(a){return this.nameLookup[a]}getAsArray(){let a=0;for(let b in this.materialsInfo)this.materialsArray[a]=this.create(b),this.nameLookup[b]=a,a++;return this.materialsArray}create(a){return void 0===this.materials[a]&&this.createMaterial_(a),this.materials[a]}createMaterial_(a){let b=this,c=this.materialsInfo[a],d={name:a,side:this.side};function e(a,c){var e,f;if(d[a])return;let g=b.getTextureParams(c,d),h=b.loadTexture((e=b.baseUrl,"string"!=typeof(f=g.url)||""===f?"":/^https?:\/\//i.test(f)?f:e+f));h.repeat.copy(g.scale),h.offset.copy(g.offset),h.wrapS=b.wrap,h.wrapT=b.wrap,"map"!==a&&"emissiveMap"!==a||(h.colorSpace=c0.SRGBColorSpace),d[a]=h}for(let a in c){let b,f=c[a];if(""!==f)switch(a.toLowerCase()){case"kd":d.color=c0.ColorManagement.toWorkingColorSpace((new c0.Color).fromArray(f),c0.SRGBColorSpace);break;case"ks":d.specular=c0.ColorManagement.toWorkingColorSpace((new c0.Color).fromArray(f),c0.SRGBColorSpace);break;case"ke":d.emissive=c0.ColorManagement.toWorkingColorSpace((new c0.Color).fromArray(f),c0.SRGBColorSpace);break;case"map_kd":e("map",f);break;case"map_ks":e("specularMap",f);break;case"map_ke":e("emissiveMap",f);break;case"norm":e("normalMap",f);break;case"map_bump":case"bump":e("bumpMap",f);break;case"map_d":e("alphaMap",f),d.transparent=!0;break;case"ns":d.shininess=parseFloat(f);break;case"d":(b=parseFloat(f))<1&&(d.opacity=b,d.transparent=!0);break;case"tr":b=parseFloat(f),this.options&&this.options.invertTrProperty&&(b=1-b),b>0&&(d.opacity=1-b,d.transparent=!0)}}return this.materials[a]=new c0.MeshPhongMaterial(d),this.materials[a]}getTextureParams(a,b){let c,d={scale:new c0.Vector2(1,1),offset:new c0.Vector2(0,0)},e=a.split(/\s+/);return(c=e.indexOf("-bm"))>=0&&(b.bumpScale=parseFloat(e[c+1]),e.splice(c,2)),(c=e.indexOf("-s"))>=0&&(d.scale.set(parseFloat(e[c+1]),parseFloat(e[c+2])),e.splice(c,4)),(c=e.indexOf("-o"))>=0&&(d.offset.set(parseFloat(e[c+1]),parseFloat(e[c+2])),e.splice(c,4)),d.url=e.join(" ").trim(),d}loadTexture(a,b,c,d,e){let f=void 0!==this.manager?this.manager:c0.DefaultLoadingManager,g=f.getHandler(a);null===g&&(g=new c0.TextureLoader(f)),g.setCrossOrigin&&g.setCrossOrigin(this.crossOrigin);let h=g.load(a,c,d,e);return void 0!==b&&(h.mapping=b),h}}class eM{static fromCubeTexture(a){let b=0,c=new c0.Vector3,d=new c0.Vector3,e=new c0.Color,f=[0,0,0,0,0,0,0,0,0],g=new c0.SphericalHarmonics3,h=g.coefficients;for(let g=0;g<6;g++){let i=a.image[g],j=i.width,k=i.height,l=document.createElement("canvas");l.width=j,l.height=k;let m=l.getContext("2d");m.drawImage(i,0,0,j,k);let n=m.getImageData(0,0,j,k),o=n.data,p=n.width,q=2/p;for(let i=0,j=o.length;i<j;i+=4){e.setRGB(o[i]/255,o[i+1]/255,o[i+2]/255),eN(e,a.colorSpace);let j=i/4,k=(j%p+.5)*q-1,l=1-(Math.floor(j/p)+.5)*q;switch(g){case 0:c.set(-1,l,-k);break;case 1:c.set(1,l,k);break;case 2:c.set(-k,1,-l);break;case 3:c.set(-k,-1,l);break;case 4:c.set(-k,l,1);break;case 5:c.set(k,l,-1)}let m=c.lengthSq(),n=4/(Math.sqrt(m)*m);b+=n,d.copy(c).normalize(),c0.SphericalHarmonics3.getBasisAt(d,f);for(let a=0;a<9;a++)h[a].x+=f[a]*e.r*n,h[a].y+=f[a]*e.g*n,h[a].z+=f[a]*e.b*n}}let i=4*Math.PI/b;for(let a=0;a<9;a++)h[a].x*=i,h[a].y*=i,h[a].z*=i;return new c0.LightProbe(g)}static async fromCubeRenderTarget(a,b){let c,d=a.coordinateSystem===c0.WebGLCoordinateSystem?-1:1,e=0,f=new c0.Vector3,g=new c0.Vector3,h=new c0.Color,i=[0,0,0,0,0,0,0,0,0],j=new c0.SphericalHarmonics3,k=j.coefficients,l=b.texture.type,m=b.width;a.isWebGLRenderer&&(c=l===c0.HalfFloatType?new Uint16Array(m*m*4):new Uint8Array(m*m*4));for(let j=0;j<6;j++){a.isWebGLRenderer?await a.readRenderTargetPixelsAsync(b,0,0,m,m,c,j):c=await a.readRenderTargetPixelsAsync(b,0,0,m,m,0,j);let n=2/m;for(let a=0,o=c.length;a<o;a+=4){let o,p,q;l===c0.HalfFloatType?(o=c0.DataUtils.fromHalfFloat(c[a]),p=c0.DataUtils.fromHalfFloat(c[a+1]),q=c0.DataUtils.fromHalfFloat(c[a+2])):(o=c[a]/255,p=c[a+1]/255,q=c[a+2]/255),h.setRGB(o,p,q),eN(h,b.texture.colorSpace);let r=a/4,s=(1-(r%m+.5)*n)*d,t=1-(Math.floor(r/m)+.5)*n;switch(j){case 0:f.set(-1*d,t,s*d);break;case 1:f.set(+d,t,-s*d);break;case 2:f.set(s,1,-t);break;case 3:f.set(s,-1,t);break;case 4:f.set(s,t,1);break;case 5:f.set(-s,t,-1)}let u=f.lengthSq(),v=4/(Math.sqrt(u)*u);e+=v,g.copy(f).normalize(),c0.SphericalHarmonics3.getBasisAt(g,i);for(let a=0;a<9;a++)k[a].x+=i[a]*h.r*v,k[a].y+=i[a]*h.g*v,k[a].z+=i[a]*h.b*v}}let n=4*Math.PI/e;for(let a=0;a<9;a++)k[a].x*=n,k[a].y*=n,k[a].z*=n;return new c0.LightProbe(j)}}function eN(a,b){switch(b){case c0.SRGBColorSpace:a.convertSRGBToLinear();break;case c0.LinearSRGBColorSpace:case c0.NoColorSpace:break;default:console.warn("WARNING: LightProbeGenerator convertColorToLinear() encountered an unsupported color space.")}return a}var eO=function(a){var b=this;this.object=a,this.object.rotation.reorder("YXZ"),this.enabled=!0,this.deviceOrientation={},this.screenOrientation=0,this.alphaOffset=0;var c,d,e,f,g=function(a){b.deviceOrientation=a},h=function(){b.screenOrientation=window.orientation||0},i=(c=new THREE.Vector3(0,0,1),d=new THREE.Euler,e=new THREE.Quaternion,f=new THREE.Quaternion(-Math.sqrt(.5),0,0,Math.sqrt(.5)),function(a,b,g,h,i){d.set(g,b,-h,"YXZ"),a.setFromEuler(d),a.multiply(f),a.multiply(e.setFromAxisAngle(c,-i))});this.connect=function(){h(),window.addEventListener("orientationchange",h,!1),window.addEventListener("deviceorientation",g,!1),b.enabled=!0},this.disconnect=function(){window.removeEventListener("orientationchange",h,!1),window.removeEventListener("deviceorientation",g,!1),b.enabled=!1},this.update=function(){if(!1!==b.enabled){var a=b.deviceOrientation;if(a){var c=a.alpha?THREE.MathUtils.degToRad(a.alpha)+b.alphaOffset:0,d=a.beta?THREE.MathUtils.degToRad(a.beta):0,e=a.gamma?THREE.MathUtils.degToRad(a.gamma):0,f=b.screenOrientation?THREE.MathUtils.degToRad(b.screenOrientation):0;i(b.object.quaternion,c,d,e,f)}}},this.dispose=function(){b.disconnect()},this.connect()},eP=globalThis.THREE={...c0};eP.DRACOLoader=c2,eP.GLTFLoader=dh,eP.KTX2Loader=ea,eP.OBJLoader=eJ,eP.MTLLoader=eK,eP.OBB=ev,eP.BufferGeometryUtils=bN,eP.LightProbeGenerator=eM,eP.DeviceOrientationControls=eO,eP.Cache.enabled=!0;var eQ=window.AFRAME_CDN_ROOT||"https://cdn.aframe.io/",eR="aframe-injected",eS=bL(8878),eT=bL.n(eS),eU={colors:{debug:"gray",error:"red",info:"gray",warn:"orange"}};eT().formatArgs=function(a){if(a[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+a[0]+(this.useColors?"%c ":" "),this.useColors){this.color=(c=(b=this.namespace.split(":"))[b.length-1],eU.colors&&eU.colors[c]||null);var b,c,d="color: "+this.color;a.splice(1,0,d,"color: inherit");var e=0,f=0;a[0].replace(/%[a-zA-Z%]/g,function(a){"%%"!==a&&(e++,"%c"===a&&(f=e))}),a.splice(f,0,d)}};var eV=function(){try{return window.localStorage}catch(a){}}();eV&&(parseInt(eV.logs,10)||"true"===eV.logs)?eT().enable("*"):eT().enable("*:error,*:info,*:warn");let eW=eT();var eX=bL(1124),eY=bL.n(eX),eZ=eW("device:error"),e$=!1,e_=!1,e0=void 0!==navigator.xr;if(e0){var e1=function(){var a=document.querySelector("a-scene");a?a.hasLoaded?a.components["xr-mode-ui"].updateEnterInterfaces():a.addEventListener("loaded",e1):window.addEventListener("DOMContentLoaded",e1)},e2=function(a){eZ("WebXR session support error: "+a.message)};navigator.xr.isSessionSupported?(navigator.xr.isSessionSupported("immersive-vr").then(function(a){e$=a,e1()}).catch(e2),navigator.xr.isSessionSupported("immersive-ar").then(function(a){e_=a,e1()}).catch(function(){})):navigator.xr.supportsSession?(navigator.xr.supportsSession("immersive-vr").then(function(){e$=!0,e1()}).catch(e2),navigator.xr.supportsSession("immersive-ar").then(function(){e_=!0,e1()}).catch(function(){})):eZ("WebXR has neither isSessionSupported or supportsSession?!")}function e3(){return e$||e_}function e4(){return e_}function e5(){return e$}var e6,e7,e8=(e6=!1,e7=window.navigator.userAgent||window.navigator.vendor||window.opera,(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e7)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e7.substr(0,4)))&&(e6=!0),(fc()||e9()||fh())&&(e6=!0),fg()&&(e6=!1),function(){return e6});function e9(a){var b=a||window.navigator.userAgent;return/Nexus (7|9)|xoom|sch-i800|playbook|tablet|kindle/i.test(b)||fa()}function fa(a,b,c){var d=a||window.navigator.userAgent,e=b||window.navigator.platform,f=c||window.navigator.maxTouchPoints||0;return("iPad"===e||"MacIntel"===e)&&f>0&&/Macintosh|Intel|iPad|ipad/i.test(d)&&!window.MSStream}function fb(){var a=navigator.userAgent.includes("Macintosh"),b=5===navigator.maxTouchPoints;return a&&b&&e0}function fc(){return/iPad|iPhone|iPod/.test(window.navigator.platform)}function fd(){return!e8()&&!fg()&&void 0!==window.orientation}function fe(){return/(OculusBrowser)/i.test(window.navigator.userAgent)}function ff(){return/(Mobile VR)/i.test(window.navigator.userAgent)}function fg(){return fe()||ff()||fb()}function fh(){return/R7 Build/.test(window.navigator.userAgent)}function fi(){var a=window.orientation;return fh()&&(a+=90),90===a||-90===a}var fj="undefined"==typeof process,fk=!fj,fl=Object.freeze(Object.create(null));function fm(){return{}}function fn(a){var b=[],c=null;function d(d){var e,f;if((d=void 0===d?b.length:d)>0&&null==c&&(c=0),d>0)for(e=b.length,b.length+=Number(d),f=e;f<b.length;f++)b[f]=a();return b.length}return a=a||fm,{grow:d,pool:b,recycle:function(a){a instanceof Object&&(null!==c&&-1!==c?b[--c]=a:b[b.length]=a)},size:function(){return b.length},use:function(){var a;return null!==c&&c!==b.length||d(b.length||5),a=b[c],b[c++]=fl,fo(a),a}}}function fo(a){var b;if(a&&a.constructor===Object)for(b in a)a[b]=void 0}function fp(a,b){var c;if(a&&a.constructor===Object)for(c in a)c in b||delete a[c]}var fq=eW("utils:coordinates:warn"),fr=["x","y","z","w"],fs=/^\s*((-?\d*\.{0,1}\d+(e-?\d+)?)\s+){2,3}(-?\d*\.{0,1}\d+(e-?\d+)?)\s*$/,ft=/\s+/g;function fu(a,b,c){var d,e,f,g,h,i,j,k,l=c&&"object"==typeof c?c:{};if(a&&a instanceof Object)return h=void 0===a.x?b&&b.x:a.x,i=void 0===a.y?b&&b.y:a.y,j=void 0===a.z?b&&b.z:a.z,k=void 0===a.w?b&&b.w:a.w,null!=h&&(l.x=fz(h)),null!=i&&(l.y=fz(i)),null!=j&&(l.z=fz(j)),null!=k&&(l.w=fz(k)),l;if(null==a)return"object"==typeof b?Object.assign(l,b):b;for(d=a.trim().split(ft),g=0;g<fr.length;g++)if(f=fr[g],d[g])l[f]=parseFloat(d[g],10);else{if(void 0===(e=b&&b[f]))continue;l[f]=fz(e)}return l}function fv(a){var b;return"object"!=typeof a?a:(b=a.x+" "+a.y,null!=a.z&&(b+=" "+a.z),null!=a.w&&(b+=" "+a.w),b)}function fw(a,b){return"object"!=typeof a||"object"!=typeof b?a===b:a.x===b.x&&a.y===b.y&&a.z===b.z&&a.w===b.w}function fx(a){return fs.test(a)}function fy(a){return fq("`AFRAME.utils.isCoordinate` has been renamed to `AFRAME.utils.isCoordinates`"),fx(a)}function fz(a){return null!=a&&a.constructor===String?parseFloat(a,10):a}function fA(a){return new c0.Vector3(a.x,a.y,a.z)}var fB=function(){var a={};return function(b,c){return c in a||(a[c]={}),b in a[c]||(a[c][b]=b.split(c)),a[c][b]}}();function fC(a,b){var c=fB(a,b=b||".");return 1===c.length?c[0]:c}function fD(a,b,c){var d;return c=c||".",-1!==b.indexOf(c)?(d=fC(b,c)).constructor===String?a.getAttribute(d):a.getAttribute(d[0])[d[1]]:a.getAttribute(b)}function fE(a,b,c,d){var e;d=d||".",-1===b.indexOf(d)?a.setAttribute(b,c):(e=fC(b,d)).constructor===String?a.setAttribute(e,c):a.setAttribute(e[0],e[1],c)}function fF(a){var b=a.style.width,c=a.style.height;a.style.width=parseInt(b,10)+1+"px",a.style.height=parseInt(c,10)+1+"px",setTimeout(function(){a.style.width=b,a.style.height=c},200)}var fG=eW("utils:src-loader:warn");function fH(a,b,c){var d,e;d=function(d){d?b(a):c(a)},a.tagName?d("IMG"===a.tagName):((e=new XMLHttpRequest).open("HEAD",a),e.addEventListener("load",function(b){var c;e.status>=200&&e.status<300?null==(c=e.getResponseHeader("Content-Type"))?fL(a,d):c.startsWith("image")?d(!0):d(!1):fL(a,d),e.abort()}),e.send())}function fI(a,b,c){var d,e,f,g="",h=[];if("string"==typeof a){for(e=0;e<5;e++)g+="(url\\((?:[^\\)]+)\\),\\s*)";function i(a){h.push(a),6===h.length&&b(h)}if(g+="(url\\((?:[^\\)]+)\\)\\s*)",f=a.match(new RegExp(g))){for(e=1;e<7;e++)fH(fK(f[e]),i);return}if(!a.startsWith("#"))return void fH(fK(a)||a,c)}if(d=a.tagName?a:function(a){try{var b=document.querySelector(a);return b||fG('No element was found matching the selector: "%s"',a),b}catch(b){return void fG('"%s" is not a valid selector',a)}}(a))return"A-CUBEMAP"===d.tagName&&d.srcs?b(d.srcs):"IMG"===d.tagName?c(d):void fG('Selector "%s" does not point to <a-cubemap> or <img>',a)}function fJ(a,b){return fI(a,b,function(){fG("Expected cubemap but got image")})}function fK(a){var b=a.match(/url\((.+)\)/);if(b)return b[1]}function fL(a,b){var c=new Image;c.addEventListener("load",function(){b(!0)}),c.addEventListener("error",function(){b(!1)}),c.src=a}var fM=eW("utils:material:warn"),fN=new Set(["emissiveMap","envMap","map","specularMap"]);function fO(a,b){var c=b.offset||{x:0,y:0},d=b.repeat||{x:1,y:1},e=b.npot||!1,f=b.anisotropy||c0.Texture.DEFAULT_ANISOTROPY,g=a.wrapS,h=a.wrapT,i=a.magFilter,j=a.minFilter;e&&(g=c0.ClampToEdgeWrapping,h=c0.ClampToEdgeWrapping,i=c0.LinearFilter,j=c0.LinearFilter),1===d.x&&1===d.y||(g=c0.RepeatWrapping,h=c0.RepeatWrapping),a.offset.set(c.x,c.y),a.repeat.set(d.x,d.y),a.wrapS===g&&a.wrapT===h&&a.magFilter===i&&a.minFilter===j&&a.anisotropy===f||(a.wrapS=g,a.wrapT=h,a.magFilter=i,a.minFilter=j,a.anisotropy=f,a.needsUpdate=!0)}function fP(a,b,c,d){var e=c.el,f=c.material,g=e.sceneEl.systems.renderer,h=d[b];if(c.materialSrcs||(c.materialSrcs={}),!h)return delete c.materialSrcs[a],void i(null);function i(b){f[a]!==b&&(f[a]&&f[a].dispose(),f[a]=b,f.needsUpdate=!0,fU(e,b))}h===c.materialSrcs[a]&&f[a]?fO(f[a],d):(c.materialSrcs[a]=h,h instanceof c0.Texture?i(h):e.sceneEl.systems.material.loadTextureSource(h,function(b){if(c.materialSrcs[a]===h){var e=f[a];!e||null!==b&&fV(e,b)||(e=null),!e&&b&&(e=fW(b)),e&&(e.source!==b&&(e.source=b,e.needsUpdate=!0),fN.has(a)&&g.applyColorCorrection(e),fO(e,d)),i(e)}}))}function fQ(a,b){return fP("map","src",a,b)}function fR(a,b,c){var d=a;"ambientOcclusion"===a&&(d="ao");var e={};return e.src=c[a+"Map"],e.offset=c[a+"TextureOffset"],e.repeat=c[a+"TextureRepeat"],e.wrap=c[a+"TextureWrap"],fP(d+"Map","src",b,e)}var fS={};function fT(a,b){var c=a.material,d=a.el,e="envMap",f=b.envMap,g=b.sphericalEnvMap,h=b.refract;if(g&&(f=g,fM("`sphericalEnvMap` property is deprecated, using spherical map as equirectangular map instead. Use `envMap` property with a CubeMap or Equirectangular image instead.")),a.materialSrcs||(a.materialSrcs={}),!f)return delete a.materialSrcs[e],c.envMap=null,void(c.needsUpdate=!0);function i(b){a.materialSrcs[e]===f&&(c.envMap=b,c.needsUpdate=!0,fU(d,b))}a.materialSrcs[e]=f,fS[f]?fS[f].then(i):fS[f]=new Promise(function(a){fI(f,function(b){d.sceneEl.systems.material.loadCubeMapTexture(b,function(b){b.mapping=h?c0.CubeRefractionMapping:c0.CubeReflectionMapping,i(b),a(b)})},function(b){d.sceneEl.systems.material.loadTexture(b,{src:b},function(b){b.mapping=h?c0.EquirectangularRefractionMapping:c0.EquirectangularReflectionMapping,i(b),a(b)})})})}function fU(a,b){function c(){a.emit("materialvideoloadeddata",{src:b.image,texture:b})}function d(){a.emit("materialvideoended",{src:b.image,texture:b})}b&&(a.emit("materialtextureloaded",{src:b.image,texture:b}),b.image&&"VIDEO"===b.image.tagName&&(b.image.addEventListener("loadeddata",c),b.image.addEventListener("ended",d),b.addEventListener("dispose",function(){b.image.removeEventListener("loadeddata",c),b.image.removeEventListener("ended",d)})))}function fV(a,b){return a.source===b&&(b.data instanceof HTMLCanvasElement?a.isCanvasTexture:b.data instanceof HTMLVideoElement?a.isVideoTexture:a.isTexture&&!a.isCanvasTexture&&!a.isVideoTexture)}function fW(a){var b;return(b=a.data instanceof HTMLCanvasElement?new c0.CanvasTexture:a.data instanceof HTMLVideoElement?new c0.VideoTexture(a.data):new c0.Texture).source=a,b.needsUpdate=!0,b}var fX=/-([a-z])/g;function fY(a,b){var c;return"string"!=typeof a||(c=function(a,b){var c,d,e,f,g,h;for(b=b||{},c=f1(a),d=0;d<c.length;d++)(e=c[d])&&(f=e.indexOf(":"),g=e.substr(0,f).trim(),h=e.substr(f+1).trim(),b[f$(g)]=h);return b}(a,b))[""]?a:c}function fZ(a){return"string"==typeof a?a:function(a){var b,c=0,d=0,e="";for(b in a)c++;for(b in a)e+=b+": "+a[b],d<c-1&&(e+="; "),d++;return e}(a)}function f$(a){return a.replace(fX,f2)}var f_,f0,f1=(f_=[],f0=/url\([^)]+$/,function(a){var b,c="",d=0;for(f_.length=0;d<a.length;)-1===(b=a.indexOf(";",d))&&(b=a.length),c+=a.substring(d,b),f0.test(c)?c+=";":(f_.push(c.trim()),c=""),d=b+1;return f_});function f2(a){return a[1].toUpperCase()}var f3=["x","y","z","w"];function f4(a,b,c){var d,e,f=a.el;if((e=!!(d=f5(a,b,c)))===a.controllerPresent)return e;a.controllerPresent=e,e?(a.addEventListeners(),a.injectTrackedControls(d),f.emit("controllerconnected",{name:a.name,component:a})):(a.removeEventListeners(),f.emit("controllerdisconnected",{name:a.name,component:a}))}function f5(a,b,c){var d,e=a.el.sceneEl,f=e&&e.systems["tracked-controls"];return!!f&&!(!(d=f.controllers)||!d.length)&&f6(d,b,c.hand,c.index,c.iterateControllerProfiles,c.handTracking)}function f6(a,b,c,d,e,f){var g,h,i,j,k=!1;for(g=0;g<a.length;g++){if(j=(i=a[g]).profiles,f)k=i.hand;else if(e)for(h=0;h<j.length&&!(k=j[h].startsWith(b));h++);else k=j.length>0&&j[0].startsWith(b);if(k){if("right"===i.handedness||"left"===i.handedness){if(i.handedness===c)return a[g]}else if(g===d)return a[g]}}}function f7(a,b,c){var d,e,f,g,h;for(e in b){for(d=b[e],f=!1,h=0;h<d.length;h++)c.detail.changed[d[h]]&&(f=!0);if(f){for(g={},h=0;h<d.length;h++)g[f3[h]]=c.detail.axis[d[h]];a.el.emit(e+"moved",g)}}}function f8(a,b,c,d){var e=(d?c.mapping[d]:c.mapping).buttons[a];c.el.emit(e+b),c.updateModel&&c.updateModel(e,b)}var f9=eW("utils:warn");function ga(a){return a.bind.apply(a,Array.prototype.slice.call(arguments,1))}function gb(){return f9("`utils.checkHeadsetConnected` has moved to `utils.device.checkHeadsetConnected`"),e3()}function gc(){return f9("`utils.isIOS` has moved to `utils.device.isIOS`"),fc()}function gd(){return f9("`utils.isMobile has moved to `utils.device.isMobile`"),e8(arguments)}function ge(a,b,c){var d;return c&&(a=a.bind(c)),function(){var c=Date.now();(void 0===d||(void 0===d?b:c-d)>=b)&&(d=c,a.apply(null,arguments))}}function gf(a,b,c){c&&(a=a.bind(c));var d,e,f,g=function(){d=Date.now(),a.apply(this,f),e=void 0};return function(){var c=Date.now(),h=void 0===d?b:c-d;h>=b?(clearTimeout(e),e=void 0,d=c,a.apply(null,arguments)):(e=e||setTimeout(g,b-h),f=arguments)}}function gg(a,b,c){var d;return c&&(a=a.bind(c)),function(c,e){var f=void 0===d?e:c-d;(void 0===d||f>=b)&&(d=c,a(c,f))}}function gh(a,b,c){var d;return function(){var e=this,f=arguments,g=c&&!d;clearTimeout(d),d=setTimeout(function(){d=null,c||a.apply(e,f)},b),g&&a.apply(e,f)}}var gi=Object.assign,gj=eY();function gk(a){return JSON.parse(JSON.stringify(a))}var gl,gm,gn=(gl=fn(function(){return[]}),function(a,b){var c,d,e,f,g,h;if(void 0===a||void 0===b||null===a||null===b||!(a&&b&&a.constructor===Object&&b.constructor===Object||a.constructor===Array&&b.constructor===Array))return a===b;for(c in d=gl.use(),e=gl.use(),d.length=0,e.length=0,a)d.push(c);for(c in b)e.push(c);if(d.length!==e.length)return gl.recycle(d),gl.recycle(e),!1;for(f=0;f<d.length;++f)if(g=a[d[f]],h=b[d[f]],"object"==typeof g||"object"==typeof h||Array.isArray(g)&&Array.isArray(h)){if(g===h)continue;if(!gn(g,h))return gl.recycle(d),gl.recycle(e),!1}else if(g!==h)return gl.recycle(d),gl.recycle(e),!1;return gl.recycle(d),gl.recycle(e),!0}),go=(gm=[],function(a,b,c){var d,e,f,g,h,i,j;for(h in g=c||{},gm.length=0,a)gm.push(h);if(!b)return g;for(f in b)-1===gm.indexOf(f)&&gm.push(f);for(i=0;i<gm.length;i++)d=a[h=gm[i]],e=b[h],((j=d&&e&&d.constructor===Object&&e.constructor===Object)&&!gn(d,e)||!j&&d!==e)&&(g[h]=e);return g});function gp(a){return!a.metaKey&&document.activeElement===document.body}function gq(a,b){void 0===b&&(b=" ");var c=RegExp(b,"g");return(a=(a||"").replace(c,b)).split(b)}function gr(a,b){var c={};return Object.keys(b=b||{}).forEach(function(b){a.hasAttribute(b)&&(c[b]=a.getAttribute(b))}),c}function gs(a){var b=RegExp("[\\?&]"+(a=a.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]"))+"=([^&#]*)").exec(location.search);return null===b?"":decodeURIComponent(b[1].replace(/\+/g," "))}function gt(){return window.top!==window.self}function gu(a){for(var b=[],c=a.getElementsByTagName("*"),d=0,e=c.length;d<e;d++)c[d].isScene&&b.push(c[d]);return b}var gv,gw=[gy({name:"viewport",content:"width=device-width,initial-scale=1,maximum-scale=1,shrink-to-fit=no,user-scalable=no,minimal-ui,viewport-fit=cover"}),gy({name:"mobile-web-app-capable",content:"yes"}),gy({name:"theme-color",content:"black"})],gx=[gy({name:"apple-mobile-web-app-capable",content:"yes"}),gy({name:"apple-mobile-web-app-status-bar-style",content:"black"}),{tagName:"link",attributes:gv={rel:"apple-touch-icon",href:"https://aframe.io/images/aframe-logo-152.png"},exists:function(){return document.querySelector('link[rel="'+gv.rel+'"]')}}];function gy(a){return{tagName:"meta",attributes:a,exists:function(){return document.querySelector('meta[name="'+a.name+'"]')}}}var gz,gA,gB,gC=bL(5928),gD=bL.n(gC),gE="loading-screen";function gF(a){var b=gz.hasAttribute("embedded"),c=gB(gz.canvas,b,gz.maxCanvasSize,gz.is("vr-mode"));a.aspect=c.width/c.height,a.updateProjectionMatrix(),gz.renderer.setSize(c.width,c.height,!1)}let gG=[];var gH=eT()("core:propertyTypes:warn"),gI={},gJ=/[,> .[\]:]/,gK=/url\((.+)\)/;function gL(a,b,c,d,e,f){if(a in gI)throw Error("Property type "+a+" is already registered.");gI[a]={default:b,parse:c||gP,stringify:d||gQ,equals:e||gR,isCacheable:!1!==f}}function gM(a,b){if(!Array.isArray(a)||!Array.isArray(b))return a===b;if(a.length!==b.length)return!1;for(var c=0;c<a.length;c++)if(a[c]!==b[c])return!1;return!0}function gN(a){var b,c;return"string"!=typeof a?a:(c=a.match(gK))?c[1]:"#"===a.charAt(0)?(b=document.getElementById(a.substring(1)))?"CANVAS"===b.tagName||"VIDEO"===b.tagName||"IMG"===b.tagName?b:b.getAttribute("src"):void gH('"'+a+'" asset not found.'):a}function gO(a){return a.getAttribute?a.getAttribute("id")?"#"+a.getAttribute("id"):a.getAttribute("src"):gQ(a)}function gP(a){return a}function gQ(a){return null===a?"null":a.toString()}function gR(a,b){return a===b}function gS(a){return parseInt(a,10)}function gT(a,b,c){return fu(a,b,c)}function gU(a,b){if(null===a)return!0;if("object"!=typeof a||Object.keys(a).length!==b)return!1;var c=a.x,d=a.y,e=a.z,f=a.w;return!("number"!=typeof c||"number"!=typeof d||b>2&&"number"!=typeof e||b>3&&"number"!=typeof f)}gL("audio","",gN,gO),gL("array",[],function(a){return Array.isArray(a)?a:a&&"string"==typeof a?a.split(",").map(function(a){return a.trim()}):[]},function(a){return a.join(", ")},gM),gL("asset","",gN,gO),gL("boolean",!1,function(a){return"false"!==a&&!1!==a}),gL("color","#FFF"),gL("int",0,gS),gL("number",0,function(a){return parseFloat(a,10)}),gL("map","",gN,gO),gL("model","",gN,gO),gL("selector",null,function(a){return a?"string"!=typeof a?a:"#"!==a[0]||gJ.test(a)?document.querySelector(a):document.getElementById(a.substring(1)):null},function(a){return a.getAttribute?"#"+a.getAttribute("id"):gQ(a)},gR,!1),gL("selectorAll",null,function(a){return a?"string"!=typeof a?a:Array.prototype.slice.call(document.querySelectorAll(a),0):null},function(a){return a instanceof Array?a.map(function(a){return"#"+a.getAttribute("id")}).join(", "):gQ(a)},gM,!1),gL("src","",function(a){return gH("`src` property type is deprecated. Use `asset` instead."),gN(a)},gO),gL("string",""),gL("time",0,gS),gL("vec2",{x:0,y:0},gT,fv,fw),gL("vec3",{x:0,y:0,z:0},gT,fv,fw),gL("vec4",{x:0,y:0,z:0,w:1},gT,fv,fw);var gV=eW("core:schema:warn");function gW(a){return"type"in a?"string"==typeof a.type:"default"in a}function gX(a,b){var c;if(gW(a))return gY(a,b);for(c in a)a[c]=gY(a[c],b);return a}function gY(a,b){var c,d,e,f=a.default,g=a.type;return a.type?"bool"===a.type?g="boolean":"float"===a.type&&(g="number"):g=void 0===f||"boolean"!=typeof f&&"number"!=typeof f?Array.isArray(f)?"array":"string":typeof f,(e=gI[g])||gV("Unknown property type for component `"+b+"`: "+g),d=!!a.parse,a.parse=a.parse||e.parse,a.stringify=a.stringify||e.stringify,a.equals=a.equals||e.equals,a.isCacheable=!0===a.isCacheable||e.isCacheable,a.type=g,"default"in a?d||("audio"!==(c=g)||"string"==typeof f)&&!("array"===c&&!Array.isArray(f))&&("asset"!==c||"string"==typeof f)&&("boolean"!==c||"boolean"==typeof f)&&("color"!==c||"string"==typeof f)&&("int"!==c||"number"==typeof f)&&("number"!==c||"number"==typeof f)&&("map"!==c||"string"==typeof f)&&("model"!==c||"string"==typeof f)&&("selector"!==c||"string"==typeof f||null===f)&&("selectorAll"!==c||"string"==typeof f||null===f)&&("src"!==c||"string"==typeof f)&&("string"!==c||"string"==typeof f)&&("time"!==c||"number"==typeof f)&&("vec2"===c?gU(f,2):"vec3"===c?gU(f,3):"vec4"!==c||gU(f,4))||gV("Default value `"+f+"` does not match type `"+g+"` in component `"+b+"`"):a.default=e.default,a}var gZ,g$=(gZ=[],function(a,b,c,d,e){var f,g,h,i;for(g in gZ.length=0,c?a:b)c&&void 0===a[g]||gZ.push(g);if(null===a||"object"!=typeof a)return a;for(g in a)void 0===a[g]||b[g]||e||gV("Unknown property `"+g+"` for component/system `"+d+"`.");for(f=0;f<gZ.length;f++){if(h=b[g=gZ[f]],i=a[g],!b[g])return;a[g]=g_(i,h)}return a});function g_(a,b,c){return null!=a&&""!==a||Array.isArray(a=b.default)&&(a=a.slice()),b.parse(a,b.default,c)}function g0(a,b){var c,d,e,f,g={};for(c in a)d=b[c],"object"==typeof(f=e=a[c])&&(f=g1(e,d),d||gV("Unknown component property: "+c)),void 0!==f&&(g[c]=f);return g}function g1(a,b){return"object"!=typeof a?a:b&&null!==a?b.stringify(a):JSON.stringify(a)}var g2={},g3=g_,g4=gX,g5=eW("core:component:warn"),g6=document.currentScript,g7=/[A-Z]+/,g8={},g9=Object.freeze({}),ha=[],hb={get:function(a,b){return a.getComputedPropertyValue(b)},set:function(a,b,c){return b in a.schema?a.recomputeProperty(b,c):void 0!==c&&a.handleUnknownProperty(b,c),!0}},hc=function(a,b,c){var d=this;if(this.sceneOnly&&!a.isScene)throw Error("Component `"+this.name+"` can only be applied to <a-scene>");if(c&&!this.multiple)throw Error("Trying to initialize multiple components of type `"+this.name+"`. There can only be one component of this type per entity.");this.el=a,this.id=c,this.attrName=this.name+(c?"__"+c:""),this.evtDetail={id:this.id,name:this.name},this.initialized=!1,this.el.components[this.attrName]=this,this.objectPool=g8[this.name];var e=this.events;this.events={},function(a,b){var c;for(c in b)a.events[c]=b[c].bind(a)}(this,e),this.attrValue=void 0,this.isObjectBased?(this.data=this.objectPool.use(),fp(this.data,this.schema),this.oldData=this.objectPool.use(),fp(this.oldData,this.schema),this.attrValueProxy=new Proxy(this,hb)):(this.data=void 0,this.oldData=void 0,this.attrValueProxy=void 0),this.deferUnknownPropertyWarnings=!!this.updateSchema,this.throttledEmitComponentChanged=gf(function(){a.emit("componentchanged",d.evtDetail,!1)},200),this.updateProperties(b,!0)};hc.prototype={schema:{},init:function(){},events:{},update:function(a){},updateSchema:void 0,tick:void 0,tock:void 0,play:function(){},pause:function(){},remove:function(){},stringify:function(a){var b=this.schema;return"string"==typeof a?a:this.isSingleProperty?g1(a,b):(a=g0(a,b),bU.stringify(a))},flushToDOM:function(a){var b=a?this.data:this.attrValue;null!=b&&window.HTMLElement.prototype.setAttribute.call(this.el,this.attrName,this.stringify(b))},updateProperties:function(a,b){var c=this.el;this.updateData(a,b),(c.hasLoaded||c.isLoading)&&(this.initialized?this.callUpdateHandler():this.initComponent())},initComponent:function(){var a,b=this.el;b.initializingComponents[this.name]||(b.initializingComponents[this.name]=!0,this.init(),this.initialized=!0,delete b.initializingComponents[this.name],a=this.isObjectBased?g9:void 0,this.dataChanged=!1,this.storeOldData(),this.update(a),b.isPlaying&&this.play(),b.emit("componentinitialized",this.evtDetail,!1))},updateData:function(a,b){this.isSingleProperty?this.recomputeProperty(void 0,a):(b?(fo(this.attrValue),this.recomputeData(a),this.schemaChangeRequired=!!this.updateSchema):"string"==typeof a?bU.parse(a,this.attrValueProxy):gi(this.attrValueProxy,a),this.updateSchemaIfNeeded(a))},updateSchemaIfNeeded:function(a){if(this.schemaChangeRequired&&this.updateSchema)for(var b in ha.length=0,this.updateSchema(this.data),fp(this.data,this.schema),this.recomputeData(a),this.schemaChangeRequired=!1,this.attrValue)void 0!==this.attrValue[b]&&-1===ha.indexOf(b)&&(b in this.schema||g5("Unknown property `"+b+"` for component `"+this.name+"`."));for(var c=0;c<ha.length;c++)g5("Unknown property `"+ha[c]+"` for component `"+this.name+"`.");ha.length=0},callUpdateHandler:function(){if(this.isPositionRotationScale||this.dataChanged){this.dataChanged=!1;var a=this.oldData;this.oldDataInUse=!0,this.update(a),a!==this.oldData&&this.objectPool.recycle(a),this.oldDataInUse=!1,this.storeOldData(),this.throttledEmitComponentChanged()}},handleMixinUpdate:function(){this.recomputeData(),this.updateSchemaIfNeeded(),this.callUpdateHandler()},resetProperty:function(a){(this.isSingleProperty||a in this.schema)&&(a?this.attrValue[a]=void 0:(this.isObjectBased&&this.objectPool.recycle(this.attrValue),this.attrValue=void 0),this.recomputeProperty(a,void 0),this.updateSchemaIfNeeded(),this.callUpdateHandler())},extendSchema:function(a){var b;b=gi({},g2[this.name].schema),gi(b,a),this.schema=g4(b),this.el.emit("schemachanged",this.evtDetail)},getComputedPropertyValue:function(a){var b=this.el.mixinEls,c=this.attrValue&&a?this.attrValue[a]:this.attrValue;if(void 0!==c)return c;for(var d=b.length-1;d>=0;d--){var e=b[d].getAttribute(this.attrName);if(null!==e&&(!a||a in e))return a?e[a]:e}return a?this.schema[a].default:this.schema.default},recomputeProperty:function(a,b){var c=a?this.schema[a]:this.schema;if(null!=b){void 0===this.attrValue&&this.isObjectBased&&(this.attrValue=this.objectPool.use());var d=a?this.attrValue[a]:this.attrValue;"string"==typeof(d=c.isCacheable?g3(b,c,d):b)&&(d=""===b?void 0:b),a?this.attrValue[a]=d:this.attrValue=d}this.oldDataInUse&&(this.oldData=this.objectPool.use(),fp(this.oldData,this.schema),this.storeOldData(),this.oldDataInUse=!1);var e=a?this.oldData[a]:this.oldData,f=a?this.data[a]:this.data,g=g3(this.getComputedPropertyValue(a),c,f);return"array"!==c.type||a||(g=gk(g)),c.equals(g,e)||(this.dataChanged=!0,c.schemaChange&&(this.schemaChangeRequired=!0)),a?this.data[a]=g:this.data=g,g},handleUnknownProperty:function(a,b){void 0===this.attrValue&&(this.attrValue=this.objectPool.use()),this.attrValue[a]=b,this.deferUnknownPropertyWarnings?ha.push(a):this.silenceUnknownPropertyWarnings||g5("Unknown property `"+a+"` for component `"+this.name+"`.")},storeOldData:function(){var a;if(this.isObjectBased)if(this.isSingleProperty)this.oldData=g3(this.data,this.schema,this.oldData);else for(a in this.schema)void 0!==this.data[a]&&(this.data[a]&&"object"==typeof this.data[a]?this.oldData[a]=g3(this.data[a],this.schema[a],this.oldData[a]):this.oldData[a]=this.data[a]);else this.oldData=this.data},recomputeData:function(a){var b;if(this.isSingleProperty)this.recomputeProperty(void 0,a);else{for(b in this.schema)this.attrValueProxy[b]=void 0;a&&"object"==typeof a?gi(this.attrValueProxy,a):"string"==typeof a&&bU.parse(a,this.attrValueProxy)}},eventsAttach:function(){var a;for(a in this.eventsDetach(),this.events)this.el.addEventListener(a,this.events[a])},eventsDetach:function(){var a;for(a in this.events)this.el.removeEventListener(a,this.events[a])},destroy:function(){this.objectPool.recycle(this.attrValue),this.objectPool.recycle(this.data),this.objectPool.recycle(this.oldData),this.attrValue=this.data=this.oldData=this.attrValueProxy=void 0}};var hd={};function he(a,b){var c,d,e,f,g,h={};if(document.currentScript&&document.currentScript!==g6&&gG.forEach(function(b){b.hasLoaded||document.currentScript.compareDocumentPosition(b)!==Node.DOCUMENT_POSITION_FOLLOWING&&(g5("The component `"+a+"` was registered in a <script> tag after the scene. Component <script> tags in an HTML file should be declared *before* the scene such that the component is available to entities during scene initialization."),window.debug&&(hd[a]=!0))}),!0===g7.test(a)&&g5("The component name `"+a+"` contains uppercase characters, but HTML will ignore the capitalization of attribute names. Change the name to be lowercase: `"+a.toLowerCase()+"`"),-1!==a.indexOf("__"))throw Error("The component name `"+a+"` is not allowed. The sequence __ (double underscore) is reserved to specify an id for multiple components of the same type");if(Object.keys(b).forEach(function(a){h[a]={value:b[a],writable:!0}}),g2[a])throw Error("The component `"+a+"` has been already registered. Check that you are not loading two versions of the same component or two different components of the same name.");((c=function(a,b,c){hc.call(this,a,b,c)}).prototype=Object.create(hc.prototype,h)).name=a,c.prototype.isPositionRotationScale="position"===a||"rotation"===a||"scale"===a,c.prototype.constructor=c,c.prototype.system=bZ&&hj[a],c.prototype.play=(f=c.prototype.play,function(){var a=this.el.sceneEl,b=this.el.isPlaying&&!this.isPlaying;this.initialized&&b&&(f.call(this),this.isPlaying=!0,this.eventsAttach(),hf(this)&&a.addBehavior(this))}),c.prototype.pause=(g=c.prototype.pause,function(){var a=this.el.sceneEl;this.isPlaying&&(g.call(this),this.isPlaying=!1,this.eventsDetach(),hf(this)&&a.removeBehavior(this))}),d=gi(g4(c.prototype.schema,c.prototype.name)),c.prototype.isSingleProperty=e=gW(c.prototype.schema),c.prototype.isObjectBased=!e||e&&(hg(d.default)||hg(g3(void 0,d))),g8[a]=fn(),g2[a]={Component:c,dependencies:c.prototype.dependencies,before:c.prototype.before,after:c.prototype.after,isSingleProperty:c.prototype.isSingleProperty,isObjectBased:c.prototype.isObjectBased,multiple:c.prototype.multiple,sceneOnly:c.prototype.sceneOnly,name:a,schema:d,stringify:c.prototype.stringify};for(var i=0;i<gG.length;i++)gG[i].emit("componentregistered",{name:a},!1);return c}function hf(a){return a.tick||a.tock}function hg(a){return a&&a.constructor===Object&&!(a instanceof window.HTMLElement)}var hh=!1;function hi(){hh||(hh=!0,setTimeout(function(){document.dispatchEvent(new CustomEvent("aframeready"))}))}var hj={},hk=function(a){var b=bY&&g2[this.name];this.el=a,this.sceneEl=a,b&&(b.Component.prototype.system=this),this.buildData(),this.init(),this.update({})};function hl(a,b){var c,d,e={},f=gu(document);if(Object.keys(b).forEach(function(a){e[a]={value:b[a],writable:!0}}),hj[a])throw Error("The system `"+a+"` has been already registered. Check that you are not loading two versions of the same system or two different systems of the same name.");if(((d=function(a){hk.call(this,a)}).prototype=Object.create(hk.prototype,e)).name=a,d.prototype.constructor=d,d.prototype.schema=gi(gX(d.prototype.schema)),hj[a]=d,hh)for(c=0;c<f.length;c++)f[c].initSystem(a)}hk.prototype={schema:{},init:function(){},update:function(a){},updateProperties:function(a){var b=this.data;0!==Object.keys(this.schema).length&&(this.buildData(a),this.update(b))},buildData:function(a){var b=this.schema;0!==Object.keys(b).length&&(a=a||window.HTMLElement.prototype.getAttribute.call(this.sceneEl,this.name),gW(b)?this.data=g_(a,b):this.data=g$(bU.parse(a)||{},b,!1,this.name))},tick:void 0,tock:void 0,play:function(){},pause:function(){}};var hm=eW("core:a-node:warn"),hn={"a-scene":!0,"a-assets":!0,"a-assets-items":!0,"a-cubemap":!0,"a-mixin":!0,"a-node":!0,"a-entity":!0};function ho(a){return a.tagName.toLowerCase()in hn||a.isANode}class hp extends HTMLElement{constructor(){super(),this.computedMixinStr="",this.hasLoaded=!1,this.isANode=!0,this.mixinEls=[]}connectedCallback(){hh?this.doConnectedCallback():document.addEventListener("aframeready",this.connectedCallback.bind(this))}doConnectedCallback(){var a;this.sceneEl=this.closestScene(),this.sceneEl||hm("You are attempting to attach <"+this.tagName+"> outside of an A-Frame scene. Append this element to `<a-scene>` instead."),this.hasLoaded=!1,this.emit("nodeready",void 0,!1),this.isMixin||(a=this.getAttribute("mixin"))&&this.updateMixins(a)}attributeChangedCallback(a,b,c){c!==this.computedMixinStr&&("mixin"!==a||this.isMixin||this.updateMixins(c,b))}closestScene(){for(var a=this;a&&!a.isScene;)a=a.parentElement;return a}closest(a){for(var b=this.matches||this.mozMatchesSelector||this.msMatchesSelector||this.oMatchesSelector||this.webkitMatchesSelector,c=this;c&&!b.call(c,a);)c=c.parentElement;return c}disconnectedCallback(){this.hasLoaded=!1}load(a,b){var c=this;this.hasLoaded||(b=b||ho,Promise.allSettled(this.getChildren().filter(b).map(function(a){return new Promise(function(b,c){if(a.hasLoaded)return b();a.addEventListener("loaded",b),a.addEventListener("error",c)})})).then(function(b){b.forEach(function(a){"rejected"===a.status&&hm("Rendering scene with errors on node: ",a.reason.target)}),c.isLoading=!0,c.setupMutationObserver(),a&&a(),c.isLoading=!1,c.hasLoaded=!0,c.emit("loaded-private",void 0,!1),c.emit("loaded",void 0,!1)}))}setupMutationObserver(){var a=this;new MutationObserver(function(b){var c;for(c=0;c<b.length;c++)if("attributes"===b[c].type){var d=b[c].attributeName,e=window.HTMLElement.prototype.getAttribute.call(a,d),f=b[c].oldValue;a.attributeChangedCallback(d,f,e)}}).observe(this,{attributes:!0,attributeOldValue:!0})}getChildren(){return Array.prototype.slice.call(this.children,0)}updateMixins(a,b){var c,d,e,f=hp.newMixinIdArray,g=hp.oldMixinIdArray,h=hp.mixinIds;for(f.length=0,g.length=0,d=a?fB(a.trim(),/\s+/):f,e=b?fB(b.trim(),/\s+/):g,h.newMixinIds=d,h.oldMixinIds=e,c=0;c<e.length;c++)-1===d.indexOf(e[c])&&this.unregisterMixin(e[c]);for(this.computedMixinStr="",this.mixinEls.length=0,c=0;c<d.length;c++)this.registerMixin(d[c]);return this.computedMixinStr&&(this.computedMixinStr=this.computedMixinStr.trim(),window.HTMLElement.prototype.setAttribute.call(this,"mixin",this.computedMixinStr)),0===d.length&&window.HTMLElement.prototype.removeAttribute.call(this,"mixin"),h}registerMixin(a){var b,c,d,e=document.getElementById(a);if(e){if(d=e.getAttribute("mixin"))for(b=fB(d.trim(),/\s+/),c=0;c<b.length;c++)this.registerMixin(b[c]);this.computedMixinStr=this.computedMixinStr+" "+e.id,this.mixinEls.push(e)}else hm("No mixin was found with id `%s`",a)}setAttribute(a,b){"mixin"===a&&this.updateMixins(b),window.HTMLElement.prototype.setAttribute.call(this,a,b)}unregisterMixin(a){var b,c=this.mixinEls;for(b=0;b<c.length;++b)if(a===c[b].id){c.splice(b,1);break}}emit(a,b,c,d){var e=hp.evtData;void 0===c&&(c=!0),e.bubbles=!!c,e.detail=b,d&&(e=gi({},d,e)),this.dispatchEvent(new CustomEvent(a,e))}}hp.evtData={},hp.newMixinIdArray=[],hp.oldMixinIdArray=[],hp.mixinIds={},customElements.define("a-node",hp);var hq=eW("core:a-entity:debug"),hr=eW("core:a-entity:warn"),hs=["position","rotation","scale","visible"],ht={once:!0};class hu extends hp{constructor(){super(),this.components={},this.initializingComponents={},this.componentsToUpdate={},this.isEntity=!0,this.isPlaying=!1,this.object3D=new c0.Group,this.object3D.rotation.order="YXZ",this.object3D.el=this,this.object3DMap={},this.parentEl=null,this.rotationObj={},this.states=[]}attributeChangedCallback(a,b,c){var d=this.components[a];super.attributeChangedCallback(),d&&d.justInitialized&&""===c?delete d.justInitialized:(d||null!==c)&&this.setEntityAttribute(a,b,c)}doConnectedCallback(){var a,b,c=this;super.doConnectedCallback(),b=this.sceneEl,this.addToParent(),this.isScene||(b&&(a=b.querySelector("a-assets"))&&!a.hasLoaded?a.addEventListener("loaded",function(){c.load()}):this.load())}disconnectedCallback(){var a;if(this.parentEl){for(a in this.components)this.removeComponent(a,!1);this.isScene||(this.removeFromParent(),super.disconnectedCallback(),this.object3D.el=null)}}getObject3D(a){return this.object3DMap[a]}setObject3D(a,b){var c,d=this;if(!(b instanceof c0.Object3D))throw Error("`Entity.setObject3D` was called with an object that was not an instance of THREE.Object3D.");(c=this.getObject3D(a))&&this.object3D.remove(c),b.el=this,b.children.length&&b.traverse(function(a){a.el=d}),this.object3D.add(b),this.object3DMap[a]=b,this.emit("object3dset",{object:b,type:a})}removeObject3D(a){var b=this.getObject3D(a);b?(this.object3D.remove(b),delete this.object3DMap[a],this.emit("object3dremove",{type:a})):hr("Tried to remove `Object3D` of type:",a,"which was not defined.")}getOrCreateObject3D(a,b){var c=this.getObject3D(a);return!c&&b&&(c=new b,this.setObject3D(a,c)),hr("`getOrCreateObject3D` has been deprecated. Use `setObject3D()` and `object3dset` event instead."),c}add(a){if(!a.object3D)throw Error("Trying to add an element that doesn't have an `object3D`");this.object3D.add(a.object3D),this.emit("child-attached",{el:a})}addToParent(){var a=this.parentEl=this.parentNode;a&&a.add&&!this.attachedToParent&&(a.add(this),this.attachedToParent=!0)}removeFromParent(){var a=this.parentEl;this.parentEl.remove(this),this.attachedToParent=!1,this.parentEl=null,a.emit("child-detached",{el:this})}load(){var a=this;!this.hasLoaded&&this.parentEl&&super.load.call(this,function(){a.parentEl&&(a.updateComponents(),(a.isScene||a.parentEl.isPlaying)&&a.play())})}remove(a){a?this.object3D.remove(a.object3D):this.parentNode.removeChild(this)}getChildEntities(){for(var a=this.children,b=[],c=0;c<a.length;c++){var d=a[c];d instanceof hu&&b.push(d)}return b}initComponent(a,b,c){var d,e,f,g;g=(f=fB(a,"__"))[0],e=f.length>2?f.slice(1).join("__"):f[1],g2[g]&&(hv(this,a)||void 0!==b||c)&&(a in this.components||(this.initComponentDependencies(g),d=new g2[g].Component(this,b,e),this.isPlaying&&d.play(),this.hasAttribute(a)||(d.justInitialized=!0,window.HTMLElement.prototype.setAttribute.call(this,a,"")),hq("Component initialized: %s",a)))}initComponentDependencies(a){var b,c;if(g2[a]&&(b=g2[a].dependencies))for(c=0;c<b.length;c++)this.initComponent(b[c],window.HTMLElement.prototype.getAttribute.call(this,b[c])||void 0,!0)}removeComponent(a,b){var c;(c=this.components[a])&&(c.initialized?(c.pause(),c.remove(),b&&(c.destroy(),delete this.components[a],this.hasAttribute(a)&&window.HTMLElement.prototype.removeAttribute.call(this,a)),this.emit("componentremoved",c.evtDetail,!1)):this.addEventListener("componentinitialized",function c(d){d.detail.name===a&&(this.removeComponent(a,b),this.removeEventListener("componentinitialized",c))}))}updateComponents(){var a,b,c,d,e,f,g=this.componentsToUpdate;if(this.hasLoaded||this.isLoading){for(c=0;c<this.mixinEls.length;c++)for(d in this.mixinEls[c].componentCache)hw(d)&&(g[d]=!0);if(this.getExtraComponents)for(d in b=this.getExtraComponents())hw(d)&&(g[d]=!0);for(c=0;c<this.attributes.length;++c)d=this.attributes[c].name,-1===hs.indexOf(d)&&hw(d)&&(g[d]=!0);for(c=0;c<hs.length;c++)d=hs[c],this.hasAttribute(d)&&this.updateComponent(d,this.getDOMAttribute(d));for(d in g)e=this.getDOMAttribute(d),a=(f=b&&b[d])?f.constructor===Object?gi(f,fY(e||{})):e||f:e,this.updateComponent(d,a),delete g[d]}}updateComponent(a,b,c){var d=this.components[a];if(d)return null!==b||hv(this,a)?void d.updateProperties(b,c):void this.removeComponent(a,!0);this.initComponent(a,b,!1)}removeAttribute(a,b){var c=this.components[a];c&&void 0===b&&this.removeComponent(a,!0),c&&void 0!==b?c.resetProperty(b):("mixin"===a&&this.mixinUpdate(""),window.HTMLElement.prototype.removeAttribute.call(this,a))}play(){var a,b,c;if(!this.isPlaying&&(this.hasLoaded||this.isLoading)){for(c in this.isPlaying=!0,this.components)this.components[c].play();for(a=this.getChildEntities(),b=0;b<a.length;b++)a[b].play();this.emit("play")}}pause(){var a,b,c;if(this.isPlaying){for(c in this.isPlaying=!1,this.components)this.components[c].pause();for(a=this.getChildEntities(),b=0;b<a.length;b++)a[b].pause();this.emit("pause")}}setEntityAttribute(a,b,c){if(g2[a]||this.components[a])this.updateComponent(a,c);else if("mixin"===a){if(c===this.computedMixinStr)return;this.mixinUpdate(c,b)}}mixinUpdate(a,b,c){var d,e,f,g,h=hu.componentsUpdated,i=this;if(c||(b=b||this.getAttribute("mixin")),this.hasLoaded){for(f=this.updateMixins(a,b),h.length=0,g=0;g<this.mixinEls.length;g++)for(d in this.mixinEls[g].componentCache)-1===h.indexOf(d)&&(this.components[d]?this.components[d].handleMixinUpdate():this.initComponent(d,null),h.push(d));for(g=0;g<f.oldMixinIds.length;g++)if(e=document.getElementById(f.oldMixinIds[g]))for(d in e.componentCache)-1===h.indexOf(d)&&this.components[d]&&(this.getDOMAttribute(d)?this.components[d].handleMixinUpdate():this.removeComponent(d,!0))}else this.addEventListener("loaded-private",function(){i.mixinUpdate(a,b,!0)},ht)}setAttribute(a,b,c){var d,e,f,g,h=hu.singlePropUpdate;if(!g2[(f=a.indexOf("__"))>0?a.substring(0,f):a])return"mixin"===a&&this.mixinUpdate(b),void super.setAttribute.call(this,a,b);if(!this.components[a]&&this.hasAttribute(a)&&this.updateComponent(a,window.HTMLElement.prototype.getAttribute.call(this,a)),void 0!==c&&"string"==typeof b&&b.length>0&&"string"==typeof fY(b)){for(g in h)delete h[g];(d=h)[b]=c,e=!1}else d=b,e=!0===c;this.updateComponent(a,d,e),this.sceneEl&&this.sceneEl.getAttribute("debug")&&this.components[a].flushToDOM()}flushToDOM(a){var b,c,d,e=this.components,f=this.children;for(d in e)e[d].flushToDOM();if(a)for(c=0;c<f.length;++c)(b=f[c]).flushToDOM&&b.flushToDOM(a)}getAttribute(a){var b,c,d,e;return"position"===a?this.object3D.position:"rotation"===a?(c=c0.MathUtils.radToDeg,d=this.object3D.rotation,(e=this.rotationObj).x=c(d.x),e.y=c(d.y),e.z=c(d.z),e):"scale"===a?this.object3D.scale:"visible"===a?this.object3D.visible:(b=this.components[a])?b.data:window.HTMLElement.prototype.getAttribute.call(this,a)}getDOMAttribute(a){var b=this.components[a];return b?b.attrValue:window.HTMLElement.prototype.getAttribute.call(this,a)}addState(a){this.is(a)||(this.states.push(a),this.emit("stateadded",a))}removeState(a){var b=this.states.indexOf(a);-1!==b&&(this.states.splice(b,1),this.emit("stateremoved",a))}is(a){return -1!==this.states.indexOf(a)}inspect(){this.sceneEl.components.inspector.openInspector(this)}destroy(){var a;if(this.parentNode)hr("Entity can only be destroyed if detached from scenegraph.");else for(a in this.components)this.components[a].destroy()}}function hv(a,b){return!(!a.components[b]||!a.components[b].attrValue)||function(a,b){var c,d=!1;for(c=0;c<b.length&&!(d=b[c].hasAttribute(a));++c);return d}(b,a.mixinEls)}function hw(a){return -1!==a.indexOf("__")&&(a=fB(a,"__")[0]),!!g2[a]}function hx(a){if(a.data&&"vr"===a.data.type)switch(a.data.data){case"enter":this.enterVR();break;case"exit":this.exitVR()}}hu.componentsUpdated=[],hu.singlePropUpdate={},customElements.define("a-entity",hu),fc()&&window.addEventListener("orientationchange",function(){document.documentElement.style.height="initial",setTimeout(function(){document.documentElement.style.height="100%",setTimeout(function(){window.scrollTo(0,1)},500)},500)});var hy=eW("core:a-scene:warn"),hz=fc(),hA=e8();class hB extends hu{constructor(){super(),this.clock=new c0.Clock,this.isIOS=hz,this.isMobile=hA,this.hasWebXR=e0,this.isAR=!1,this.isScene=!0,this.object3D=new c0.Scene,this.resize=this.resize.bind(this),this.render=this.render.bind(this),this.systems={},this.systemNames=[],this.time=this.delta=0,this.usedOfferSession=!1,this.componentOrder=[],this.behaviors={},this.hasLoaded=!1,this.isPlaying=!1,this.originalHTML=this.innerHTML}addFullScreenStyles(){document.documentElement.classList.add("a-fullscreen")}removeFullScreenStyles(){document.documentElement.classList.remove("a-fullscreen")}doConnectedCallback(){var a,b,c,d,e,f,g,h,i,j,k,l,m,n=this,o=this.hasAttribute("embedded");this.setAttribute("inspector",""),this.setAttribute("keyboard-shortcuts",""),this.setAttribute("screenshot",""),this.setAttribute("xr-mode-ui",""),this.setAttribute("device-orientation-permission-ui",""),super.doConnectedCallback(),function(a){var b;function c(){document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||a.exitVR(),document.activeElement.blur(),document.body.focus()}(b=document.createElement("canvas")).classList.add("a-canvas"),b.dataset.aframeCanvas=!0,a.appendChild(b),document.addEventListener("fullscreenchange",c),document.addEventListener("mozfullscreenchange",c),document.addEventListener("webkitfullscreenchange",c),document.addEventListener("MSFullscreenChange",c),b.addEventListener("touchmove",function(a){a.preventDefault()},{passive:!1}),a.canvas=b,a.emit("render-target-loaded",{target:b}),setTimeout(a.resize.bind(a),0)}(this),this.setupRenderer(),gB=hE,l=(k=(gz=this).hasAttribute(gE)?bU.parse(gz.getAttribute(gE)):void 0)&&k.dotsColor||"white",m=k&&k.backgroundColor||"#24CAFF",(void 0===k||"true"===k.enabled||void 0===k.enabled)&&(a=new c0.Scene,b=new c0.SphereGeometry(.2,36,18,0,2*Math.PI,0,Math.PI),c=new c0.MeshBasicMaterial({color:l}),e=(d=new c0.Mesh(b,c)).clone(),f=d.clone(),g=new c0.PerspectiveCamera(80,window.innerWidth/window.innerHeight,5e-4,1e4),h=new c0.Clock,i=0,j=function(){gz.renderer.render(a,g),d.visible=(i=h.getElapsedTime()%4)>=1,e.visible=i>=2,f.visible=i>=3},a.background=new c0.Color(m),a.add(g),d.position.set(-1,0,-15),e.position.set(0,0,-15),f.position.set(1,0,-15),g.add(d),g.add(e),g.add(f),(gA=document.createElement("div")).className="a-loader-title",gA.innerHTML=document.title,gA.style.display="none",gA.setAttribute(eR,""),gz.appendChild(gA),setTimeout(function(){gz.hasLoaded||(gF(g),gA.style.display="block",window.addEventListener("resize",function(){gF(g)}),gz.renderer.setAnimationLoop(j))},200)),this.resize(),o||this.addFullScreenStyles(),gt()&&window.addEventListener("message",hx.bind(this)),function(a){var b,c=document.head,d=c.querySelector("script"),e=[];return gw.forEach(f),a.isIOS&&gx.forEach(f);function f(a){a&&!a.exists()&&(b=function(a){if(a&&a.tagName){var b=document.createElement(a.tagName);return b.setAttribute(eR,""),gi(b,a.attributes)}}(a))&&(d?d.parentNode.insertBefore(b,d):c.appendChild(b),e.push(b))}}(this),function(a){if(a.isMobile){var b=a.wakelock=new(gD());a.addEventListener("enter-vr",function(){b.request()}),a.addEventListener("exit-vr",function(){b.release()})}}(this),this.enterVRBound=function(){n.enterVR()},this.exitVRBound=function(){n.exitVR()},window.addEventListener("sessionend",this.resize),this.addEventListener("cameraready",function(){n.attachedCallbackPostCamera()}),this.initSystems(),this.componentOrder=hC(g2,this.componentOrder),this.addEventListener("componentregistered",function(){n.componentOrder=hC(g2,n.componentOrder)}),this.hasWebXR&&navigator.xr&&navigator.xr.addEventListener&&navigator.xr.addEventListener("sessiongranted",function(){n.enterVR()})}attachedCallbackPostCamera(){var a=this;window.addEventListener("load",void 0),window.addEventListener("resize",function(){a.isIOS?setTimeout(a.resize,100):a.resize()}),this.play(),gG.push(this)}initSystems(){var a;for(a in this.initSystem("camera"),hj)"camera"!==a&&this.initSystem(a)}initSystem(a){this.systems[a]||(this.systems[a]=new hj[a](this),this.systemNames.push(a))}disconnectedCallback(){var a=gG.indexOf(this);super.disconnectedCallback(),gG.splice(a,1),window.removeEventListener("sessionend",this.resize),this.removeFullScreenStyles(),this.renderer.dispose()}addBehavior(a){var b,c,d=this.behaviors[a.name];for(c in d||(d=this.behaviors[a.name]={tick:{inUse:!1,array:[],markedForRemoval:[]},tock:{inUse:!1,array:[],markedForRemoval:[]}}),d)if(a[c]){if((b=d[c]).inUse){var e=b.markedForRemoval.indexOf(a);-1!==e&&b.markedForRemoval.splice(e,1)}-1===b.array.indexOf(a)&&b.array.push(a)}}getPointerLockElement(){return document.pointerLockElement}checkHeadsetConnected(){return e3()}enterAR(){if(!this.hasWebXR)throw Error("Failed to enter AR mode, WebXR not supported.");if(!e_)throw Error("Failed to enter AR, WebXR immersive-ar mode not supported in your browser or device.");return this.enterVR(!0)}enterVR(a,b){var c,d=this,e=d.renderer.xr;if(b&&(!navigator.xr||!navigator.xr.offerSession))return Promise.resolve("OfferSession is not supported.");if(d.usedOfferSession&&b)return Promise.resolve("OfferSession was already called.");if(this.is("vr-mode"))return Promise.resolve("Already in VR.");if(this.checkHeadsetConnected()||this.isMobile){var f=d.getAttribute("renderer");if(e.enabled=!0,this.hasWebXR){this.xrSession&&this.xrSession.removeEventListener("end",this.exitVRBound);var g=this.sceneEl.systems.webxr.sessionReferenceSpaceType;e.setReferenceSpaceType(g);var h=a?"immersive-ar":"immersive-vr";return c=this.sceneEl.systems.webxr.sessionConfiguration,new Promise(function(a,g){var j=b?navigator.xr.offerSession.bind(navigator.xr):navigator.xr.requestSession.bind(navigator.xr);d.usedOfferSession|=b,j(h,c).then(function(g){b&&(d.usedOfferSession=!1),e.layersEnabled=-1!==c.requiredFeatures.indexOf("layers"),e.setSession(g).then(function(){e.setFoveation(f.foveationLevel),d.xrSession=g,d.systems.renderer.setWebXRFrameRate(g),g.addEventListener("end",d.exitVRBound),i(a)})},function(a){g(Error("Failed to enter "+("immersive-ar"===h?"AR":"VR")+" mode (`requestSession`)",{cause:a}))})})}throw Error("Failed to enter "+(a?"AR":"VR")+" no WebXR")}return i(),Promise.resolve();function i(b){var c;a?d.addState("ar-mode"):d.addState("vr-mode"),d.emit("enter-vr",{target:d}),!d.hasWebXR&&d.isMobile&&screen.orientation&&screen.orientation.lock&&screen.orientation.lock("landscape"),d.addFullScreenStyles(),d.isMobile||d.checkHeadsetConnected()||((c=d.canvas).requestFullscreen||c.webkitRequestFullscreen||c.mozRequestFullScreen||c.msRequestFullscreen).apply(c,[{navigationUI:"hide"}]),d.resize(),b&&b()}}exitVR(){var a=this.renderer.xr;if(!this.is("vr-mode")&&!this.is("ar-mode"))return Promise.resolve("Not in immersive mode.");if(this.checkHeadsetConnected()||this.isMobile){if(a.enabled=!1,!this.hasWebXR)throw Error("Failed to exit VR - no WebXR");this.xrSession.removeEventListener("end",this.exitVRBound),this.xrSession.end().then(function(){},function(){}),this.xrSession=void 0}else(document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement)&&(document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen());return this.removeState("vr-mode"),this.removeState("ar-mode"),this.isMobile&&screen.orientation&&screen.orientation.unlock&&screen.orientation.unlock(),this.hasAttribute("embedded")&&this.removeFullScreenStyles(),this.resize(),this.isIOS&&fF(this.canvas),this.renderer.setPixelRatio(window.devicePixelRatio),this.emit("exit-vr",{target:this}),Promise.resolve()}getAttribute(a){var b=this.systems[a];return b?b.data:hu.prototype.getAttribute.call(this,a)}getDOMAttribute(a){var b=this.systems[a];return b?b.data:hu.prototype.getDOMAttribute.call(this,a)}setAttribute(a,b,c){if(hj[a]){hp.prototype.setAttribute.call(this,a,b);var d=this.systems[a];d&&d.updateProperties(b)}else hu.prototype.setAttribute.call(this,a,b,c)}removeBehavior(a){var b,c,d,e=this.behaviors[a.name];for(c in e)a[c]&&-1!==(d=(b=e[c]).array.indexOf(a))&&(b.inUse?-1===b.markedForRemoval.indexOf(a)&&b.markedForRemoval.push(a):(b.array[d]=b.array[b.array.length-1],b.array.pop()))}resize(){var a,b,c=this.camera,d=this.canvas,e=this.renderer.xr.isPresenting;a=this.renderer.xr.enabled&&e,!c||!d||this.is("vr-mode")&&(this.isMobile||a)||(c.aspect=(b=hE(d,this.getAttribute("embedded")&&!this.is("vr-mode"),this.maxCanvasSize,this.is("vr-mode"))).width/b.height,c.updateProjectionMatrix(),this.renderer.setSize(b.width,b.height,!1),this.emit("rendererresize",null,!1))}setupRenderer(){var a,b,c,d=this;c={alpha:!0,antialias:!hA,canvas:this.canvas,logarithmicDepthBuffer:!1,powerPreference:"high-performance"},this.maxCanvasSize={height:-1,width:-1},this.hasAttribute("renderer")&&((b=fY(this.getAttribute("renderer"))).precision&&(c.precision=b.precision+"p"),b.antialias&&"auto"!==b.antialias&&(c.antialias="true"===b.antialias),b.logarithmicDepthBuffer&&"auto"!==b.logarithmicDepthBuffer&&(c.logarithmicDepthBuffer="true"===b.logarithmicDepthBuffer),b.alpha&&(c.alpha="true"===b.alpha),b.stencil&&(c.stencil="true"===b.stencil),b.multiviewStereo&&(c.multiviewStereo="true"===b.multiviewStereo),this.maxCanvasSize={width:b.maxCanvasWidth?parseInt(b.maxCanvasWidth):this.maxCanvasSize.width,height:b.maxCanvasHeight?parseInt(b.maxCanvasHeight):this.maxCanvasSize.height});var e=["WebGLRenderer","WebGPURenderer"].find(function(a){return c0[a]});(a=this.renderer=new c0[e](c)).xr.setPoseTarget||(a.xr.setPoseTarget=function(){}),a.setPixelRatio(window.devicePixelRatio),this.camera&&a.xr.setPoseTarget(this.camera.el.object3D),this.addEventListener("camera-set-active",function(){a.xr.setPoseTarget(d.camera.el.object3D)})}play(){var a=this,b=this;this.renderStarted?hu.prototype.play.call(this):(this.addEventListener("loaded",function(){var a=this.renderer;hu.prototype.play.call(this),b.renderStarted||(b.resize(),b.renderer&&(window.performance&&window.performance.mark("render-started"),window.removeEventListener("resize",gF),gA&&(gA.style.display="none"),a.setAnimationLoop(this.render),b.renderStarted=!0,b.emit("renderstart")))}),setTimeout(function(){hu.prototype.load.call(a)}))}updateComponent(a){a in hj||hu.prototype.updateComponent.apply(this,arguments)}tick(a,b){var c,d=this.systems;for(this.callComponentBehaviors("tick",a,b),c=0;c<this.systemNames.length;c++)d[this.systemNames[c]].tick&&d[this.systemNames[c]].tick(a,b)}tock(a,b,c){var d,e=this.systems;for(this.callComponentBehaviors("tock",a,b),d=0;d<this.systemNames.length;d++)e[this.systemNames[d]].tock&&e[this.systemNames[d]].tock(a,b,c)}render(a,b){var c=this.renderer;this.frame=b,this.delta=1e3*this.clock.getDelta(),this.time=1e3*this.clock.elapsedTime,this.isPlaying&&this.tick(this.time,this.delta);var d=null;if(this.is("ar-mode")&&(d=this.object3D.background,this.object3D.background=null),c.render(this.object3D,this.camera),d&&(this.object3D.background=d),this.isPlaying){var e=c.xr.isPresenting?c.xr.getCamera():this.camera;this.tock(this.time,this.delta,e)}}callComponentBehaviors(a,b,c){for(var d,e=0;e<this.componentOrder.length;e++){var f=this.behaviors[this.componentOrder[e]];if(f){var g=f[a];for(g.inUse=!0,d=0;d<g.array.length;d++)g.array[d].isPlaying&&g.array[d][a](b,c);for(g.inUse=!1,d=0;d<g.markedForRemoval.length;d++)this.removeBehavior(g.markedForRemoval[d]);g.markedForRemoval.length=0}}}}function hC(a,b){var c,d,e={},f=b||[];for(d in f.length=0,a){var g=a[d];if(void 0!==g){var h=g.before?g.before.slice(0):[],i=g.after?g.after.slice(0):[];e[d]={before:h,after:i,visited:!1,done:!1}}}for(d in e)for(c=0;c<e[d].before.length;c++){var j=e[d].before[c];j in e?e[j].after.push(d):hy("Invalid ordering constraint, no component named `"+j+"` referenced by `"+d+"`")}for(d in e)e[d].done||function a(b){if(b in e&&!e[b].done)if(e[b].visited)hy("Cycle detected, ignoring one or more before/after constraints. The resulting order might be incorrect");else{e[b].visited=!0;for(var c=0;c<e[b].after.length;c++){var d=e[b].after[c];d in e||hy("Invalid before/after constraint, no component named `"+d+"` referenced in `"+b+"`"),a(d)}e[b].done=!0,f.push(b)}}(d);return f}function hD(a,b){var c,d=window.devicePixelRatio;return!b||-1===b.width&&-1===b.height||a.width*d<b.width&&a.height*d<b.height||(c=a.width/a.height,a.width*d>b.width&&-1!==b.width&&(a.width=Math.round(b.width/d),a.height=Math.round(b.width/c/d)),a.height*d>b.height&&-1!==b.height&&(a.height=Math.round(b.height/d),a.width=Math.round(b.height*c/d))),a}function hE(a,b,c,d){var e;return a.parentElement?b?hD({height:a.parentElement.offsetHeight,width:a.parentElement.offsetWidth},c):(e={height:document.body.offsetHeight,width:document.body.offsetWidth},d?e:hD(e,c)):{height:0,width:0}}customElements.define("a-scene",hB);var hF={},hG=[],hH=function(){};function hI(a,b){var c,d={};if(Object.keys(b).forEach(function(a){d[a]={value:b[a],writable:!0}}),hF[a])throw Error("The geometry `"+a+"` has been already registered");return((c=function(){hH.call(this)}).prototype=Object.create(hH.prototype,d)).name=a,c.prototype.constructor=c,hF[a]={Geometry:c,schema:gX(c.prototype.schema)},hG.push(a),c}hH.prototype={schema:{},init:function(a){return this.geometry=new c0.BufferGeometry,this.geometry},update:function(a){}};var hJ=eW("extras:primitives:debug"),hK=eW("extras:primitives:warn"),hL=eW("extras:primitives:error"),hM={};function hN(a,b){if(!hn[a=a.toLowerCase()]){hn[a]=!0,hJ("Registering <%s>",a),b.defaultAttributes&&hK("The 'defaultAttributes' object is deprecated. Use 'defaultComponents' instead.");var c=b.mappings||{},d=class extends hu{constructor(){super(),this.defaultComponentsFromPrimitive=b.defaultComponents||b.defaultAttributes||{},this.deprecated=b.deprecated||null,this.deprecatedMappings=b.deprecatedMappings||{},this.mappings=c,b.deprecated&&console.warn(b.deprecated),this.resolveMappingCollisions()}resolveMappingCollisions(){var a=this.mappings,b=this;Object.keys(a).forEach(function(c){var d;c!==c.toLowerCase()&&hK("Mapping keys should be specified in lower case. The mapping key "+c+" may not be recognized"),g2[c]&&(d=a[c].replace(".","-"),a[d]=a[c],delete a[c],console.warn("The primitive "+b.tagName.toLowerCase()+" has a mapping collision. The attribute "+c+" has the same name as a registered component and has been renamed to "+d))})}getExtraComponents(){var a,b,c,d,e,f=this;for(b=gk(this.defaultComponentsFromPrimitive),(e=this.getAttribute("mixin"))&&(e=fB(e.trim(),/\s+/)).forEach(function(a){var c,e,i=document.getElementById(a);if(i){var j=i.rawAttributeCache,k=i.componentCache;for(var l in j){if(d=f.mappings[l])return void hO(d,j[l],b);l in k&&(b[l]=(c=b[l],e=k[l],void 0===c?g(e):void 0===e?g(c):h(c)&&h(e)?gj(c,e):g(e)))}}}),c=0;c<this.attributes.length;c++)a=this.attributes[c],(d=this.mappings[a.name])&&hO(d,a.value,b);return b;function g(a){return h(a)?gj({},a):a}function h(a){return null!==a&&a.constructor===Object}}attributeChangedCallback(a,b,c){var d=this.mappings[a];a in this.deprecatedMappings&&console.warn(this.deprecatedMappings[a]),a&&d?fE(this,d,c):super.attributeChangedCallback(a,b,c)}};return customElements.define(a,d),d.mappings=c,hM[a]=d,d}hL("Trying to register primitive "+a+" that has been already previously registered")}function hO(a,b,c){var d=fC(a);d.constructor===Array?(c[d[0]]=c[d[0]]||{},c[d[0]][d[1]]=b.trim()):c[d]=b.trim()}var hP={},hQ=[],hR={array:"v3",color:"v3",int:"i",number:"f",map:"t",time:"f",vec2:"v2",vec3:"v3",vec4:"v4"},hS=function(){};function hT(a,b){var c,d={};if(Object.keys(b).forEach(function(a){d[a]={value:b[a],writable:!0}}),hP[a])throw Error("The shader "+a+" has already been registered");return((c=function(){hS.call(this)}).prototype=Object.create(hS.prototype,d)).name=a,c.prototype.constructor=c,hP[a]={Shader:c,schema:gX(c.prototype.schema)},hQ.push(a),c}hS.prototype={schema:{},vertexShader:"void main() {gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);}",fragmentShader:"void main() {gl_FragColor = vec4(1.0, 0.0, 1.0, 1.0);}",init:function(a){return this.uniforms=this.initUniforms(),this.material=new(this.raw?c0.RawShaderMaterial:c0.ShaderMaterial)({uniforms:this.uniforms,glslVersion:this.raw||this.glsl3?c0.GLSL3:null,vertexShader:this.vertexShader,fragmentShader:this.fragmentShader}),this.material},initUniforms:function(){var a,b,c=this.schema,d={};for(a in c)"uniform"===c[a].is&&(b=hR[c[a].type],d[a]={type:b,value:void 0});return d},update:function(a){var b,c,d=this.schema,e=this.uniforms;for(b in a)if(d[b]&&"uniform"===d[b].is)if("map"!==d[b].type)e[b].value=this.parseValue(d[b].type,a[b]),e[b].needsUpdate=!0;else{if(!e[b]||e[b].value===a[b])continue;c="_texture_"+b,this.setMapOnTextureLoad(e,b,c),fP(c,b,this,a)}},parseValue:function(a,b){var c;switch(a){case"vec2":return new c0.Vector2(b.x,b.y);case"vec3":return new c0.Vector3(b.x,b.y,b.z);case"vec4":return new c0.Vector4(b.x,b.y,b.z,b.w);case"color":return c=new c0.Color(b),new c0.Vector3(c.r,c.g,c.b);default:return b}},setMapOnTextureLoad:function(a,b,c){var d=this;this.el.addEventListener("materialtextureloaded",function(){a[b].value=d.material[c],a[b].needsUpdate=!0})}};var hU=new c0.FileLoader,hV=eW("core:a-assets:warn");function hW(a){var b,c,d,e=(b=a).hasAttribute("crossorigin")||null!==(c=b.getAttribute("src"))&&(-1===c.indexOf("://")||(d=c.indexOf("://")>-1?c.split("/")[2]:c.split("/")[0]).substring(0,d.indexOf(":"))===window.location.host)?b:(hV('Cross-origin element (e.g., <img>) was requested without `crossorigin` set. A-Frame will re-request the asset with `crossorigin` attribute set. Please set `crossorigin` on the element (e.g., <img crossorigin="anonymous">)',c),b.crossOrigin="anonymous",b.cloneNode(!0));return e.tagName&&"video"===e.tagName.toLowerCase()&&(e.setAttribute("playsinline",""),e.setAttribute("webkit-playsinline","")),e!==a&&(a.parentNode.appendChild(e),a.parentNode.removeChild(a)),e}customElements.define("a-assets",class extends hp{constructor(){super(),this.isAssets=!0,this.fileLoader=hU,this.timeout=null}doConnectedCallback(){var a,b,c,d,e,f,g=this,h=[];if(super.doConnectedCallback(),!this.parentNode.isScene)throw Error("<a-assets> must be a child of a <a-scene>.");for(e=this.querySelectorAll("img"),a=0;a<e.length;a++)d=hW(e[a]),h.push(new Promise(function(b,c){c0.Cache.add(e[a].getAttribute("src"),d),d.complete?b():(d.onload=b,d.onerror=c)}));for(c=this.querySelectorAll("audio, video"),a=0;a<c.length;a++)(b=hW(c[a])).src||b.srcObject||hV("Audio/video asset has neither `src` nor `srcObject` attributes."),h.push(function(a){if(a.hasAttribute("autoplay")||"auto"===a.getAttribute("preload"))return new Promise(function(b,c){if(4===a.readyState)return b();if(a.error)return c();function d(){for(var c=0,d=0;d<a.buffered.length;d++)c+=a.buffered.end(d)-a.buffered.start(d);c>=a.duration&&("VIDEO"===a.tagName&&c0.Cache.add(a.getAttribute("src"),a),b())}a.addEventListener("loadeddata",d,!1),a.addEventListener("progress",d,!1),a.addEventListener("error",c,!1)})}(b));this.getChildren().forEach(function(a){a.isAssetItem&&a.hasAttribute("src")&&h.push(new Promise(function(b,c){if(a.hasLoaded)return b();a.addEventListener("loaded",b),a.addEventListener("error",c)}))}),Promise.allSettled(h).then(function(){null!==g.timeout&&g.load()}),f=parseInt(this.getAttribute("timeout"),10)||3e3,this.timeout=setTimeout(function(){g.hasLoaded||(hV("Asset loading timed out in",f,"ms"),g.timeout=null,g.emit("timeout"),g.load())},f)}disconnectedCallback(){super.disconnectedCallback(),this.timeout&&clearTimeout(this.timeout)}load(){super.load.call(this,null,function(){return!1})}}),customElements.define("a-asset-item",class extends hp{constructor(){super(),this.data=null,this.isAssetItem=!0}connectedCallback(){var a,b,c,d,e,f=this,g=this.getAttribute("src");hU.setResponseType(this.getAttribute("response-type")||((e=((a=document.createElement("a")).href=g,b=a.search.replace(/^\?/,""),d=(c=g.replace(b,"").replace("?","")).substring(c.lastIndexOf("/")+1)).lastIndexOf("."))>=0&&".glb"===d.slice(e,g.search(/\?|#|$/))?"arraybuffer":"text")),hU.load(g,function(a){f.data=a,hp.prototype.load.call(f)},function(a){f.emit("progress",{loadedBytes:a.loaded,totalBytes:a.total,xhr:a})},function(a){f.emit("error",{xhr:a},!1)})}});var hX=eW("core:cubemap:warn");class hY extends HTMLElement{constructor(a){return super(a)}onReadyStateChange(){"complete"===document.readyState&&this.doConnectedCallback()}connectedCallback(){"complete"===document.readyState?hY.prototype.doConnectedCallback.call(this):document.addEventListener("readystatechange",this.onReadyStateChange.bind(this))}doConnectedCallback(){this.srcs=this.validate()}validate(){var a,b=this.querySelectorAll("[src]"),c=[];if(6===b.length){for(a=0;a<b.length;a++)"IMG"===b[a].tagName?c.push(b[a]):c.push(b[a].getAttribute("src"));return c}hX("<a-cubemap> did not contain exactly six elements each with a `src` attribute.")}}customElements.define("a-cubemap",hY),customElements.define("a-mixin",class extends hp{constructor(){super(),this.componentCache={},this.rawAttributeCache={},this.isMixin=!0}doConnectedCallback(){super.doConnectedCallback(),this.sceneEl=this.closestScene(),this.id=this.getAttribute("id"),this.cacheAttributes(),this.updateEntities(),this.load()}attributeChangedCallback(a,b,c){super.attributeChangedCallback(),this.cacheAttribute(a,c),this.updateEntities()}setAttribute(a,b){window.HTMLElement.prototype.setAttribute.call(this,a,b),this.cacheAttribute(a,b)}cacheAttribute(a,b){var c;c=g2[fB(a,"__")[0]],void 0===b&&(b=window.HTMLElement.prototype.getAttribute.call(this,a)),this.rawAttributeCache[a]=b,c&&(this.componentCache[a]=this.parseComponentAttrValue(c,b))}parseComponentAttrValue(a,b){var c;return"string"!=typeof b?b:(a.isSingleProperty?"string"==typeof(c=a.schema.parse(b))&&(c=b):c=fY(b),c)}getAttribute(a){return this.componentCache[a]||window.HTMLElement.prototype.getAttribute.call(this,a)}cacheAttributes(){var a,b,c=this.attributes;for(b=0;b<c.length;b++)a=c[b].name,this.cacheAttribute(a)}updateEntities(){var a,b,c;if(this.sceneEl)for(b=this.sceneEl.querySelectorAll("[mixin~="+this.id+"]"),c=0;c<b.length;c++)(a=b[c]).hasLoaded&&!a.isMixin&&a.mixinUpdate(this.id)}});let hZ="1.7.0";var h$=new c0.Color,h_=new c0.Color,h0=fD,h1=fE,h2={},h3="color",h4="rotation",h5="components";function h6(a){a.x=c0.MathUtils.degToRad(a.x),a.y=c0.MathUtils.degToRad(a.y),a.z=c0.MathUtils.degToRad(a.z)}function h7(a,b,c){var d;for(d=0;d<b.length;d++)a.addEventListener(b[d],c)}function h8(a,b,c){var d;for(d=0;d<b.length;d++)a.removeEventListener(b[d],c)}function h9(a,b){var c,d,e;for(d=ib(b),e=a,c=0;c<d.length;c++)e=e[d[c]];if(void 0===e)throw console.log(a),Error("[animation] property ("+b+") could not be found");return e}function ia(a,b,c,d){var e,f,g,h;for(b.startsWith("object3D.rotation")&&(c=c0.MathUtils.degToRad(c)),f=ib(b),h=a,e=0;e<f.length-1;e++)h=h[f[e]];g=f[f.length-1],d!==h3?h[g]=c:"r"in h[g]?(h[g].r=c.r,h[g].g=c.g,h[g].b=c.b):(h[g].x=c.r,h[g].y=c.g,h[g].z=c.b)}function ib(a){return a in h2||(h2[a]=a.split(".")),h2[a]}function ic(a){return a.isRawProperty||a.property.startsWith(h5)||a.property.startsWith("object3D")}he("animation",{schema:{autoplay:{default:!0},delay:{default:0},dir:{default:""},dur:{default:1e3},easing:{default:"easeInQuad"},elasticity:{default:400},enabled:{default:!0},from:{default:""},loop:{default:0,parse:function(a){return!0===a||"true"===a||!1!==a&&"false"!==a&&parseInt(a,10)}},property:{default:""},startEvents:{type:"array"},pauseEvents:{type:"array"},resumeEvents:{type:"array"},round:{default:!1},to:{default:""},type:{default:""},isRawProperty:{default:!1}},multiple:!0,init:function(){var a=this;this.eventDetail={name:this.attrName},this.time=0,this.animation=null,this.animationIsPlaying=!1,this.onStartEvent=this.onStartEvent.bind(this),this.beginAnimation=this.beginAnimation.bind(this),this.pauseAnimation=this.pauseAnimation.bind(this),this.resumeAnimation=this.resumeAnimation.bind(this),this.fromColor={},this.toColor={},this.targets={},this.targetsArray=[],this.updateConfigForDefault=this.updateConfigForDefault.bind(this),this.updateConfigForRawColor=this.updateConfigForRawColor.bind(this),this.config={complete:function(){a.animationIsPlaying=!1,a.el.emit("animationcomplete",a.eventDetail,!1),a.id&&a.el.emit("animationcomplete__"+a.id,a.eventDetail,!1)}}},update:function(a){var b=this.config,c=this.data;this.animationIsPlaying=!1,this.data.enabled&&c.property&&(b.autoplay=!1,b.direction=c.dir,b.duration=c.dur,b.easing=c.easing,b.elasticity=c.elasticity,b.loop=c.loop,b.round=c.round,this.createAndStartAnimation())},tick:function(a,b){this.animationIsPlaying&&(this.time+=b,this.animation.tick(this.time))},remove:function(){this.pauseAnimation(),this.removeEventListeners()},pause:function(){this.paused=!0,this.pausedWasPlaying=this.animationIsPlaying,this.pauseAnimation(),this.removeEventListeners()},play:function(){this.paused&&(this.paused=!1,this.addEventListeners(),this.pausedWasPlaying&&(this.resumeAnimation(),this.pausedWasPlaying=!1))},createAndStartAnimation:function(){var a=this.data;this.updateConfig(),this.animationIsPlaying=!1,this.animation=c$(this.config),this.animation.began=!0,this.removeEventListeners(),this.addEventListeners(),!a.autoplay||a.startEvents&&a.startEvents.length||(a.delay?setTimeout(this.beginAnimation,a.delay):this.beginAnimation())},beginAnimation:function(){this.updateConfig(),this.animation.began=!0,this.time=0,this.animationIsPlaying=!0,this.stopRelatedAnimations(),this.el.emit("animationbegin",this.eventDetail,!1)},pauseAnimation:function(){this.animationIsPlaying=!1},resumeAnimation:function(){this.animationIsPlaying=!0},onStartEvent:function(){this.data.enabled&&(this.updateConfig(),this.animation&&this.animation.pause(),this.animation=c$(this.config),this.data.delay?setTimeout(this.beginAnimation,this.data.delay):this.beginAnimation())},updateConfigForRawColor:function(){var a,b,c,d,e=this.config,f=this.data,g=this.el;if(!this.waitComponentInitRawProperty(this.updateConfigForRawColor)){for(c in b=""===f.from?h9(g,f.property):f.from,d=f.to,this.setColorConfig(b,d),b=this.fromColor,d=this.toColor,this.targetsArray.length=0,this.targetsArray.push(b),e.targets=this.targetsArray,d)e[c]=d[c];a={},e.update=function(b){var c;(c=b.animatables[0].target).r===a.r&&c.g===a.g&&c.b===a.b||ia(g,f.property,c,f.type)}}},updateConfigForDefault:function(){var a,b,c,d,e=this.config,f=this.data,g=this.el;this.waitComponentInitRawProperty(this.updateConfigForDefault)||(a=""===f.from?ic(f)?h9(g,f.property):h0(g,f.property):f.from,c=f.to,isNaN(a||c)?(a=a?a.toString():a,c=c?c.toString():c):(a=parseFloat(a),c=parseFloat(c)),(b="true"===f.to||"false"===f.to||!0===f.to||!1===f.to)&&(a=+("true"===f.from||!0===f.from),c=+("true"===f.to||!0===f.to)),this.targets.aframeProperty=a,e.targets=this.targets,e.aframeProperty=c,e.update=function(a){var c;(c=a.animatables[0].target.aframeProperty)!==d&&(d=c,b&&(c=c>=1),ic(f)?ia(g,f.property,c,f.type):h1(g,f.property,c))})},updateConfigForVector:function(){var a,b,c,d,e,f=this.config,g=this.data,h=this.el,i=ib(g.property),j="object3D"===i[0]?i[1]:i[0];for(b in c=""!==g.from?fu(g.from):h0(h,j),d=fu(g.to),j===h4&&(h6(c),h6(d)),this.targetsArray.length=0,this.targetsArray.push(c),f.targets=this.targetsArray,d)f[b]=d[b];f.update="position"!==j&&j!==h4&&"scale"!==j?(a={},function(b){var c=b.animatables[0].target;c.x===a.x&&c.y===a.y&&c.z===a.z||(a.x=c.x,a.y=c.y,a.z=c.z,h1(h,g.property,c))}):(e={},function(a){var b=a.animatables[0].target;b.x===e.x&&b.y===e.y&&b.z===e.z||(e.x=b.x,e.y=b.y,e.z=b.z,h.object3D[j].set(b.x,b.y,b.z))})},updateConfig:function(){var a,b,c,d,e,f;b=this.el,a="object3D"!==(e=this.data.property.split("."))[0]||e[2]||"position"!==e[1]&&"rotation"!==e[1]&&"scale"!==e[1]?(d=e[0],f=e[1],(c=b.components[d]||g2[d])?f&&!c.schema[f]?null:f?c.schema[f].type:c.schema.type:null):"vec3",ic(this.data)&&this.data.type===h3?this.updateConfigForRawColor():"vec2"===a||"vec3"===a||"vec4"===a?this.updateConfigForVector():this.updateConfigForDefault()},waitComponentInitRawProperty:function(a){var b,c=this.data,d=this.el,e=this;return""===c.from&&!!c.property.startsWith(h5)&&(b=ib(c.property)[1],!d.components[b]&&(d.addEventListener("componentinitialized",function c(f){f.detail.name===b&&(a(),e.animation=c$(e.config),d.removeEventListener("componentinitialized",c))}),!0))},stopRelatedAnimations:function(){var a,b;for(b in this.el.components)a=this.el.components[b],b!==this.attrName&&"animation"===a.name&&a.animationIsPlaying&&a.data.property===this.data.property&&(a.animationIsPlaying=!1)},addEventListeners:function(){var a=this.data,b=this.el;h7(b,a.startEvents,this.onStartEvent),h7(b,a.pauseEvents,this.pauseAnimation),h7(b,a.resumeEvents,this.resumeAnimation)},removeEventListeners:function(){var a=this.data,b=this.el;h8(b,a.startEvents,this.onStartEvent),h8(b,a.pauseEvents,this.pauseAnimation),h8(b,a.resumeEvents,this.resumeAnimation)},setColorConfig:function(a,b){h$.set(a),h_.set(b),a=this.fromColor,b=this.toColor,a.r=h$.r,a.g=h$.g,a.b=h$.b,b.r=h_.r,b.g=h_.g,b.b=h_.b}});var id=eW("components:anchored:warn");he("anchored",{schema:{persistent:{default:!1}},init:function(){var a=this.el.sceneEl.getAttribute("webxr"),b=a.optionalFeatures;-1===b.indexOf("anchors")&&(b.push("anchors"),this.el.sceneEl.setAttribute("webxr",a)),this.auxQuaternion=new c0.Quaternion,this.onEnterVR=this.onEnterVR.bind(this),this.el.sceneEl.addEventListener("enter-vr",this.onEnterVR)},onEnterVR:function(){this.anchor=void 0,this.requestPersistentAnchorPending=this.data.persistent,this.requestAnchorPending=!this.data.persistent},tick:function(){var a,b,c,d=this.el.sceneEl,e=d.renderer.xr,f=this.el.object3D;(d.is("ar-mode")||d.is("vr-mode"))&&(!this.anchor&&this.requestPersistentAnchorPending&&this.restorePersistentAnchor(),!this.anchor&&this.requestAnchorPending&&this.createAnchor(),this.anchor&&(a=d.frame,b=e.getReferenceSpace(),c=a.getPose(this.anchor.anchorSpace,b),f.position.copy(c.transform.position),f.quaternion.copy(c.transform.orientation)))},createAnchor:async function(a,b){var c,d,e,f,g,h=this.el.sceneEl,i=h.renderer.xr,j=this.el.object3D;a=a||j.position,b=b||this.auxQuaternion.setFromEuler(j.rotation),(c=h.renderer.xr.getSession())&&c.restorePersistentAnchor?(this.anchor&&this.deleteAnchor(),d=h.frame,e=i.getReferenceSpace(),f=new XRRigidTransform({x:a.x,y:a.y,z:a.z},{x:b.x,y:b.y,z:b.z,w:b.w}),this.requestAnchorPending=!1,g=await d.createAnchor(f,e),this.data.persistent&&(this.el.id?(this.persistentHandle=await g.requestPersistentHandle(),localStorage.setItem(this.el.id,this.persistentHandle)):id("The anchor won't be persisted because the entity has no assigned id.")),h.object3D.attach(this.el.object3D),this.anchor=g):id("This browser doesn't support the WebXR anchors module")},restorePersistentAnchor:async function(){var a,b=this.el.sceneEl.renderer.xr.getSession(),c=b.persistentAnchors;if(this.requestPersistentAnchorPending=!1,!this.el.id)return id("The entity associated to the persistent anchor cannot be retrieved because it doesn't have an assigned id."),void(this.requestAnchorPending=!0);if(c){a=localStorage.getItem(this.el.id);for(var d=0;d<c.length;++d)if(a===c[d]){this.anchor=await b.restorePersistentAnchor(c[d]),this.anchor&&(this.persistentHandle=c[d]);break}this.anchor||(this.requestAnchorPending=!0)}else this.requestPersistentAnchorPending=!0},deleteAnchor:function(){var a,b=this.anchor;b&&(a=this.el.sceneEl.renderer.xr.getSession(),b.delete(),this.el.sceneEl.object3D.add(this.el.object3D),this.persistentHandle&&a.deletePersistentAnchor(this.persistentHandle),this.anchor=void 0)}}),he("camera",{schema:{active:{default:!0},far:{default:1e4},fov:{default:80,min:0},near:{default:.005,min:0},spectator:{default:!1},zoom:{default:1,min:0}},init:function(){var a,b=this.el;a=this.camera=new c0.PerspectiveCamera,b.setObject3D("camera",a)},update:function(a){var b=this.data,c=this.camera;c.aspect=b.aspect||window.innerWidth/window.innerHeight,c.far=b.far,c.fov=b.fov,c.near=b.near,c.zoom=b.zoom,c.updateProjectionMatrix(),this.updateActiveCamera(a),this.updateSpectatorCamera(a)},updateActiveCamera:function(a){var b=this.data,c=this.el,d=this.system;a&&a.active===b.active||b.spectator||(b.active&&d.activeCameraEl!==c?d.setActiveCamera(c):b.active||d.activeCameraEl!==c||d.disableActiveCamera())},updateSpectatorCamera:function(a){var b=this.data,c=this.el,d=this.system;a&&a.spectator===b.spectator||(b.spectator&&d.spectatorCameraEl!==c?d.setSpectatorCamera(c):b.spectator||d.spectatorCameraEl!==c||d.disableSpectatorCamera())},remove:function(){this.el.removeObject3D("camera")}});var ie,ig,ih,ii,ij="click",ik="mouseup",il="cursor-fusing",im="cursor-hovering",io="cursor-hovered",ip={DOWN:["mousedown","touchstart"],UP:["mouseup","touchend"]},iq={DOWN:["selectstart"],UP:["selectend"]},ir="a-mouse-cursor-hover",is=(he("cursor",{dependencies:["raycaster"],schema:{downEvents:{default:[]},fuse:{default:e8()},fuseTimeout:{default:1500,min:0},mouseCursorStylesEnabled:{default:!0},upEvents:{default:[]},rayOrigin:{default:"entity",oneOf:["mouse","entity","xrselect"]}},after:["tracked-controls"],multiple:!0,init:function(){var a=this;this.fuseTimeout=void 0,this.cursorDownEl=null,this.intersectedEl=null,this.canvasBounds=document.body.getBoundingClientRect(),this.isCursorDown=!1,this.activeXRInput=null,this.updateCanvasBounds=gh(function(){a.canvasBounds=a.el.sceneEl.canvas.getBoundingClientRect()},500),this.eventDetail={},this.intersectedEventDetail={cursorEl:this.el},this.onCursorDown=this.onCursorDown.bind(this),this.onCursorUp=this.onCursorUp.bind(this),this.onIntersection=this.onIntersection.bind(this),this.onIntersectionCleared=this.onIntersectionCleared.bind(this),this.onMouseMove=this.onMouseMove.bind(this),this.onEnterVR=this.onEnterVR.bind(this)},update:function(a){var b=this.data.rayOrigin;b!==a.rayOrigin&&("entity"===b&&this.resetRaycaster(),this.updateMouseEventListeners(),"xrselect"!==b&&"entity"!==b||this.addWebXREventListeners(),"xrselect"!==a.rayOrigin&&"entity"!==a.rayOrigin||this.removeWebXREventListeners())},tick:function(){var a=this.el.sceneEl.frame,b=this.activeXRInput;"xrselect"===this.data.rayOrigin&&a&&b&&this.onMouseMove({frame:a,inputSource:b,type:"fakeselectevent"})},play:function(){this.addEventListeners()},pause:function(){this.removeEventListeners()},remove:function(){var a=this.el;a.removeState(im),a.removeState(il),clearTimeout(this.fuseTimeout),this.intersectedEl&&this.intersectedEl.removeState(io),this.removeEventListeners()},addEventListeners:function(){var a,b=this.data,c=this.el,d=this;function e(){a=c.sceneEl.canvas,b.downEvents.length||b.upEvents.length||(ip.DOWN.forEach(function(b){a.addEventListener(b,d.onCursorDown,{passive:!1})}),ip.UP.forEach(function(b){a.addEventListener(b,d.onCursorUp,{passive:!1})}))}(a=c.sceneEl.canvas)?e():c.sceneEl.addEventListener("render-target-loaded",e),b.downEvents.forEach(function(a){c.addEventListener(a,d.onCursorDown)}),b.upEvents.forEach(function(a){c.addEventListener(a,d.onCursorUp)}),c.addEventListener("raycaster-intersection",this.onIntersection),c.addEventListener("raycaster-closest-entity-changed",this.onIntersection),c.addEventListener("raycaster-intersection-cleared",this.onIntersectionCleared),c.sceneEl.addEventListener("rendererresize",this.updateCanvasBounds),c.sceneEl.addEventListener("enter-vr",this.onEnterVR),window.addEventListener("resize",this.updateCanvasBounds),window.addEventListener("scroll",this.updateCanvasBounds),this.updateMouseEventListeners()},removeEventListeners:function(){var a,b=this.data,c=this.el,d=this;(a=c.sceneEl.canvas)&&!b.downEvents.length&&!b.upEvents.length&&(ip.DOWN.forEach(function(b){a.removeEventListener(b,d.onCursorDown)}),ip.UP.forEach(function(b){a.removeEventListener(b,d.onCursorUp)})),b.downEvents.forEach(function(a){c.removeEventListener(a,d.onCursorDown)}),b.upEvents.forEach(function(a){c.removeEventListener(a,d.onCursorUp)}),c.removeEventListener("raycaster-intersection",this.onIntersection),c.removeEventListener("raycaster-closest-entity-changed",this.onIntersection),c.removeEventListener("raycaster-intersection-cleared",this.onIntersectionCleared),a.removeEventListener("mousemove",this.onMouseMove),a.removeEventListener("touchstart",this.onMouseMove),a.removeEventListener("touchmove",this.onMouseMove),c.sceneEl.removeEventListener("rendererresize",this.updateCanvasBounds),c.sceneEl.removeEventListener("enter-vr",this.onEnterVR),window.removeEventListener("resize",this.updateCanvasBounds),window.removeEventListener("scroll",this.updateCanvasBounds),this.removeWebXREventListeners()},updateMouseEventListeners:function(){var a,b=this.el;(a=b.sceneEl.canvas).removeEventListener("mousemove",this.onMouseMove),a.removeEventListener("touchmove",this.onMouseMove),b.setAttribute("raycaster","useWorldCoordinates",!1),"mouse"===this.data.rayOrigin&&(a.addEventListener("mousemove",this.onMouseMove),a.addEventListener("touchmove",this.onMouseMove,{passive:!1}),b.setAttribute("raycaster","useWorldCoordinates",!0),this.updateCanvasBounds())},resetRaycaster:function(){this.el.setAttribute("raycaster",{direction:(new c0.Vector3).set(0,0,-1),origin:new c0.Vector3})},addWebXREventListeners:function(){var a=this,b=this.el.sceneEl.xrSession;b&&(iq.DOWN.forEach(function(c){b.addEventListener(c,a.onCursorDown)}),iq.UP.forEach(function(c){b.addEventListener(c,a.onCursorUp)}))},removeWebXREventListeners:function(){var a=this,b=this.el.sceneEl.xrSession;b&&(iq.DOWN.forEach(function(c){b.removeEventListener(c,a.onCursorDown)}),iq.UP.forEach(function(c){b.removeEventListener(c,a.onCursorUp)}))},onMouseMove:(ie=new c0.Vector3,ig=new c0.Vector2,ii={origin:ih=new c0.Vector3,direction:ie},function(a){var b,c,d,e,f,g,h,i,j,k=this.canvasBounds,l=this.el.sceneEl.camera;l.parent.updateMatrixWorld(),c=(d="touchmove"===a.type||"touchstart"===a.type?a.touches.item(0):a).clientX-k.left,e=d.clientY-k.top,ig.x=c/k.width*2-1,ig.y=-e/k.height*2+1,"xrselect"!==this.data.rayOrigin||"selectstart"!==a.type&&"fakeselectevent"!==a.type?"fakeselectout"===a.type?(ie.set(0,1,0),ih.set(0,9999,0)):l&&l.isPerspectiveCamera?(ih.setFromMatrixPosition(l.matrixWorld),ie.set(ig.x,ig.y,.5).unproject(l).sub(ih).normalize()):l&&l.isOrthographicCamera?(ih.set(ig.x,ig.y,(l.near+l.far)/(l.near-l.far)).unproject(l),ie.set(0,0,-1).transformDirection(l.matrixWorld)):console.error("AFRAME.Raycaster: Unsupported camera type: "+l.type):(f=a.frame,g=a.inputSource,h=this.el.sceneEl.renderer.xr.getReferenceSpace(),(i=f.getPose(g.targetRaySpace,h))&&(j=i.transform,ie.set(0,0,-1),ie.applyQuaternion(j.orientation),ih.copy(j.position),(b=l.el.object3D.parent).localToWorld(ih),ie.transformDirection(b.matrixWorld))),this.el.setAttribute("raycaster",ii),"touchmove"===a.type&&a.preventDefault()}),onCursorDown:function(a){this.isCursorDown=!0,"mouse"===this.data.rayOrigin&&"touchstart"===a.type&&(this.onMouseMove(a),this.el.components.raycaster.checkIntersections(),a.preventDefault()),"xrselect"===this.data.rayOrigin&&"selectstart"===a.type&&(this.activeXRInput=a.inputSource,this.onMouseMove(a),this.el.components.raycaster.checkIntersections(),this.el.components.raycaster.intersectedEls.length&&void 0!==this.el.sceneEl.components["ar-hit-test"]&&this.el.sceneEl.getAttribute("ar-hit-test").enabled&&(this.el.sceneEl.setAttribute("ar-hit-test","enabled",!1),this.reenableARHitTest=!0)),this.twoWayEmit("mousedown",a),this.cursorDownEl=this.intersectedEl},onCursorUp:function(a){if(this.isCursorDown&&("xrselect"!==this.data.rayOrigin||this.activeXRInput===a.inputSource)){this.isCursorDown=!1;var b=this.data;this.twoWayEmit(ik,a),!0===this.reenableARHitTest&&(this.el.sceneEl.setAttribute("ar-hit-test","enabled",!0),this.reenableARHitTest=void 0),this.cursorDownEl&&this.cursorDownEl!==this.intersectedEl&&(this.intersectedEventDetail.intersection=null,this.cursorDownEl.emit(ik,this.intersectedEventDetail)),b.fuse&&"mouse"!==b.rayOrigin&&"xrselect"!==b.rayOrigin||!this.intersectedEl||this.cursorDownEl!==this.intersectedEl||this.twoWayEmit(ij,a),"xrselect"===b.rayOrigin&&this.onMouseMove({type:"fakeselectout"}),this.activeXRInput=null,this.cursorDownEl=null,"touchend"===a.type&&a.preventDefault()}},onIntersection:function(a){var b,c,d,e,f=this.el;c=+(a.detail.els[0]===f),e=a.detail.intersections[c],(d=a.detail.els[c])&&this.intersectedEl!==d&&(this.intersectedEl&&(b=this.el.components.raycaster.getIntersection(this.intersectedEl))&&b.distance<=e.distance||(this.clearCurrentIntersection(!0),this.setIntersection(d,e)))},onIntersectionCleared:function(a){-1!==a.detail.clearedEls.indexOf(this.intersectedEl)&&this.clearCurrentIntersection()},onEnterVR:function(){var a=this.data.rayOrigin;this.clearCurrentIntersection(!0),"xrselect"!==a&&"entity"!==a||this.addWebXREventListeners()},setIntersection:function(a,b){var c=this.el,d=this.data,e=this;this.intersectedEl!==a&&(this.intersectedEl=a,c.addState(im),a.addState(io),this.twoWayEmit("mouseenter"),this.data.mouseCursorStylesEnabled&&"mouse"===this.data.rayOrigin&&this.el.sceneEl.canvas.classList.add(ir),0!==d.fuseTimeout&&d.fuse&&"xrselect"!==d.rayOrigin&&"mouse"!==d.rayOrigin&&(c.addState(il),this.twoWayEmit("fusing"),this.fuseTimeout=setTimeout(function(){c.removeState(il),e.twoWayEmit(ij)},d.fuseTimeout)))},clearCurrentIntersection:function(a){var b,c,d=this.el;this.intersectedEl&&(this.intersectedEl.removeState(io),d.removeState(im),d.removeState(il),this.twoWayEmit("mouseleave"),this.data.mouseCursorStylesEnabled&&"mouse"===this.data.rayOrigin&&this.el.sceneEl.canvas.classList.remove(ir),this.intersectedEl=null,clearTimeout(this.fuseTimeout),!0!==a&&0!==(c=this.el.components.raycaster.intersections).length&&(b=c[+(c[0].object.el===d)])&&this.setIntersection(b.object.el,b))},twoWayEmit:function(a,b){var c,d=this.el,e=this.intersectedEl;function f(a,c){b instanceof MouseEvent?a.mouseEvent=b:"undefined"!=typeof TouchEvent&&b instanceof TouchEvent&&(a.touchEvent=b)}c=this.el.components.raycaster.getIntersection(e),this.eventDetail.intersectedEl=e,this.eventDetail.intersection=c,f(this.eventDetail),d.emit(a,this.eventDetail),e&&(this.intersectedEventDetail.intersection=c,f(this.intersectedEventDetail),e.emit(a,this.intersectedEventDetail))}}),new c0.BufferGeometry),it=(he("geometry",{schema:{buffer:{default:!0},primitive:{default:"box",oneOf:hG,schemaChange:!0},skipCache:{default:!1}},init:function(){this.geometry=null},update:function(a){var b,c=this.data,d=this.el,e=this.system;this.geometry&&(e.unuseGeometry(a),this.geometry=null),this.geometry=e.getOrCreateGeometry(c),(b=d.getObject3D("mesh"))?b.geometry=this.geometry:((b=new c0.Mesh).geometry=this.geometry,this.el.getAttribute("material")||(b.material=new c0.MeshStandardMaterial({color:0xffffff*Math.random(),metalness:0,roughness:.5})),d.setObject3D("mesh",b))},remove:function(){this.system.unuseGeometry(this.data),this.el.getObject3D("mesh").geometry=is,this.geometry=null},updateSchema:function(a){var b=this.oldData&&this.oldData.primitive,c=a.primitive,d=hF[c]&&hF[c].schema;if(!d)throw Error("Unknown geometry schema `"+c+"`");b&&b===c||this.extendSchema(d)}}),"generic"),iu=(he("generic-tracked-controller-controls",{schema:{hand:{default:""},defaultModel:{default:!0},defaultModelColor:{default:"gray"},disabled:{default:!1}},after:["tracked-controls"],mapping:{axes:{touchpad:[0,1],thumbstick:[2,3]},buttons:["trigger","squeeze","touchpad","thumbstick"]},bindMethods:function(){this.onControllersUpdate=this.onControllersUpdate.bind(this),this.checkIfControllerPresent=this.checkIfControllerPresent.bind(this),this.removeControllersUpdateListener=this.removeControllersUpdateListener.bind(this),this.onAxisMoved=this.onAxisMoved.bind(this)},init:function(){var a=this;this.onButtonChanged=this.onButtonChanged.bind(this),this.onButtonDown=function(b){f8(b.detail.id,"down",a)},this.onButtonUp=function(b){f8(b.detail.id,"up",a)},this.onButtonTouchStart=function(b){f8(b.detail.id,"touchstart",a)},this.onButtonTouchEnd=function(b){f8(b.detail.id,"touchend",a)},this.controllerPresent=!1,this.wasControllerConnected=!1,this.bindMethods(),this.el.addEventListener("controllerconnected",function(b){b.detail.name!==a.name&&(a.wasControllerConnected=!0,a.removeEventListeners(),a.removeControllersUpdateListener())})},addEventListeners:function(){var a=this.el;a.addEventListener("buttonchanged",this.onButtonChanged),a.addEventListener("buttondown",this.onButtonDown),a.addEventListener("buttonup",this.onButtonUp),a.addEventListener("touchstart",this.onButtonTouchStart),a.addEventListener("touchend",this.onButtonTouchEnd),a.addEventListener("axismove",this.onAxisMoved),this.controllerEventsActive=!0},removeEventListeners:function(){var a=this.el;a.removeEventListener("buttonchanged",this.onButtonChanged),a.removeEventListener("buttondown",this.onButtonDown),a.removeEventListener("buttonup",this.onButtonUp),a.removeEventListener("touchstart",this.onButtonTouchStart),a.removeEventListener("touchend",this.onButtonTouchEnd),a.removeEventListener("axismove",this.onAxisMoved),this.controllerEventsActive=!1},checkIfControllerPresent:function(){var a=this.data;f4(this,it,{hand:a.hand?a.hand:void 0,iterateControllerProfiles:!0})},play:function(){this.wasControllerConnected||(this.checkIfControllerPresent(),this.addControllersUpdateListener())},pause:function(){this.removeEventListeners(),this.removeControllersUpdateListener()},injectTrackedControls:function(){var a=this.el,b=this.data;this.el.components["tracked-controls"]?this.removeEventListeners():(a.setAttribute("tracked-controls",{hand:b.hand,idPrefix:it,iterateControllerProfiles:!0}),this.data.defaultModel&&this.initDefaultModel())},addControllersUpdateListener:function(){this.el.sceneEl.addEventListener("controllersupdated",this.onControllersUpdate,!1)},removeControllersUpdateListener:function(){this.el.sceneEl.removeEventListener("controllersupdated",this.onControllersUpdate,!1)},onControllersUpdate:function(){this.wasControllerConnected&&this.checkIfControllerPresent()},onButtonChanged:function(a){var b=this.mapping.buttons[a.detail.id];b&&this.el.emit(b+"changed",a.detail.state)},onAxisMoved:function(a){f7(this,this.mapping.axes,a)},initDefaultModel:function(){var a=this.modelEl=document.createElement("a-entity");a.setAttribute("geometry",{primitive:"sphere",radius:.03}),a.setAttribute("material",{color:this.data.color}),this.el.appendChild(a),this.el.emit("controllermodelready",{name:"generic-tracked-controller-controls",model:this.modelEl,rayOrigin:{origin:{x:0,y:0,z:-.01},direction:{x:0,y:0,z:-1}}})}}),eW("components:gltf-model:warn"));he("gltf-model",{schema:{type:"model"},init:function(){var a=this,b=this.system.getDRACOLoader(),c=this.system.getMeshoptDecoder(),d=this.system.getKTX2Loader();this.model=null,this.loader=new dh,b&&this.loader.setDRACOLoader(b),this.ready=c?c.then(function(b){a.loader.setMeshoptDecoder(b)}):Promise.resolve(),d&&this.loader.setKTX2Loader(d)},update:function(){var a=this,b=this.el,c=this.data;c&&(this.remove(),this.ready.then(function(){a.loader.load(c,function(c){a.model=c.scene||c.scenes[0],a.model.animations=c.animations,b.setObject3D("mesh",a.model),b.emit("model-loaded",{format:"gltf",model:a.model})},void 0,function(a){iu(a&&a.message?a.message:"Failed to load glTF model"),b.emit("model-error",{format:"gltf",src:c})})}))},remove:function(){this.model&&this.el.removeObject3D("mesh")}}),he("grabbable",{init:function(){this.el.setAttribute("obb-collider","centerModel: true")}});var iv,iw=eQ+"controllers/oculus-hands/v4/left.glb",ix=eQ+"controllers/oculus-hands/v4/right.glb",iy=["wrist","thumb-metacarpal","thumb-phalanx-proximal","thumb-phalanx-distal","thumb-tip","index-finger-metacarpal","index-finger-phalanx-proximal","index-finger-phalanx-intermediate","index-finger-phalanx-distal","index-finger-tip","middle-finger-metacarpal","middle-finger-phalanx-proximal","middle-finger-phalanx-intermediate","middle-finger-phalanx-distal","middle-finger-tip","ring-finger-metacarpal","ring-finger-phalanx-proximal","ring-finger-phalanx-intermediate","ring-finger-phalanx-distal","ring-finger-tip","pinky-finger-metacarpal","pinky-finger-phalanx-proximal","pinky-finger-phalanx-intermediate","pinky-finger-phalanx-distal","pinky-finger-tip"];he("hand-tracking-controls",{schema:{hand:{default:"right",oneOf:["left","right"]},modelStyle:{default:"mesh",oneOf:["dots","mesh"]},modelColor:{default:"white"},modelOpacity:{default:1}},after:["tracked-controls"],bindMethods:function(){this.onControllersUpdate=this.onControllersUpdate.bind(this),this.checkIfControllerPresent=this.checkIfControllerPresent.bind(this),this.removeControllersUpdateListener=this.removeControllersUpdateListener.bind(this)},addEventListeners:function(){this.el.addEventListener("model-loaded",this.onModelLoaded);for(var a=0;a<this.jointEls.length;++a)this.jointEls[a].object3D.visible=!0},removeEventListeners:function(){this.el.removeEventListener("model-loaded",this.onModelLoaded);for(var a=0;a<this.jointEls.length;++a)this.jointEls[a].object3D.visible=!1},init:function(){var a=this.el.sceneEl,b=a.getAttribute("webxr"),c=b.optionalFeatures;-1===c.indexOf("hand-tracking")&&(c.push("hand-tracking"),a.setAttribute("webxr",b)),this.wristObject3D=new c0.Object3D,this.el.sceneEl.object3D.add(this.wristObject3D),this.onModelLoaded=this.onModelLoaded.bind(this),this.onChildAttached=this.onChildAttached.bind(this),this.jointEls=[],this.controllerPresent=!1,this.isPinched=!1,this.pinchEventDetail={position:new c0.Vector3,wristRotation:new c0.Quaternion},this.indexTipPosition=new c0.Vector3,this.hasPoses=!1,this.jointPoses=new Float32Array(16*iy.length),this.jointRadii=new Float32Array(iy.length),this.bindMethods(),this.updateReferenceSpace=this.updateReferenceSpace.bind(this),this.el.sceneEl.addEventListener("enter-vr",this.updateReferenceSpace),this.el.sceneEl.addEventListener("exit-vr",this.updateReferenceSpace),this.el.addEventListener("child-attached",this.onChildAttached),this.wristObject3D.visible=!1},onChildAttached:function(a){this.addChildEntity(a.detail.el)},update:function(){this.updateModelMaterial()},updateModelMaterial:function(){var a=this.jointEls,b=this.skinnedMesh,c=1!==this.data.modelOpacity;b&&(this.skinnedMesh.material.color.set(this.data.modelColor),this.skinnedMesh.material.transparent=c,this.skinnedMesh.material.opacity=this.data.modelOpacity);for(var d=0;d<a.length;d++)a[d].setAttribute("material",{color:this.data.modelColor,transparent:c,opacity:this.data.modelOpacity})},updateReferenceSpace:function(){var a=this,b=this.el.sceneEl.xrSession;if(this.referenceSpace=void 0,b){var c=a.el.sceneEl.systems.webxr.sessionReferenceSpaceType;b.requestReferenceSpace(c).then(function(b){a.referenceSpace=b}).catch(function(b){throw a.el.sceneEl.systems.webxr.warnIfFeatureNotRequested(c,"tracked-controls-webxr uses reference space "+c),b})}},checkIfControllerPresent:function(){var a=this.data;f4(this,"",{hand:a.hand?a.hand:void 0,iterateControllerProfiles:!0,handTracking:!0})},play:function(){this.checkIfControllerPresent(),this.addControllersUpdateListener()},tick:function(){var a=this.el.sceneEl,b=this.el.components["tracked-controls"]&&this.el.components["tracked-controls"].controller,c=a.frame,d=this.el.components["tracked-controls"],e=this.referenceSpace;b&&c&&e&&d&&(this.hasPoses=!1,b.hand&&(this.el.object3D.position.set(0,0,0),this.el.object3D.rotation.set(0,0,0),this.hasPoses=c.fillPoses(b.hand.values(),e,this.jointPoses)&&c.fillJointRadii(b.hand.values(),this.jointRadii),this.updateHandModel(),this.detectGesture(),this.updateWristObject()))},updateWristObject:(iv=new c0.Matrix4,function(){var a=this.wristObject3D;a&&this.hasPoses&&(iv.fromArray(this.jointPoses,0),a.position.setFromMatrixPosition(iv),a.quaternion.setFromRotationMatrix(iv))}),updateHandModel:function(){this.wristObject3D.visible=!0,this.el.object3D.visible=!0,"dots"===this.data.modelStyle&&this.updateHandDotsModel(),"mesh"===this.data.modelStyle&&this.updateHandMeshModel()},getBone:function(a){for(var b=this.bones,c=0;c<b.length;c++)if(b[c].name===a)return b[c];return null},updateHandMeshModel:function(){var a=new c0.Matrix4;return function(){var b=0,c=this.jointPoses,d=this.el.components["tracked-controls"]&&this.el.components["tracked-controls"].controller;if(d&&this.mesh&&(this.mesh.visible=!1,this.hasPoses))for(var e of d.hand.values()){var f=this.getBone(e.jointName);null!=f&&(this.mesh.visible=!0,a.fromArray(c,16*b),f.position.setFromMatrixPosition(a),f.quaternion.setFromRotationMatrix(a)),b++}}}(),updateHandDotsModel:function(){for(var a,b,c=this.jointPoses,d=this.jointRadii,e=this.el.components["tracked-controls"]&&this.el.components["tracked-controls"].controller,f=0;f<e.hand.size;f++)b=(a=this.jointEls[f]).object3D,a.object3D.visible=this.hasPoses,this.hasPoses&&(b.matrix.fromArray(c,16*f),b.matrix.decompose(b.position,b.rotation,b.scale),a.setAttribute("scale",{x:d[f],y:d[f],z:d[f]}))},detectGesture:function(){this.detectPinch()},detectPinch:function(){var a=new c0.Vector3,b=new c0.Matrix4;return function(){var c=this.indexTipPosition,d=this.pinchEventDetail;if(this.hasPoses){a.setFromMatrixPosition(b.fromArray(this.jointPoses,64)),c.setFromMatrixPosition(b.fromArray(this.jointPoses,144)),d.wristRotation.setFromRotationMatrix(b.fromArray(this.jointPoses,0));var e=c.distanceTo(a);e<.015&&!1===this.isPinched&&(this.isPinched=!0,d.position.copy(c).add(a).multiplyScalar(.5),this.el.emit("pinchstarted",d)),e>.02&&!0===this.isPinched&&(this.isPinched=!1,d.position.copy(c).add(a).multiplyScalar(.5),this.el.emit("pinchended",d)),this.isPinched&&(d.position.copy(c).add(a).multiplyScalar(.5),this.el.emit("pinchmoved",d))}}}(),pause:function(){this.removeEventListeners(),this.removeControllersUpdateListener()},injectTrackedControls:function(){var a=this.el,b=this.data;a.setAttribute("tracked-controls",{id:"",hand:b.hand,iterateControllerProfiles:!0,handTrackingEnabled:!0}),this.mesh?this.mesh!==a.getObject3D("mesh")&&a.setObject3D("mesh",this.mesh):this.initDefaultModel()},addControllersUpdateListener:function(){this.el.sceneEl.addEventListener("controllersupdated",this.onControllersUpdate,!1)},removeControllersUpdateListener:function(){this.el.sceneEl.removeEventListener("controllersupdated",this.onControllersUpdate,!1)},onControllersUpdate:function(){var a,b=this.el;this.checkIfControllerPresent(),a=b.components["tracked-controls"]&&b.components["tracked-controls"].controller,this.mesh&&a&&a.hand&&a.hand instanceof XRHand&&b.setObject3D("mesh",this.mesh)},initDefaultModel:function(){var a=this.data;"dots"===a.modelStyle&&this.initDotsModel(),"mesh"===a.modelStyle&&this.initMeshHandModel(),this.el.object3D.visible=!0,this.wristObject3D.visible=!0},initDotsModel:function(){if(0===this.jointEls.length){for(var a=0;a<iy.length;++a){var b=this.jointEl=document.createElement("a-entity");b.setAttribute("geometry",{primitive:"sphere",radius:1}),b.object3D.visible=!1,this.el.appendChild(b),this.jointEls.push(b)}this.updateModelMaterial()}},initMeshHandModel:function(){var a="left"===this.data.hand?iw:ix;this.el.setAttribute("gltf-model",a)},onModelLoaded:function(){var a=this.mesh=this.el.getObject3D("mesh").children[0],b=this.skinnedMesh=a.getObjectByProperty("type","SkinnedMesh");this.skinnedMesh&&(this.bones=b.skeleton.bones,this.el.removeObject3D("mesh"),a.position.set(0,0,0),a.rotation.set(0,0,0),b.frustumCulled=!1,b.material=new c0.MeshStandardMaterial,this.updateModelMaterial(),this.setupChildrenEntities(),this.el.setObject3D("mesh",a),this.el.emit("controllermodelready",{name:"hand-tracking-controls",model:this.data.model,rayOrigin:new c0.Vector3(0,0,0)}))},setupChildrenEntities:function(){for(var a=this.el.children,b=0;b<a.length;++b)a[b]instanceof hu&&this.addChildEntity(a[b])},addChildEntity:function(a){a instanceof hu&&this.wristObject3D.add(a.object3D)}}),he("hand-tracking-grab-controls",{schema:{hand:{default:"right",oneOf:["left","right"]},color:{type:"color",default:"white"},hoverColor:{type:"color",default:"#538df1"},hoverEnabled:{default:!1}},init:function(){var a,b=this.el,c=this.data;a="right"===c.hand?"components.hand-tracking-controls.bones.3":"components.hand-tracking-controls.bones.21",b.setAttribute("hand-tracking-controls",{hand:c.hand}),b.setAttribute("obb-collider",{trackedObject3D:a,size:.04}),this.auxMatrix=new c0.Matrix4,this.onCollisionStarted=this.onCollisionStarted.bind(this),this.el.addEventListener("obbcollisionstarted",this.onCollisionStarted),this.onCollisionEnded=this.onCollisionEnded.bind(this),this.el.addEventListener("obbcollisionended",this.onCollisionEnded),this.onPinchStarted=this.onPinchStarted.bind(this),this.el.addEventListener("pinchstarted",this.onPinchStarted),this.onPinchEnded=this.onPinchEnded.bind(this),this.el.addEventListener("pinchended",this.onPinchEnded)},transferEntityOwnership:function(){for(var a,b=this.el.sceneEl.querySelectorAll("[hand-tracking-grab-controls]"),c=0;c<b.length;++c)(a=b[c].components["hand-tracking-grab-controls"])!==this&&this.grabbedEl&&this.grabbedEl===a.grabbedEl&&a.releaseGrabbedEntity();return!1},onCollisionStarted:function(a){var b=a.detail.withEl;this.collidedEl||b.getAttribute("grabbable")&&(this.collidedEl=b,this.grabbingObject3D=a.detail.trackedObject3D,this.data.hoverEnabled&&this.el.setAttribute("hand-tracking-controls","modelColor",this.data.hoverColor))},onCollisionEnded:function(){this.collidedEl=void 0,this.grabbedEl||(this.grabbingObject3D=void 0,this.data.hoverEnabled&&this.el.setAttribute("hand-tracking-controls","modelColor",this.data.color))},onPinchStarted:function(a){this.collidedEl&&(this.grabbedEl=this.collidedEl,this.transferEntityOwnership(),this.grab())},onPinchEnded:function(){this.releaseGrabbedEntity()},releaseGrabbedEntity:function(){var a=this.grabbedEl;if(a){var b=a.object3D,c=b.parent,d=this.originalParent;b.applyMatrix4(c.matrixWorld),b.applyMatrix4(this.auxMatrix.copy(d.matrixWorld).invert()),c.remove(b),d.add(b),this.el.emit("grabended",{grabbedEl:a}),this.grabbedEl=void 0,this.originalParent=void 0}},grab:function(){var a=this.grabbedEl,b=a.object3D,c=b.parent;this.originalParent=c;var d=this.el.components["hand-tracking-controls"].wristObject3D;b.applyMatrix4(c.matrixWorld),b.applyMatrix4(this.auxMatrix.copy(d.matrixWorld).invert()),c.remove(b),d.add(b),this.el.emit("grabstarted",{grabbedEl:a})}});var iz={toonLeft:eQ+"controllers/hands/leftHand.glb",toonRight:eQ+"controllers/hands/rightHand.glb",lowPolyLeft:eQ+"controllers/hands/leftHandLow.glb",lowPolyRight:eQ+"controllers/hands/rightHandLow.glb",highPolyLeft:eQ+"controllers/hands/leftHandHigh.glb",highPolyRight:eQ+"controllers/hands/rightHandHigh.glb"},iA="Point",iB="Fist",iC="Thumb Up",iD={};function iE(a,b){var c;if(a)return"grip"===(c=iD[a])?c+(b?"close":"open"):"point"===c?c+(b?"up":"down"):"pointing"===c||"pistol"===c?c+(b?"start":"end"):void 0}iD[iB]="grip",iD[iC]="pistol",iD[iA]="pointing",he("hand-controls",{schema:{color:{default:"white",type:"color"},hand:{default:"left"},handModelStyle:{default:"lowPoly",oneOf:["lowPoly","highPoly","toon"]}},after:["tracked-controls"],init:function(){var a=this,b=this.el;this.pressedButtons={},this.touchedButtons={},this.loader=new dh,this.loader.setCrossOrigin("anonymous"),this.onGripDown=function(){a.handleButton("grip","down")},this.onGripUp=function(){a.handleButton("grip","up")},this.onTrackpadDown=function(){a.handleButton("trackpad","down")},this.onTrackpadUp=function(){a.handleButton("trackpad","up")},this.onTrackpadTouchStart=function(){a.handleButton("trackpad","touchstart")},this.onTrackpadTouchEnd=function(){a.handleButton("trackpad","touchend")},this.onTriggerDown=function(){a.handleButton("trigger","down")},this.onTriggerUp=function(){a.handleButton("trigger","up")},this.onTriggerTouchStart=function(){a.handleButton("trigger","touchstart")},this.onTriggerTouchEnd=function(){a.handleButton("trigger","touchend")},this.onGripTouchStart=function(){a.handleButton("grip","touchstart")},this.onGripTouchEnd=function(){a.handleButton("grip","touchend")},this.onThumbstickDown=function(){a.handleButton("thumbstick","down")},this.onThumbstickUp=function(){a.handleButton("thumbstick","up")},this.onAorXTouchStart=function(){a.handleButton("AorX","touchstart")},this.onAorXTouchEnd=function(){a.handleButton("AorX","touchend")},this.onBorYTouchStart=function(){a.handleButton("BorY","touchstart")},this.onBorYTouchEnd=function(){a.handleButton("BorY","touchend")},this.onSurfaceTouchStart=function(){a.handleButton("surface","touchstart")},this.onSurfaceTouchEnd=function(){a.handleButton("surface","touchend")},this.onControllerConnected=this.onControllerConnected.bind(this),this.onControllerDisconnected=this.onControllerDisconnected.bind(this),b.addEventListener("controllerconnected",this.onControllerConnected),b.addEventListener("controllerdisconnected",this.onControllerDisconnected),b.object3D.visible=!1},play:function(){this.addEventListeners()},pause:function(){this.removeEventListeners()},tick:function(a,b){var c=this.el.getObject3D("mesh");c&&c.mixer&&c.mixer.update(b/1e3)},onControllerConnected:function(a){var b=this.el,c=this.data.hand,d=this.el.getObject3D("mesh");b.object3D.visible=!0;var e="left"===c?Math.PI/2:-Math.PI/2,f=b.sceneEl.hasWebXR?-Math.PI/2:0;"pico-controls"===a.detail.name&&(f+=Math.PI/4),d.position.set(0,0,0),d.rotation.set(f,0,e)},onControllerDisconnected:function(){this.el.object3D.visible=!1},addEventListeners:function(){var a=this.el;a.addEventListener("gripdown",this.onGripDown),a.addEventListener("gripup",this.onGripUp),a.addEventListener("trackpaddown",this.onTrackpadDown),a.addEventListener("trackpadup",this.onTrackpadUp),a.addEventListener("trackpadtouchstart",this.onTrackpadTouchStart),a.addEventListener("trackpadtouchend",this.onTrackpadTouchEnd),a.addEventListener("triggerdown",this.onTriggerDown),a.addEventListener("triggerup",this.onTriggerUp),a.addEventListener("triggertouchstart",this.onTriggerTouchStart),a.addEventListener("triggertouchend",this.onTriggerTouchEnd),a.addEventListener("griptouchstart",this.onGripTouchStart),a.addEventListener("griptouchend",this.onGripTouchEnd),a.addEventListener("thumbstickdown",this.onThumbstickDown),a.addEventListener("thumbstickup",this.onThumbstickUp),a.addEventListener("abuttontouchstart",this.onAorXTouchStart),a.addEventListener("abuttontouchend",this.onAorXTouchEnd),a.addEventListener("bbuttontouchstart",this.onBorYTouchStart),a.addEventListener("bbuttontouchend",this.onBorYTouchEnd),a.addEventListener("xbuttontouchstart",this.onAorXTouchStart),a.addEventListener("xbuttontouchend",this.onAorXTouchEnd),a.addEventListener("ybuttontouchstart",this.onBorYTouchStart),a.addEventListener("ybuttontouchend",this.onBorYTouchEnd),a.addEventListener("surfacetouchstart",this.onSurfaceTouchStart),a.addEventListener("surfacetouchend",this.onSurfaceTouchEnd)},removeEventListeners:function(){var a=this.el;a.removeEventListener("gripdown",this.onGripDown),a.removeEventListener("gripup",this.onGripUp),a.removeEventListener("trackpaddown",this.onTrackpadDown),a.removeEventListener("trackpadup",this.onTrackpadUp),a.removeEventListener("trackpadtouchstart",this.onTrackpadTouchStart),a.removeEventListener("trackpadtouchend",this.onTrackpadTouchEnd),a.removeEventListener("triggerdown",this.onTriggerDown),a.removeEventListener("triggerup",this.onTriggerUp),a.removeEventListener("triggertouchstart",this.onTriggerTouchStart),a.removeEventListener("triggertouchend",this.onTriggerTouchEnd),a.removeEventListener("griptouchstart",this.onGripTouchStart),a.removeEventListener("griptouchend",this.onGripTouchEnd),a.removeEventListener("thumbstickdown",this.onThumbstickDown),a.removeEventListener("thumbstickup",this.onThumbstickUp),a.removeEventListener("abuttontouchstart",this.onAorXTouchStart),a.removeEventListener("abuttontouchend",this.onAorXTouchEnd),a.removeEventListener("bbuttontouchstart",this.onBorYTouchStart),a.removeEventListener("bbuttontouchend",this.onBorYTouchEnd),a.removeEventListener("xbuttontouchstart",this.onAorXTouchStart),a.removeEventListener("xbuttontouchend",this.onAorXTouchEnd),a.removeEventListener("ybuttontouchstart",this.onBorYTouchStart),a.removeEventListener("ybuttontouchend",this.onBorYTouchEnd),a.removeEventListener("surfacetouchstart",this.onSurfaceTouchStart),a.removeEventListener("surfacetouchend",this.onSurfaceTouchEnd)},update:function(a){var b,c=this.el,d=this.data.hand,e=this.data.handModelStyle,f=this.data.color,g=this;if(b={hand:d,model:!1},d!==a){var h=iz[e+d.charAt(0).toUpperCase()+d.slice(1)];this.loader.load(h,function(a){var d=a.scene.children[0];d.mixer=new c0.AnimationMixer(d),g.clips=a.animations,c.setObject3D("mesh",d),d.traverse(function(a){a.isMesh&&(a.material.color=new c0.Color(f))}),c.setAttribute("magicleap-controls",b),c.setAttribute("vive-controls",b),c.setAttribute("meta-touch-controls",b),c.setAttribute("pico-controls",b),c.setAttribute("windows-motion-controls",b),c.setAttribute("hp-mixed-reality-controls",b)})}},remove:function(){this.el.removeObject3D("mesh")},handleButton:function(a,b){var c,d="down"===b,e="touchstart"===b;if(0===b.indexOf("touch")){if(e===this.touchedButtons[a])return;this.touchedButtons[a]=e}else{if(d===this.pressedButtons[a])return;this.pressedButtons[a]=d}c=this.gesture,this.gesture=this.determineGesture(),this.gesture!==c&&(this.animateGesture(this.gesture,c),this.emitGestureEvents(this.gesture,c))},determineGesture:function(){var a,b,c,d=this.pressedButtons.grip,e=this.pressedButtons.surface||this.touchedButtons.surface,f=this.pressedButtons.trackpad||this.touchedButtons.trackpad,g=this.pressedButtons.trigger||this.touchedButtons.trigger,h=this.touchedButtons.AorX||this.touchedButtons.BorY;return(c=(b=this.el.components["tracked-controls"])&&b.controller)&&(c.id&&0===c.id.indexOf("OpenVR ")||c.profiles&&c.profiles[0]&&"htc-vive"===c.profiles[0])?d||g?a=iB:f&&(a=iA):d?a=e||h||f?g?iB:iA:g?iC:"Point + Thumb":g&&(a="Hold"),a},getClip:function(a){var b,c;for(c=0;c<this.clips.length;c++)if((b=this.clips[c]).name===a)return b},animateGesture:function(a,b){a?this.playAnimation(a||"Open",b,!1):this.playAnimation(b,b,!0)},emitGestureEvents:function(a,b){var c,d=this.el;b!==a&&((c=iE(b,!1))&&d.emit(c),(c=iE(a,!0))&&d.emit(c))},playAnimation:function(a,b,c){var d,e,f=this.el.getObject3D("mesh");if(f){if(d=this.getClip(a),e=f.mixer.clipAction(d),c)return e.paused=!1,void(e.timeScale=-1);if(e.clampWhenFinished=!0,e.loop=c0.LoopOnce,e.repetitions=0,e.timeScale=1,e.time=0,e.weight=1,!b)return f.mixer.stopAllAction(),void e.play();d=this.getClip(b),e.reset(),e.play(),f.mixer.clipAction(d).crossFadeTo(e,.15,!0)}}}),he("hide-on-enter-ar",{init:function(){var a=this;this.el.sceneEl.addEventListener("enter-vr",function(){a.el.sceneEl.is("ar-mode")&&(a.el.object3D.visible=!1)}),this.el.sceneEl.addEventListener("exit-vr",function(){a.el.object3D.visible=!0})}}),he("hide-on-enter-vr",{init:function(){var a=this;this.el.sceneEl.addEventListener("enter-vr",function(){a.el.sceneEl.is("vr-mode")&&(a.el.object3D.visible=!1)}),this.el.sceneEl.addEventListener("exit-vr",function(){a.el.object3D.visible=!0})}});var iF="hp-mixed-reality",iG=eQ+"controllers/hp/mixed-reality/",iH={x:0,y:0,z:.06},iI={_x:Math.PI/4,_y:0,_z:0,_order:"XYZ"},iJ=(he("hp-mixed-reality-controls",{schema:{hand:{default:"none"},model:{default:!0}},mapping:{left:{axes:{touchpad:[2,3]},buttons:["trigger","grip","none","thumbstick","xbutton","ybutton"]},right:{axes:{touchpad:[2,3]},buttons:["trigger","grip","none","thumbstick","abutton","bbutton"]}},init:function(){var a=this;this.controllerPresent=!1,this.onButtonChanged=this.onButtonChanged.bind(this),this.onButtonDown=function(b){f8(b.detail.id,"down",a,a.data.hand)},this.onButtonUp=function(b){f8(b.detail.id,"up",a,a.data.hand)},this.onButtonTouchEnd=function(b){f8(b.detail.id,"touchend",a,a.data.hand)},this.onButtonTouchStart=function(b){f8(b.detail.id,"touchstart",a,a.data.hand)},this.previousButtonValues={},this.bindMethods()},update:function(){var a=this.data;this.controllerIndex="right"===a.hand?0:"left"===a.hand?1:2},play:function(){this.checkIfControllerPresent(),this.addControllersUpdateListener()},pause:function(){this.removeEventListeners(),this.removeControllersUpdateListener()},bindMethods:function(){this.onModelLoaded=this.onModelLoaded.bind(this),this.onControllersUpdate=this.onControllersUpdate.bind(this),this.checkIfControllerPresent=this.checkIfControllerPresent.bind(this),this.removeControllersUpdateListener=this.removeControllersUpdateListener.bind(this),this.onAxisMoved=this.onAxisMoved.bind(this)},addEventListeners:function(){var a=this.el;a.addEventListener("buttonchanged",this.onButtonChanged),a.addEventListener("buttondown",this.onButtonDown),a.addEventListener("buttonup",this.onButtonUp),a.addEventListener("touchstart",this.onButtonTouchStart),a.addEventListener("touchend",this.onButtonTouchEnd),a.addEventListener("axismove",this.onAxisMoved),a.addEventListener("model-loaded",this.onModelLoaded),this.controllerEventsActive=!0},removeEventListeners:function(){var a=this.el;a.removeEventListener("buttonchanged",this.onButtonChanged),a.removeEventListener("buttondown",this.onButtonDown),a.removeEventListener("buttonup",this.onButtonUp),a.removeEventListener("touchstart",this.onButtonTouchStart),a.removeEventListener("touchend",this.onButtonTouchEnd),a.removeEventListener("axismove",this.onAxisMoved),a.removeEventListener("model-loaded",this.onModelLoaded),this.controllerEventsActive=!1},checkIfControllerPresent:function(){var a=this.data;f4(this,iF,{index:this.controllerIndex,hand:a.hand})},injectTrackedControls:function(){var a=this.el,b=this.data;a.setAttribute("tracked-controls",{idPrefix:iF,hand:b.hand,controller:this.controllerIndex}),this.data.model&&this.el.setAttribute("gltf-model",iG+this.data.hand+".glb")},addControllersUpdateListener:function(){this.el.sceneEl.addEventListener("controllersupdated",this.onControllersUpdate,!1)},removeControllersUpdateListener:function(){this.el.sceneEl.removeEventListener("controllersupdated",this.onControllersUpdate,!1)},onControllersUpdate:function(){this.checkIfControllerPresent()},onButtonChanged:function(a){var b=this.mapping[this.data.hand].buttons[a.detail.id];b&&("trigger"===b&&console.log("analog value of trigger press: "+a.detail.state.value),this.el.emit(b+"changed",a.detail.state))},onModelLoaded:function(a){var b=a.detail.model;this.data.model&&(b.position.copy(iH),b.rotation.copy(iI),this.el.emit("controllermodelready",{name:"hp-mixed-reality-controls",model:this.data.model,rayOrigin:new c0.Vector3(0,0,0)}))},onAxisMoved:function(a){f7(this,this.mapping.axes,a)}}),eW("components:layer:warn"));function iK(a,b,c){return(b.dot(a)-b.dot(c))/b.length()}he("layer",{schema:{type:{default:"quad",oneOf:["quad","monocubemap","stereocubemap"]},src:{type:"map"},rotateCubemap:{default:!1},width:{default:0},height:{default:0}},init:function(){var a=this.el.sceneEl.renderer.getContext();this.quaternion=new c0.Quaternion,this.position=new c0.Vector3,this.bindMethods(),this.needsRedraw=!1,this.frameBuffer=a.createFramebuffer();var b=this.el.sceneEl.getAttribute("webxr"),c=b.requiredFeatures;-1===c.indexOf("layers")&&(c.push("layers"),this.el.sceneEl.setAttribute("webxr",b)),this.el.sceneEl.addEventListener("enter-vr",this.onEnterVR),this.el.sceneEl.addEventListener("exit-vr",this.onExitVR)},bindMethods:function(){this.onRequestedReferenceSpace=this.onRequestedReferenceSpace.bind(this),this.onEnterVR=this.onEnterVR.bind(this),this.onExitVR=this.onExitVR.bind(this)},update:function(a){this.data.src!==a.src&&this.updateSrc()},updateSrc:function(){var a=this.data.type;this.texture=void 0,"quad"!==a?"monocubemap"!==a&&"stereocubemap"!==a||this.loadCubeMapImages():this.loadQuadImage()},loadCubeMapImages:function(){var a,b=this.xrGLFactory,c=this.el.sceneEl.frame,d=this.data.src,e=this.data.type;this.visibilityChanged=!1,this.layer&&("monocubemap"!==e&&"stereocubemap"!==e||(d.complete?this.pendingCubeMapUpdate=!1:this.pendingCubeMapUpdate=!0,this.loadingScreen?this.loadingScreen=!1:this.loadingScreen=!0,"monocubemap"===e?(a=b.getSubImage(this.layer,c),this.loadCubeMapImage(a.colorTexture,d,0)):(a=b.getSubImage(this.layer,c,"left"),this.loadCubeMapImage(a.colorTexture,d,0),a=b.getSubImage(this.layer,c,"right"),this.loadCubeMapImage(a.colorTexture,d,6))))},loadQuadImage:function(){var a=this.data.src,b=this;this.el.sceneEl.systems.material.loadTexture(a,{src:a},function(c){b.el.sceneEl.renderer.initTexture(c),b.texture=c,"VIDEO"===a.tagName&&setTimeout(function(){b.textureIsVideo=!0},1e3),b.layer&&(b.layer.height=b.data.height/2||b.texture.image.height/1e3,b.layer.width=b.data.width/2||b.texture.image.width/1e3,b.needsRedraw=!0),b.updateQuadPanel()})},preGenerateCubeMapTextures:function(a,b){"monocubemap"===this.data.type?this.generateCubeMapTextures(a,0,b):(this.generateCubeMapTextures(a,0,b),this.generateCubeMapTextures(a,6,b))},generateCubeMapTextures:function(a,b,c){for(var d,e,f=this.data,g=this.cubeFaceSize,h=Math.min(a.width,a.height),i=[],j=0;j<6;j++){var k=document.createElement("CANVAS");k.width=k.height=g;var l=k.getContext("2d");f.rotateCubemap&&(2!==j&&3!==j||(l.save(),l.translate(g,g),l.rotate(Math.PI))),l.drawImage(a,(j+b)*h,0,h,h,0,0,g,g),l.restore(),c&&c(),i.push(k)}return f.rotateCubemap&&(d=i[0],e=i[1],i[0]=e,i[1]=d,d=i[4],e=i[5],i[4]=e,i[5]=d),c&&c(),i},loadCubeMapImage:function(a,b,c){var d=this.el.sceneEl.renderer.getContext();d.pixelStorei(d.UNPACK_FLIP_Y_WEBGL,!1),d.bindTexture(d.TEXTURE_CUBE_MAP,a);var e=0;(!b.complete||this.loadingScreen?this.loadingScreenImages:this.generateCubeMapTextures(b,c)).forEach(function(a,b){d.texSubImage2D(d.TEXTURE_CUBE_MAP_POSITIVE_X+b,0,0,0,d.RGBA,d.UNSIGNED_BYTE,a),e=d.getError()}),0!==e&&console.log("renderingError, WebGL Error Code: "+e),d.bindTexture(d.TEXTURE_CUBE_MAP,null)},tick:function(){this.el.sceneEl.xrSession&&this.referenceSpace&&(!this.layer&&(this.el.sceneEl.is("vr-mode")||this.el.sceneEl.is("ar-mode"))&&this.initLayer(),this.updateTransform(),this.data.src.complete&&(this.pendingCubeMapUpdate||this.loadingScreen||this.visibilityChanged)&&this.loadCubeMapImages(),(this.needsRedraw||this.layer.needsRedraw||this.textureIsVideo)&&("quad"===this.data.type&&this.draw(),this.needsRedraw=!1))},initLayer:function(){var a=this,b=this.data.type;this.el.sceneEl.xrSession.onvisibilitychange=function(b){a.visibilityChanged="hidden"!==b.session.visibilityState},"quad"!==b?"monocubemap"!==b&&"stereocubemap"!==b||this.initCubeMapLayer():this.initQuadLayer()},initQuadLayer:function(){var a=this.el.sceneEl,b=a.renderer.getContext(),c=this.xrGLFactory=new XRWebGLBinding(a.xrSession,b);this.texture&&(this.layer=c.createQuadLayer({space:this.referenceSpace,viewPixelHeight:2048,viewPixelWidth:2048,height:this.data.height/2||this.texture.image.height/1e3,width:this.data.width/2||this.texture.image.width/1e3}),this.initLoadingScreenImages(),a.renderer.xr.addLayer(this.layer))},initCubeMapLayer:function(){var a=this.data.src,b=this.el.sceneEl,c=b.renderer.getContext(),d=c.getParameter(c.MAX_CUBE_MAP_TEXTURE_SIZE),e=this.cubeFaceSize=Math.min(d,Math.min(a.width,a.height)),f=this.xrGLFactory=new XRWebGLBinding(b.xrSession,c);this.layer=f.createCubeLayer({space:this.referenceSpace,viewPixelWidth:e,viewPixelHeight:e,layout:"monocubemap"===this.data.type?"mono":"stereo",isStatic:!1}),this.initLoadingScreenImages(),this.loadCubeMapImages(),b.renderer.xr.addLayer(this.layer)},initLoadingScreenImages:function(){for(var a=this.cubeFaceSize,b=this.loadingScreenImages=[],c=0;c<6;c++){var d=document.createElement("CANVAS");d.width=d.height=a;var e=d.getContext("2d");d.width=d.height=a,e.fillStyle="black",e.fillRect(0,0,a,a),2!==c&&3!==c&&(e.translate(a,0),e.scale(-1,1),e.fillStyle="white",e.font="30px Arial",e.fillText("Loading",a/2,a/2)),b.push(d)}},destroyLayer:function(){this.layer&&(this.el.sceneEl.renderer.xr.removeLayer(this.layer),this.layer.destroy(),this.layer=void 0)},toggleCompositorLayer:function(){this.enableCompositorLayer(!this.layerEnabled)},enableCompositorLayer:function(a){this.layerEnabled=a,this.quadPanelEl.object3D.visible=!this.layerEnabled},updateQuadPanel:function(){var a=this.quadPanelEl;this.quadPanelEl||(a=this.quadPanelEl=document.createElement("a-entity"),this.el.appendChild(a)),a.setAttribute("material",{shader:"flat",src:this.data.src,transparent:!0}),a.setAttribute("geometry",{primitive:"plane",height:this.data.height||this.texture.image.height/1e3,width:this.data.width||this.texture.image.height/1e3})},draw:function(){var a,b,c,d,e,f,g=this.el.sceneEl,h=this.el.sceneEl.renderer.getContext(),i=this.xrGLFactory.getSubImage(this.layer,g.frame),j=g.renderer.properties.get(this.texture).__webglTexture,k=h.getParameter(h.FRAMEBUFFER_BINDING);h.viewport(i.viewport.x,i.viewport.y,i.viewport.width,i.viewport.height),h.bindFramebuffer(h.FRAMEBUFFER,this.frameBuffer),h.framebufferTexture2D(h.FRAMEBUFFER,h.COLOR_ATTACHMENT0,h.TEXTURE_2D,i.colorTexture,0),a=this.data.src,b=h.createFramebuffer(),c=i.viewport.x,d=i.viewport.y,e=i.viewport.x+i.viewport.width,f=i.viewport.y+i.viewport.height,"VIDEO"===a.tagName&&(h.bindTexture(h.TEXTURE_2D,j),h.texSubImage2D(h.TEXTURE_2D,0,0,0,a.width,a.height,h.RGB,h.UNSIGNED_BYTE,a)),h.bindFramebuffer(h.READ_FRAMEBUFFER,b),h.framebufferTexture2D(h.READ_FRAMEBUFFER,h.COLOR_ATTACHMENT0,h.TEXTURE_2D,j,0),h.readBuffer(h.COLOR_ATTACHMENT0),h.blitFramebuffer(0,0,a.width,a.height,c,d,e,f,h.COLOR_BUFFER_BIT,h.NEAREST),h.bindFramebuffer(h.READ_FRAMEBUFFER,null),h.deleteFramebuffer(b),h.bindFramebuffer(h.FRAMEBUFFER,k)},updateTransform:function(){var a=this.el,b=this.position,c=this.quaternion;a.object3D.updateMatrixWorld(),b.setFromMatrixPosition(a.object3D.matrixWorld),c.setFromRotationMatrix(a.object3D.matrixWorld),this.layerEnabled||b.set(0,0,1e8),this.layer.transform=new XRRigidTransform(b,c)},onEnterVR:function(){var a=this.el.sceneEl,b=a.xrSession;a.hasWebXR&&XRWebGLBinding&&b?(b.requestReferenceSpace("local-floor").then(this.onRequestedReferenceSpace),this.layerEnabled=!0,this.quadPanelEl&&(this.quadPanelEl.object3D.visible=!1),this.data.src.play&&this.data.src.play()):iJ("The layer component requires WebXR and the layers API enabled")},onExitVR:function(){this.quadPanelEl&&(this.quadPanelEl.object3D.visible=!0),this.destroyLayer()},onRequestedReferenceSpace:function(a){this.referenceSpace=a}}),he("laser-controls",{schema:{hand:{default:"right"},model:{default:!0},defaultModelColor:{type:"color",default:"grey"}},init:function(){var a=this.config,b=this.data,c=this.el,d=this,e={hand:b.hand,model:b.model};function f(b){var e=a[b.detail.name];if(e){var f=gi({showLine:!0},e.raycaster||{});b.detail.rayOrigin&&(f.origin=b.detail.rayOrigin.origin,f.direction=b.detail.rayOrigin.direction,f.showLine=!0),b.detail.rayOrigin||!d.modelReady?c.setAttribute("raycaster",f):c.setAttribute("raycaster","showLine",!0),c.setAttribute("cursor",gi({fuse:!1},e.cursor))}}c.setAttribute("hp-mixed-reality-controls",e),c.setAttribute("magicleap-controls",e),c.setAttribute("oculus-go-controls",e),c.setAttribute("meta-touch-controls",e),c.setAttribute("pico-controls",e),c.setAttribute("valve-index-controls",e),c.setAttribute("vive-controls",e),c.setAttribute("vive-focus-controls",e),c.setAttribute("windows-motion-controls",e),c.setAttribute("generic-tracked-controller-controls",{hand:e.hand}),c.addEventListener("controllerconnected",f),c.addEventListener("controllerdisconnected",function(b){a[b.detail.name]&&c.setAttribute("raycaster","showLine",!1)}),c.addEventListener("controllermodelready",function(a){f(a),d.modelReady=!0})},config:{"generic-tracked-controller-controls":{cursor:{downEvents:["triggerdown"],upEvents:["triggerup"]}},"hp-mixed-reality-controls":{cursor:{downEvents:["triggerdown"],upEvents:["triggerup"]},raycaster:{origin:{x:0,y:0,z:0}}},"magicleap-controls":{cursor:{downEvents:["trackpaddown","triggerdown"],upEvents:["trackpadup","triggerup"]}},"oculus-go-controls":{cursor:{downEvents:["triggerdown"],upEvents:["triggerup"]},raycaster:{origin:{x:0,y:5e-4,z:0}}},"meta-touch-controls":{cursor:{downEvents:["triggerdown"],upEvents:["triggerup"]},raycaster:{origin:{x:0,y:0,z:0}}},"pico-controls":{cursor:{downEvents:["triggerdown"],upEvents:["triggerup"]}},"valve-index-controls":{cursor:{downEvents:["triggerdown"],upEvents:["triggerup"]}},"vive-controls":{cursor:{downEvents:["triggerdown"],upEvents:["triggerup"]}},"vive-focus-controls":{cursor:{downEvents:["trackpaddown","triggerdown"],upEvents:["trackpadup","triggerup"]}},"windows-motion-controls":{cursor:{downEvents:["triggerdown"],upEvents:["triggerup"]},raycaster:{showLine:!1}}}});var iL,iM,iN,iO,iP,iQ,iR,iS,iT,iU,iV=c0.MathUtils.degToRad,iW=eW("components:light:warn"),iX=new c0.CubeTextureLoader,iY={};function iZ(a,b){return!(!a||!b)&&a.x===b.x&&a.y===b.y&&a.z===b.z}he("light",{schema:{angle:{default:60,if:{type:["spot"]}},color:{type:"color",if:{type:["ambient","directional","hemisphere","point","spot"]}},envMap:{default:"",if:{type:["probe"]}},groundColor:{type:"color",if:{type:["hemisphere"]}},decay:{default:1,if:{type:["point","spot"]}},distance:{default:0,min:0,if:{type:["point","spot"]}},intensity:{default:3.14,min:0,if:{type:["ambient","directional","hemisphere","point","spot","probe"]}},penumbra:{default:0,min:0,max:1,if:{type:["spot"]}},type:{default:"directional",oneOf:["ambient","directional","hemisphere","point","spot","probe"],schemaChange:!0},target:{type:"selector",if:{type:["spot","directional"]}},castShadow:{default:!1,if:{type:["point","spot","directional"]}},shadowBias:{default:0,if:{castShadow:!0}},shadowCameraFar:{default:500,if:{castShadow:!0}},shadowCameraFov:{default:90,if:{castShadow:!0}},shadowCameraNear:{default:.5,if:{castShadow:!0}},shadowCameraTop:{default:5,if:{castShadow:!0}},shadowCameraRight:{default:5,if:{castShadow:!0}},shadowCameraBottom:{default:-5,if:{castShadow:!0}},shadowCameraLeft:{default:-5,if:{castShadow:!0}},shadowCameraVisible:{default:!1,if:{castShadow:!0}},shadowCameraAutomatic:{default:"",if:{type:["directional"]}},shadowMapHeight:{default:512,if:{castShadow:!0}},shadowMapWidth:{default:512,if:{castShadow:!0}},shadowRadius:{default:1,if:{castShadow:!0}}},init:function(){var a=this.el;this.light=null,this.defaultTarget=null,this.system.registerLight(a)},update:function(a){var b=this.data,c=go(b,a),d=this.light,e=this;if(!d||"type"in c)this.setLight(this.data),this.updateShadow();else{var f=!1;Object.keys(c).forEach(function(a){var c=b[a];switch(a){case"color":d.color.set(c);break;case"groundColor":d.groundColor.set(c);break;case"angle":d.angle=iV(c);break;case"target":null===c?"spot"!==b.type&&"directional"!==b.type||(d.target=e.defaultTarget):c.hasLoaded?e.onSetTarget(c,d):c.addEventListener("loaded",e.onSetTarget.bind(e,c,d));break;case"envMap":e.updateProbeMap(b,d);break;case"castShadow":case"shadowBias":case"shadowCameraFar":case"shadowCameraFov":case"shadowCameraNear":case"shadowCameraTop":case"shadowCameraRight":case"shadowCameraBottom":case"shadowCameraLeft":case"shadowCameraVisible":case"shadowMapHeight":case"shadowMapWidth":case"shadowRadius":f||(e.updateShadow(),f=!0);break;case"shadowCameraAutomatic":b.shadowCameraAutomatic?e.shadowCameraAutomaticEls=Array.from(document.querySelectorAll(b.shadowCameraAutomatic)):e.shadowCameraAutomaticEls=[];break;default:d[a]=c}})}},tick:(iL=new c0.Box3,iM=new c0.Vector3,iN=new c0.Vector3,iO=new c0.Matrix4,iP=new c0.Sphere,iQ=new c0.Vector3,function(){if("directional"===this.data.type&&this.light.shadow&&this.light.shadow.camera instanceof c0.OrthographicCamera&&this.shadowCameraAutomaticEls.length){var a=this.light.shadow.camera;a.getWorldDirection(iM),a.getWorldPosition(iN),iO.copy(a.matrixWorld),iO.invert(),a.near=1,a.left=1e5,a.right=-1e5,a.top=-1e5,a.bottom=1e5,this.shadowCameraAutomaticEls.forEach(function(b){iL.setFromObject(b.object3D),iL.getBoundingSphere(iP);var c,d,e=iK(iN,iM,iP.center),f=(d=iK(iN,iM,c=iP.center),iQ.copy(iM),iQ.multiplyScalar(d),iQ.add(c),iQ).applyMatrix4(iO);a.near=Math.min(-e-iP.radius-1,a.near),a.left=Math.min(-iP.radius+f.x,a.left),a.right=Math.max(iP.radius+f.x,a.right),a.top=Math.max(iP.radius+f.y,a.top),a.bottom=Math.min(-iP.radius+f.y,a.bottom)}),a.updateProjectionMatrix()}}),setLight:function(a){var b=this.el,c=this.getLight(a);c&&(this.light&&b.removeObject3D("light"),this.light=c,this.light.el=b,b.setObject3D("light",this.light),"spot"!==a.type&&"directional"!==a.type&&"hemisphere"!==a.type||b.getObject3D("light").translateY(-1),"spot"===a.type&&(b.setObject3D("light-target",this.defaultTarget),b.getObject3D("light-target").position.set(0,0,-1)),a.shadowCameraAutomatic?this.shadowCameraAutomaticEls=Array.from(document.querySelectorAll(a.shadowCameraAutomatic)):this.shadowCameraAutomaticEls=[])},updateShadow:function(){var a=this.el,b=this.data,c=this.light;c.castShadow=b.castShadow;var d=a.getObject3D("cameraHelper");if(b.shadowCameraVisible&&!d?(d=new c0.CameraHelper(c.shadow.camera),a.setObject3D("cameraHelper",d)):!b.shadowCameraVisible&&d&&a.removeObject3D("cameraHelper"),!b.castShadow)return c;c.shadow.bias=b.shadowBias,c.shadow.radius=b.shadowRadius,c.shadow.mapSize.height=b.shadowMapHeight,c.shadow.mapSize.width=b.shadowMapWidth,c.shadow.camera.near=b.shadowCameraNear,c.shadow.camera.far=b.shadowCameraFar,c.shadow.camera instanceof c0.OrthographicCamera?(c.shadow.camera.top=b.shadowCameraTop,c.shadow.camera.right=b.shadowCameraRight,c.shadow.camera.bottom=b.shadowCameraBottom,c.shadow.camera.left=b.shadowCameraLeft):c.shadow.camera.fov=b.shadowCameraFov,c.shadow.camera.updateProjectionMatrix(),d&&d.update()},getLight:function(a){var b=a.angle,c=new c0.Color(a.color);c=c.getHex();var d=a.decay,e=a.distance,f=new c0.Color(a.groundColor);f=f.getHex();var g=a.intensity,h=a.type,i=a.target,j=null;switch(h.toLowerCase()){case"ambient":return new c0.AmbientLight(c,g);case"directional":return j=new c0.DirectionalLight(c,g),this.defaultTarget=j.target,i&&(i.hasLoaded?this.onSetTarget(i,j):i.addEventListener("loaded",this.onSetTarget.bind(this,i,j))),j;case"hemisphere":return new c0.HemisphereLight(c,f,g);case"point":return new c0.PointLight(c,g,e,d);case"spot":return j=new c0.SpotLight(c,g,e,iV(b),a.penumbra,d),this.defaultTarget=j.target,i&&(i.hasLoaded?this.onSetTarget(i,j):i.addEventListener("loaded",this.onSetTarget.bind(this,i,j))),j;case"probe":return j=new c0.LightProbe,this.updateProbeMap(a,j),j;default:iW("%s is not a valid light type. Choose from ambient, directional, hemisphere, point, spot.",h)}},updateProbeMap:function(a,b){a.envMap?(void 0===iY[a.envMap]&&(iY[a.envMap]=new window.Promise(function(b){fJ(a.envMap,function(c){iX.load(c,function(c){var d=eM.fromCubeTexture(c);iY[a.envMap]=d,b(d)})})})),iY[a.envMap]instanceof window.Promise?iY[a.envMap].then(function(a){b.copy(a)}):iY[a.envMap]instanceof c0.LightProbe&&b.copy(iY[a.envMap])):b.copy(new c0.LightProbe)},onSetTarget:function(a,b){b.target=a.object3D},remove:function(){var a=this.el;a.removeObject3D("light"),a.getObject3D("cameraHelper")&&a.removeObject3D("cameraHelper")}}),he("line",{schema:{start:{type:"vec3",default:{x:0,y:0,z:0}},end:{type:"vec3",default:{x:0,y:0,z:0}},color:{type:"color",default:"#74BEC1"},opacity:{type:"number",default:1},visible:{default:!0}},multiple:!0,init:function(){var a,b,c=this.data;b=this.material=new c0.LineBasicMaterial({color:c.color,opacity:c.opacity,transparent:c.opacity<1,visible:c.visible}),(a=this.geometry=new c0.BufferGeometry).setAttribute("position",new c0.BufferAttribute(new Float32Array(6),3)),this.line=new c0.Line(a,b),this.el.setObject3D(this.attrName,this.line)},update:function(a){var b=this.data,c=this.geometry,d=!1,e=this.material,f=c.attributes.position.array;iZ(b.start,a.start)||(f[0]=b.start.x,f[1]=b.start.y,f[2]=b.start.z,d=!0),iZ(b.end,a.end)||(f[3]=b.end.x,f[4]=b.end.y,f[5]=b.end.z,d=!0),d&&(c.attributes.position.needsUpdate=!0,c.computeBoundingSphere()),e.color.setStyle(b.color),e.opacity=b.opacity,e.transparent=b.opacity<1,e.visible=b.visible},remove:function(){this.el.removeObject3D(this.attrName,this.line)}}),he("link",{schema:{backgroundColor:{default:"red",type:"color"},borderColor:{default:"white",type:"color"},highlighted:{default:!1},highlightedColor:{default:"#24CAFF",type:"color"},href:{default:""},image:{type:"asset"},on:{default:"click"},peekMode:{default:!1},title:{default:""},titleColor:{default:"white",type:"color"},visualAspectEnabled:{default:!1}},init:function(){this.navigate=this.navigate.bind(this),this.previousQuaternion=void 0,this.quaternionClone=new c0.Quaternion,this.hiddenEls=[]},update:function(a){var b,c,d=this.data,e=this.el;if(d.visualAspectEnabled){var f=this.el.getAttribute("scale");this.previewDistance=15*(f.x+f.y)/2,this.initVisualAspect(),b=d.highlighted?d.highlightedColor:d.backgroundColor,c=d.highlighted?d.highlightedColor:d.borderColor,e.setAttribute("material","backgroundColor",b),e.setAttribute("material","strokeColor",c),d.on!==a.on&&this.updateEventListener(),void 0!==a.peekMode&&d.peekMode!==a.peekMode&&this.updatePeekMode(),d.image&&a.image!==d.image&&e.setAttribute("material","pano","string"==typeof d.image?d.image:d.image.src)}},updatePeekMode:function(){var a=this.el,b=this.sphereEl;this.data.peekMode?(this.hideAll(),a.getObject3D("mesh").visible=!1,b.setAttribute("visible",!0)):(this.showAll(),a.getObject3D("mesh").visible=!0,b.setAttribute("visible",!1))},play:function(){this.updateEventListener()},pause:function(){this.removeEventListener()},updateEventListener:function(){var a=this.el;a.isPlaying&&(this.removeEventListener(),a.addEventListener(this.data.on,this.navigate))},removeEventListener:function(){var a=this.data.on;a&&this.el.removeEventListener(a,this.navigate)},initVisualAspect:function(){var a,b,c,d=this.el;this.data.visualAspectEnabled&&!this.visualAspectInitialized&&(c=this.textEl=this.textEl||document.createElement("a-entity"),b=this.sphereEl=this.sphereEl||document.createElement("a-entity"),a=this.semiSphereEl=this.semiSphereEl||document.createElement("a-entity"),d.setAttribute("geometry",{primitive:"circle",radius:1,segments:64}),d.setAttribute("material",{shader:"portal",pano:this.data.image,side:"double",previewDistance:this.previewDistance}),c.setAttribute("text",{color:this.data.titleColor,align:"center",font:"kelsonsans",value:this.data.title||this.data.href,width:4}),c.setAttribute("position","0 1.5 0"),d.appendChild(c),a.setAttribute("geometry",{primitive:"sphere",radius:1,phiStart:0,segmentsWidth:64,segmentsHeight:64,phiLength:180,thetaStart:0,thetaLength:360}),a.setAttribute("material",{shader:"portal",borderEnabled:0,pano:this.data.image,side:"back",previewDistance:this.previewDistance}),a.setAttribute("rotation","0 180 0"),a.setAttribute("position","0 0 0"),a.setAttribute("visible",!1),d.appendChild(a),b.setAttribute("geometry",{primitive:"sphere",radius:10,segmentsWidth:64,segmentsHeight:64}),b.setAttribute("material",{shader:"portal",borderEnabled:0,pano:this.data.image,side:"back",previewDistance:this.previewDistance}),b.setAttribute("visible",!1),d.appendChild(b),this.visualAspectInitialized=!0)},navigate:function(){window.location=this.data.href},tick:function(){var a=new c0.Vector3,b=new c0.Vector3,c=new c0.Quaternion,d=new c0.Vector3;return function(){var e,f,g=this.el,h=g.object3D,i=g.sceneEl.camera,j=this.textEl;if(this.data.visualAspectEnabled)if(h.updateMatrixWorld(),i.parent.updateMatrixWorld(),i.updateMatrixWorld(),h.matrix.decompose(b,c,d),b.setFromMatrixPosition(h.matrixWorld),a.setFromMatrixPosition(i.matrixWorld),(f=b.distanceTo(a))>1.33333*this.previewDistance)this.previousQuaternion||(this.quaternionClone.copy(c),this.previousQuaternion=this.quaternionClone),h.lookAt(a);else{if(e=this.calculateCameraPortalOrientation(),f<.5){if(!0===this.semiSphereEl.getAttribute("visible"))return;j.setAttribute("text","width",1.5),e<=0?(j.setAttribute("position","0 0 0.75"),j.setAttribute("rotation","0 180 0"),this.semiSphereEl.setAttribute("rotation","0 0 0")):(j.setAttribute("position","0 0 -0.75"),j.setAttribute("rotation","0 0 0"),this.semiSphereEl.setAttribute("rotation","0 180 0")),g.getObject3D("mesh").visible=!1,this.semiSphereEl.setAttribute("visible",!0),this.peekCameraPortalOrientation=e}else e<=0?j.setAttribute("rotation","0 180 0"):j.setAttribute("rotation","0 0 0"),j.setAttribute("text","width",5),j.setAttribute("position","0 1.5 0"),g.getObject3D("mesh").visible=!0,this.semiSphereEl.setAttribute("visible",!1),this.peekCameraPortalOrientation=void 0;this.previousQuaternion&&(h.quaternion.copy(this.previousQuaternion),this.previousQuaternion=void 0)}}}(),hideAll:function(){var a=this.el,b=this.hiddenEls,c=this;b.length>0||a.sceneEl.object3D.traverse(function(d){d&&d.el&&d.el.hasAttribute("link-controls")||d.el&&d!==a.sceneEl.object3D&&d.el!==a&&d.el!==c.sphereEl&&d.el!==a.sceneEl.cameraEl&&!1!==d.el.getAttribute("visible")&&d.el!==c.textEl&&d.el!==c.semiSphereEl&&(d.el.setAttribute("visible",!1),b.push(d.el))})},showAll:function(){this.hiddenEls.forEach(function(a){a.setAttribute("visible",!0)}),this.hiddenEls=[]},calculateCameraPortalOrientation:(iR=new c0.Matrix4,iS=new c0.Vector3,iT=new c0.Vector3(0,0,1),iU=new c0.Vector3(0,0,0),function(){var a=this.el,b=a.sceneEl.camera;return iS.set(0,0,0),iT.set(0,0,1),iU.set(0,0,0),a.object3D.matrixWorld.extractRotation(iR),iT.applyMatrix4(iR),a.object3D.updateMatrixWorld(),a.object3D.localToWorld(iU),b.parent.parent.updateMatrixWorld(),b.parent.updateMatrixWorld(),b.updateMatrixWorld(),b.localToWorld(iS),iS.sub(iU).normalize(),iT.normalize(),Math.sign(iT.dot(iS))}),remove:function(){this.removeEventListener()}}),hT("portal",{schema:{borderEnabled:{default:1,type:"int",is:"uniform"},backgroundColor:{default:"red",type:"color",is:"uniform"},pano:{type:"map",is:"uniform"},strokeColor:{default:"white",type:"color",is:"uniform"},previewDistance:{default:15,type:"float",is:"uniform"}},vertexShader:"vec3 portalPosition;\nvarying vec3 vWorldPosition;\nvarying float vDistanceToCenter;\nvarying float vDistance;\nvoid main() {\nvDistanceToCenter = clamp(length(position - vec3(0.0, 0.0, 0.0)), 0.0, 1.0);\nportalPosition = (modelMatrix * vec4(0.0, 0.0, 0.0, 1.0)).xyz;\nvDistance = length(portalPosition - cameraPosition);\nvWorldPosition = (modelMatrix * vec4(position, 1.0)).xyz;\ngl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n}",fragmentShader:"#define RECIPROCAL_PI2 0.15915494\nuniform sampler2D pano;\nuniform vec3 strokeColor;\nuniform vec3 backgroundColor;\nuniform float borderEnabled;\nuniform float previewDistance;\nvarying float vDistanceToCenter;\nvarying float vDistance;\nvarying vec3 vWorldPosition;\nvoid main() {\nvec3 direction = normalize(vWorldPosition - cameraPosition);\nvec2 sampleUV;\nfloat borderThickness = clamp(exp(-vDistance / 50.0), 0.6, 0.95);\nsampleUV.y = clamp(direction.y * 0.5  + 0.5, 0.0, 1.0);\nsampleUV.x = atan(direction.z, -direction.x) * -RECIPROCAL_PI2 + 0.5;\nif (vDistanceToCenter > borderThickness && borderEnabled == 1.0) {\ngl_FragColor = vec4(strokeColor, 1.0);\n} else {\ngl_FragColor = mix(texture2D(pano, sampleUV), vec4(backgroundColor, 1.0), clamp(pow((vDistance / previewDistance), 2.0), 0.0, 1.0));\n}\n}"});var i$="logitech-mx-ink",i_=eQ+"controllers/logitech/",i0=(he("logitech-mx-ink-controls",{schema:{hand:{default:"left"},model:{default:!0},orientationOffset:{type:"vec3"}},mapping:{left:{buttons:["front","back","none","none","none","tip"]},right:{buttons:["front","back","none","none","none","tip"]}},init:function(){var a=this;this.onButtonChanged=this.onButtonChanged.bind(this),this.onButtonDown=function(b){f8(b.detail.id,"down",a,a.data.hand)},this.onButtonUp=function(b){f8(b.detail.id,"up",a,a.data.hand)},this.onButtonTouchEnd=function(b){f8(b.detail.id,"touchend",a,a.data.hand)},this.onButtonTouchStart=function(b){f8(b.detail.id,"touchstart",a,a.data.hand)},this.bindMethods()},play:function(){this.checkIfControllerPresent(),this.addControllersUpdateListener()},pause:function(){this.removeEventListeners(),this.removeControllersUpdateListener()},bindMethods:function(){this.onModelLoaded=this.onModelLoaded.bind(this),this.onControllersUpdate=this.onControllersUpdate.bind(this),this.checkIfControllerPresent=this.checkIfControllerPresent.bind(this),this.removeControllersUpdateListener=this.removeControllersUpdateListener.bind(this),this.onAxisMoved=this.onAxisMoved.bind(this)},addEventListeners:function(){var a=this.el;a.addEventListener("buttonchanged",this.onButtonChanged),a.addEventListener("buttondown",this.onButtonDown),a.addEventListener("buttonup",this.onButtonUp),a.addEventListener("touchstart",this.onButtonTouchStart),a.addEventListener("touchend",this.onButtonTouchEnd),a.addEventListener("axismove",this.onAxisMoved),a.addEventListener("model-loaded",this.onModelLoaded),this.controllerEventsActive=!0},removeEventListeners:function(){var a=this.el;a.removeEventListener("buttonchanged",this.onButtonChanged),a.removeEventListener("buttondown",this.onButtonDown),a.removeEventListener("buttonup",this.onButtonUp),a.removeEventListener("touchstart",this.onButtonTouchStart),a.removeEventListener("touchend",this.onButtonTouchEnd),a.removeEventListener("axismove",this.onAxisMoved),a.removeEventListener("model-loaded",this.onModelLoaded),a.sceneEl.removeEventListener("enter-vr",this.onEnterVR),a.sceneEl.removeEventListener("exit-vr",this.onExitVR),this.controllerEventsActive=!1},checkIfControllerPresent:function(){var a=this.controllerObject3D;a&&(a.visible=!1),f4(this,i$,{hand:this.data.hand,iterateControllerProfiles:!0})},injectTrackedControls:function(){var a=this.el,b=this.data;a.setAttribute("tracked-controls",{id:i$,hand:b.hand,handTrackingEnabled:!1,iterateControllerProfiles:!0,orientationOffset:b.orientationOffset}),this.loadModel()},loadModel:function(){var a=this.controllerObject3D;if(this.data.model)return a?(a.visible=this.el.sceneEl.is("vr-mode"),void this.el.setObject3D("mesh",a)):void this.el.setAttribute("gltf-model",i_+"logitech-mx-ink.glb")},addControllersUpdateListener:function(){this.el.sceneEl.addEventListener("controllersupdated",this.onControllersUpdate,!1)},removeControllersUpdateListener:function(){this.el.sceneEl.removeEventListener("controllersupdated",this.onControllersUpdate,!1)},onControllersUpdate:function(){this.checkIfControllerPresent()},onButtonChanged:function(a){var b=this.mapping[this.data.hand].buttons[a.detail.id];b&&("trigger"===b&&console.log("analog value of trigger press: "+a.detail.state.value),this.el.emit(b+"changed",a.detail.state))},onModelLoaded:function(a){a.target===this.el&&this.data.model&&(this.el.emit("controllermodelready",{name:"logitech-mx-ink-controls",model:this.data.model,rayOrigin:new c0.Vector3(0,0,0)}),this.controllerObject3D=this.el.getObject3D("mesh"),this.controllerObject3D.visible=this.el.sceneEl.is("vr-mode"))},onAxisMoved:function(a){f7(this,this.mapping.axes,a)}}),Math.PI/2),i1=(he("look-controls",{dependencies:["position","rotation"],schema:{enabled:{default:!0},magicWindowTrackingEnabled:{default:!0},pointerLockEnabled:{default:!1},reverseMouseDrag:{default:!1},reverseTouchDrag:{default:!1},touchEnabled:{default:!0},mouseEnabled:{default:!0}},init:function(){this.deltaYaw=0,this.previousHMDPosition=new c0.Vector3,this.hmdQuaternion=new c0.Quaternion,this.magicWindowAbsoluteEuler=new c0.Euler,this.magicWindowDeltaEuler=new c0.Euler,this.position=new c0.Vector3,this.magicWindowObject=new c0.Object3D,this.rotation={},this.deltaRotation={},this.savedPose=null,this.pointerLocked=!1,this.setupMouseControls(),this.bindMethods(),this.previousMouseEvent={},this.setupMagicWindowControls(),this.savedPose={position:new c0.Vector3,rotation:new c0.Euler},(this.el.sceneEl.is("vr-mode")||this.el.sceneEl.is("ar-mode"))&&this.onEnterVR()},setupMagicWindowControls:function(){var a,b=this.data;(e8()||fd())&&(a=this.magicWindowControls=new eO(this.magicWindowObject),"undefined"!=typeof DeviceOrientationEvent&&DeviceOrientationEvent.requestPermission&&(a.enabled=!1,this.el.sceneEl.components["device-orientation-permission-ui"].permissionGranted?a.enabled=b.magicWindowTrackingEnabled:this.el.sceneEl.addEventListener("deviceorientationpermissiongranted",function(){a.enabled=b.magicWindowTrackingEnabled})))},update:function(a){var b=this.data;b.enabled!==a.enabled&&this.updateGrabCursor(b.enabled),a&&!b.magicWindowTrackingEnabled&&a.magicWindowTrackingEnabled&&(this.magicWindowAbsoluteEuler.set(0,0,0),this.magicWindowDeltaEuler.set(0,0,0)),this.magicWindowControls&&(this.magicWindowControls.enabled=b.magicWindowTrackingEnabled),a&&!b.pointerLockEnabled!==a.pointerLockEnabled&&(this.removeEventListeners(),this.addEventListeners(),this.pointerLocked&&this.exitPointerLock())},tick:function(a){this.data.enabled&&this.updateOrientation()},play:function(){this.addEventListeners()},pause:function(){this.removeEventListeners(),this.pointerLocked&&this.exitPointerLock()},remove:function(){this.removeEventListeners(),this.pointerLocked&&this.exitPointerLock()},bindMethods:function(){this.onMouseDown=this.onMouseDown.bind(this),this.onMouseMove=this.onMouseMove.bind(this),this.onMouseUp=this.onMouseUp.bind(this),this.onTouchStart=this.onTouchStart.bind(this),this.onTouchMove=this.onTouchMove.bind(this),this.onTouchEnd=this.onTouchEnd.bind(this),this.onEnterVR=this.onEnterVR.bind(this),this.onExitVR=this.onExitVR.bind(this),this.onPointerLockChange=this.onPointerLockChange.bind(this),this.onPointerLockError=this.onPointerLockError.bind(this)},setupMouseControls:function(){this.mouseDown=!1,this.pitchObject=new c0.Object3D,this.yawObject=new c0.Object3D,this.yawObject.position.y=10,this.yawObject.add(this.pitchObject)},addEventListeners:function(){var a=this.el.sceneEl,b=a.canvas;b?(b.addEventListener("mousedown",this.onMouseDown,!1),window.addEventListener("mousemove",this.onMouseMove,!1),window.addEventListener("mouseup",this.onMouseUp,!1),b.addEventListener("touchstart",this.onTouchStart,{passive:!0}),window.addEventListener("touchmove",this.onTouchMove,{passive:!0}),window.addEventListener("touchend",this.onTouchEnd,{passive:!0}),a.addEventListener("enter-vr",this.onEnterVR),a.addEventListener("exit-vr",this.onExitVR),this.data.pointerLockEnabled&&(document.addEventListener("pointerlockchange",this.onPointerLockChange,!1),document.addEventListener("mozpointerlockchange",this.onPointerLockChange,!1),document.addEventListener("pointerlockerror",this.onPointerLockError,!1))):a.addEventListener("render-target-loaded",this.addEventListeners.bind(this))},removeEventListeners:function(){var a=this.el.sceneEl,b=a&&a.canvas;b&&(b.removeEventListener("mousedown",this.onMouseDown),window.removeEventListener("mousemove",this.onMouseMove),window.removeEventListener("mouseup",this.onMouseUp),b.removeEventListener("touchstart",this.onTouchStart),window.removeEventListener("touchmove",this.onTouchMove),window.removeEventListener("touchend",this.onTouchEnd),a.removeEventListener("enter-vr",this.onEnterVR),a.removeEventListener("exit-vr",this.onExitVR),document.removeEventListener("pointerlockchange",this.onPointerLockChange,!1),document.removeEventListener("mozpointerlockchange",this.onPointerLockChange,!1),document.removeEventListener("pointerlockerror",this.onPointerLockError,!1))},updateOrientation:function(){var a=this.el.object3D,b=this.pitchObject,c=this.yawObject,d=this.el.sceneEl;(d.is("vr-mode")||d.is("ar-mode"))&&d.checkHeadsetConnected()||(this.updateMagicWindowOrientation(),a.rotation.x=this.magicWindowDeltaEuler.x+b.rotation.x,a.rotation.y=this.magicWindowDeltaEuler.y+c.rotation.y,a.rotation.z=this.magicWindowDeltaEuler.z)},updateMagicWindowOrientation:function(){var a=this.magicWindowAbsoluteEuler,b=this.magicWindowDeltaEuler;this.magicWindowControls&&this.magicWindowControls.enabled&&(this.magicWindowControls.update(),a.setFromQuaternion(this.magicWindowObject.quaternion,"YXZ"),this.previousMagicWindowYaw||0===a.y||(this.previousMagicWindowYaw=a.y),this.previousMagicWindowYaw&&(b.x=a.x,b.y+=a.y-this.previousMagicWindowYaw,b.z=a.z,this.previousMagicWindowYaw=a.y))},onMouseMove:function(a){var b,c,d,e=this.pitchObject,f=this.previousMouseEvent,g=this.yawObject;this.data.enabled&&(this.mouseDown||this.pointerLocked)&&(this.pointerLocked?(c=a.movementX||a.mozMovementX||0,d=a.movementY||a.mozMovementY||0):(c=a.screenX-f.screenX,d=a.screenY-f.screenY),this.previousMouseEvent.screenX=a.screenX,this.previousMouseEvent.screenY=a.screenY,b=this.data.reverseMouseDrag?1:-1,g.rotation.y+=.002*c*b,e.rotation.x+=.002*d*b,e.rotation.x=Math.max(-i0,Math.min(i0,e.rotation.x)))},onMouseDown:function(a){var b=this.el.sceneEl;if(this.data.enabled&&this.data.mouseEnabled&&(!b.is("vr-mode")&&!b.is("ar-mode")||!b.checkHeadsetConnected())&&0===a.button){var c=b&&b.canvas;this.mouseDown=!0,this.previousMouseEvent.screenX=a.screenX,this.previousMouseEvent.screenY=a.screenY,this.showGrabbingCursor(),this.data.pointerLockEnabled&&!this.pointerLocked&&(c.requestPointerLock?c.requestPointerLock():c.mozRequestPointerLock&&c.mozRequestPointerLock())}},showGrabbingCursor:function(){this.el.sceneEl.canvas.style.cursor="grabbing"},hideGrabbingCursor:function(){this.el.sceneEl.canvas.style.cursor=""},onMouseUp:function(){this.mouseDown=!1,this.hideGrabbingCursor()},onTouchStart:function(a){1!==a.touches.length||!this.data.touchEnabled||this.el.sceneEl.is("vr-mode")||this.el.sceneEl.is("ar-mode")||(this.touchStart={x:a.touches[0].pageX,y:a.touches[0].pageY},this.touchStarted=!0)},onTouchMove:function(a){var b,c,d=this.el.sceneEl.canvas,e=this.yawObject;this.touchStarted&&this.data.touchEnabled&&(c=2*Math.PI*(a.touches[0].pageX-this.touchStart.x)/d.clientWidth,b=this.data.reverseTouchDrag?1:-1,e.rotation.y-=.5*c*b,this.touchStart={x:a.touches[0].pageX,y:a.touches[0].pageY})},onTouchEnd:function(){this.touchStarted=!1},onEnterVR:function(){var a=this.el.sceneEl;a.checkHeadsetConnected()&&(this.saveCameraPose(),this.el.object3D.position.set(0,0,0),this.el.object3D.rotation.set(0,0,0),a.hasWebXR&&(this.el.object3D.matrixAutoUpdate=!1,this.el.object3D.updateMatrix()))},onExitVR:function(){this.el.sceneEl.checkHeadsetConnected()&&(this.restoreCameraPose(),this.previousHMDPosition.set(0,0,0),this.el.object3D.matrixAutoUpdate=!0)},onPointerLockChange:function(){this.pointerLocked=!(!document.pointerLockElement&&!document.mozPointerLockElement)},onPointerLockError:function(){this.pointerLocked=!1},exitPointerLock:function(){document.exitPointerLock(),this.pointerLocked=!1},updateGrabCursor:function(a){var b=this.el.sceneEl;function c(){b.canvas.classList.add("a-grab-cursor")}function d(){b.canvas.classList.remove("a-grab-cursor")}b.canvas?a?c():d():a?b.addEventListener("render-target-loaded",c):b.addEventListener("render-target-loaded",d)},saveCameraPose:function(){var a=this.el;this.savedPose.position.copy(a.object3D.position),this.savedPose.rotation.copy(a.object3D.rotation),this.hasSavedPose=!0},restoreCameraPose:function(){var a=this.el,b=this.savedPose;this.hasSavedPose&&(a.object3D.position.copy(b.position),a.object3D.rotation.copy(b.rotation),this.hasSavedPose=!1)}}),"magicleap-one"),i2=eQ+"controllers/magicleap/magicleap-one-controller.glb",i3=(he("magicleap-controls",{schema:{hand:{default:"none"},model:{default:!0}},mapping:{axes:{touchpad:[0,1]},buttons:["trigger","grip","touchpad","menu"]},init:function(){var a=this;this.controllerPresent=!1,this.onButtonChanged=this.onButtonChanged.bind(this),this.onButtonDown=function(b){f8(b.detail.id,"down",a)},this.onButtonUp=function(b){f8(b.detail.id,"up",a)},this.onButtonTouchEnd=function(b){f8(b.detail.id,"touchend",a)},this.onButtonTouchStart=function(b){f8(b.detail.id,"touchstart",a)},this.previousButtonValues={},this.bindMethods()},update:function(){var a=this.data;this.controllerIndex="right"===a.hand?0:"left"===a.hand?1:2},play:function(){this.checkIfControllerPresent(),this.addControllersUpdateListener()},pause:function(){this.removeEventListeners(),this.removeControllersUpdateListener()},bindMethods:function(){this.onModelLoaded=this.onModelLoaded.bind(this),this.onControllersUpdate=this.onControllersUpdate.bind(this),this.checkIfControllerPresent=this.checkIfControllerPresent.bind(this),this.removeControllersUpdateListener=this.removeControllersUpdateListener.bind(this),this.onAxisMoved=this.onAxisMoved.bind(this)},addEventListeners:function(){var a=this.el;a.addEventListener("buttonchanged",this.onButtonChanged),a.addEventListener("buttondown",this.onButtonDown),a.addEventListener("buttonup",this.onButtonUp),a.addEventListener("touchstart",this.onButtonTouchStart),a.addEventListener("touchend",this.onButtonTouchEnd),a.addEventListener("axismove",this.onAxisMoved),a.addEventListener("model-loaded",this.onModelLoaded),this.controllerEventsActive=!0},removeEventListeners:function(){var a=this.el;a.removeEventListener("buttonchanged",this.onButtonChanged),a.removeEventListener("buttondown",this.onButtonDown),a.removeEventListener("buttonup",this.onButtonUp),a.removeEventListener("touchstart",this.onButtonTouchStart),a.removeEventListener("touchend",this.onButtonTouchEnd),a.removeEventListener("axismove",this.onAxisMoved),a.removeEventListener("model-loaded",this.onModelLoaded),this.controllerEventsActive=!1},checkIfControllerPresent:function(){var a=this.data;f4(this,i1,{index:this.controllerIndex,hand:a.hand})},injectTrackedControls:function(){var a=this.el,b=this.data;a.setAttribute("tracked-controls",{idPrefix:i1,hand:b.hand,controller:this.controllerIndex}),this.data.model&&this.el.setAttribute("gltf-model",i2)},addControllersUpdateListener:function(){this.el.sceneEl.addEventListener("controllersupdated",this.onControllersUpdate,!1)},removeControllersUpdateListener:function(){this.el.sceneEl.removeEventListener("controllersupdated",this.onControllersUpdate,!1)},onControllersUpdate:function(){this.checkIfControllerPresent()},onButtonChanged:function(a){var b=this.mapping.buttons[a.detail.id];b&&("trigger"===b&&console.log("analog value of trigger press: "+a.detail.state.value),this.el.emit(b+"changed",a.detail.state))},onModelLoaded:function(a){a.detail.model.scale.set(.01,.01,.01)},onAxisMoved:function(a){f7(this,this.mapping.axes,a)},updateModel:function(a,b){},setButtonColor:function(a,b){}}),eW("components:material:error"));function i4(a,b){a.dispose(),b.unregisterMaterial(a),Object.keys(a).filter(function(b){return a[b]&&a[b].isTexture}).forEach(function(b){a[b].dispose()})}he("material",{schema:{alphaTest:{default:0,min:0,max:1},depthTest:{default:!0},depthWrite:{default:!0},flatShading:{default:!1},npot:{default:!1},offset:{type:"vec2",default:{x:0,y:0}},opacity:{default:1,min:0,max:1},repeat:{type:"vec2",default:{x:1,y:1}},shader:{default:"standard",oneOf:hQ,schemaChange:!0},side:{default:"front",oneOf:["front","back","double"]},transparent:{default:!1},vertexColorsEnabled:{default:!1},visible:{default:!0},blending:{default:"normal",oneOf:["none","normal","additive","subtractive","multiply"]},dithering:{default:!0},anisotropy:{default:0,min:0}},init:function(){this.material=null},update:function(a){var b=this.data;this.shader&&b.shader===a.shader||this.updateShader(b.shader),this.shader.update(this.data),this.updateMaterial(a)},updateSchema:function(a){var b,c,d,e;c=a&&a.shader,b=this.oldData&&this.oldData.shader,(d=hP[e=c||b]&&hP[e].schema)||i3("Unknown shader schema "+e),b&&c===b||(this.extendSchema(d),this.updateBehavior())},updateBehavior:function(){var a,b,c=this.el.sceneEl,d=this.schema,e=this;function f(a,c){var d;for(d in b)b[d]=a;e.shader.update(b)}for(a in this.tick=void 0,b={},d)"time"===d[a].type&&(this.tick=f,b[a]=!0);c&&(this.tick?c.addBehavior(this):c.removeBehavior(this))},updateShader:function(a){var b,c=this.data,d=hP[a]&&hP[a].Shader;if(!d)throw Error("Unknown shader "+a);(b=this.shader=new d).el=this.el,b.init(c),this.setMaterial(b.material),this.updateSchema(c)},updateMaterial:function(a){var b,c=this.data,d=this.material;for(b in d.alphaTest=c.alphaTest,d.depthTest=!1!==c.depthTest,d.depthWrite=!1!==c.depthWrite,d.opacity=c.opacity,d.flatShading=c.flatShading,d.side=function(a){switch(a){case"back":return c0.BackSide;case"double":return c0.DoubleSide;default:return c0.FrontSide}}(c.side),d.transparent=!1!==c.transparent||c.opacity<1,d.vertexColors=c.vertexColorsEnabled,d.visible=c.visible,d.blending=function(a){switch(a){case"none":return c0.NoBlending;case"additive":return c0.AdditiveBlending;case"subtractive":return c0.SubtractiveBlending;case"multiply":return c0.MultiplyBlending;default:return c0.NormalBlending}}(c.blending),d.dithering=c.dithering,a)break;b&&(a.alphaTest!==c.alphaTest||a.side!==c.side||a.vertexColorsEnabled!==c.vertexColorsEnabled)&&(d.needsUpdate=!0)},remove:function(){var a=new c0.MeshBasicMaterial,b=this.material,c=this.el.getObject3D("mesh");c&&(c.material=a),i4(b,this.system)},setMaterial:function(a){var b,c=this.el,d=this.system;this.material&&i4(this.material,d),this.material=a,d.registerMaterial(a),(b=c.getObject3D("mesh"))?b.material=a:c.addEventListener("object3dset",function b(d){"mesh"===d.detail.type&&d.target===c&&(c.getObject3D("mesh").material=a,c.removeEventListener("object3dset",b))})}});var i5,i6,i7,i8,i9,ja="oculus-touch",jb=eQ+"controllers/oculus/oculus-touch-controller-",jc=eQ+"controllers/meta/",jd={left:{modelUrl:jb+"left.gltf",rayOrigin:{origin:{x:.002,y:-.005,z:-.03},direction:{x:0,y:-.8,z:-1}},modelPivotOffset:new c0.Vector3(-.005,.036,-.037),modelPivotRotation:new c0.Euler(Math.PI/4.5,0,0)},right:{modelUrl:jb+"right.gltf",rayOrigin:{origin:{x:-.002,y:-.005,z:-.03},direction:{x:0,y:-.8,z:-1}},modelPivotOffset:new c0.Vector3(.005,.036,-.037),modelPivotRotation:new c0.Euler(Math.PI/4.5,0,0)}},je="oculus-touch",jf={"oculus-touch":jd,"oculus-touch-v2":{left:{modelUrl:jb+"gen2-left.gltf",rayOrigin:{origin:{x:-.006,y:-.03,z:-.04},direction:{x:0,y:-.9,z:-1}},modelPivotOffset:new c0.Vector3(0,-.007,-.021),modelPivotRotation:new c0.Euler(-Math.PI/4,0,0)},right:{modelUrl:jb+"gen2-right.gltf",rayOrigin:{origin:{x:.006,y:-.03,z:-.04},direction:{x:0,y:-.9,z:-1}},modelPivotOffset:new c0.Vector3(0,-.007,-.021),modelPivotRotation:new c0.Euler(-Math.PI/4,0,0)}},"oculus-touch-v3":{left:{modelUrl:jb+"v3-left.glb",rayOrigin:{origin:{x:.0065,y:-.0186,z:-.05},direction:{x:.12394785839500175,y:-.5944043672340157,z:-.7945567170519814}},modelPivotOffset:new c0.Vector3(0,0,0),modelPivotRotation:new c0.Euler(0,0,0)},right:{modelUrl:jb+"v3-right.glb",rayOrigin:{origin:{x:-.0065,y:-.0186,z:-.05},direction:{x:-.12394785839500175,y:-.5944043672340157,z:-.7945567170519814}},modelPivotOffset:new c0.Vector3(0,0,0),modelPivotRotation:new c0.Euler(0,0,0)}},"meta-quest-touch-pro":{left:{modelUrl:jc+"quest-touch-pro-left.glb",rayOrigin:{origin:{x:.0065,y:-.0186,z:-.05},direction:{x:.12394785839500175,y:-.5944043672340157,z:-.7945567170519814}},modelPivotOffset:new c0.Vector3(0,0,0),modelPivotRotation:new c0.Euler(0,0,0)},right:{modelUrl:jc+"quest-touch-pro-right.glb",rayOrigin:{origin:{x:-.0065,y:-.0186,z:-.05},direction:{x:-.12394785839500175,y:-.5944043672340157,z:-.7945567170519814}},modelPivotOffset:new c0.Vector3(0,0,0),modelPivotRotation:new c0.Euler(0,0,0)}},"meta-quest-touch-plus":{left:{modelUrl:jc+"quest-touch-plus-left.glb",rayOrigin:{origin:{x:.0065,y:-.0186,z:-.05},direction:{x:.12394785839500175,y:-.5944043672340157,z:-.7945567170519814}},modelPivotOffset:new c0.Vector3(0,0,0),modelPivotRotation:new c0.Euler(0,0,0)},right:{modelUrl:jc+"quest-touch-plus-right.glb",rayOrigin:{origin:{x:-.0065,y:-.0186,z:-.05},direction:{x:-.12394785839500175,y:-.5944043672340157,z:-.7945567170519814}},modelPivotOffset:new c0.Vector3(0,0,0),modelPivotRotation:new c0.Euler(0,0,0)}}},jg={schema:{hand:{default:"left"},buttonColor:{type:"color",default:"#999"},buttonTouchColor:{type:"color",default:"#8AB"},buttonHighlightColor:{type:"color",default:"#2DF"},model:{default:!0},controllerType:{default:"auto",oneOf:["auto","oculus-touch","oculus-touch-v2","oculus-touch-v3"]}},after:["tracked-controls"],mapping:{left:{axes:{thumbstick:[2,3]},buttons:["trigger","grip","none","thumbstick","xbutton","ybutton","surface"]},right:{axes:{thumbstick:[2,3]},buttons:["trigger","grip","none","thumbstick","abutton","bbutton","surface"]}},bindMethods:function(){this.onButtonChanged=this.onButtonChanged.bind(this),this.onThumbstickMoved=this.onThumbstickMoved.bind(this),this.onModelLoaded=this.onModelLoaded.bind(this),this.onControllersUpdate=this.onControllersUpdate.bind(this),this.checkIfControllerPresent=this.checkIfControllerPresent.bind(this),this.onAxisMoved=this.onAxisMoved.bind(this)},init:function(){var a=this;this.onButtonDown=function(b){f8(b.detail.id,"down",a,a.data.hand)},this.onButtonUp=function(b){f8(b.detail.id,"up",a,a.data.hand)},this.onButtonTouchStart=function(b){f8(b.detail.id,"touchstart",a,a.data.hand)},this.onButtonTouchEnd=function(b){f8(b.detail.id,"touchend",a,a.data.hand)},this.controllerPresent=!1,this.previousButtonValues={},this.bindMethods(),this.triggerEuler=new c0.Euler},addEventListeners:function(){var a=this.el;a.addEventListener("buttonchanged",this.onButtonChanged),a.addEventListener("buttondown",this.onButtonDown),a.addEventListener("buttonup",this.onButtonUp),a.addEventListener("touchstart",this.onButtonTouchStart),a.addEventListener("touchend",this.onButtonTouchEnd),a.addEventListener("axismove",this.onAxisMoved),a.addEventListener("model-loaded",this.onModelLoaded),a.addEventListener("thumbstickmoved",this.onThumbstickMoved),this.controllerEventsActive=!0},removeEventListeners:function(){var a=this.el;a.removeEventListener("buttonchanged",this.onButtonChanged),a.removeEventListener("buttondown",this.onButtonDown),a.removeEventListener("buttonup",this.onButtonUp),a.removeEventListener("touchstart",this.onButtonTouchStart),a.removeEventListener("touchend",this.onButtonTouchEnd),a.removeEventListener("axismove",this.onAxisMoved),a.removeEventListener("model-loaded",this.onModelLoaded),a.removeEventListener("thumbstickmoved",this.onThumbstickMoved),this.controllerEventsActive=!1},checkIfControllerPresent:function(){var a=this.controllerObject3D;a&&(a.visible=!1),f4(this,ja,{hand:this.data.hand,iterateControllerProfiles:!0})},play:function(){this.checkIfControllerPresent(),this.addControllersUpdateListener()},pause:function(){this.removeEventListeners(),this.removeControllersUpdateListener()},loadModel:function(a){var b,c=this.data;if(c.model){if(this.controllerObject3D)return this.controllerObject3D.visible=!0,void this.el.setObject3D("mesh",this.controllerObject3D);if(this.displayModel=jf[c.controllerType]||jf[je],"auto"===c.controllerType){b=je;for(var d=Object.keys(jf),e=0;e<a.profiles.length;e++)if(-1!==d.indexOf(a.profiles[e])){b=a.profiles[e];break}this.displayModel=jf[b]}var f=this.displayModel[c.hand].modelUrl;this.isTouchV3orPROorPlus=this.displayModel===jf["oculus-touch-v3"]||this.displayModel===jf["meta-quest-touch-pro"]||this.displayModel===jf["meta-quest-touch-plus"],this.el.setAttribute("gltf-model",f)}},injectTrackedControls:function(a){var b=this.data;this.el.setAttribute("tracked-controls",{id:ja,hand:b.hand,handTrackingEnabled:!1,iterateControllerProfiles:!0}),this.loadModel(a)},addControllersUpdateListener:function(){this.el.sceneEl.addEventListener("controllersupdated",this.onControllersUpdate,!1)},removeControllersUpdateListener:function(){this.el.sceneEl.removeEventListener("controllersupdated",this.onControllersUpdate,!1)},onControllersUpdate:function(){this.checkIfControllerPresent()},onButtonChanged:function(a){var b=this.mapping[this.data.hand].buttons[a.detail.id];if(b){if(this.isTouchV3orPROorPlus)this.onButtonChangedV3orPROorPlus(a);else{var c,d=this.buttonMeshes;"trigger"!==b&&"grip"!==b||(c=a.detail.state.value),d&&("trigger"===b&&d.trigger&&(d.trigger.rotation.x=this.originalXRotationTrigger-Math.PI/26*c),"grip"===b&&d.grip&&(c*="left"===this.data.hand?-1:1,d.grip.position.x=this.originalXPositionGrip+.004*c))}this.el.emit(b+"changed",a.detail.state)}},onButtonChangedV3orPROorPlus:function(a){var b,c=this.mapping[this.data.hand].buttons[a.detail.id],d=this.buttonObjects;d&&d[c]&&(b=a.detail.state.value,d[c].quaternion.slerpQuaternions(this.buttonRanges[c].min.quaternion,this.buttonRanges[c].max.quaternion,b),d[c].position.lerpVectors(this.buttonRanges[c].min.position,this.buttonRanges[c].max.position,b))},onModelLoaded:function(a){if(a.target===this.el&&this.data.model){if(this.isTouchV3orPROorPlus)this.onTouchV3orPROorPlusModelLoaded(a);else{var b,c=this.controllerObject3D=a.detail.model;(b=this.buttonMeshes={}).grip=c.getObjectByName("buttonHand"),this.originalXPositionGrip=b.grip&&b.grip.position.x,b.trigger=c.getObjectByName("buttonTrigger"),this.originalXRotationTrigger=b.trigger&&b.trigger.rotation.x,b.thumbstick=c.getObjectByName("stick"),b.xbutton=c.getObjectByName("buttonX"),b.abutton=c.getObjectByName("buttonA"),b.ybutton=c.getObjectByName("buttonY"),b.bbutton=c.getObjectByName("buttonB")}for(var d in this.buttonMeshes)this.buttonMeshes[d]&&function(a){a.traverse(function(b){var c;"Mesh"===b.type&&(c=b.material.clone(),a.originalColor=b.material.color,b.material.dispose(),b.material=c)})}(this.buttonMeshes[d]);this.applyOffset(a.detail.model),this.el.emit("controllermodelready",{name:"meta-touch-controls",model:this.data.model,rayOrigin:this.displayModel[this.data.hand].rayOrigin})}},applyOffset:function(a){a.position.copy(this.displayModel[this.data.hand].modelPivotOffset),a.rotation.copy(this.displayModel[this.data.hand].modelPivotRotation)},onTouchV3orPROorPlusModelLoaded:function(a){var b=this.controllerObject3D=a.detail.model,c=this.buttonObjects={},d=this.buttonMeshes={},e=this.buttonRanges={};d.grip=b.getObjectByName("squeeze"),c.grip=b.getObjectByName("xr_standard_squeeze_pressed_value"),e.grip={min:b.getObjectByName("xr_standard_squeeze_pressed_min"),max:b.getObjectByName("xr_standard_squeeze_pressed_max")},c.grip.minX=c.grip.position.x,d.thumbstick=b.getObjectByName("thumbstick"),c.thumbstick=b.getObjectByName("xr_standard_thumbstick_pressed_value"),e.thumbstick={min:b.getObjectByName("xr_standard_thumbstick_pressed_min"),max:b.getObjectByName("xr_standard_thumbstick_pressed_max")},c.thumbstickXAxis=b.getObjectByName("xr_standard_thumbstick_xaxis_pressed_value"),e.thumbstickXAxis={min:b.getObjectByName("xr_standard_thumbstick_xaxis_pressed_min"),max:b.getObjectByName("xr_standard_thumbstick_xaxis_pressed_max")},c.thumbstickYAxis=b.getObjectByName("xr_standard_thumbstick_yaxis_pressed_value"),e.thumbstickYAxis={min:b.getObjectByName("xr_standard_thumbstick_yaxis_pressed_min"),max:b.getObjectByName("xr_standard_thumbstick_yaxis_pressed_max")},d.trigger=b.getObjectByName("trigger"),c.trigger=b.getObjectByName("xr_standard_trigger_pressed_value"),e.trigger={min:b.getObjectByName("xr_standard_trigger_pressed_min"),max:b.getObjectByName("xr_standard_trigger_pressed_max")},e.trigger.diff={x:Math.abs(e.trigger.max.rotation.x)-Math.abs(e.trigger.min.rotation.x),y:Math.abs(e.trigger.max.rotation.y)-Math.abs(e.trigger.min.rotation.y),z:Math.abs(e.trigger.max.rotation.z)-Math.abs(e.trigger.min.rotation.z)};var f="left"===this.data.hand?"x":"a",g="left"===this.data.hand?"y":"b",h=f+"button",i=g+"button";d[h]=b.getObjectByName(f+"_button"),c[h]=b.getObjectByName(f+"_button_pressed_value"),e[h]={min:b.getObjectByName(f+"_button_pressed_min"),max:b.getObjectByName(f+"_button_pressed_max")},d[i]=b.getObjectByName(g+"_button"),c[i]=b.getObjectByName(g+"_button_pressed_value"),e[i]={min:b.getObjectByName(g+"_button_pressed_min"),max:b.getObjectByName(g+"_button_pressed_max")}},onAxisMoved:function(a){f7(this,this.mapping[this.data.hand].axes,a)},onThumbstickMoved:function(a){if(this.buttonMeshes&&this.buttonMeshes.thumbstick)if(this.isTouchV3orPROorPlus)this.updateThumbstickTouchV3orPROorPlus(a);else for(var b in a.detail)this.buttonObjects.thumbstick.rotation[this.axisMap[b]]=this.buttonRanges.thumbstick.originalRotation[this.axisMap[b]]-Math.PI/8*a.detail[b]*("y"===b||"right"===this.data.hand?-1:1)},axisMap:{y:"x",x:"z"},updateThumbstickTouchV3orPROorPlus:function(a){var b=(a.detail.x+1)/2;this.buttonObjects.thumbstickXAxis.quaternion.slerpQuaternions(this.buttonRanges.thumbstickXAxis.min.quaternion,this.buttonRanges.thumbstickXAxis.max.quaternion,b);var c=(a.detail.y+1)/2;this.buttonObjects.thumbstickYAxis.quaternion.slerpQuaternions(this.buttonRanges.thumbstickYAxis.min.quaternion,this.buttonRanges.thumbstickYAxis.max.quaternion,c)},updateModel:function(a,b){this.data.model&&this.updateButtonModel(a,b)},updateButtonModel:function(a,b){var c,d=this.buttonMeshes;d&&d[a]&&(c="up"===b||"touchend"===b?d[a].originalColor||this.data.buttonColor:"touchstart"===b?this.data.buttonTouchColor:this.data.buttonHighlightColor,d[a].material.color.set(c))}};he("oculus-touch-controls",jg),he("meta-touch-controls",jg),he("obb-collider",{schema:{size:{default:0},trackedObject3D:{default:""},minimumColliderDimension:{default:.02},centerModel:{default:!1}},init:function(){this.previousScale=(new c0.Vector3).copy(this.el.object3D.scale),this.auxEuler=new c0.Euler,this.boundingBox=new c0.Box3,this.boundingBoxSize=new c0.Vector3,this.updateCollider=this.updateCollider.bind(this),this.onModelLoaded=this.onModelLoaded.bind(this),this.updateBoundingBox=this.updateBoundingBox.bind(this),this.el.addEventListener("model-loaded",this.onModelLoaded),this.updateCollider(),this.system.addCollider(this.el)},remove:function(){this.system.removeCollider(this.el)},update:function(){this.data.trackedObject3D&&(this.trackedObject3DPath=this.data.trackedObject3D.split("."))},onModelLoaded:function(){this.data.centerModel&&this.centerModel(),this.updateCollider()},centerModel:function(){var a,b=this.el,c=b.components["gltf-model"]&&b.components["gltf-model"].model;c&&(this.el.removeObject3D("mesh"),a=(new c0.Box3).setFromObject(c).getCenter(new c0.Vector3),c.position.x+=c.position.x-a.x,c.position.y+=c.position.y-a.y,c.position.z+=c.position.z-a.z,this.el.setObject3D("mesh",c))},updateCollider:function(){var a=this.el,b=this.boundingBoxSize,c=this.aabb=this.aabb||new ev;this.obb=this.obb||new ev,a.hasLoaded?(this.updateBoundingBox(),c.halfSize.copy(b).multiplyScalar(.5),this.el.sceneEl.systems["obb-collider"].data.showColliders&&this.showCollider()):a.addEventListener("loaded",this.updateCollider)},showCollider:function(){this.updateColliderMesh(),this.renderColliderMesh.visible=!0},updateColliderMesh:function(){var a=this.renderColliderMesh,b=this.boundingBoxSize;a?(a.geometry.dispose(),a.geometry=new c0.BoxGeometry(b.x,b.y,b.z)):this.initColliderMesh()},hideCollider:function(){this.renderColliderMesh&&(this.renderColliderMesh.visible=!1)},initColliderMesh:function(){var a,b,c;a=this.boundingBoxSize,b=this.renderColliderGeometry=new c0.BoxGeometry(a.x,a.y,a.z),(c=this.renderColliderMesh=new c0.Mesh(b,new c0.MeshLambertMaterial({color:65280,side:c0.DoubleSide}))).matrixAutoUpdate=!1,c.matrixWorldAutoUpdate=!1,c.updateMatrixWorld=function(){},this.el.sceneEl.object3D.add(c)},updateBoundingBox:(i5=new c0.Vector3,i6=new c0.Vector3,i7=new c0.Quaternion,i8=new c0.Quaternion,i9=new c0.Matrix4,function(){var a=this.auxEuler,b=this.boundingBox,c=this.data.size,d=this.trackedObject3D||this.el.object3D,e=this.boundingBoxSize,f=this.data.minimumColliderDimension;if(c)return this.boundingBoxSize.x=c,this.boundingBoxSize.y=c,void(this.boundingBoxSize.z=c);a.copy(d.rotation),d.rotation.set(0,0,0),d.parent.matrixWorld.decompose(i5,i7,i6),i9.compose(i5,i8,i6),d.parent.matrixWorld.copy(i9),b.setFromObject(d,!0),b.getSize(e),e.x=e.x<f?f:e.x,e.y=e.y<f?f:e.y,e.z=e.z<f?f:e.z,d.parent.matrixWorld.compose(i5,i7,i6),this.el.object3D.rotation.copy(a)}),checkTrackedObject:function(){var a,b=this.trackedObject3DPath;if(b&&b.length&&!this.trackedObject3D){a=this.el;for(var c=0;c<b.length&&(a=a[b[c]]);c++);a&&(this.trackedObject3D=a,this.updateCollider())}return this.trackedObject3D},tick:function(){var a=new c0.Vector3,b=new c0.Vector3,c=new c0.Quaternion,d=new c0.Matrix4;return function(){var e=this.obb,f=this.renderColliderMesh,g=this.checkTrackedObject()||this.el.object3D;g&&(g.updateMatrix(),g.updateMatrixWorld(!0),g.matrixWorld.decompose(a,c,b),(Math.abs(b.x-this.previousScale.x)>1e-4||Math.abs(b.y-this.previousScale.y)>1e-4||Math.abs(b.z-this.previousScale.z)>1e-4)&&this.updateCollider(),this.previousScale.copy(b),b.set(1,1,1),d.compose(a,c,b),f&&f.matrixWorld.copy(d),e.copy(this.aabb),e.applyMatrix4(d))}}()});var jh=eW("components:obj-model:warn"),ji=(he("obj-model",{schema:{mtl:{type:"model"},obj:{type:"model"}},init:function(){var a=this;this.model=null,this.objLoader=new eJ,this.mtlLoader=new eK(this.objLoader.manager),this.mtlLoader.crossOrigin="",this.el.addEventListener("componentinitialized",function(b){a.model&&"material"===b.detail.name&&a.applyMaterial()})},update:function(){var a=this.data;a.obj&&(this.resetMesh(),this.loadObj(a.obj,a.mtl))},remove:function(){this.resetMesh()},resetMesh:function(){this.model&&this.el.removeObject3D("mesh")},loadObj:function(a,b){var c=this,d=this.el,e=this.mtlLoader,f=this.objLoader,g=this.el.sceneEl.systems.renderer,h=b.substr(0,b.lastIndexOf("/")+1);if(b)return d.hasAttribute("material")&&jh("Material component properties are ignored when a .MTL is provided"),e.setResourcePath(h),void e.load(b,function(b){b.preload(),f.setMaterials(b),f.load(a,function(a){c.model=a,c.model.traverse(function(a){if(a.isMesh){var b=a.material;b.map&&g.applyColorCorrection(b.map),b.emissiveMap&&g.applyColorCorrection(b.emissiveMap)}}),d.setObject3D("mesh",a),d.emit("model-loaded",{format:"obj",model:a})})});f.load(a,function(a){c.model=a,c.applyMaterial(),d.setObject3D("mesh",a),d.emit("model-loaded",{format:"obj",model:a})})},applyMaterial:function(){var a=this.el.components.material;a&&this.model.traverse(function(b){b instanceof c0.Mesh&&(b.material=a.material)})}}),eQ+"controllers/oculus/go/oculus-go-controller.gltf"),jj="oculus-go",jk=(he("oculus-go-controls",{schema:{hand:{default:""},buttonColor:{type:"color",default:"#FFFFFF"},buttonTouchedColor:{type:"color",default:"#BBBBBB"},buttonHighlightColor:{type:"color",default:"#7A7A7A"},model:{default:!0}},mapping:{axes:{touchpad:[0,1]},buttons:["trigger","none","touchpad"]},bindMethods:function(){this.onModelLoaded=this.onModelLoaded.bind(this),this.onControllersUpdate=this.onControllersUpdate.bind(this),this.checkIfControllerPresent=this.checkIfControllerPresent.bind(this),this.removeControllersUpdateListener=this.removeControllersUpdateListener.bind(this),this.onAxisMoved=this.onAxisMoved.bind(this)},init:function(){var a=this;this.onButtonChanged=this.onButtonChanged.bind(this),this.onButtonDown=function(b){f8(b.detail.id,"down",a)},this.onButtonUp=function(b){f8(b.detail.id,"up",a)},this.onButtonTouchStart=function(b){f8(b.detail.id,"touchstart",a)},this.onButtonTouchEnd=function(b){f8(b.detail.id,"touchend",a)},this.controllerPresent=!1,this.bindMethods()},addEventListeners:function(){var a=this.el;a.addEventListener("buttonchanged",this.onButtonChanged),a.addEventListener("buttondown",this.onButtonDown),a.addEventListener("buttonup",this.onButtonUp),a.addEventListener("touchstart",this.onButtonTouchStart),a.addEventListener("touchend",this.onButtonTouchEnd),a.addEventListener("model-loaded",this.onModelLoaded),a.addEventListener("axismove",this.onAxisMoved),this.controllerEventsActive=!0},removeEventListeners:function(){var a=this.el;a.removeEventListener("buttonchanged",this.onButtonChanged),a.removeEventListener("buttondown",this.onButtonDown),a.removeEventListener("buttonup",this.onButtonUp),a.removeEventListener("touchstart",this.onButtonTouchStart),a.removeEventListener("touchend",this.onButtonTouchEnd),a.removeEventListener("model-loaded",this.onModelLoaded),a.removeEventListener("axismove",this.onAxisMoved),this.controllerEventsActive=!1},checkIfControllerPresent:function(){f4(this,jj,this.data.hand?{hand:this.data.hand}:{})},play:function(){this.checkIfControllerPresent(),this.addControllersUpdateListener()},pause:function(){this.removeEventListeners(),this.removeControllersUpdateListener()},injectTrackedControls:function(){var a=this.el,b=this.data;a.setAttribute("tracked-controls",{hand:b.hand,idPrefix:jj}),this.data.model&&this.el.setAttribute("gltf-model",ji)},addControllersUpdateListener:function(){this.el.sceneEl.addEventListener("controllersupdated",this.onControllersUpdate,!1)},removeControllersUpdateListener:function(){this.el.sceneEl.removeEventListener("controllersupdated",this.onControllersUpdate,!1)},onControllersUpdate:function(){this.checkIfControllerPresent()},onModelLoaded:function(a){var b,c=a.detail.model;a.target===this.el&&this.data.model&&((b=this.buttonMeshes={}).trigger=c.getObjectByName("oculus_go_button_trigger"),b.trackpad=c.getObjectByName("oculus_go_touchpad"),b.touchpad=c.getObjectByName("oculus_go_touchpad"))},onButtonChanged:function(a){var b=this.mapping.buttons[a.detail.id];b&&this.el.emit(b+"changed",a.detail.state)},onAxisMoved:function(a){f7(this,this.mapping.axes,a)},updateModel:function(a,b){this.data.model&&this.updateButtonModel(a,b)},updateButtonModel:function(a,b){var c,d=this.buttonMeshes;if(d&&d[a]){switch(b){case"down":c=this.data.buttonHighlightColor;break;case"touchstart":c=this.data.buttonTouchedColor;break;default:c=this.data.buttonColor}d[a].material.color.set(c)}}}),"pico-4"),jl=eQ+"controllers/pico/pico4/",jm=(he("pico-controls",{schema:{hand:{default:"none"},model:{default:!0}},mapping:{left:{axes:{thumbstick:[2,3]},buttons:["trigger","grip","none","thumbstick","xbutton","ybutton"]},right:{axes:{thumbstick:[2,3]},buttons:["trigger","grip","none","thumbstick","abutton","bbutton"]}},init:function(){var a=this;this.onButtonChanged=this.onButtonChanged.bind(this),this.onButtonDown=function(b){f8(b.detail.id,"down",a,a.data.hand)},this.onButtonUp=function(b){f8(b.detail.id,"up",a,a.data.hand)},this.onButtonTouchEnd=function(b){f8(b.detail.id,"touchend",a,a.data.hand)},this.onButtonTouchStart=function(b){f8(b.detail.id,"touchstart",a,a.data.hand)},this.bindMethods()},update:function(){var a=this.data;this.controllerIndex="right"===a.hand?0:"left"===a.hand?1:2},play:function(){this.checkIfControllerPresent(),this.addControllersUpdateListener()},pause:function(){this.removeEventListeners(),this.removeControllersUpdateListener()},bindMethods:function(){this.onModelLoaded=this.onModelLoaded.bind(this),this.onControllersUpdate=this.onControllersUpdate.bind(this),this.checkIfControllerPresent=this.checkIfControllerPresent.bind(this),this.removeControllersUpdateListener=this.removeControllersUpdateListener.bind(this),this.onAxisMoved=this.onAxisMoved.bind(this)},addEventListeners:function(){var a=this.el;a.addEventListener("buttonchanged",this.onButtonChanged),a.addEventListener("buttondown",this.onButtonDown),a.addEventListener("buttonup",this.onButtonUp),a.addEventListener("touchstart",this.onButtonTouchStart),a.addEventListener("touchend",this.onButtonTouchEnd),a.addEventListener("axismove",this.onAxisMoved),a.addEventListener("model-loaded",this.onModelLoaded),this.controllerEventsActive=!0},removeEventListeners:function(){var a=this.el;a.removeEventListener("buttonchanged",this.onButtonChanged),a.removeEventListener("buttondown",this.onButtonDown),a.removeEventListener("buttonup",this.onButtonUp),a.removeEventListener("touchstart",this.onButtonTouchStart),a.removeEventListener("touchend",this.onButtonTouchEnd),a.removeEventListener("axismove",this.onAxisMoved),a.removeEventListener("model-loaded",this.onModelLoaded),this.controllerEventsActive=!1},checkIfControllerPresent:function(){var a=this.data;f4(this,jk,{index:this.controllerIndex,hand:a.hand})},injectTrackedControls:function(){var a=this.el,b=this.data;a.setAttribute("tracked-controls",{idPrefix:jk,hand:b.hand,controller:this.controllerIndex}),this.data.model&&this.el.setAttribute("gltf-model",jl+this.data.hand+".glb")},addControllersUpdateListener:function(){this.el.sceneEl.addEventListener("controllersupdated",this.onControllersUpdate,!1)},removeControllersUpdateListener:function(){this.el.sceneEl.removeEventListener("controllersupdated",this.onControllersUpdate,!1)},onControllersUpdate:function(){this.checkIfControllerPresent()},onButtonChanged:function(a){var b=this.mapping[this.data.hand].buttons[a.detail.id];b&&("trigger"===b&&console.log("analog value of trigger press: "+a.detail.state.value),this.el.emit(b+"changed",a.detail.state))},onModelLoaded:function(a){a.target===this.el&&this.data.model&&this.el.emit("controllermodelready",{name:"pico-controls",model:this.data.model,rayOrigin:new c0.Vector3(0,0,0)})},onAxisMoved:function(a){f7(this,this.mapping[this.data.hand].axes,a)}}),he("position",{schema:{type:"vec3"},update:function(){var a=this.el.object3D,b=this.data;a.position.set(b.x,b.y,b.z)},remove:function(){this.el.object3D.position.set(0,0,0)}}),eW("components:raycaster:warn")),jn=/^[\w\s-.,[\]#]*$/,jo={childList:!0,attributes:!0,subtree:!0},jp="raycaster-intersected-cleared",jq="raycaster-intersection-cleared";function jr(a,b){var c;for(a.length=b.length,c=0;c<b.length;c++)a[c]=b[c]}he("raycaster",{schema:{autoRefresh:{default:!0},direction:{type:"vec3",default:{x:0,y:0,z:-1}},enabled:{default:!0},far:{default:1e3},interval:{default:0},near:{default:0},objects:{default:""},origin:{type:"vec3"},showLine:{default:!1},lineColor:{default:"white"},lineOpacity:{default:1},useWorldCoordinates:{default:!1}},multiple:!0,init:function(){this.clearedIntersectedEls=[],this.unitLineEndVec3=new c0.Vector3,this.intersectedEls=[],this.intersections=[],this.newIntersectedEls=[],this.newIntersections=[],this.objects=[],this.prevCheckTime=void 0,this.prevIntersectedEls=[],this.rawIntersections=[],this.raycaster=new c0.Raycaster,this.updateOriginDirection(),this.setDirty=this.setDirty.bind(this),this.updateLine=this.updateLine.bind(this),this.observer=new MutationObserver(this.setDirty),this.dirty=!0,this.lineEndVec3=new c0.Vector3,this.otherLineEndVec3=new c0.Vector3,this.lineData={end:this.lineEndVec3},this.getIntersection=this.getIntersection.bind(this),this.intersectedDetail={el:this.el,getIntersection:this.getIntersection},this.intersectedClearedDetail={el:this.el},this.intersectionClearedDetail={clearedEls:this.clearedIntersectedEls},this.intersectionDetail={}},update:function(a){var b=this.data,c=this.el,d=this.raycaster;d.far=b.far,d.near=b.near,!b.showLine||b.far===a.far&&b.origin===a.origin&&b.direction===a.direction&&a.showLine||(this.unitLineEndVec3.copy(b.direction).normalize(),this.drawLine()),!b.showLine&&a.showLine&&c.removeAttribute("line"),b.objects===a.objects||jn.test(b.objects)||jm('[raycaster] Selector "'+b.objects+'" may not update automatically with DOM changes.'),b.objects||jm('[raycaster] For performance, please define raycaster.objects when using raycaster or cursor components to whitelist which entities to intersect with. e.g., raycaster="objects: [data-raycastable]".'),b.autoRefresh!==a.autoRefresh&&c.isPlaying&&(b.autoRefresh?this.addEventListeners():this.removeEventListeners()),a.enabled&&!b.enabled&&this.clearAllIntersections(),b.objects!==a.objects&&this.setDirty()},play:function(){this.addEventListeners()},pause:function(){this.removeEventListeners()},remove:function(){this.data.showLine&&this.el.removeAttribute("line"),this.clearAllIntersections()},addEventListeners:function(){this.data.autoRefresh&&(this.observer.observe(this.el.sceneEl,jo),this.el.sceneEl.addEventListener("object3dset",this.setDirty),this.el.sceneEl.addEventListener("object3dremove",this.setDirty))},removeEventListeners:function(){this.observer.disconnect(),this.el.sceneEl.removeEventListener("object3dset",this.setDirty),this.el.sceneEl.removeEventListener("object3dremove",this.setDirty)},setDirty:function(){this.dirty=!0},refreshObjects:function(){var a,b=this.data;a=b.objects?this.el.sceneEl.querySelectorAll(b.objects):this.el.sceneEl.querySelectorAll("*"),this.objects=this.flattenObject3DMaps(a),this.dirty=!1},tock:function(a){var b=this.data,c=this.prevCheckTime;b.enabled&&(c&&a-c<b.interval||(this.prevCheckTime=a,this.checkIntersections()))},checkIntersections:function(){var a,b,c=this.clearedIntersectedEls,d=this.el,e=this.data,f=this.intersectedEls,g=this.intersections,h=this.newIntersectedEls,i=this.newIntersections,j=this.prevIntersectedEls,k=this.rawIntersections;for(this.dirty&&this.refreshObjects(),jr(this.prevIntersectedEls,this.intersectedEls),this.updateOriginDirection(),k.length=0,this.raycaster.intersectObjects(this.objects,!0,k),g.length=0,f.length=0,a=0;a<k.length;a++)b=k[a],e.showLine&&b.object===d.getObject3D("line")||b.object.el&&(g.push(b),f.push(b.object.el));for(i.length=0,h.length=0,a=0;a<g.length;a++)-1===j.indexOf(g[a].object.el)&&(i.push(g[a]),h.push(g[a].object.el));for(c.length=0,a=0;a<j.length;a++)-1===f.indexOf(j[a])&&(j[a].emit(jp,this.intersectedClearedDetail),c.push(j[a]));for(c.length&&d.emit(jq,this.intersectionClearedDetail),a=0;a<h.length;a++)h[a].emit("raycaster-intersected",this.intersectedDetail);i.length&&(this.intersectionDetail.els=h,this.intersectionDetail.intersections=i,d.emit("raycaster-intersection",this.intersectionDetail)),(0===j.length&&g.length>0||j.length>0&&0===g.length||j.length&&g.length&&j[0]!==g[0].object.el)&&(this.intersectionDetail.els=this.intersectedEls,this.intersectionDetail.intersections=g,d.emit("raycaster-closest-entity-changed",this.intersectionDetail)),e.showLine&&setTimeout(this.updateLine)},updateLine:function(){var a,b=this.el,c=this.intersections;c.length&&(a=c[0].object.el===b&&c[1]?c[1].distance:c[0].distance),this.drawLine(a)},getIntersection:function(a){var b,c;for(b=0;b<this.intersections.length;b++)if((c=this.intersections[b]).object.el===a)return c;return null},updateOriginDirection:function(){var a=new c0.Vector3,b=new c0.Vector3;return function(){var c=this.el,d=this.data;d.useWorldCoordinates?this.raycaster.set(d.origin,d.direction):(c.object3D.updateMatrixWorld(),b.setFromMatrixPosition(c.object3D.matrixWorld),0===d.origin.x&&0===d.origin.y&&0===d.origin.z||(b=c.object3D.localToWorld(b.copy(d.origin))),a.copy(d.direction).transformDirection(c.object3D.matrixWorld).normalize(),this.raycaster.set(b,a))}}(),drawLine:function(a){var b,c=this.data,d=this.el;b=this.lineData.end===this.lineEndVec3?this.otherLineEndVec3:this.lineEndVec3,void 0===a&&(a=c.far===1/0?1e3:c.far),this.lineData.start=c.origin,this.lineData.end=b.copy(this.unitLineEndVec3).multiplyScalar(a).add(c.origin),this.lineData.color=c.lineColor,this.lineData.opacity=c.lineOpacity,d.setAttribute("line",this.lineData)},flattenObject3DMaps:function(a){var b,c,d=this.objects,e=this.el.sceneEl.object3D;for(d.length=0,c=0;c<a.length;c++){var f=a[c];if(f.isEntity&&f.object3D&&function a(b){return b.parent?a(b.parent):b===e}(f.object3D))for(b in f.object3DMap)d.push(f.getObject3D(b))}return d},clearAllIntersections:function(){var a;for(a=0;a<this.intersectedEls.length;a++)this.intersectedEls[a].emit(jp,this.intersectedClearedDetail);jr(this.clearedIntersectedEls,this.intersectedEls),this.intersectedEls.length=0,this.intersections.length=0,this.el.emit(jq,this.intersectionClearedDetail)}});var js,jt,ju,jv,jw=c0.MathUtils.degToRad,jx=(he("rotation",{schema:{type:"vec3"},update:function(){var a=this.data;this.el.object3D.rotation.set(jw(a.x),jw(a.y),jw(a.z),"YXZ")},remove:function(){this.el.object3D.rotation.set(0,0,0)}}),he("scale",{schema:{type:"vec3",default:{x:1,y:1,z:1}},update:function(){var a=this.data;this.el.object3D.scale.set(a.x,a.y,a.z)},remove:function(){this.el.object3D.scale.set(1,1,1)}}),he("shadow",{schema:{cast:{default:!0},receive:{default:!0}},init:function(){this.onMeshChanged=this.update.bind(this),this.el.addEventListener("object3dset",this.onMeshChanged),this.system.setShadowMapEnabled(!0)},update:function(){var a=this.data;this.updateDescendants(a.cast,a.receive)},remove:function(){this.el.removeEventListener("object3dset",this.onMeshChanged),this.updateDescendants(!1,!1)},updateDescendants:function(a,b){var c=this.el.sceneEl;this.el.object3D.traverse(function(d){if(d instanceof c0.Mesh&&(d.castShadow=a,d.receiveShadow=b,c.hasLoaded&&d.material))for(var e=Array.isArray(d.material)?d.material:[d.material],f=0;f<e.length;f++)e[f].needsUpdate=!0})}}),eW("components:sound:warn")),jy=(he("sound",{schema:{autoplay:{default:!1},distanceModel:{default:"inverse",oneOf:["linear","inverse","exponential"]},loop:{default:!1},loopStart:{default:0},loopEnd:{default:0},maxDistance:{default:1e4},on:{default:""},poolSize:{default:1},positional:{default:!0},refDistance:{default:1},rolloffFactor:{default:1},src:{type:"audio"},volume:{default:1}},multiple:!0,init:function(){var a=this;this.listener=null,this.audioLoader=new c0.AudioLoader,this.pool=new c0.Group,this.loaded=!1,this.mustPlay=!1,this.playSoundBound=function(){a.playSound()}},update:function(a){var b,c,d=this.data,e=d.src!==a.src;if(e){if(!d.src)return;this.setupSound()}for(b=0;b<this.pool.children.length;b++)c=this.pool.children[b],d.positional&&(c.setDistanceModel(d.distanceModel),c.setMaxDistance(d.maxDistance),c.setRefDistance(d.refDistance),c.setRolloffFactor(d.rolloffFactor)),c.setLoop(d.loop),c.setLoopStart(d.loopStart),0!==d.loopStart&&0===d.loopEnd?c.setLoopEnd(c.buffer.duration):c.setLoopEnd(d.loopEnd),c.setVolume(d.volume),c.isPaused=!1;if(d.on!==a.on&&this.updateEventListener(a.on),e){var f=this;this.loaded=!1,this.audioLoader.load(d.src,function(a){for(b=0;b<f.pool.children.length;b++)(c=f.pool.children[b]).setBuffer(a);f.loaded=!0,c0.Cache.remove(d.src),(f.data.autoplay||f.mustPlay)&&f.playSound(f.processSound),f.el.emit("sound-loaded",f.evtDetail,!1)})}},pause:function(){this.stopSound(),this.removeEventListener()},play:function(){this.data.autoplay&&this.playSound(),this.updateEventListener()},remove:function(){var a;this.removeEventListener(),this.el.getObject3D(this.attrName)&&this.el.removeObject3D(this.attrName);try{for(a=0;a<this.pool.children.length;a++)this.pool.children[a].disconnect()}catch(a){jx("Audio source not properly disconnected")}},updateEventListener:function(a){var b=this.el;a&&b.removeEventListener(a,this.playSoundBound),b.addEventListener(this.data.on,this.playSoundBound)},removeEventListener:function(){this.el.removeEventListener(this.data.on,this.playSoundBound)},setupSound:function(){var a,b,c=this.el,d=c.sceneEl,e=this;this.pool.children.length>0&&(this.stopSound(),c.removeObject3D("sound"));var f=this.listener=d.audioListener||new c0.AudioListener;for(d.audioListener=f,d.camera&&d.camera.add(f),d.addEventListener("camera-set-active",function(a){a.detail.cameraEl.getObject3D("camera").add(f)}),this.pool=new c0.Group,a=0;a<this.data.poolSize;a++)b=this.data.positional?new c0.PositionalAudio(f):new c0.Audio(f),this.pool.add(b);for(c.setObject3D(this.attrName,this.pool),a=0;a<this.pool.children.length;a++)(b=this.pool.children[a]).onEnded=function(){this.isPlaying=!1,e.el.emit("sound-ended",e.evtDetail,!1)}},pauseSound:function(){var a,b;for(this.isPlaying=!1,a=0;a<this.pool.children.length;a++)(b=this.pool.children[a]).source&&b.source.buffer&&b.isPlaying&&!b.isPaused&&(b.isPaused=!0,b.pause())},playSound:function(a){var b,c,d;if(!this.loaded)return jx("Sound not loaded yet. It will be played once it finished loading"),this.mustPlay=!0,void(this.processSound=a);for(b=!1,this.isPlaying=!0,c=0;c<this.pool.children.length;c++)(d=this.pool.children[c]).isPlaying||!d.buffer||b||(a&&a(d),d.play(),d.isPaused=!1,b=!0);b?(this.mustPlay=!1,this.processSound=void 0):jx("All the sounds are playing. If you need to play more sounds simultaneously consider increasing the size of pool with the `poolSize` attribute.",this.el)},stopSound:function(){var a,b;for(this.isPlaying=!1,a=0;a<this.pool.children.length;a++){if(!(b=this.pool.children[a]).source||!b.source.buffer)return;b.stop()}}}),bL(4433)),jz=bL.n(jy),jA=bL(5751),jB=bL.n(jA),jC=eW("components:text:error"),jD=eW("components:text:warn"),jE=eQ+"fonts/",jF={aileronsemibold:jE+"Aileron-Semibold.fnt",dejavu:jE+"DejaVu-sdf.fnt",exo2bold:jE+"Exo2Bold.fnt",exo2semibold:jE+"Exo2SemiBold.fnt",kelsonsans:jE+"KelsonSans.fnt",monoid:jE+"Monoid.fnt",mozillavr:jE+"mozillavr.fnt",roboto:jE+"Roboto-msdf.json",sourcecodepro:jE+"SourceCodePro.fnt"},jG=["roboto"],jH="roboto",jI=new function(){var a=this.cache={};this.get=function(b,c){return b in a||(a[b]=c()),a[b]}},jJ={},jK={},jL=/^\w+:/;he("text",{multiple:!0,schema:{align:{type:"string",default:"left",oneOf:["left","right","center"]},alphaTest:{default:.5},anchor:{default:"center",oneOf:["left","right","center","align"]},baseline:{default:"center",oneOf:["top","center","bottom"]},color:{type:"color",default:"#FFF"},font:{type:"string",default:jH},fontImage:{type:"string"},height:{type:"number"},letterSpacing:{type:"number",default:0},lineHeight:{type:"number"},negate:{type:"boolean",default:!0},opacity:{type:"number",default:1},shader:{default:"sdf",oneOf:hP},side:{default:"front",oneOf:["front","back","double"]},tabSize:{default:4},transparent:{default:!0},value:{type:"string"},whiteSpace:{default:"normal",oneOf:["normal","pre","nowrap"]},width:{type:"number"},wrapCount:{type:"number",default:40},wrapPixels:{type:"number"},xOffset:{type:"number",default:0},yOffset:{type:"number",default:0},zOffset:{type:"number",default:.001}},init:function(){this.shaderData={},this.geometry=jz()(),this.createOrUpdateMaterial(),this.explicitGeoDimensionsChecked=!1},update:function(a){var b=this.data,c=this.currentFont;jK[b.font]?this.texture=jK[b.font]:(this.texture=jK[b.font]=new c0.Texture,this.texture.anisotropy=16),this.createOrUpdateMaterial(),a.font===b.font?c&&(this.updateGeometry(this.geometry,c),this.updateLayout()):this.updateFont()},remove:function(){this.geometry.dispose(),this.geometry=null,this.el.removeObject3D(this.attrName),this.material.dispose(),this.material=null,this.texture.dispose(),this.texture=null,this.shaderObject&&delete this.shaderObject},createOrUpdateMaterial:function(){var a,b,c,d,e,f,g=this.data,h=this.material,i=this.shaderData;if(f=g.shader,-1!==jG.indexOf(g.font)||g.font.indexOf("-msdf.")>=0?f="msdf":g.font in jF&&-1===jG.indexOf(g.font)&&(f="sdf"),d=(this.shaderObject&&this.shaderObject.name)!==f,i.alphaTest=g.alphaTest,i.color=g.color,i.map=this.texture,i.opacity=g.opacity,i.side=function(a){switch(a){case"back":return c0.FrontSide;case"double":return c0.DoubleSide;default:return c0.BackSide}}(g.side),i.transparent=g.transparent,i.negate=g.negate,!d)return this.shaderObject.update(i),h.transparent=i.transparent,void(h.side=i.side);a=this.el,(c=new hP[f].Shader).el=a,c.init(i),c.update(i),(b=c.material).transparent=i.transparent,e={material:b,shader:c},this.material=e.material,this.shaderObject=e.shader,this.material.side=i.side,this.mesh&&(this.mesh.material=this.material)},updateFont:function(){var a,b=this.data,c=this.el,d=this.geometry,e=this;b.font||jD("No font specified. Using the default font."),this.mesh&&(this.mesh.visible=!1),a=this.lookupFont(b.font||jH)||b.font,jI.get(a,function(){var c;return c=b.yOffset,new Promise(function(b,d){jB()(a,function(e,f){if(e)return jC("Error loading font",a),void d(e);a.indexOf("/Roboto-msdf.json")>=0&&(c=30),c&&f.chars.forEach(function(a){a.yoffset+=c}),b(f)})})}).then(function(f){var g,h,i,j;if(1!==f.pages.length)throw Error("Currently only single-page bitmap fonts are supported.");jJ[a]||(f.widthFactor=jJ[f]=(h=0,i=0,j=0,f.chars.forEach(function(a){h+=a.xadvance,a.id>=48&&a.id<=57&&(j++,i+=a.xadvance)}),j?i/j:h/f.chars.length)),e.currentFont=f,g=e.getFontImageSrc(),jI.get(g,function(){return new Promise(function(a,b){(new c0.ImageLoader).load(g,function(b){a(b)},void 0,function(){jC("Error loading font image",g),b(null)})})}).then(function(a){var g=e.texture;g&&(g.image=a,g.needsUpdate=!0,jK[b.font]=g,e.texture=g,e.initMesh(),e.currentFont=f,e.updateGeometry(d,f),e.updateLayout(),e.mesh.visible=!0,c.emit("textfontset",{font:b.font,fontObj:f}))}).catch(function(a){jC(a.message),jC(a.stack)})}).catch(function(a){jC(a.message),jC(a.stack)})},initMesh:function(){this.mesh||(this.mesh=new c0.Mesh(this.geometry,this.material),this.el.setObject3D(this.attrName,this.mesh))},getFontImageSrc:function(){if(this.data.fontImage)return this.data.fontImage;var a=this.lookupFont(this.data.font||jH)||this.data.font,b=this.currentFont.pages[0];return b.match(jL)&&0!==b.indexOf("http")?a.replace(/(\.fnt)|(\.json)/,".png"):c0.LoaderUtils.extractUrlBase(a)+b},updateLayout:function(){var a,b,c,d,e,f,g,h,i,j,k,l,m=this.el,n=this.data,o=this.geometry,p=this.mesh;if(p&&o.layout){if(f=m.getAttribute("geometry"),g=(i=(j=n.width||f&&f.width||1)/(a=n.wrapPixels,b=n.wrapCount,c=this.currentFont.widthFactor,a||(.5+b)*c))*((h=o.layout).height+h.descender),f&&"plane"===f.primitive&&(this.explicitGeoDimensionsChecked||(this.explicitGeoDimensionsChecked=!0,this.hasExplicitGeoWidth=!!f.width,this.hasExplicitGeoHeight=!!f.height),this.hasExplicitGeoWidth||m.setAttribute("geometry","width",j),this.hasExplicitGeoHeight||m.setAttribute("geometry","height",g)),"left"===(d="align"===n.anchor?n.align:n.anchor))k=0;else if("right"===d)k=-1*h.width;else{if("center"!==d)throw TypeError("Invalid text.anchor property value",d);k=-1*h.width/2}if("bottom"===(e=n.baseline))l=0;else if("top"===e)l=-1*h.height+h.ascender;else{if("center"!==e)throw TypeError("Invalid text.baseline property value",e);l=-1*h.height/2}p.position.x=k*i+n.xOffset,p.position.y=l*i,p.position.z=n.zOffset,p.scale.set(i,-1*i,i)}},lookupFont:function(a){return jF[a]},updateGeometry:(js={},jt={},ju=/\\n/g,jv=/\\t/g,function(a,b){var c,d,e,f=this.data;jt.font=b,jt.lineHeight=f.lineHeight&&isFinite(f.lineHeight)?f.lineHeight:b.common.lineHeight,jt.text=f.value.toString().replace(ju,"\n").replace(jv,"	"),c=f.wrapPixels,d=f.wrapCount,e=b.widthFactor,jt.width=c||(.5+d)*e,a.update(gi(js,f,jt))})});var jM,jN,jO=(he("tracked-controls",{schema:{id:{type:"string",default:""},controller:{default:-1},autoHide:{default:!0},hand:{type:"string",default:""},handTrackingEnabled:{default:!1},iterateControllerProfiles:{default:!1}},init:function(){this.buttonEventDetails={},this.buttonStates=this.el.components["tracked-controls"].buttonStates={},this.axis=this.el.components["tracked-controls"].axis=[0,0,0],this.changedAxes=[],this.axisMoveEventDetail={axis:this.axis,changed:this.changedAxes},this.updateController=this.updateController.bind(this)},update:function(){this.updateController()},play:function(){var a=this.el.sceneEl;this.updateController(),a.addEventListener("controllersupdated",this.updateController)},pause:function(){this.el.sceneEl.removeEventListener("controllersupdated",this.updateController)},isControllerPresent:function(a){return!(!this.controller||this.controller.gamepad||"none"!==a.inputSource.handedness&&a.inputSource.handedness!==this.data.hand)},updateController:function(){this.controller=f6(this.system.controllers,this.data.id,this.data.hand,this.data.controller,this.data.iterateControllerProfiles,this.data.handTrackingEnabled),this.el.components["tracked-controls"].controller=this.controller},tick:function(){var a=this.el.sceneEl,b=this.controller,c=a.frame;this.data.autoHide&&(this.el.object3D.visible=!!b),b&&a.frame&&this.system.referenceSpace&&(b.hand||(this.pose=c.getPose(b.gripSpace,this.system.referenceSpace),this.updatePose(),this.updateButtons()))},updatePose:function(){var a=this.el.object3D,b=this.pose;b&&(a.matrix.elements=b.transform.matrix,a.matrix.decompose(a.position,a.rotation,a.scale))},updateButtons:function(){var a,b,c,d=this.controller;if(d&&d.gamepad){for(c=d.gamepad,b=0;b<c.buttons.length;++b)this.buttonStates[b]||(this.buttonStates[b]={pressed:!1,touched:!1,value:0}),this.buttonEventDetails[b]||(this.buttonEventDetails[b]={id:b,state:this.buttonStates[b]}),a=c.buttons[b],this.handleButton(b,a);this.handleAxes()}},handleButton:function(a,b){return!!(this.handlePress(a,b)|this.handleTouch(a,b)|this.handleValue(a,b))&&(this.el.emit("buttonchanged",this.buttonEventDetails[a],!1),!0)},handleAxes:function(){var a,b=!1,c=this.controller.gamepad.axes,d=this.axis,e=this.changedAxes;for(this.changedAxes.splice(0,this.changedAxes.length),a=0;a<c.length;++a)e.push(d[a]!==c[a]),e[a]&&(b=!0);if(!b)return!1;for(this.axis.splice(0,this.axis.length),a=0;a<c.length;a++)this.axis.push(c[a]);return this.el.emit("axismove",this.axisMoveEventDetail,!1),!0},handlePress:function(a,b){var c,d=this.buttonStates[a];return b.pressed!==d.pressed&&(c=b.pressed?"buttondown":"buttonup",this.el.emit(c,this.buttonEventDetails[a],!1),d.pressed=b.pressed,!0)},handleTouch:function(a,b){var c,d=this.buttonStates[a];return b.touched!==d.touched&&(c=b.touched?"touchstart":"touchend",this.el.emit(c,this.buttonEventDetails[a],!1),d.touched=b.touched,!0)},handleValue:function(a,b){var c=this.buttonStates[a];return b.value!==c.value&&(c.value=b.value,!0)}}),he("visible",{schema:{default:!0},update:function(){this.el.object3D.visible=this.data}}),eQ+"controllers/valve/index/valve-index-"),jP={left:jO+"left.glb",right:jO+"right.glb"},jQ="valve",jR={left:{x:0,y:-.05,z:.06},right:{x:0,y:-.05,z:.06}},jS={left:{_x:Math.PI/3,_y:0,_z:0,_order:"XYZ"},right:{_x:Math.PI/3,_y:0,_z:0,_order:"XYZ"}},jT=(he("valve-index-controls",{schema:{hand:{default:"left"},buttonColor:{type:"color",default:"#FAFAFA"},buttonHighlightColor:{type:"color",default:"#22D1EE"},model:{default:!0}},after:["tracked-controls"],mapping:{axes:{trackpad:[0,1],thumbstick:[2,3]},buttons:["trigger","grip","trackpad","thumbstick","abutton"]},init:function(){var a=this;this.controllerPresent=!1,this.onButtonChanged=this.onButtonChanged.bind(this),this.onButtonDown=function(b){f8(b.detail.id,"down",a)},this.onButtonUp=function(b){f8(b.detail.id,"up",a)},this.onButtonTouchEnd=function(b){f8(b.detail.id,"touchend",a)},this.onButtonTouchStart=function(b){f8(b.detail.id,"touchstart",a)},this.previousButtonValues={},this.bindMethods()},play:function(){this.checkIfControllerPresent(),this.addControllersUpdateListener()},pause:function(){this.removeEventListeners(),this.removeControllersUpdateListener()},bindMethods:function(){this.onModelLoaded=this.onModelLoaded.bind(this),this.onControllersUpdate=this.onControllersUpdate.bind(this),this.checkIfControllerPresent=this.checkIfControllerPresent.bind(this),this.removeControllersUpdateListener=this.removeControllersUpdateListener.bind(this),this.onAxisMoved=this.onAxisMoved.bind(this)},addEventListeners:function(){var a=this.el;a.addEventListener("buttonchanged",this.onButtonChanged),a.addEventListener("buttondown",this.onButtonDown),a.addEventListener("buttonup",this.onButtonUp),a.addEventListener("touchend",this.onButtonTouchEnd),a.addEventListener("touchstart",this.onButtonTouchStart),a.addEventListener("model-loaded",this.onModelLoaded),a.addEventListener("axismove",this.onAxisMoved),this.controllerEventsActive=!0},removeEventListeners:function(){var a=this.el;a.removeEventListener("buttonchanged",this.onButtonChanged),a.removeEventListener("buttondown",this.onButtonDown),a.removeEventListener("buttonup",this.onButtonUp),a.removeEventListener("touchend",this.onButtonTouchEnd),a.removeEventListener("touchstart",this.onButtonTouchStart),a.removeEventListener("model-loaded",this.onModelLoaded),a.removeEventListener("axismove",this.onAxisMoved),this.controllerEventsActive=!1},checkIfControllerPresent:function(){var a=this.data;f4(this,jQ,{index:"right"===a.hand?0:"left"===a.hand?1:2,iterateControllerProfiles:!0,hand:a.hand})},injectTrackedControls:function(){var a=this.el,b=this.data;a.setAttribute("tracked-controls",{idPrefix:jQ,controller:"right"===b.hand?1:2*("left"!==b.hand),hand:b.hand}),this.loadModel()},loadModel:function(){var a=this.data;a.model&&this.el.setAttribute("gltf-model",""+jP[a.hand])},addControllersUpdateListener:function(){this.el.sceneEl.addEventListener("controllersupdated",this.onControllersUpdate,!1)},removeControllersUpdateListener:function(){this.el.sceneEl.removeEventListener("controllersupdated",this.onControllersUpdate,!1)},onControllersUpdate:function(){this.checkIfControllerPresent()},onButtonChanged:function(a){var b,c=this.mapping.buttons[a.detail.id],d=this.buttonMeshes;c&&("trigger"===c&&(b=a.detail.state.value,d&&d.trigger&&(d.trigger.rotation.x=this.triggerOriginalRotationX-Math.PI/40*b)),this.el.emit(c+"changed",a.detail.state))},onModelLoaded:function(a){var b,c=a.detail.model,d=this;a.target===this.el&&this.data.model&&((b=this.buttonMeshes={}).grip={left:c.getObjectByName("leftgrip"),right:c.getObjectByName("rightgrip")},b.menu=c.getObjectByName("menubutton"),b.system=c.getObjectByName("systembutton"),b.trackpad=c.getObjectByName("touchpad"),b.trigger=c.getObjectByName("trigger"),this.triggerOriginalRotationX=b.trigger.rotation.x,Object.keys(b).forEach(function(a){d.setButtonColor(a,d.data.buttonColor)}),c.position.copy(jS[this.data.hand]),c.rotation.copy(jR[this.data.hand]),this.el.emit("controllermodelready",{name:"valve-index-controls",model:this.data.model,rayOrigin:new c0.Vector3(0,0,0)}))},onAxisMoved:function(a){f7(this,this.mapping.axes,a)},updateModel:function(a,b){var c;this.data.model&&(-1!==b.indexOf("touch")||(c="up"===b?this.data.buttonColor:this.data.buttonHighlightColor,this.setButtonColor(a,c)))},setButtonColor:function(a,b){}}),eQ+"controllers/vive/vr_controller_vive.obj"),jU=eQ+"controllers/vive/vr_controller_vive.mtl",jV="htc-vive",jW=(he("vive-controls",{schema:{hand:{default:"left"},buttonColor:{type:"color",default:"#FAFAFA"},buttonHighlightColor:{type:"color",default:"#22D1EE"},model:{default:!0}},after:["tracked-controls"],mapping:{axes:{touchpad:[0,1]},buttons:["trigger","grip","touchpad","none"]},init:function(){var a=this;this.controllerPresent=!1,this.onButtonChanged=this.onButtonChanged.bind(this),this.onButtonDown=function(b){f8(b.detail.id,"down",a)},this.onButtonUp=function(b){f8(b.detail.id,"up",a)},this.onButtonTouchEnd=function(b){f8(b.detail.id,"touchend",a)},this.onButtonTouchStart=function(b){f8(b.detail.id,"touchstart",a)},this.previousButtonValues={},this.bindMethods()},update:function(){var a=this.data;this.controllerIndex="right"===a.hand?0:"left"===a.hand?1:2},play:function(){this.checkIfControllerPresent(),this.addControllersUpdateListener()},pause:function(){this.removeEventListeners(),this.removeControllersUpdateListener()},bindMethods:function(){this.onModelLoaded=this.onModelLoaded.bind(this),this.onControllersUpdate=this.onControllersUpdate.bind(this),this.checkIfControllerPresent=this.checkIfControllerPresent.bind(this),this.removeControllersUpdateListener=this.removeControllersUpdateListener.bind(this),this.onAxisMoved=this.onAxisMoved.bind(this)},addEventListeners:function(){var a=this.el;a.addEventListener("buttonchanged",this.onButtonChanged),a.addEventListener("buttondown",this.onButtonDown),a.addEventListener("buttonup",this.onButtonUp),a.addEventListener("touchend",this.onButtonTouchEnd),a.addEventListener("touchstart",this.onButtonTouchStart),a.addEventListener("model-loaded",this.onModelLoaded),a.addEventListener("axismove",this.onAxisMoved),this.controllerEventsActive=!0},removeEventListeners:function(){var a=this.el;a.removeEventListener("buttonchanged",this.onButtonChanged),a.removeEventListener("buttondown",this.onButtonDown),a.removeEventListener("buttonup",this.onButtonUp),a.removeEventListener("touchend",this.onButtonTouchEnd),a.removeEventListener("touchstart",this.onButtonTouchStart),a.removeEventListener("model-loaded",this.onModelLoaded),a.removeEventListener("axismove",this.onAxisMoved),this.controllerEventsActive=!1},checkIfControllerPresent:function(){var a=this.data;f4(this,jV,{index:this.controllerIndex,hand:a.hand})},injectTrackedControls:function(){var a=this.el,b=this.data;a.setAttribute("tracked-controls",{idPrefix:jV,hand:b.hand,controller:this.controllerIndex}),this.data.model&&this.el.setAttribute("obj-model",{obj:jT,mtl:jU})},addControllersUpdateListener:function(){this.el.sceneEl.addEventListener("controllersupdated",this.onControllersUpdate,!1)},removeControllersUpdateListener:function(){this.el.sceneEl.removeEventListener("controllersupdated",this.onControllersUpdate,!1)},onControllersUpdate:function(){this.checkIfControllerPresent()},onButtonChanged:function(a){var b,c=this.mapping.buttons[a.detail.id],d=this.buttonMeshes;c&&("trigger"===c&&(b=a.detail.state.value,d&&d.trigger&&(d.trigger.rotation.x=-(Math.PI/12*b))),this.el.emit(c+"changed",a.detail.state))},onModelLoaded:function(a){var b,c=a.detail.model,d=this;a.target===this.el&&this.data.model&&((b=this.buttonMeshes={}).grip={left:c.getObjectByName("leftgrip"),right:c.getObjectByName("rightgrip")},b.menu=c.getObjectByName("menubutton"),b.system=c.getObjectByName("systembutton"),b.trackpad=c.getObjectByName("touchpad"),b.touchpad=c.getObjectByName("touchpad"),b.trigger=c.getObjectByName("trigger"),Object.keys(b).forEach(function(a){d.setButtonColor(a,d.data.buttonColor)}),c.position.set(0,-.015,.04))},onAxisMoved:function(a){f7(this,this.mapping.axes,a)},updateModel:function(a,b){var c;this.data.model&&(-1!==b.indexOf("touch")||(c="up"===b?this.data.buttonColor:this.data.buttonHighlightColor,this.setButtonColor(a,c)))},setButtonColor:function(a,b){var c=this.buttonMeshes;if(c)return"grip"===a?(c.grip.left.material.color.set(b),void c.grip.right.material.color.set(b)):void c[a].material.color.set(b)}}),eQ+"controllers/vive/focus-controller/focus-controller.gltf"),jX="htc-vive-focus",jY=(he("vive-focus-controls",{schema:{hand:{default:""},buttonTouchedColor:{type:"color",default:"#BBBBBB"},buttonHighlightColor:{type:"color",default:"#7A7A7A"},model:{default:!0}},after:["tracked-controls"],mapping:{axes:{touchpad:[0,1]},buttons:["trigger","none","touchpad","none","menu"]},bindMethods:function(){this.onModelLoaded=this.onModelLoaded.bind(this),this.onControllersUpdate=this.onControllersUpdate.bind(this),this.checkIfControllerPresent=this.checkIfControllerPresent.bind(this),this.removeControllersUpdateListener=this.removeControllersUpdateListener.bind(this),this.onAxisMoved=this.onAxisMoved.bind(this)},init:function(){var a=this;this.onButtonChanged=this.onButtonChanged.bind(this),this.onButtonDown=function(b){f8(b.detail.id,"down",a)},this.onButtonUp=function(b){f8(b.detail.id,"up",a)},this.onButtonTouchStart=function(b){f8(b.detail.id,"touchstart",a)},this.onButtonTouchEnd=function(b){f8(b.detail.id,"touchend",a)},this.controllerPresent=!1,this.bindMethods()},addEventListeners:function(){var a=this.el;a.addEventListener("buttonchanged",this.onButtonChanged),a.addEventListener("buttondown",this.onButtonDown),a.addEventListener("buttonup",this.onButtonUp),a.addEventListener("touchstart",this.onButtonTouchStart),a.addEventListener("touchend",this.onButtonTouchEnd),a.addEventListener("model-loaded",this.onModelLoaded),a.addEventListener("axismove",this.onAxisMoved),this.controllerEventsActive=!0,this.addControllersUpdateListener()},removeEventListeners:function(){var a=this.el;a.removeEventListener("buttonchanged",this.onButtonChanged),a.removeEventListener("buttondown",this.onButtonDown),a.removeEventListener("buttonup",this.onButtonUp),a.removeEventListener("touchstart",this.onButtonTouchStart),a.removeEventListener("touchend",this.onButtonTouchEnd),a.removeEventListener("model-loaded",this.onModelLoaded),a.removeEventListener("axismove",this.onAxisMoved),this.controllerEventsActive=!1,this.removeControllersUpdateListener()},checkIfControllerPresent:function(){f4(this,jX,this.data.hand?{hand:this.data.hand}:{})},play:function(){this.checkIfControllerPresent(),this.addControllersUpdateListener()},pause:function(){this.removeEventListeners(),this.removeControllersUpdateListener()},injectTrackedControls:function(){this.el.setAttribute("tracked-controls",{idPrefix:jX}),this.data.model&&this.el.setAttribute("gltf-model",jW)},addControllersUpdateListener:function(){this.el.sceneEl.addEventListener("controllersupdated",this.onControllersUpdate,!1)},removeControllersUpdateListener:function(){this.el.sceneEl.removeEventListener("controllersupdated",this.onControllersUpdate,!1)},onControllersUpdate:function(){this.checkIfControllerPresent()},onModelLoaded:function(a){var b,c=a.detail.model;a.target===this.el&&this.data.model&&((b=this.buttonMeshes={}).trigger=c.getObjectByName("BumperKey"),b.triggerPressed=c.getObjectByName("BumperKey_Press"),b.triggerPressed&&(b.triggerPressed.visible=!1),b.touchpad=c.getObjectByName("TouchPad"),b.touchpadPressed=c.getObjectByName("TouchPad_Press"),b.trackpad=c.getObjectByName("TouchPad"),b.trackpadPressed=c.getObjectByName("TouchPad_Press"),b.trackpadPressed&&(b.trackpadPressed.visible=!1))},onButtonChanged:function(a){var b=this.mapping.buttons[a.detail.id];b&&this.el.emit(b+"changed",a.detail.state)},onAxisMoved:function(a){f7(this,this.mapping.axes,a)},updateModel:function(a,b){this.data.model&&this.updateButtonModel(a,b)},updateButtonModel:function(a,b){var c,d=this.buttonMeshes,e=a+"Pressed";if(d&&d[a]&&d[e]){switch(b){case"down":c=this.data.buttonHighlightColor;break;case"touchstart":c=this.data.buttonTouchedColor}c&&d[e].material.color.set(c),d[e].visible=!!c,d[a].visible=!c}}}),{38:"ArrowUp",37:"ArrowLeft",40:"ArrowDown",39:"ArrowRight",87:"KeyW",65:"KeyA",83:"KeyS",68:"KeyD"}),jZ=["KeyW","KeyA","KeyS","KeyD","ArrowUp","ArrowLeft","ArrowRight","ArrowDown"];he("wasd-controls",{schema:{acceleration:{default:65},adAxis:{default:"x",oneOf:["x","y","z"]},adEnabled:{default:!0},adInverted:{default:!1},enabled:{default:!0},fly:{default:!1},wsAxis:{default:"z",oneOf:["x","y","z"]},wsEnabled:{default:!0},wsInverted:{default:!1}},after:["look-controls"],init:function(){this.keys={},this.easing=1.1,this.velocity=new c0.Vector3,this.onBlur=this.onBlur.bind(this),this.onContextMenu=this.onContextMenu.bind(this),this.onFocus=this.onFocus.bind(this),this.onKeyDown=this.onKeyDown.bind(this),this.onKeyUp=this.onKeyUp.bind(this),this.onVisibilityChange=this.onVisibilityChange.bind(this),this.attachVisibilityEventListeners()},tick:function(a,b){var c=this.data,d=this.el,e=this.velocity;(e[c.adAxis]||e[c.wsAxis]||!function(a){var b;for(b in a)return!1;return!0}(this.keys))&&(b/=1e3,this.updateVelocity(b),(e[c.adAxis]||e[c.wsAxis])&&d.object3D.position.add(this.getMovementVector(b)))},update:function(a){a.adAxis!==this.data.adAxis&&(this.velocity[a.adAxis]=0),a.wsAxis!==this.data.wsAxis&&(this.velocity[a.wsAxis]=0)},remove:function(){this.removeKeyEventListeners(),this.removeVisibilityEventListeners()},play:function(){this.attachKeyEventListeners()},pause:function(){this.keys={},this.removeKeyEventListeners()},updateVelocity:function(a){var b,c,d,e,f,g=this.data,h=this.keys,i=this.velocity;if(c=g.adAxis,e=g.wsAxis,a>.2)return i[c]=0,void(i[e]=0);var j=Math.pow(1/this.easing,60*a);0!==i[c]&&(i[c]=i[c]*j),0!==i[e]&&(i[e]=i[e]*j),1e-5>Math.abs(i[c])&&(i[c]=0),1e-5>Math.abs(i[e])&&(i[e]=0),g.enabled&&(b=g.acceleration,g.adEnabled&&(d=g.adInverted?-1:1,(h.KeyA||h.ArrowLeft)&&(i[c]-=d*b*a),(h.KeyD||h.ArrowRight)&&(i[c]+=d*b*a)),g.wsEnabled&&(f=g.wsInverted?-1:1,(h.KeyW||h.ArrowUp)&&(i[e]-=f*b*a),(h.KeyS||h.ArrowDown)&&(i[e]+=f*b*a)))},getMovementVector:(jM=new c0.Vector3(0,0,0),jN=new c0.Euler(0,0,0,"YXZ"),function(a){var b,c=this.el.getAttribute("rotation"),d=this.velocity;return jM.copy(d),jM.multiplyScalar(a),c&&(b=this.data.fly?c.x:0,jN.set(c0.MathUtils.degToRad(b),c0.MathUtils.degToRad(c.y),0),jM.applyEuler(jN)),jM}),attachVisibilityEventListeners:function(){window.oncontextmenu=this.onContextMenu,window.addEventListener("blur",this.onBlur),window.addEventListener("focus",this.onFocus),document.addEventListener("visibilitychange",this.onVisibilityChange)},removeVisibilityEventListeners:function(){window.removeEventListener("blur",this.onBlur),window.removeEventListener("focus",this.onFocus),document.removeEventListener("visibilitychange",this.onVisibilityChange)},attachKeyEventListeners:function(){window.addEventListener("keydown",this.onKeyDown),window.addEventListener("keyup",this.onKeyUp)},removeKeyEventListeners:function(){window.removeEventListener("keydown",this.onKeyDown),window.removeEventListener("keyup",this.onKeyUp)},onContextMenu:function(){for(var a=Object.keys(this.keys),b=0;b<a.length;b++)delete this.keys[a[b]]},onBlur:function(){this.pause()},onFocus:function(){this.play()},onVisibilityChange:function(){document.hidden?this.onBlur():this.onFocus()},onKeyDown:function(a){var b;gp(a)&&(b=a.code||jY[a.keyCode],-1!==jZ.indexOf(b)&&(this.keys[b]=!0))},onKeyUp:function(a){var b;b=a.code||jY[a.keyCode],delete this.keys[b]}});var j$,j_,j0,j1=eW("components:windows-motion-controls:debug"),j2=eW("components:windows-motion-controls:warn"),j3=eQ+"controllers/microsoft/",j4={left:"left.glb",right:"right.glb",default:"universal.glb"},j5="windows-mixed-reality",j6=(he("windows-motion-controls",{schema:{hand:{default:"right"},pair:{default:0},model:{default:!0}},after:["tracked-controls"],mapping:{axes:{touchpad:[0,1],thumbstick:[2,3]},buttons:["trigger","squeeze","touchpad","thumbstick","menu"],axisMeshNames:["TOUCHPAD_TOUCH_X","TOUCHPAD_TOUCH_X","THUMBSTICK_X","THUMBSTICK_Y"],buttonMeshNames:{trigger:"SELECT",menu:"MENU",squeeze:"GRASP",thumbstick:"THUMBSTICK_PRESS",touchpad:"TOUCHPAD_PRESS"},pointingPoseMeshName:"POINTING_POSE"},bindMethods:function(){this.onModelError=this.onModelError.bind(this),this.onModelLoaded=this.onModelLoaded.bind(this),this.onControllersUpdate=this.onControllersUpdate.bind(this),this.checkIfControllerPresent=this.checkIfControllerPresent.bind(this),this.onAxisMoved=this.onAxisMoved.bind(this)},init:function(){var a=this,b=this.el;this.onButtonChanged=this.onButtonChanged.bind(this),this.onButtonDown=function(b){f8(b.detail.id,"down",a)},this.onButtonUp=function(b){f8(b.detail.id,"up",a)},this.onButtonTouchStart=function(b){f8(b.detail.id,"touchstart",a)},this.onButtonTouchEnd=function(b){f8(b.detail.id,"touchend",a)},this.onControllerConnected=function(){a.setModelVisibility(!0)},this.onControllerDisconnected=function(){a.setModelVisibility(!1)},this.controllerPresent=!1,this.previousButtonValues={},this.bindMethods(),this.loadedMeshInfo={buttonMeshes:null,axisMeshes:null},this.rayOrigin={origin:new c0.Vector3,direction:new c0.Vector3(0,0,-1),createdFromMesh:!1},b.addEventListener("controllerconnected",this.onControllerConnected),b.addEventListener("controllerdisconnected",this.onControllerDisconnected)},addEventListeners:function(){var a=this.el;a.addEventListener("buttonchanged",this.onButtonChanged),a.addEventListener("buttondown",this.onButtonDown),a.addEventListener("buttonup",this.onButtonUp),a.addEventListener("touchstart",this.onButtonTouchStart),a.addEventListener("touchend",this.onButtonTouchEnd),a.addEventListener("axismove",this.onAxisMoved),a.addEventListener("model-error",this.onModelError),a.addEventListener("model-loaded",this.onModelLoaded),this.controllerEventsActive=!0},removeEventListeners:function(){var a=this.el;a.removeEventListener("buttonchanged",this.onButtonChanged),a.removeEventListener("buttondown",this.onButtonDown),a.removeEventListener("buttonup",this.onButtonUp),a.removeEventListener("touchstart",this.onButtonTouchStart),a.removeEventListener("touchend",this.onButtonTouchEnd),a.removeEventListener("axismove",this.onAxisMoved),a.removeEventListener("model-error",this.onModelError),a.removeEventListener("model-loaded",this.onModelLoaded),this.controllerEventsActive=!1},checkIfControllerPresent:function(){f4(this,j5,{hand:this.data.hand,index:this.data.pair,iterateControllerProfiles:!0})},play:function(){this.checkIfControllerPresent(),this.addControllersUpdateListener()},pause:function(){this.removeEventListeners(),this.removeControllersUpdateListener()},updateControllerModel:function(){if(this.data.model&&!this.rayOrigin.createdFromMesh){var a=this.createControllerModelUrl();this.loadModel(a)}else this.modelReady()},createControllerModelUrl:function(a){return j3+"default/"+(j4[this.data.hand]||j4.default)},injectTrackedControls:function(){var a=this.data;this.el.setAttribute("tracked-controls",{idPrefix:j5,controller:a.pair,hand:a.hand}),this.updateControllerModel()},addControllersUpdateListener:function(){this.el.sceneEl.addEventListener("controllersupdated",this.onControllersUpdate,!1)},removeControllersUpdateListener:function(){this.el.sceneEl.removeEventListener("controllersupdated",this.onControllersUpdate,!1)},onControllersUpdate:function(){this.checkIfControllerPresent()},onModelError:function(a){var b=this.createControllerModelUrl(!0);a.detail.src!==b?(j2("Failed to load controller model for device, attempting to load default."),this.loadModel(b)):j2("Failed to load default controller model.")},loadModel:function(a){this.el.setAttribute("gltf-model","url("+a+")")},onModelLoaded:function(a){var b,c,d,e,f=this.controllerModel=a.detail.model,g=this.loadedMeshInfo;if(a.target===this.el){if(j1("Processing model"),g.buttonMeshes={},g.axisMeshes={},f){for(b=0;b<this.mapping.buttons.length;b++)(c=this.mapping.buttonMeshNames[this.mapping.buttons[b]])?(d=f.getObjectByName(c))?(e={index:b,value:h(d,"VALUE"),pressed:h(d,"PRESSED"),unpressed:h(d,"UNPRESSED")}).value&&e.pressed&&e.unpressed?g.buttonMeshes[this.mapping.buttons[b]]=e:j2("Missing button submesh under mesh with name: "+c+"(VALUE: "+!!e.value+", PRESSED: "+!!e.pressed+", UNPRESSED:"+!!e.unpressed+")"):j2("Missing button mesh with name: "+c):j1("Skipping unknown button at index: "+b+" with mapped name: "+this.mapping.buttons[b]);for(b=0;b<this.mapping.axisMeshNames.length;b++)(c=this.mapping.axisMeshNames[b])?(d=f.getObjectByName(c))?(e={index:b,value:h(d,"VALUE"),min:h(d,"MIN"),max:h(d,"MAX")}).value&&e.min&&e.max?g.axisMeshes[b]=e:j2("Missing axis submesh under mesh with name: "+c+"(VALUE: "+!!e.value+", MIN: "+!!e.min+", MAX:"+!!e.max+")"):j2("Missing axis mesh with name: "+c):j1("Skipping unknown axis at index: "+b);this.calculateRayOriginFromMesh(f),this.setModelVisibility()}j1("Model load complete.")}function h(a,b){for(var c=0,d=a.children.length;c<d;c++){var e=a.children[c];if(e&&e.name===b)return e}}},calculateRayOriginFromMesh:function(){var a=new c0.Quaternion;return function(b){var c;if(this.rayOrigin.origin.set(0,0,0),this.rayOrigin.direction.set(0,0,-1),this.rayOrigin.createdFromMesh=!0,c=b.getObjectByName(this.mapping.pointingPoseMeshName)){var d=b.parent;d&&(b.parent=null,b.updateMatrixWorld(!0),b.parent=d),c.getWorldPosition(this.rayOrigin.origin),c.getWorldQuaternion(a),this.rayOrigin.direction.applyQuaternion(a),d&&b.updateMatrixWorld(!0)}else j1("Mesh does not contain pointing origin data, defaulting to none.");this.modelReady()}}(),lerpAxisTransform:function(){var a=new c0.Quaternion;return function(b,c){var d=this.loadedMeshInfo.axisMeshes[b];if(d){var e=d.min,f=d.max,g=d.value,h=.5*c+.5;g.setRotationFromQuaternion(a.copy(e.quaternion).slerp(f.quaternion,h)),g.position.lerpVectors(e.position,f.position,h)}}}(),lerpButtonTransform:function(){var a=new c0.Quaternion;return function(b,c){var d=this.loadedMeshInfo.buttonMeshes[b];if(d){var e=d.unpressed,f=d.pressed,g=d.value;g.setRotationFromQuaternion(a.copy(e.quaternion).slerp(f.quaternion,c)),g.position.lerpVectors(e.position,f.position,c)}}}(),modelReady:function(){this.el.emit("controllermodelready",{name:"windows-motion-controls",model:this.data.model,rayOrigin:this.rayOrigin})},onButtonChanged:function(a){var b=this.mapping.buttons[a.detail.id];b&&(this.loadedMeshInfo&&this.loadedMeshInfo.buttonMeshes&&this.lerpButtonTransform(b,a.detail.state.value),this.el.emit(b+"changed",a.detail.state))},onAxisMoved:function(a){var b=this.mapping.axisMeshNames.length;if(this.loadedMeshInfo&&this.loadedMeshInfo.axisMeshes)for(var c=0;c<b;c++)this.lerpAxisTransform(c,a.detail.axis[c]||0);f7(this,this.mapping.axes,a)},setModelVisibility:function(a){var b=this.el.getObject3D("mesh");this.controllerPresent&&(a=void 0!==a?a:this.modelVisible,this.modelVisible=a,b&&(b.visible=a))}}),j$=new c0.Quaternion,j_=new c0.Vector3,function(a,b,c){b.position.copy(a.transform.position),b.quaternion.copy(a.transform.orientation),j_.copy(c),j$.copy(a.transform.orientation),j_.applyQuaternion(j$),b.position.sub(j_)});function j7(a,b){this.renderer=a,this.xrHitTestSource=null,a.xr.addEventListener("sessionend",(function(){this.xrHitTestSource=null}).bind(this)),a.xr.addEventListener("sessionstart",(function(){this.sessionStart(b)}).bind(this)),this.renderer.xr.isPresenting&&this.sessionStart(b)}function j8(a){console.warn(a.message),console.warn('Cannot requestHitTestSource Are you missing: webxr="optionalFeatures: hit-test;" from <a-scene>?')}j6.tempFakePose={transform:{orientation:new c0.Quaternion,position:new c0.Vector3}},j7.prototype.previousFrameAnchors=new Set,j7.prototype.anchorToObject3D=new Map,j7.prototype.sessionStart=function(a){this.session=this.renderer.xr.getSession(),"requestHitTestSource"in this.session?a.space?this.session.requestHitTestSource(a).then((function(a){this.xrHitTestSource=a}).bind(this)).catch(j8):a.profile&&this.session.requestHitTestSourceForTransientInput(a).then((function(a){this.xrHitTestSource=a,this.transient=!0}).bind(this)).catch(j8):j8({message:"No requestHitTestSource on the session."})},j7.prototype.anchorFromLastHitTestResult=function(a,b){var c=this.lastHitTest;if(c){var d={object3D:a,offset:b};Array.from(this.anchorToObject3D.entries()).forEach((function(b){var c=b[1].object3D,d=b[0];c===a&&(this.anchorToObject3D.delete(d),d.delete())}).bind(this)),c.createAnchor&&c.createAnchor().then((function(a){this.anchorToObject3D.set(a,d)}).bind(this)).catch(function(a){console.warn(a.message),console.warn('Cannot create anchor, are you missing: webxr="optionalFeatures: anchors;" from <a-scene>?')})}},j7.prototype.doHit=function(a){if(this.renderer.xr.isPresenting){var b,c,d=this.renderer.xr.getReferenceSpace(),e=a.getViewerPose(d);return this.xrHitTestSource&&e?this.transient?(b=a.getHitTestResultsForTransientInput(this.xrHitTestSource)).length>0&&(c=b[0].results).length>0&&(this.lastHitTest=c[0],c[0].getPose(d)):(b=a.getHitTestResults(this.xrHitTestSource)).length>0&&(this.lastHitTest=b[0],b[0].getPose(d)):void 0}},j7.updateAnchorPoses=function(a,b){var c=a.trackedAnchors||j7.prototype.previousFrameAnchors;j7.prototype.previousFrameAnchors.forEach(function(a){c.has(a)||j7.prototype.anchorToObject3D.delete(a)}),c.forEach(function(c){var d,e,f,g;try{if(d=a.getPose(c.anchorSpace,b)){if(!(e=j7.prototype.anchorToObject3D.get(c)))return;f=e.offset,g=e.object3D,j6(d,g,f)}}catch(a){console.error("while updating anchor poses:",a)}}),j7.prototype.previousFrameAnchors=c},he("ar-hit-test",{schema:{target:{type:"selector"},enabled:{default:!0},src:{default:"data:image/webp;base64,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",type:"map"},type:{default:"footprint",oneOf:["footprint","map"]},footprintDepth:{default:.1},mapSize:{type:"vec2",default:{x:.5,y:.5}}},sceneOnly:!0,init:function(){this.hitTest=null,this.imageDataArray=new Uint8ClampedArray(1048576),this.imageData=new ImageData(this.imageDataArray,512,512),this.textureCache=new Map,this.orthoCam=new c0.OrthographicCamera,this.orthoCam.layers.set(21),this.textureTarget=new c0.WebGLRenderTarget(512,512,{}),this.basicMaterial=new c0.MeshBasicMaterial({color:0,side:c0.DoubleSide}),this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.context.imageSmoothingEnabled=!1,this.canvas.width=512,this.canvas.height=512,this.canvasTexture=new c0.CanvasTexture(this.canvas,{alpha:!0}),this.canvasTexture.flipY=!1;var a=this.el.getAttribute("webxr"),b=a.optionalFeatures;b.includes("hit-test")&&b.includes("anchors")||(b.push("hit-test"),b.push("anchors"),this.el.setAttribute("webxr",a)),this.el.sceneEl.renderer.xr.addEventListener("sessionend",(function(){this.hitTest=null}).bind(this)),this.el.sceneEl.addEventListener("enter-vr",(function(){if(this.el.is("ar-mode")){var a=this.el.sceneEl.renderer,b=this.session=a.xr.getSession();this.hasPosedOnce=!1,this.bboxMesh.visible=!1,j0||(j0=new Map),b.requestReferenceSpace("viewer").then((function(b){this.viewerHitTest=this.hitTest=new j7(a,{space:b}),this.el.emit("ar-hit-test-start")}).bind(this));var c=this;this.el.sceneEl.addEventListener("controllersupdated",function(){var b=this.xrSession&&this.xrSession.inputSources;if(b){for(var d=0;d<b.length;++d)if("tracked-pointer"===b[d].targetRayMode){c.hitTest=new j7(a,{space:b[d].targetRaySpace}),j0.set(b[d],c.hitTest),c.viewerHitTest&&"function"==typeof c.viewerHitTest.cancel&&(c.viewerHitTest.cancel(),c.viewerHitTest=null);break}}});var d="generic-touchscreen",e=new j7(a,{profile:d});b.addEventListener("selectstart",(function(b){if(!0===this.data.enabled){var c=b.inputSource;this.bboxMesh.visible=!0,!0===this.hasPosedOnce&&(this.el.emit("ar-hit-test-select-start",{inputSource:c,position:this.bboxMesh.position,orientation:this.bboxMesh.quaternion}),c.profiles[0]===d?this.hitTest=e:(this.hitTest=j0.get(c)||new j7(a,{space:c.targetRaySpace}),j0.set(c,this.hitTest)))}}).bind(this)),b.addEventListener("selectend",(function(a){if(this.hitTest&&!0===this.data.enabled){var b,c=a.inputSource;!0===this.hasPosedOnce&&(this.bboxMesh.visible=!1,this.data.target&&(b=this.data.target.object3D)&&(j6.tempFakePose.transform.position.copy(this.bboxMesh.position),j6.tempFakePose.transform.orientation.copy(this.bboxMesh.quaternion),j6(j6.tempFakePose,b,this.bboxOffset),b.visible=!0,this.hitTest.anchorFromLastHitTestResult(b,this.bboxOffset)),this.el.emit("ar-hit-test-select",{inputSource:c,position:this.bboxMesh.position,orientation:this.bboxMesh.quaternion}),this.hitTest=null)}else this.hitTest=null}).bind(this))}}).bind(this)),this.bboxOffset=new c0.Vector3,this.update=this.update.bind(this),this.makeBBox()},update:function(){!1===this.data.enabled&&(this.hitTest=null,this.bboxMesh.visible=!1),this.data.target&&(this.data.target.object3D?(this.data.target.addEventListener("model-loaded",this.update),this.data.target.object3D.layers.enable(21),this.data.target.object3D.traverse(function(a){a.layers.enable(21)})):this.data.target.addEventListener("loaded",this.update,{once:!0})),this.bboxNeedsUpdate=!0},makeBBox:function(){var a=new c0.PlaneGeometry(1,1),b=new c0.MeshBasicMaterial({transparent:!0,color:0xffffff});a.rotateX(-Math.PI/2),a.rotateY(-Math.PI/2),this.bbox=new c0.Box3,this.bboxMesh=new c0.Mesh(a,b),this.el.setObject3D("ar-hit-test",this.bboxMesh),this.bboxMesh.visible=!1},updateFootprint:function(){var a,b,c,d=this.el.sceneEl.renderer,e=d.xr.enabled;this.bboxMesh.material.map=this.canvasTexture,this.bboxMesh.material.needsUpdate=!0,this.orthoCam.rotation.set(-Math.PI/2,0,-Math.PI/2),this.orthoCam.position.copy(this.bboxMesh.position),this.orthoCam.position.y-=this.bboxMesh.scale.y/2,this.orthoCam.near=.1,this.orthoCam.far=this.orthoCam.near+this.data.footprintDepth*this.bboxMesh.scale.y,this.orthoCam.position.y+=this.orthoCam.far,this.orthoCam.right=this.bboxMesh.scale.z/2,this.orthoCam.left=-this.bboxMesh.scale.z/2,this.orthoCam.top=this.bboxMesh.scale.x/2,this.orthoCam.bottom=-this.bboxMesh.scale.x/2,this.orthoCam.updateProjectionMatrix(),b=d.getRenderTarget(),d.setRenderTarget(this.textureTarget),d.xr.enabled=!1,c=this.el.object3D.background,this.el.object3D.overrideMaterial=this.basicMaterial,this.el.object3D.background=null,d.render(this.el.object3D,this.orthoCam),this.el.object3D.background=c,this.el.object3D.overrideMaterial=null,d.xr.enabled=e,d.setRenderTarget(b),d.readRenderTargetPixels(this.textureTarget,0,0,512,512,this.imageDataArray),this.context.putImageData(this.imageData,0,0),this.context.shadowColor="white",this.context.shadowBlur=10,this.context.drawImage(this.canvas,0,0),a=this.context.getImageData(0,0,512,512);for(var f=0;f<262144;f++)0!==a.data[4*f+3]&&255!==a.data[4*f+3]&&(a.data[4*f+3]=128);this.context.putImageData(a,0,0),this.canvasTexture.needsUpdate=!0},tick:function(){var a,b,c=this.el.sceneEl.frame,d=this.el.sceneEl.renderer;c&&j7.updateAnchorPoses(c,d.xr.getReferenceSpace()),this.bboxNeedsUpdate&&(this.bboxNeedsUpdate=!1,this.data.target&&"map"!==this.data.type||(this.textureCache.has(this.data.src)?b=this.textureCache.get(this.data.src):(b=(new c0.TextureLoader).load(this.data.src),this.textureCache.set(this.data.src,b)),this.bboxMesh.material.map=b,this.bboxMesh.material.needsUpdate=!0),this.data.target&&this.data.target.object3D?(this.bbox.setFromObject(this.data.target.object3D),this.bbox.getCenter(this.bboxMesh.position),this.bbox.getSize(this.bboxMesh.scale),"footprint"===this.data.type&&(this.bboxMesh.scale.x*=1.04,this.bboxMesh.scale.z*=1.04,this.updateFootprint()),this.bboxMesh.position.y-=this.bboxMesh.scale.y/2,this.bboxOffset.copy(this.bboxMesh.position),this.bboxOffset.sub(this.data.target.object3D.position)):this.bboxMesh.scale.set(this.data.mapSize.x,1,this.data.mapSize.y)),this.hitTest&&(a=this.hitTest.doHit(c))&&(!0!==this.hasPosedOnce&&(this.hasPosedOnce=!0,this.el.emit("ar-hit-test-achieved")),this.bboxMesh.visible=!0,this.bboxMesh.position.copy(a.transform.position),this.bboxMesh.quaternion.copy(a.transform.orientation))}}),he("background",{schema:{color:{type:"color",default:"black"},transparent:{default:!1}},sceneOnly:!0,update:function(){var a=this.data,b=this.el.object3D;a.transparent?b.background=null:b.background=new c0.Color(a.color)},remove:function(){this.el.object3D.background=null}}),he("debug",{schema:{default:!0},sceneOnly:!0});var j9="a-dialog-buttons-container",ka="a-dialog-button";function kb(a,b){var c,d,e,f;return(c=document.createElement("div")).classList.add("a-modal"),c.setAttribute(eR,""),(d=document.createElement("div")).className="a-dialog",d.setAttribute(eR,""),c.appendChild(d),(e=document.createElement("div")).classList.add("a-dialog-text-container"),d.appendChild(e),(f=document.createElement("div")).classList.add("a-dialog-text"),f.innerHTML=a,e.appendChild(f),d.appendChild(b),c}he("device-orientation-permission-ui",{schema:{enabled:{default:!0},deviceMotionMessage:{default:"This immersive website requires access to your device motion sensors."},httpsMessage:{default:"Access this site over HTTPS to enter VR mode and grant access to the device sensors."},denyButtonText:{default:"Deny"},allowButtonText:{default:"Allow"},cancelButtonText:{default:"Cancel"}},sceneOnly:!0,init:function(){var a=this;this.data.enabled&&(window.isSecureContext||this.showHTTPAlert(),"undefined"!=typeof DeviceOrientationEvent&&DeviceOrientationEvent.requestPermission?(this.onDeviceMotionDialogAllowClicked=this.onDeviceMotionDialogAllowClicked.bind(this),this.onDeviceMotionDialogDenyClicked=this.onDeviceMotionDialogDenyClicked.bind(this),DeviceOrientationEvent.requestPermission().then(function(){a.el.emit("deviceorientationpermissiongranted"),a.permissionGranted=!0}).catch(function(){var b,c,d,e,f,g,h,i;b=a.data.denyButtonText,c=a.data.allowButtonText,d=a.data.deviceMotionMessage,e=a.onDeviceMotionDialogAllowClicked,f=a.onDeviceMotionDialogDenyClicked,(g=document.createElement("div")).classList.add(j9),(h=document.createElement("button")).classList.add(ka,"a-dialog-deny-button"),h.setAttribute(eR,""),h.innerHTML=b,g.appendChild(h),(i=document.createElement("button")).classList.add(ka,"a-dialog-allow-button"),i.setAttribute(eR,""),i.innerHTML=c,g.appendChild(i),i.addEventListener("click",function(a){a.stopPropagation(),e()}),h.addEventListener("click",function(a){a.stopPropagation(),f()}),a.devicePermissionDialogEl=kb(d,g),a.el.appendChild(a.devicePermissionDialogEl)})):this.permissionGranted=!0)},remove:function(){this.devicePermissionDialogEl&&this.el.removeChild(this.devicePermissionDialogEl)},onDeviceMotionDialogDenyClicked:function(){this.remove()},showHTTPAlert:function(){var a,b,c,d,e,f=this,g=(a=f.data.cancelButtonText,b=f.data.httpsMessage,c=function(){f.el.removeChild(g)},(d=document.createElement("div")).classList.add(j9),(e=document.createElement("button")).classList.add(ka,"a-dialog-ok-button"),e.setAttribute(eR,""),e.innerHTML=a,d.appendChild(e),e.addEventListener("click",function(a){a.stopPropagation(),c()}),kb(b,d));this.el.appendChild(g)},onDeviceMotionDialogAllowClicked:function(){var a=this;this.el.emit("deviceorientationpermissionrequested"),DeviceOrientationEvent.requestPermission().then(function(b){"granted"===b?(a.el.emit("deviceorientationpermissiongranted"),a.permissionGranted=!0):a.el.emit("deviceorientationpermissionrejected"),a.remove()}).catch(console.error)}}),he("embedded",{dependencies:["xr-mode-ui"],schema:{default:!0},sceneOnly:!0,update:function(){var a=this.el,b=a.querySelector(".a-enter-vr");!0===this.data?(b&&b.classList.add("embedded"),a.removeFullScreenStyles()):(b&&b.classList.remove("embedded"),a.addFullScreenStyles())}}),he("inspector",{schema:{url:{default:"https://unpkg.com/aframe-inspector@"+function(){var a=hZ.split(".");return a[2]="x",a.join(".")}()+"/dist/aframe-inspector.min.js"}},sceneOnly:!0,init:function(){this.firstPlay=!0,this.onKeydown=this.onKeydown.bind(this),this.onMessage=this.onMessage.bind(this),this.initOverlay(),window.addEventListener("keydown",this.onKeydown),window.addEventListener("message",this.onMessage)},play:function(){var a;this.firstPlay&&"false"!==(a=gs("inspector"))&&a&&(this.openInspector(),this.firstPlay=!1)},initOverlay:function(){this.loadingMessageEl=document.createElement("div"),this.loadingMessageEl.classList.add("a-inspector-loader"),this.loadingMessageEl.innerHTML='Loading Inspector<span class="dots"><span>.</span><span>.</span><span>.</span></span>'},remove:function(){this.removeEventListeners()},onKeydown:function(a){73===a.keyCode&&(a.ctrlKey&&a.altKey||a.getModifierState("AltGraph"))&&this.openInspector()},showLoader:function(){document.body.appendChild(this.loadingMessageEl)},hideLoader:function(){document.body.removeChild(this.loadingMessageEl)},onMessage:function(a){"INJECT_AFRAME_INSPECTOR"===a.data&&this.openInspector()},openInspector:function(a){var b,c=this;AFRAME.INSPECTOR||AFRAME.inspectorInjected?AFRAME.INSPECTOR.open(a):(this.showLoader(),(b=document.createElement("script")).src=this.data.url,b.setAttribute("data-name","aframe-inspector"),b.setAttribute(eR,""),b.onload=function(){AFRAME.INSPECTOR.open(a),c.hideLoader(),c.removeEventListeners()},b.onerror=function(){c.loadingMessageEl.innerHTML="Error loading Inspector"},document.head.appendChild(b),AFRAME.inspectorInjected=!0)},removeEventListeners:function(){window.removeEventListener("keydown",this.onKeydown),window.removeEventListener("message",this.onMessage)}}),he("fog",{schema:{color:{type:"color",default:"#000"},density:{default:25e-5},far:{default:1e3,min:0},near:{default:1,min:0},type:{default:"linear",oneOf:["linear","exponential"]}},sceneOnly:!0,update:function(){var a,b=this.data,c=this.el,d=this.el.object3D.fog;d&&b.type===d.name?Object.keys(this.schema).forEach(function(a){var c=b[a];"color"===a&&(c=new c0.Color(c)),d[a]=c}):c.object3D.fog=((a="exponential"===b.type?new c0.FogExp2(b.color,b.density):new c0.Fog(b.color,b.near,b.far)).name=b.type,a)},remove:function(){var a=this.el;this.el.object3D.fog&&(a.object3D.fog=null)}}),he("keyboard-shortcuts",{schema:{enterVR:{default:!0},exitVR:{default:!0}},sceneOnly:!0,init:function(){this.onKeyup=this.onKeyup.bind(this)},play:function(){window.addEventListener("keyup",this.onKeyup,!1)},pause:function(){window.removeEventListener("keyup",this.onKeyup)},onKeyup:function(a){var b=this.el;gp(a)&&(this.data.enterVR&&70===a.keyCode&&b.enterVR(),this.data.exitVR&&27===a.keyCode&&b.exitVR())}});var kc=eW("components:pool:warn");he("pool",{schema:{container:{default:""},mixin:{default:""},size:{default:0},dynamic:{default:!1}},sceneOnly:!0,multiple:!0,initPool:function(){var a;for(this.availableEls=[],this.usedEls=[],this.data.mixin||kc("No mixin provided for pool component."),this.data.container&&(this.container=document.querySelector(this.data.container),this.container||kc("Container "+this.data.container+" not found.")),this.container=this.container||this.el,a=0;a<this.data.size;++a)this.createEntity()},update:function(a){var b=this.data;a.mixin===b.mixin&&a.size===b.size||this.initPool()},createEntity:function(){(a=document.createElement("a-entity")).play=this.wrapPlay(a.play),a.setAttribute("mixin",this.data.mixin),a.object3D.visible=!1,a.pause(),this.container.appendChild(a),this.availableEls.push(a);var a,b=this.usedEls;a.addEventListener("loaded",function(){-1===b.indexOf(a)&&(a.object3DParent=a.object3D.parent,a.object3D.parent.remove(a.object3D))})},wrapPlay:function(a){var b=this.usedEls;return function(){-1!==b.indexOf(this)&&a.call(this)}},requestEntity:function(){var a;if(0===this.availableEls.length){if(!1===this.data.dynamic)return void kc("Requested entity from empty pool: "+this.attrName);kc("Requested entity from empty pool. This pool is dynamic and will resize automatically. You might want to increase its initial size: "+this.attrName),this.createEntity()}return a=this.availableEls.shift(),this.usedEls.push(a),a.object3DParent&&(a.object3DParent.add(a.object3D),this.updateRaycasters()),a.object3D.visible=!0,a},returnEntity:function(a){var b=this.usedEls.indexOf(a);if(-1!==b)return this.usedEls.splice(b,1),this.availableEls.push(a),a.object3DParent=a.object3D.parent,a.object3D.parent.remove(a.object3D),this.updateRaycasters(),a.object3D.visible=!1,a.pause(),a;kc("The returned entity was not previously pooled from "+this.attrName)},updateRaycasters:function(){document.querySelectorAll("[raycaster]").forEach(function(a){a.components.raycaster.setDirty()})}}),he("real-world-meshing",{schema:{filterLabels:{type:"array"},meshesEnabled:{default:!0},meshMixin:{default:!0},planesEnabled:{default:!0},planeMixin:{default:""}},sceneOnly:!0,init:function(){var a=this.el.getAttribute("webxr"),b=a.requiredFeatures;-1===b.indexOf("mesh-detection")&&(b.push("mesh-detection"),this.el.setAttribute("webxr",a)),-1===b.indexOf("plane-detection")&&(b.push("plane-detection"),this.el.setAttribute("webxr",a)),this.meshEntities=[],this.initWorldMeshEntity=this.initWorldMeshEntity.bind(this)},tick:function(){this.el.is("ar-mode")&&(this.detectMeshes(),this.updateMeshes())},detectMeshes:function(){var a,b,c,d=this.data,e=this.el,f=this.meshEntities,g=!1,h=[],i=this.data.filterLabels;a=(c=e.frame).detectedMeshes,b=c.detectedPlanes;for(var j=0;j<f.length;j++)f[j].present=!1;if(d.meshesEnabled){for(var k of a.values())if(!i.length||-1!==i.indexOf(k.semanticLabel)){for(j=0;j<f.length;j++)if(k===f[j].mesh){g=!0,f[j].present=!0,f[j].lastChangedTime<k.lastChangedTime&&this.updateMeshGeometry(f[j].el,k),f[j].lastChangedTime=k.lastChangedTime;break}g||h.push(k),g=!1}}if(d.planesEnabled){for(k of b.values())if(!i.length||-1!==i.indexOf(k.semanticLabel)){for(j=0;j<f.length;j++)if(k===f[j].mesh){g=!0,f[j].present=!0,f[j].lastChangedTime<k.lastChangedTime&&this.updateMeshGeometry(f[j].el,k),f[j].lastChangedTime=k.lastChangedTime;break}g||h.push(k),g=!1}}this.deleteMeshes(),this.createNewMeshes(h)},updateMeshes:function(){var a=new c0.Matrix4;return function(){for(var b,c,d,e=this.el,f=e.frame,g=this.meshEntities,h=e.renderer.xr.getReferenceSpace(),i=0;i<g.length;i++)d=g[i].mesh.meshSpace||g[i].mesh.planeSpace,b=f.getPose(d,h),(c=g[i].el).hasLoaded&&(a.fromArray(b.transform.matrix),a.decompose(c.object3D.position,c.object3D.quaternion,c.object3D.scale))}}(),deleteMeshes:function(){for(var a=this.meshEntities,b=[],c=0;c<a.length;c++)a[c].present?b.push(a[c]):this.el.removeChild(a[c]);this.meshEntities=b},createNewMeshes:function(a){for(var b,c=0;c<a.length;c++)b=document.createElement("a-entity"),this.meshEntities.push({mesh:a[c],el:b}),b.addEventListener("loaded",this.initWorldMeshEntity),this.el.appendChild(b)},initMeshGeometry:function(a){var b,c,d;if(a instanceof XRPlane){c=new c0.Shape,d=a.polygon;for(var e=0;e<d.length;++e)0===e?c.moveTo(d[e].x,d[e].z):c.lineTo(d[e].x,d[e].z);return(b=new c0.ShapeGeometry(c)).rotateX(Math.PI/2),b}return(b=new c0.BufferGeometry).setAttribute("position",new c0.BufferAttribute(a.vertices,3)),b.setIndex(new c0.BufferAttribute(a.indices,1)),b},initWorldMeshEntity:function(a){for(var b,c,d,e=a.target,f=this.meshEntities,g=0;g<f.length;g++)if(f[g].el===e){d=f[g];break}b=this.initMeshGeometry(d.mesh),c=new c0.Mesh(b,new c0.MeshBasicMaterial({color:0xffffff*Math.random(),side:c0.DoubleSide})),e.setObject3D("mesh",c),d.mesh instanceof XRPlane&&this.data.planeMixin?e.setAttribute("mixin",this.data.planeMixin):this.data.meshMixin&&e.setAttribute("mixin",this.data.meshMixin),e.setAttribute("data-world-mesh",d.mesh.semanticLabel)},updateMeshGeometry:function(a,b){var c=a.getObject3D("mesh");c.geometry.dispose(),c.geometry=this.initMeshGeometry(b)}}),he("reflection",{schema:{directionalLight:{type:"selector"}},sceneOnly:!0,init:function(){var a=this;this.cubeRenderTarget=new c0.WebGLCubeRenderTarget(16),this.cubeCamera=new c0.CubeCamera(.1,1e3,this.cubeRenderTarget),this.lightingEstimationTexture=new c0.WebGLCubeRenderTarget(16).texture,this.needsVREnvironmentUpdate=!0;var b=this.el.getAttribute("webxr"),c=b.optionalFeatures;c.includes("light-estimation")||(c.push("light-estimation"),this.el.setAttribute("webxr",b)),this.el.addEventListener("enter-vr",function(){a.el.is("ar-mode")&&a.el.renderer.xr.getSession().requestLightProbe&&a.startLightProbe()}),this.el.addEventListener("exit-vr",function(){a.xrLightProbe&&a.stopLightProbe()}),this.el.object3D.environment=this.cubeRenderTarget.texture},stopLightProbe:function(){this.xrLightProbe=null,this.probeLight&&(this.probeLight.components.light.light.intensity=0),this.needsVREnvironmentUpdate=!0,this.el.object3D.environment=this.cubeRenderTarget.texture},startLightProbe:function(){this.needsLightProbeUpdate=!0},setupLightProbe:function(){var a=this.el.renderer,b=a.xr.getSession(),c=this,d=a.getContext();if(!this.probeLight){var e=document.createElement("a-light");e.setAttribute("type","probe"),e.setAttribute("intensity",0),this.el.appendChild(e),this.probeLight=e}switch(b.preferredReflectionFormat){case"srgba8":d.getExtension("EXT_sRGB");break;case"rgba16f":d.getExtension("OES_texture_half_float")}this.glBinding=new XRWebGLBinding(b,d),d.getExtension("EXT_sRGB"),d.getExtension("OES_texture_half_float"),b.requestLightProbe().then(function(a){c.xrLightProbe=a,a.addEventListener("reflectionchange",c.updateXRCubeMap.bind(c))}).catch(function(a){console.warn("Lighting estimation not supported: "+a.message),console.warn('Are you missing: webxr="optionalFeatures: light-estimation;" from <a-scene>?')})},updateXRCubeMap:function(){var a=this.el.renderer,b=this.glBinding.getReflectionCubeMap(this.xrLightProbe);b&&(a.properties.get(this.lightingEstimationTexture).__webglTexture=b,this.lightingEstimationTexture.needsPMREMUpdate=!0,this.el.object3D.environment=this.lightingEstimationTexture)},tick:function(){var a=this.el.object3D,b=this.el.renderer,c=this.el.frame;if(c&&this.xrLightProbe){var d,e,f,g,h=c.getLightEstimate(this.xrLightProbe);h&&(d=this.probeLight.components.light.light,e=this.data.directionalLight&&this.data.directionalLight.components.light.light,f=this.data.directionalLight&&this.data.directionalLight.object3D.position,g=Math.max(h.primaryLightIntensity.x,Math.max(h.primaryLightIntensity.y,h.primaryLightIntensity.z)),d.sh.fromArray(h.sphericalHarmonicsCoefficients),d.intensity=3.14,e&&(e.color.setRGB(h.primaryLightIntensity.x/g,h.primaryLightIntensity.y/g,h.primaryLightIntensity.z/g),e.intensity=g,f.copy(h.primaryLightDirection)))}this.needsVREnvironmentUpdate&&(a.environment=null,this.needsVREnvironmentUpdate=!1,this.cubeCamera.position.set(0,1.6,0),this.cubeCamera.update(b,a),a.environment=this.cubeRenderTarget.texture),this.needsLightProbeUpdate&&c&&(this.setupLightProbe(),this.needsLightProbeUpdate=!1)},remove:function(){this.el.object3D.environment=null,this.probeLight&&this.el.removeChild(this.probeLight)}});var kd=(he("screenshot",{schema:{width:{default:4096},height:{default:2048},camera:{type:"selector"}},sceneOnly:!0,setup:function(){var a=this.el;if(!this.canvas){var b=a.renderer.getContext();b&&(this.cubeMapSize=b.getParameter(b.MAX_CUBE_MAP_TEXTURE_SIZE),this.material=new c0.RawShaderMaterial({uniforms:{map:{type:"t",value:null}},vertexShader:"attribute vec3 position;\nattribute vec2 uv;\nuniform mat4 projectionMatrix;\nuniform mat4 modelViewMatrix;\nvarying vec2 vUv;\nvoid main()  {\n  vUv = vec2( 1.- uv.x, uv.y );\n  gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",fragmentShader:"precision mediump float;\nuniform samplerCube map;\nvarying vec2 vUv;\n#define M_PI 3.141592653589793238462643383279\nvoid main() {\n  vec2 uv = vUv;\n  float longitude = uv.x * 2. * M_PI - M_PI + M_PI / 2.;\n  float latitude = uv.y * M_PI;\n  vec3 dir = vec3(\n    - sin( longitude ) * sin( latitude ),\n    cos( latitude ),\n    - cos( longitude ) * sin( latitude )\n  );\n  normalize( dir );\n  gl_FragColor = vec4( textureCube( map, dir ).rgb, 1.0 );\n}",side:c0.DoubleSide}),this.quad=new c0.Mesh(new c0.PlaneGeometry(1,1),this.material),this.quad.visible=!1,this.camera=new c0.OrthographicCamera(-.5,.5,.5,-.5,-1e4,1e4),this.canvas=document.createElement("canvas"),this.ctx=this.canvas.getContext("2d"),a.object3D.add(this.quad),this.onKeyDown=this.onKeyDown.bind(this))}},getRenderTarget:function(a,b){return new c0.WebGLRenderTarget(a,b,{colorSpace:this.el.sceneEl.renderer.outputColorSpace,minFilter:c0.LinearFilter,magFilter:c0.LinearFilter,wrapS:c0.ClampToEdgeWrapping,wrapT:c0.ClampToEdgeWrapping,format:c0.RGBAFormat,type:c0.UnsignedByteType})},resize:function(a,b){this.quad.scale.set(a,b,1),this.camera.left=-1*a/2,this.camera.right=a/2,this.camera.top=b/2,this.camera.bottom=-1*b/2,this.camera.updateProjectionMatrix(),this.canvas.width=a,this.canvas.height=b},play:function(){window.addEventListener("keydown",this.onKeyDown)},onKeyDown:function(a){var b=83===a.keyCode&&a.ctrlKey&&a.altKey;if(this.data&&b){var c=a.shiftKey?"equirectangular":"perspective";this.capture(c)}},setCapture:function(a){var b,c,d,e,f=this.el;return"perspective"===a?(this.quad.visible=!1,c=this.data.camera&&this.data.camera.components.camera.camera||f.camera,b={width:this.data.width,height:this.data.height}):(c=this.camera,e=new c0.WebGLCubeRenderTarget(Math.min(this.cubeMapSize,2048),{format:c0.RGBFormat,generateMipmaps:!0,minFilter:c0.LinearMipmapLinearFilter,colorSpace:c0.SRGBColorSpace}),d=new c0.CubeCamera(f.camera.near,f.camera.far,e),f.camera.getWorldPosition(d.position),f.camera.getWorldQuaternion(d.quaternion),d.update(f.renderer,f.object3D),this.quad.material.uniforms.map.value=d.renderTarget.texture,b={width:this.data.width,height:this.data.height},this.quad.visible=!0),{camera:c,size:b,projection:a}},capture:function(a){var b,c=this.el.renderer.xr.enabled,d=this.el.renderer;this.setup(),d.xr.enabled=!1,b=this.setCapture(a),this.renderCapture(b.camera,b.size,b.projection),this.saveCapture(),d.xr.enabled=c},getCanvas:function(a){var b=this.el.renderer.xr.enabled,c=this.el.renderer;this.setup();var d=this.setCapture(a);return c.xr.enabled=!1,this.renderCapture(d.camera,d.size,d.projection),c.xr.enabled=b,this.canvas},renderCapture:function(a,b,c){var d,e,f,g=this.el.renderer.autoClear,h=this.el,i=h.renderer;e=this.getRenderTarget(b.width,b.height),f=new Uint8Array(4*b.width*b.height),this.resize(b.width,b.height),i.autoClear=!0,i.clear(),i.setRenderTarget(e),i.render(h.object3D,a),i.autoClear=g,i.readRenderTargetPixels(e,0,0,b.width,b.height,f),i.setRenderTarget(null),"perspective"===c&&(f=this.flipPixelsVertically(f,b.width,b.height)),d=new ImageData(new Uint8ClampedArray(f),b.width,b.height),this.quad.visible=!1,this.ctx.putImageData(d,0,0)},flipPixelsVertically:function(a,b,c){for(var d=a.slice(0),e=0;e<b;++e)for(var f=0;f<c;++f)d[4*e+f*b*4]=a[4*e+(c-f)*b*4],d[4*e+1+f*b*4]=a[4*e+1+(c-f)*b*4],d[4*e+2+f*b*4]=a[4*e+2+(c-f)*b*4],d[4*e+3+f*b*4]=a[4*e+3+(c-f)*b*4];return d},saveCapture:function(){this.canvas.toBlob(function(a){var b="screenshot-"+document.title.toLowerCase()+"-"+Date.now()+".png",c=document.createElement("a");c.href=URL.createObjectURL(a),c.setAttribute("download",b),c.innerHTML="downloading...",c.style.display="none",document.body.appendChild(c),setTimeout(function(){c.click(),document.body.removeChild(c)},1)},"image/png")}}),bL(282)),ke=bL.n(kd),kf=(bL(3729),bL(8132),window.aframeStats),kg="a-hidden",kh=window.threeStats;he("stats",{schema:{default:!0},sceneOnly:!0,init:function(){var a,b,c,d=this.el;"false"!==gs("stats")&&(this.stats=(a=new kh(d.renderer),b=new kf(d),c=d.isMobile?[]:[a,b],new(ke())({css:[],values:{fps:{caption:"fps",below:30}},groups:[{caption:"Framerate",values:["fps","raf"]}],plugins:c})),this.statsEl=document.querySelector(".rs-base"),this.hideBound=this.hide.bind(this),this.showBound=this.show.bind(this),d.addEventListener("enter-vr",this.hideBound),d.addEventListener("exit-vr",this.showBound))},update:function(){if(this.stats)return this.data?this.show():this.hide()},remove:function(){this.el.removeEventListener("enter-vr",this.hideBound),this.el.removeEventListener("exit-vr",this.showBound),this.statsEl&&this.statsEl.parentNode.removeChild(this.statsEl)},tick:function(){var a=this.stats;a&&(a("rAF").tick(),a("FPS").frame(),a().update())},hide:function(){this.statsEl.classList.add(kg)},show:function(){this.statsEl.classList.remove(kg)}});var ki="a-hidden";function kj(a){a.addEventListener("touchstart",function(){a.classList.remove("resethover")},{passive:!0}),a.addEventListener("touchend",function(){a.classList.add("resethover")},{passive:!0})}he("xr-mode-ui",{dependencies:["canvas"],schema:{enabled:{default:!0},enterVRButton:{default:""},enterVREnabled:{default:!0},enterARButton:{default:""},enterAREnabled:{default:!0},XRMode:{default:"vr",oneOf:["vr","ar","xr"]}},sceneOnly:!0,init:function(){var a=this,b=this.el;"false"!==gs("ui")&&(this.insideLoader=!1,this.enterVREl=null,this.enterAREl=null,this.orientationModalEl=null,this.bindMethods(),b.addEventListener("enter-vr",this.updateEnterInterfaces),b.addEventListener("exit-vr",this.updateEnterInterfaces),b.addEventListener("update-vr-devices",this.updateEnterInterfaces),window.addEventListener("message",function(b){"loaderReady"===b.data.type&&(a.insideLoader=!0,a.remove())}),window.addEventListener("orientationchange",this.toggleOrientationModalIfNeeded))},bindMethods:function(){this.onEnterVRButtonClick=this.onEnterVRButtonClick.bind(this),this.onEnterARButtonClick=this.onEnterARButtonClick.bind(this),this.onModalClick=this.onModalClick.bind(this),this.toggleOrientationModalIfNeeded=this.toggleOrientationModalIfNeeded.bind(this),this.updateEnterInterfaces=this.updateEnterInterfaces.bind(this)},onModalClick:function(){this.el.exitVR()},onEnterVRButtonClick:function(){this.el.enterVR()},onEnterARButtonClick:function(){this.el.enterAR()},update:function(){var a,b,c,d,e,f,g,h,i,j,k=this.data,l=this.el;if(!k.enabled||this.insideLoader||"false"===gs("ui"))return this.remove();this.enterVREl||this.enterAREl||this.orientationModalEl||(this.enterVREl||!k.enterVREnabled||"xr"!==k.XRMode&&"vr"!==k.XRMode||(k.enterVRButton?(this.enterVREl=document.querySelector(k.enterVRButton),this.enterVREl.addEventListener("click",this.onEnterVRButtonClick)):(this.enterVREl=(h=this.onEnterVRButtonClick,(j=document.createElement("div")).classList.add("a-enter-vr"),j.setAttribute(eR,""),(i=document.createElement("button")).className="a-enter-vr-button",i.setAttribute("title","Enter VR mode with a headset or fullscreen without"),i.setAttribute(eR,""),e8()&&kj(i),j.appendChild(i),i.addEventListener("click",function(a){h(),a.stopPropagation()}),j),l.appendChild(this.enterVREl))),this.enterAREl||!k.enterAREnabled||"xr"!==k.XRMode&&"ar"!==k.XRMode||(k.enterARButton?(this.enterAREl=document.querySelector(k.enterARButton),this.enterAREl.addEventListener("click",this.onEnterARButtonClick)):(this.enterAREl=(a=this.onEnterARButtonClick,b="xr"===k.XRMode,(d=document.createElement("div")).classList.add("a-enter-ar"),b&&d.classList.add("xr"),d.setAttribute(eR,""),(c=document.createElement("button")).className="a-enter-ar-button",c.setAttribute("title","Enter AR mode with a headset or handheld device."),c.setAttribute(eR,""),e8()&&kj(c),d.appendChild(c),c.addEventListener("click",function(b){a(),b.stopPropagation()}),d),l.appendChild(this.enterAREl))),this.orientationModalEl=(e=this.onModalClick,(f=document.createElement("div")).className="a-orientation-modal",f.classList.add(ki),f.setAttribute(eR,""),(g=document.createElement("button")).setAttribute(eR,""),g.innerHTML="Exit VR",g.addEventListener("click",e),f.appendChild(g),f),l.appendChild(this.orientationModalEl),this.updateEnterInterfaces())},remove:function(){[this.enterVREl,this.enterAREl,this.orientationModalEl].forEach(function(a){a&&a.parentNode&&a.parentNode.removeChild(a)}),this.enterVREl=void 0,this.enterAREl=void 0,this.orientationModalEl=void 0},updateEnterInterfaces:function(){this.toggleEnterVRButtonIfNeeded(),this.toggleEnterARButtonIfNeeded(),this.toggleOrientationModalIfNeeded()},toggleEnterVRButtonIfNeeded:function(){var a=this.el;this.enterVREl&&(a.is("vr-mode")||(a.isMobile||fd())&&!e$?this.enterVREl.classList.add(ki):(e$||this.enterVREl.classList.add("fullscreen"),this.enterVREl.classList.remove(ki),a.enterVR(!1,!0)))},toggleEnterARButtonIfNeeded:function(){var a=this.el;this.enterAREl&&(a.is("vr-mode")||!e_?this.enterAREl.classList.add(ki):(this.enterAREl.classList.remove(ki),a.enterVR(!0,!0)))},toggleOrientationModalIfNeeded:function(){var a=this.el,b=this.orientationModalEl;b&&a.isMobile&&(!fi()&&a.is("vr-mode")?b.classList.remove(ki):b.classList.add(ki))}}),hI("box",{schema:{depth:{default:1,min:0},height:{default:1,min:0},width:{default:1,min:0},segmentsHeight:{default:1,min:1,max:20,type:"int"},segmentsWidth:{default:1,min:1,max:20,type:"int"},segmentsDepth:{default:1,min:1,max:20,type:"int"}},init:function(a){this.geometry=new c0.BoxGeometry(a.width,a.height,a.depth,a.segmentsWidth,a.segmentsHeight,a.segmentsDepth)}});var kk=c0.MathUtils.degToRad;hI("circle",{schema:{radius:{default:1,min:0},segments:{default:32,min:3,type:"int"},thetaLength:{default:360,min:0},thetaStart:{default:0}},init:function(a){this.geometry=new c0.CircleGeometry(a.radius,a.segments,kk(a.thetaStart),kk(a.thetaLength))}});var kl=c0.MathUtils.degToRad;hI("cone",{schema:{height:{default:1,min:0},openEnded:{default:!1},radiusBottom:{default:1,min:0},radiusTop:{default:.01,min:0},segmentsHeight:{default:18,min:1,type:"int"},segmentsRadial:{default:36,min:3,type:"int"},thetaLength:{default:360,min:0},thetaStart:{default:0}},init:function(a){this.geometry=new c0.CylinderGeometry(a.radiusTop,a.radiusBottom,a.height,a.segmentsRadial,a.segmentsHeight,a.openEnded,kl(a.thetaStart),kl(a.thetaLength))}});var km=c0.MathUtils.degToRad;hI("cylinder",{schema:{height:{default:1,min:0},openEnded:{default:!1},radius:{default:1,min:0},segmentsHeight:{default:18,min:1,type:"int"},segmentsRadial:{default:36,min:3,type:"int"},thetaLength:{default:360,min:0},thetaStart:{default:0}},init:function(a){this.geometry=new c0.CylinderGeometry(a.radius,a.radius,a.height,a.segmentsRadial,a.segmentsHeight,a.openEnded,km(a.thetaStart),km(a.thetaLength))}}),hI("dodecahedron",{schema:{detail:{default:0,min:0,max:5,type:"int"},radius:{default:1,min:0}},init:function(a){this.geometry=new c0.DodecahedronGeometry(a.radius,a.detail)}}),hI("icosahedron",{schema:{detail:{default:0,min:0,max:5,type:"int"},radius:{default:1,min:0}},init:function(a){this.geometry=new c0.IcosahedronGeometry(a.radius,a.detail)}}),hI("octahedron",{schema:{detail:{default:0,min:0,max:5,type:"int"},radius:{default:1,min:0}},init:function(a){this.geometry=new c0.OctahedronGeometry(a.radius,a.detail)}}),hI("plane",{schema:{height:{default:1,min:0},width:{default:1,min:0},segmentsHeight:{default:1,min:1,max:20,type:"int"},segmentsWidth:{default:1,min:1,max:20,type:"int"}},init:function(a){this.geometry=new c0.PlaneGeometry(a.width,a.height,a.segmentsWidth,a.segmentsHeight)}});var kn=c0.MathUtils.degToRad;hI("ring",{schema:{radiusInner:{default:.8,min:0},radiusOuter:{default:1.2,min:0},segmentsPhi:{default:10,min:1,type:"int"},segmentsTheta:{default:32,min:3,type:"int"},thetaLength:{default:360,min:0},thetaStart:{default:0}},init:function(a){this.geometry=new c0.RingGeometry(a.radiusInner,a.radiusOuter,a.segmentsTheta,a.segmentsPhi,kn(a.thetaStart),kn(a.thetaLength))}});var ko=c0.MathUtils.degToRad;hI("sphere",{schema:{radius:{default:1,min:0},phiLength:{default:360},phiStart:{default:0,min:0},thetaLength:{default:180,min:0},thetaStart:{default:0},segmentsHeight:{default:18,min:2,type:"int"},segmentsWidth:{default:36,min:3,type:"int"}},init:function(a){this.geometry=new c0.SphereGeometry(a.radius,a.segmentsWidth,a.segmentsHeight,ko(a.phiStart),ko(a.phiLength),ko(a.thetaStart),ko(a.thetaLength))}}),hI("tetrahedron",{schema:{detail:{default:0,min:0,max:5,type:"int"},radius:{default:1,min:0}},init:function(a){this.geometry=new c0.TetrahedronGeometry(a.radius,a.detail)}});var kp=c0.MathUtils.degToRad;hI("torus",{schema:{arc:{default:360},radius:{default:1,min:0},radiusTubular:{default:.2,min:0},segmentsRadial:{default:36,min:2,type:"int"},segmentsTubular:{default:32,min:3,type:"int"}},init:function(a){this.geometry=new c0.TorusGeometry(a.radius,2*a.radiusTubular,a.segmentsRadial,a.segmentsTubular,kp(a.arc))}}),hI("torusKnot",{schema:{p:{default:2,min:1},q:{default:3,min:1},radius:{default:1,min:0},radiusTubular:{default:.2,min:0},segmentsRadial:{default:8,min:3,type:"int"},segmentsTubular:{default:100,min:3,type:"int"}},init:function(a){this.geometry=new c0.TorusKnotGeometry(a.radius,2*a.radiusTubular,a.segmentsTubular,a.segmentsRadial,a.p,a.q)}});var kq=new c0.Quaternion,kr=new c0.Vector3(0,0,1),ks=new c0.Vector2,kt=new c0.Vector2,ku=new c0.Vector2;function kv(a,b){return b.color.set(a.color),b.fog=a.fog,b.wireframe=a.wireframe,b.toneMapped=a.toneMapped,b.wireframeLinewidth=a.wireframeLinewidth,b}function kw(a,b){return b.color.set(a.color),b.emissive.set(a.emissive),b.emissiveIntensity=a.emissiveIntensity,b.fog=a.fog,b.metalness=a.metalness,b.roughness=a.roughness,b.wireframe=a.wireframe,b.wireframeLinewidth=a.wireframeLinewidth,a.normalMap&&(b.normalScale=a.normalScale),a.ambientOcclusionMap&&(b.aoMapIntensity=a.ambientOcclusionMapIntensity),a.displacementMap&&(b.displacementScale=a.displacementScale,b.displacementBias=a.displacementBias),b}function kx(a,b){switch(b.color.set(a.color),b.specular.set(a.specular),b.emissive.set(a.emissive),b.emissiveIntensity=a.emissiveIntensity,b.fog=a.fog,b.transparent=a.transparent,b.wireframe=a.wireframe,b.wireframeLinewidth=a.wireframeLinewidth,b.shininess=a.shininess,b.flatShading=a.flatShading,b.wireframe=a.wireframe,b.wireframeLinewidth=a.wireframeLinewidth,b.reflectivity=a.reflectivity,b.refractionRatio=a.refractionRatio,a.combine){case"mix":b.combine=c0.MixOperation;break;case"multiply":b.combine=c0.MultiplyOperation;break;case"add":b.combine=c0.AddOperation}return a.normalMap&&(b.normalScale=a.normalScale),a.ambientOcclusionMap&&(b.aoMapIntensity=a.ambientOcclusionMapIntensity),a.bumpMap&&(b.bumpScale=a.bumpMapScale),a.displacementMap&&(b.displacementScale=a.displacementScale,b.displacementBias=a.displacementBias),b}hI("triangle",{schema:{vertexA:{type:"vec3",default:{x:0,y:.5,z:0}},vertexB:{type:"vec3",default:{x:-.5,y:-.5,z:0}},vertexC:{type:"vec3",default:{x:.5,y:-.5,z:0}}},init:function(a){var b,c,d,e,f,g,h,i,j;(d=new c0.Triangle).a.set(a.vertexA.x,a.vertexA.y,a.vertexA.z),d.b.set(a.vertexB.x,a.vertexB.y,a.vertexB.z),d.c.set(a.vertexC.x,a.vertexC.y,a.vertexC.z),c=d.getNormal(new c0.Vector3),kq.setFromUnitVectors(c,kr),e=d.a.clone().applyQuaternion(kq),f=d.b.clone().applyQuaternion(kq),g=d.c.clone().applyQuaternion(kq),ks.set(Math.min(e.x,f.x,g.x),Math.min(e.y,f.y,g.y)),kt.set(Math.max(e.x,f.x,g.x),Math.max(e.y,f.y,g.y)),ku.set(0,0).subVectors(kt,ks),e=(new c0.Vector2).subVectors(e,ks).divide(ku),f=(new c0.Vector2).subVectors(f,ks).divide(ku),g=(new c0.Vector2).subVectors(g,ks).divide(ku),b=this.geometry=new c0.BufferGeometry,h=[d.a.x,d.a.y,d.a.z,d.b.x,d.b.y,d.b.z,d.c.x,d.c.y,d.c.z],i=[c.x,c.y,c.z,c.x,c.y,c.z,c.x,c.y,c.z],j=[e.x,e.y,f.x,f.y,g.x,g.y],b.setAttribute("position",new c0.Float32BufferAttribute(h,3)),b.setAttribute("normal",new c0.Float32BufferAttribute(i,3)),b.setAttribute("uv",new c0.Float32BufferAttribute(j,2))}}),hT("flat",{schema:{color:{type:"color"},fog:{default:!0},offset:{type:"vec2",default:{x:0,y:0}},repeat:{type:"vec2",default:{x:1,y:1}},src:{type:"map"},wireframe:{default:!1},wireframeLinewidth:{default:2},toneMapped:{default:!0}},init:function(a){this.materialData={color:new c0.Color},kv(a,this.materialData),this.material=new c0.MeshBasicMaterial(this.materialData)},update:function(a){this.updateMaterial(a),fQ(this,a)},updateMaterial:function(a){var b;for(b in kv(a,this.materialData),this.materialData)this.material[b]=this.materialData[b]}}),hT("standard",{schema:{ambientOcclusionMap:{type:"map"},ambientOcclusionMapIntensity:{default:1},ambientOcclusionTextureOffset:{type:"vec2"},ambientOcclusionTextureRepeat:{type:"vec2",default:{x:1,y:1}},color:{type:"color"},displacementMap:{type:"map"},displacementScale:{default:1},displacementBias:{default:.5},displacementTextureOffset:{type:"vec2"},displacementTextureRepeat:{type:"vec2",default:{x:1,y:1}},emissive:{type:"color",default:"#000"},emissiveIntensity:{default:1},envMap:{default:""},fog:{default:!0},metalness:{default:0,min:0,max:1},metalnessMap:{type:"map"},metalnessTextureOffset:{type:"vec2"},metalnessTextureRepeat:{type:"vec2",default:{x:1,y:1}},normalMap:{type:"map"},normalScale:{type:"vec2",default:{x:1,y:1}},normalTextureOffset:{type:"vec2"},normalTextureRepeat:{type:"vec2",default:{x:1,y:1}},offset:{type:"vec2",default:{x:0,y:0}},repeat:{type:"vec2",default:{x:1,y:1}},roughness:{default:.5,min:0,max:1},roughnessMap:{type:"map"},roughnessTextureOffset:{type:"vec2"},roughnessTextureRepeat:{type:"vec2",default:{x:1,y:1}},sphericalEnvMap:{type:"map"},src:{type:"map"},wireframe:{default:!1},wireframeLinewidth:{default:2}},init:function(a){this.materialData={color:new c0.Color,emissive:new c0.Color},kw(a,this.materialData),this.material=new c0.MeshStandardMaterial(this.materialData)},update:function(a){this.updateMaterial(a),fQ(this,a),fR("normal",this,a),fR("displacement",this,a),fR("ambientOcclusion",this,a),fR("metalness",this,a),fR("roughness",this,a),fT(this,a)},updateMaterial:function(a){var b,c=this.material;for(b in kw(a,this.materialData),this.materialData)c[b]=this.materialData[b]}}),hT("phong",{schema:{color:{type:"color"},emissive:{type:"color",default:"black"},emissiveIntensity:{default:1},specular:{type:"color",default:"#111111"},transparent:{default:!1},fog:{default:!0},offset:{type:"vec2",default:{x:0,y:0}},repeat:{type:"vec2",default:{x:1,y:1}},src:{type:"map"},envMap:{default:""},sphericalEnvMap:{type:"map"},shininess:{default:30},flatShading:{default:!1},wireframe:{default:!1},wireframeLinewidth:{default:2},combine:{oneOF:["multiply","mix","add"],default:"mix"},reflectivity:{default:.9},refractionRatio:{default:.98},refract:{default:!1},normalMap:{type:"map"},normalScale:{type:"vec2",default:{x:1,y:1}},normalTextureOffset:{type:"vec2"},normalTextureRepeat:{type:"vec2",default:{x:1,y:1}},ambientOcclusionMap:{type:"map"},ambientOcclusionMapIntensity:{default:1},displacementMap:{type:"map"},displacementScale:{default:1},displacementBias:{default:.5},displacementTextureOffset:{type:"vec2"},displacementTextureRepeat:{type:"vec2",default:{x:1,y:1}},bumpMap:{type:"map"},bumpMapScale:{default:1},bumpTextureOffset:{type:"vec2"},bumpTextureRepeat:{type:"vec2",default:{x:1,y:1}}},init:function(a){this.materialData={color:new c0.Color,specular:new c0.Color,emissive:new c0.Color},kx(a,this.materialData),this.material=new c0.MeshPhongMaterial(this.materialData);var b=this.el.sceneEl;Object.defineProperty(this.material,"envMap",{get:function(){return this._envMap||b.object3D.environment},set:function(a){this._envMap=a}})},update:function(a){this.updateMaterial(a),fQ(this,a),fR("normal",this,a),fR("displacement",this,a),fR("ambientOcclusion",this,a),fR("bump",this,a),fT(this,a)},updateMaterial:function(a){var b;for(b in kx(a,this.materialData),this.materialData)this.material[b]=this.materialData[b]}}),hT("sdf",{schema:{alphaTest:{type:"number",is:"uniform",default:.5},color:{type:"color",is:"uniform",default:"white"},map:{type:"map",is:"uniform"},opacity:{type:"number",is:"uniform",default:1}},vertexShader:"#include <common>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\nout vec2 vUV;\nvoid main(void) {\n  vUV = uv;\n  #include <begin_vertex>\n  #include <project_vertex>\n  #include <logdepthbuf_vertex>\n  #include <fog_vertex>\n}",fragmentShader:"#include <common>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\nuniform float alphaTest;\nuniform float opacity;\nuniform sampler2D map;\nuniform vec3 color;\nin vec2 vUV;\nfloat contour(float width, float value) {\n  return smoothstep(0.5 - value, 0.5 + value, width);\n}\n#define BIG_ENOUGH 0.001\n#define MODIFIED_ALPHATEST (0.02 * isBigEnough / BIG_ENOUGH)\nvoid main() {\n  vec2 uv = vUV;\n  vec4 texColor = texture(map, uv);\n  float dist = texColor.a;\n  float width = fwidth(dist);\n  float alpha = contour(dist, width);\n  float dscale = 0.353505;\n  vec2 duv = dscale * (dFdx(uv) + dFdy(uv));\n  float isBigEnough = max(abs(duv.x), abs(duv.y));\n  if (isBigEnough > BIG_ENOUGH) {\n    float ratio = BIG_ENOUGH / isBigEnough;\n    alpha = ratio * alpha + (1.0 - ratio) * dist;\n  }\n  if (isBigEnough <= BIG_ENOUGH) {\n    vec4 box = vec4 (uv - duv, uv + duv);\n    alpha = (alpha + 0.5 * (\n      contour(texture(map, box.xy).a, width)\n      + contour(texture(map, box.zw).a, width)\n      + contour(texture(map, box.xw).a, width)\n      + contour(texture(map, box.zy).a, width)\n    )) / 3.0;\n  }\n  if (alpha < alphaTest * MODIFIED_ALPHATEST) { discard; return; }\n  gl_FragColor = vec4(color, opacity * alpha);\n  #include <logdepthbuf_fragment>\n  #include <tonemapping_fragment>\n  #include <colorspace_fragment>\n  #include <fog_fragment>\n}",init:function(){return this.uniforms=this.initUniforms(),c0.UniformsUtils&&(this.uniforms=c0.UniformsUtils.merge([c0.UniformsLib.fog,this.uniforms])),this.material=new c0.ShaderMaterial({uniforms:this.uniforms,vertexShader:this.vertexShader,fragmentShader:this.fragmentShader,fog:!0}),this.material}}),hT("msdf",{schema:{alphaTest:{type:"number",is:"uniform",default:.5},color:{type:"color",is:"uniform",default:"white"},map:{type:"map",is:"uniform"},negate:{type:"boolean",is:"uniform",default:!0},opacity:{type:"number",is:"uniform",default:1}},vertexShader:"#include <common>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\nout vec2 vUV;\nvoid main(void) {\n  vUV = uv;\n  #include <begin_vertex>\n  #include <project_vertex>\n  #include <logdepthbuf_vertex>\n  #include <fog_vertex>\n}",fragmentShader:"#include <common>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\nuniform bool negate;\nuniform float alphaTest;\nuniform float opacity;\nuniform sampler2D map;\nuniform vec3 color;\nin vec2 vUV;\nfloat median(float r, float g, float b) {\n  return max(min(r, g), min(max(r, g), b));\n}\n#define BIG_ENOUGH 0.001\n#define MODIFIED_ALPHATEST (0.02 * isBigEnough / BIG_ENOUGH)\nvoid main() {\n  vec3 sampleColor = texture(map, vUV).rgb;\n  if (negate) { sampleColor = 1.0 - sampleColor; }\n  float sigDist = median(sampleColor.r, sampleColor.g, sampleColor.b) - 0.5;\n  float alpha = clamp(sigDist / fwidth(sigDist) + 0.5, 0.0, 1.0);\n  float dscale = 0.353505;\n  vec2 duv = dscale * (dFdx(vUV) + dFdy(vUV));\n  float isBigEnough = max(abs(duv.x), abs(duv.y));\n  // Do modified alpha test.\n  if (isBigEnough > BIG_ENOUGH) {\n    float ratio = BIG_ENOUGH / isBigEnough;\n    alpha = ratio * alpha + (1.0 - ratio) * (sigDist + 0.5);\n  }\n  // Do modified alpha test.\n  if (alpha < alphaTest * MODIFIED_ALPHATEST) { discard; return; }\n  gl_FragColor = vec4(color.xyz, alpha * opacity);\n  #include <logdepthbuf_fragment>\n  #include <tonemapping_fragment>\n  #include <colorspace_fragment>\n  #include <fog_fragment>\n}",init:function(){return this.uniforms=this.initUniforms(),c0.UniformsUtils&&(this.uniforms=c0.UniformsUtils.merge([c0.UniformsLib.fog,this.uniforms])),this.material=new c0.ShaderMaterial({uniforms:this.uniforms,vertexShader:this.vertexShader,fragmentShader:this.fragmentShader,fog:!0}),this.material}}),hT("shadow",{schema:{opacity:{default:.5},transparent:{default:!0},alphaToCoverage:{default:!0}},init:function(a){this.material=new c0.ShadowMaterial},update:function(a){this.material.opacity=a.opacity,this.material.alphaToCoverage=a.alphaToCoverage,this.material.transparent=a.transparent}});var ky="data-aframe-default-camera";function kz(a){var b=a.primitive,c=hF[b]&&hF[b].Geometry,d=new c;if(!c)throw Error("Unknown geometry `"+b+"`");return d.init(a),d.geometry}hl("camera",{init:function(){this.activeCameraEl=null,this.render=this.render.bind(this),this.unwrapRender=this.unwrapRender.bind(this),this.wrapRender=this.wrapRender.bind(this),this.initialCameraFound=!1,this.numUserCameras=0,this.numUserCamerasChecked=0,this.setupInitialCamera()},setupInitialCamera:function(){var a,b,c=this.sceneEl,d=this;if(!c.camera||c.camera.el.getAttribute("camera").spectator)if((a=c.querySelectorAll("a-camera, :not(a-mixin)[camera]")).length)for(this.numUserCameras=a.length,b=0;b<a.length;b++)a[b].addEventListener("object3dset",function(a){"camera"===a.detail.type&&d.checkUserCamera(this)}),a[b].isANode?a[b].load():a[b].addEventListener("nodeready",function(){this.load()});else this.createDefaultCamera();else c.emit("cameraready",{cameraEl:c.camera.el})},checkUserCamera:function(a){var b,c=this.el.sceneEl;this.numUserCamerasChecked++,this.initialCameraFound||((b=a.getAttribute("camera")).active&&!b.spectator?(this.initialCameraFound=!0,c.camera=a.getObject3D("camera"),c.emit("cameraready",{cameraEl:a})):this.numUserCamerasChecked===this.numUserCameras&&this.createDefaultCamera())},createDefaultCamera:function(){var a,b=this.sceneEl;(a=document.createElement("a-entity")).setAttribute("camera",{active:!0}),a.setAttribute("position",{x:0,y:1.6,z:0}),a.setAttribute("wasd-controls",""),a.setAttribute("look-controls",""),a.setAttribute(eR,""),a.addEventListener("object3dset",function(c){"camera"===c.detail.type&&(b.camera=c.detail.object,b.emit("cameraready",{cameraEl:a}))}),b.appendChild(a)},disableActiveCamera:function(){var a;(a=this.sceneEl.querySelectorAll(":not(a-mixin)[camera]"))[a.length-1].setAttribute("camera","active",!0)},setActiveCamera:function(a){var b,c,d,e,f=this.activeCameraEl,g=this.sceneEl;if((e=a.getObject3D("camera"))&&a!==this.activeCameraEl){var h,i=g.querySelector("["+ky+"]");for(a!==(i&&i.querySelector(":not(a-mixin)[camera]"))&&g.camera&&(h=g.querySelector("["+ky+"]"))&&g.removeChild(h),this.activeCameraEl=a,this.activeCameraEl.play(),g.camera=e,f&&f.setAttribute("camera","active",!1),c=g.querySelectorAll(":not(a-mixin)[camera]"),d=0;d<c.length;d++)(b=c[d]).isEntity&&a!==b&&(b.setAttribute("camera","active",!1),b.pause());g.emit("camera-set-active",{cameraEl:a})}},setSpectatorCamera:function(a){var b,c=this.spectatorCameraEl,d=this.sceneEl;a.getObject3D("camera")&&a!==this.spectatorCameraEl&&(c&&c.setAttribute("camera","spectator",!1),b=this.spectatorCameraEl=a,d.addEventListener("enter-vr",this.wrapRender),d.addEventListener("exit-vr",this.unwrapRender),b.setAttribute("camera","active",!1),b.play(),d.emit("camera-set-spectator",{cameraEl:a}))},disableSpectatorCamera:function(){this.spectatorCameraEl=void 0},wrapRender:function(){this.spectatorCameraEl&&!this.originalRender&&(this.originalRender=this.sceneEl.renderer.render,this.sceneEl.renderer.render=this.render)},unwrapRender:function(){this.originalRender&&(this.sceneEl.renderer.render=this.originalRender,this.originalRender=void 0)},render:function(a,b){var c,d,e=this.sceneEl;c=e.renderer.xr.enabled,this.originalRender.call(e.renderer,a,b),this.spectatorCameraEl&&!e.isMobile&&c&&(d=this.spectatorCameraEl.components.camera.camera,e.renderer.xr.enabled=!1,this.originalRender.call(e.renderer,a,d),e.renderer.xr.enabled=c)}}),hl("geometry",{init:function(){this.cache={},this.cacheCount={}},clearCache:function(){this.cache={},this.cacheCount={}},getOrCreateGeometry:function(a){var b,c,d,e=this.cache;return a.skipCache?kz(a):(c=e[d=this.hash(a)],(b=this.cacheCount)[d]=void 0===b[d]?1:b[d]+1,c||(c=kz(a),e[d]=c,c))},unuseGeometry:function(a){var b,c=this.cache,d=this.cacheCount;a.skipCache||c[b=this.hash(a)]&&(d[b]--,d[b]>0||(c[b].dispose(),delete c[b],delete d[b]))},hash:function(a){return JSON.stringify(a)}}),hl("gltf-model",{schema:{dracoDecoderPath:{default:"https://www.gstatic.com/draco/versioned/decoders/1.5.7/"},basisTranscoderPath:{default:""},meshoptDecoderPath:{default:""}},init:function(){this.update()},update:function(){var a=this.data.dracoDecoderPath,b=this.data.basisTranscoderPath,c=this.data.meshoptDecoderPath;!this.dracoLoader&&a&&(this.dracoLoader=new c2,this.dracoLoader.setDecoderPath(a)),!this.ktx2Loader&&b&&(this.ktx2Loader=new ea,this.ktx2Loader.setTranscoderPath(b).detectSupport(this.el.renderer)),!this.meshoptDecoder&&c&&(this.meshoptDecoder=new Promise(function(a,b){var d=document.createElement("script");document.body.appendChild(d),d.onload=a,d.onerror=b,d.async=!0,d.src=c}).then(function(){return window.MeshoptDecoder.ready}).then(function(){return window.MeshoptDecoder}))},getDRACOLoader:function(){return this.dracoLoader},getKTX2Loader:function(){return this.ktx2Loader},getMeshoptDecoder:function(){return this.meshoptDecoder}});var kA="data-aframe-default-light",kB=(hl("light",{schema:{defaultLightsEnabled:{default:!0}},init:function(){this.defaultLights=!1,this.userDefinedLights=!1,this.sceneEl.addEventListener("loaded",this.setupDefaultLights.bind(this))},registerLight:function(a){a.hasAttribute(kA)||(this.removeDefaultLights(),this.userDefinedLights=!0)},removeDefaultLights:function(){var a,b=this.sceneEl;if(this.defaultLights){a=document.querySelectorAll("["+kA+"]");for(var c=0;c<a.length;c++)b.removeChild(a[c]);this.defaultLights=!1}},setupDefaultLights:function(){var a,b,c=this.sceneEl;this.userDefinedLights||this.defaultLights||!this.data.defaultLightsEnabled||((a=document.createElement("a-entity")).setAttribute("light",{color:"#BBB",type:"ambient"}),a.setAttribute(kA,""),a.setAttribute(eR,""),c.appendChild(a),(b=document.createElement("a-entity")).setAttribute("light",{color:"#FFF",intensity:1.884,castShadow:!0}),b.setAttribute("position",{x:-.5,y:1,z:1}),b.setAttribute(kA,""),b.setAttribute(eR,""),c.appendChild(b),this.defaultLights=!0)}}),eW),kC=kB("components:texture:error"),kD=kB("components:texture:warn"),kE=new c0.ImageLoader;hl("material",{init:function(){this.materials={},this.sourceCache={}},clearTextureSourceCache:function(){this.sourceCache={}},loadTexture:function(a,b,c){this.loadTextureSource(a,function(a){var d=fW(a);fO(d,b),c(d)})},loadTextureSource:function(a,b){var c,d=this,e=this.sourceCache,f=this.hash(a);e[f]?e[f].then(b):(c="CANVAS"!==a.tagName?new Promise(function(b,c){fH(a,function(a){d.loadImage(a,b)},function(a){d.loadVideo(a,b)})}):new c0.Source(a),e[f]=Promise.resolve(c),e[f].then(b))},loadCubeMapTexture:function(a,b){var c=this,d=0,e=new c0.CubeTexture;if(e.colorSpace=c0.SRGBColorSpace,6===a.length)for(var f=0;f<a.length;f++)!function(f){c.loadTextureSource(a[f],function(a){e.images[f]=a.data,6==++d&&(e.needsUpdate=!0,b(e))})}(f);else kD("Cube map texture requires exactly 6 sources, got only %s sources",a.length)},loadImage:function(a,b){b("string"==typeof a?new Promise(function(b,c){kE.load(a,function(a){b(new c0.Source(a))},function(){},function(a){kC("`$s` could not be fetched (Error code: %s; Response: %s)",a.status,a.statusText)})}):new c0.Source(a))},loadVideo:function(a,b){var c,d,e;"string"!=typeof a&&((d=c=a).autoplay=d.hasAttribute("autoplay")&&"false"!==d.getAttribute("autoplay"),d.controls=d.hasAttribute("controls")&&"false"!==d.getAttribute("controls"),"false"===d.getAttribute("loop")&&d.removeAttribute("loop"),"false"===d.getAttribute("preload")&&(d.preload="none"),d.crossOrigin=d.crossOrigin||"anonymous",d.setAttribute("playsinline",""),d.setAttribute("webkit-playsinline","")),c=c||((e=document.createElement("video")).setAttribute("playsinline",""),e.setAttribute("webkit-playsinline",""),e.autoplay=!0,e.loop=!0,e.crossOrigin="anonymous",e.addEventListener("error",function(){kD("`%s` is not a valid video",a)},!0),e.src=a,e),b(new c0.Source(c))},hash:function(a){return a.tagName&&(a.id||a.src)||a},registerMaterial:function(a){this.materials[a.uuid]=a},unregisterMaterial:function(a){delete this.materials[a.uuid]}}),hl("obb-collider",{schema:{showColliders:{default:!1}},init:function(){this.collisions=[],this.colliderEls=[]},addCollider:function(a){this.colliderEls.push(a),this.data.showColliders?a.components["obb-collider"].showCollider():a.components["obb-collider"].hideCollider(),this.tick=this.detectCollisions},removeCollider:function(a){var b=this.colliderEls,c=b.indexOf(a);a.components["obb-collider"].hideCollider(),c>-1&&b.splice(c,1),0===b.length&&(this.tick=void 0)},registerCollision:function(a,b){var c=this.collisions,d=!1,e=a.obb,f=b.obb,g=a.renderColliderMesh,h=b.renderColliderMesh;g&&g.material.color.set(0xff0000),h&&h.material.color.set(0xff0000);for(var i=0;i<c.length;i++)if(c[i].componentA.obb===e&&c[i].componentB.obb===f||c[i].componentA.obb===f&&c[i].componentB.obb===e){d=!0,c[i].detected=!0;break}d||(c.push({componentA:a,componentB:b,detected:!0}),a.el.emit("obbcollisionstarted",{trackedObject3D:a.trackedObject3D,withEl:b.el}),b.el.emit("obbcollisionstarted",{trackedObject3D:b.trackedObject3D,withEl:a.el}))},resetCollisions:function(){for(var a=this.collisions,b=0;b<a.length;b++)a[b].detected=!1},clearCollisions:function(){for(var a,b,c,d,e=this.collisions,f=[],g=0;g<e.length;g++)e[g].detected?f.push(e[g]):(a=e[g].componentA,b=e[g].componentB,c=a.renderColliderMesh,d=b.renderColliderMesh,c&&c.material.color.set(65280),a.el.emit("obbcollisionended",{trackedObject3D:this.trackedObject3D,withEl:b.el}),d&&d.material.color.set(65280),b.el.emit("obbcollisionended",{trackedObject3D:this.trackedObject3D,withEl:a.el}));this.collisions=f},detectCollisions:function(){var a,b,c,d,e=this.colliderEls;if(!(e.length<2)){this.resetCollisions();for(var f=0;f<e.length;f++)if(c=e[f].components["obb-collider"],0!==(a=e[f].components["obb-collider"].obb).halfSize.x&&0!==a.halfSize.y&&0!==a.halfSize.z)for(var g=f+1;g<e.length;g++)0!==(b=(d=e[g].components["obb-collider"]).obb).halfSize.x&&0!==b.halfSize.y&&0!==b.halfSize.z&&a.intersectsOBB(b)&&this.registerCollision(c,d);this.clearCollisions()}}});var kF=eW("components:renderer:warn");function kG(a,b){return a.groupOrder!==b.groupOrder?a.groupOrder-b.groupOrder:a.renderOrder!==b.renderOrder?a.renderOrder-b.renderOrder:a.z-b.z}function kH(a,b){return a.groupOrder!==b.groupOrder?a.groupOrder-b.groupOrder:a.renderOrder-b.renderOrder}function kI(a,b){return a.groupOrder!==b.groupOrder?a.groupOrder-b.groupOrder:a.renderOrder!==b.renderOrder?a.renderOrder-b.renderOrder:b.z-a.z}hl("renderer",{schema:{antialias:{default:"auto",oneOf:["true","false","auto"]},highRefreshRate:{default:fe()},logarithmicDepthBuffer:{default:"auto",oneOf:["true","false","auto"]},maxCanvasWidth:{default:-1},maxCanvasHeight:{default:-1},multiviewStereo:{default:!1},exposure:{default:1,if:{toneMapping:["ACESFilmic","linear","reinhard","cineon","AgX","neutral"]}},toneMapping:{default:"no",oneOf:["no","ACESFilmic","linear","reinhard","cineon","AgX","neutral"]},precision:{default:"high",oneOf:["high","medium","low"]},anisotropy:{default:1},sortTransparentObjects:{default:!1},colorManagement:{default:!0},alpha:{default:!0},stencil:{default:!1},foveationLevel:{default:1}},init:function(){var a=this.data,b=this.el,c=this.data.toneMapping.charAt(0).toUpperCase()+this.data.toneMapping.slice(1),d=b.renderer;d.toneMapping=c0[c+"ToneMapping"],c0.Texture.DEFAULT_ANISOTROPY=a.anisotropy,c0.ColorManagement.enabled=a.colorManagement,d.outputColorSpace=a.colorManagement?c0.SRGBColorSpace:c0.LinearSRGBColorSpace,b.hasAttribute("antialias")&&kF('Component `antialias` is deprecated. Use `renderer="antialias: true"` instead.'),b.hasAttribute("logarithmicDepthBuffer")&&kF('Component `logarithmicDepthBuffer` is deprecated. Use `renderer="logarithmicDepthBuffer: true"` instead.'),d.sortObjects=!0,d.setOpaqueSort(kG)},update:function(){var a=this.data,b=this.el.renderer;b.toneMapping=c0[this.data.toneMapping.charAt(0).toUpperCase()+this.data.toneMapping.slice(1)+"ToneMapping"],b.toneMappingExposure=a.exposure,b.xr.setFoveation(a.foveationLevel),a.sortObjects&&kF('`sortObjects` property is deprecated. Use `renderer="sortTransparentObjects: true"` instead.'),a.sortTransparentObjects?b.setTransparentSort(kI):b.setTransparentSort(kH)},applyColorCorrection:function(a){this.data.colorManagement&&a&&a.isTexture&&a.colorSpace!==c0.SRGBColorSpace&&(a.colorSpace=c0.SRGBColorSpace,a.needsUpdate=!0)},setWebXRFrameRate:function(a){var b,c=this.data,d=a.supportedFrameRates;d&&a.updateTargetFrameRate&&(b=d.includes(90)?c.highRefreshRate?90:72:c.highRefreshRate?72:60,a.updateTargetFrameRate(b).catch(function(a){console.warn("failed to set target frame rate of "+b+". Error info: "+a)}))}});var kJ={basic:c0.BasicShadowMap,pcf:c0.PCFShadowMap,pcfsoft:c0.PCFSoftShadowMap};hl("shadow",{schema:{enabled:{default:!0},autoUpdate:{default:!0},type:{default:"pcf",oneOf:["basic","pcf","pcfsoft"]}},init:function(){var a=this.sceneEl,b=this.data;this.shadowMapEnabled=!1,a.renderer.shadowMap.type=kJ[b.type],a.renderer.shadowMap.autoUpdate=b.autoUpdate},update:function(a){a.enabled!==this.data.enabled&&this.setShadowMapEnabled(this.shadowMapEnabled)},setShadowMapEnabled:function(a){var b=this.sceneEl,c=this.sceneEl.renderer;this.shadowMapEnabled=a;var d=this.data.enabled&&this.shadowMapEnabled;c&&d!==c.shadowMap.enabled&&(c.shadowMap.enabled=d,b.hasLoaded&&b.object3D.traverse(function(a){if(a.material)for(var b=Array.isArray(a.material)?a.material:[a.material],c=0;c<b.length;c++)b[c].needsUpdate=!0}))}}),hl("tracked-controls",{init:function(){this.controllers=[],this.onInputSourcesChange=this.onInputSourcesChange.bind(this),this.onEnterVR=this.onEnterVR.bind(this),this.el.addEventListener("enter-vr",this.onEnterVR),this.onExitVR=this.onExitVR.bind(this),this.el.addEventListener("exit-vr",this.onExitVR)},onEnterVR:function(){this.el.xrSession&&this.el.xrSession.addEventListener("inputsourceschange",this.onInputSourcesChange)},onExitVR:function(){this.referenceSpace=void 0,this.controllers=[],this.el.emit("controllersupdated",void 0,!1)},onInputSourcesChange:function(){var a=this,b=this.el.xrSession,c=this.el.sceneEl.systems.webxr.sessionReferenceSpaceType;b.requestReferenceSpace(c).then(function(b){a.referenceSpace=b}).catch(function(b){throw a.el.sceneEl.systems.webxr.warnIfFeatureNotRequested(c,'tracked-controls uses reference space "'+c+'".'),b}),this.controllers=b.inputSources,this.el.emit("controllersupdated",void 0,!1)}});var kK=eW("systems:webxr:warn"),kL=(hl("webxr",{schema:{referenceSpaceType:{type:"string",default:"local-floor"},requiredFeatures:{type:"array",default:["local-floor"]},optionalFeatures:{type:"array",default:["bounded-floor"]},overlayElement:{type:"selector"}},update:function(){var a=this.data;this.sessionConfiguration={requiredFeatures:a.requiredFeatures,optionalFeatures:a.optionalFeatures},this.sessionReferenceSpaceType=a.referenceSpaceType,a.overlayElement&&(a.overlayElement.classList.remove("a-dom-overlay"),a.optionalFeatures.includes("dom-overlay")||(a.optionalFeatures.push("dom-overlay"),this.el.setAttribute("webxr",a)),this.warnIfFeatureNotRequested("dom-overlay"),this.sessionConfiguration.domOverlay={root:a.overlayElement},a.overlayElement.classList.add("a-dom-overlay"))},wasFeatureRequested:function(a){return"viewer"===a||"local"===a||!(!this.sessionConfiguration.requiredFeatures.includes(a)&&!this.sessionConfiguration.optionalFeatures.includes(a))},warnIfFeatureNotRequested:function(a,b){this.wasFeatureRequested(a)||kK((b?b+" ":"")+'Please add the feature "'+a+"\" to a-scene's webxr system options in requiredFeatures/optionalFeatures.")}}),{});function kM(a){var b=a.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();"fog"===a&&(b="material-fog"),"visible"===a&&(b="material-visible"),kL[b]="material."+a}function kN(){return{defaultComponents:{material:{}},mappings:gi({},kL)}}Object.keys(g2.material.schema).forEach(kM),Object.keys(hP.standard.schema).forEach(kM);var kO=new c0.Vector3,kP=new c0.Vector3;he("pivot",{dependencies:["position"],schema:{type:"vec3"},init:function(){var a=this.data,b=this.el,c=b.object3D.parent,d=b.object3D,e=new c0.Group;kO.copy(d.position),kP.copy(d.rotation),c.remove(d),e.add(d),c.add(e),b.object3D=e,d.position.set(-1*a.x,-1*a.y,-1*a.z),e.position.set(a.x+kO.x,a.y+kO.y,a.z+kO.z),e.rotation.copy(d.rotation),d.rotation.set(0,0,0)}}),hN("a-camera",{defaultComponents:{camera:{},"look-controls":{},"wasd-controls":{},position:{x:0,y:1.6,z:0}},mappings:{active:"camera.active",far:"camera.far",fov:"camera.fov","look-controls-enabled":"look-controls.enabled",near:"camera.near","pointer-lock-enabled":"look-controls.pointerLockEnabled","wasd-controls-enabled":"wasd-controls.enabled","reverse-mouse-drag":"look-controls.reverseMouseDrag",zoom:"camera.zoom"}}),hN("a-cursor",gj({},kN(),{defaultComponents:{cursor:{},geometry:{primitive:"ring",radiusOuter:.016,radiusInner:.01,segmentsTheta:32},material:{color:"#000",shader:"flat",opacity:.8},position:{x:0,y:0,z:-1}},mappings:{far:"raycaster.far",fuse:"cursor.fuse","fuse-timeout":"cursor.fuseTimeout",interval:"raycaster.interval",objects:"raycaster.objects"}})),hN("a-curvedimage",gj({},kN(),{defaultComponents:{geometry:{height:1,primitive:"cylinder",radius:2,segmentsRadial:48,thetaLength:270,openEnded:!0,thetaStart:0},material:{color:"#FFF",shader:"flat",side:"double",transparent:!0,repeat:"-1 1"}},mappings:{height:"geometry.height","open-ended":"geometry.openEnded",radius:"geometry.radius",segments:"geometry.segmentsRadial",start:"geometry.thetaStart","theta-length":"geometry.thetaLength","theta-start":"geometry.thetaStart",width:"geometry.thetaLength"}})),hN("a-gltf-model",{mappings:{src:"gltf-model"}}),hN("a-image",gj({},kN(),{defaultComponents:{geometry:{primitive:"plane"},material:{color:"#FFF",shader:"flat",side:"double",transparent:!0}},mappings:{height:"geometry.height",width:"geometry.width"}})),hN("a-light",{defaultComponents:{light:{}},mappings:{angle:"light.angle",color:"light.color","ground-color":"light.groundColor",decay:"light.decay",distance:"light.distance",intensity:"light.intensity",penumbra:"light.penumbra",type:"light.type",target:"light.target",envmap:"light.envMap","shadow-camera-automatic":"light.shadowCameraAutomatic"}}),hN("a-link",{defaultComponents:{link:{visualAspectEnabled:!0}},mappings:{href:"link.href",image:"link.image",title:"link.title"}}),hN("a-obj-model",gj({},kN(),{defaultComponents:{"obj-model":{}},mappings:{src:"obj-model.obj",mtl:"obj-model.mtl"}}));let kQ={};function kR(a){return a.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}hG.forEach(function(a){var b=hF[a],c=kR(a),d={};Object.keys(b.schema).forEach(function(a){d[kR(a)]="geometry."+a});var e="a-"+c,f=hN(e,gj({},kN(),{defaultComponents:{geometry:{primitive:a}},mappings:d}));kQ[e]=f}),hN("a-sky",gj({},kN(),{defaultComponents:{geometry:{primitive:"sphere",radius:500,segmentsWidth:64,segmentsHeight:32},material:{color:"#FFF",side:"back",shader:"flat",npot:!0},scale:"-1 1 1"},mappings:gj({},kQ["a-sphere"].mappings)})),hN("a-sound",{defaultComponents:{sound:{}},mappings:{src:"sound.src",on:"sound.on",autoplay:"sound.autoplay",loop:"sound.loop",volume:"sound.volume"}}),h=h||{},Object.keys(g={text:{anchor:"align",width:5}}).forEach(function(a){var b;b=h,Object.keys(g2[a].schema).forEach(function(c){var d=c.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();void 0!==b[d]&&(d=a+"-"+c),b[d]=a+"."+c})}),hN("a-text",gj({},null,{defaultComponents:g,mappings:h})),hN("a-video",gj({},kN(),{defaultComponents:{geometry:{primitive:"plane"},material:{color:"#FFF",shader:"flat",side:"double",transparent:!0}},mappings:{height:"geometry.height",width:"geometry.width"}})),hN("a-videosphere",gj({},kN(),{defaultComponents:{geometry:{primitive:"sphere",radius:500,segmentsWidth:64,segmentsHeight:32},material:{color:"#FFF",shader:"flat",side:"back",npot:!0},scale:"-1 1 1"},mappings:{radius:"geometry.radius","segments-height":"geometry.segmentsHeight","segments-width":"geometry.segmentsWidth"}}));var kS=eW("A-Frame:error"),kT=eW("A-Frame:warn");window.document.currentScript&&window.document.currentScript.parentNode!==window.document.head&&!window.debug&&kT("Put the A-Frame <script> tag in the <head> of the HTML *before* the scene to ensure everything for A-Frame is properly registered before they are used from HTML."),window.cordova||"file:"!==window.location.protocol||kS("This HTML file is currently being served via the file:// protocol. Assets, textures, and models WILL NOT WORK due to cross-origin policy! Please use a local or hosted server: https://aframe.io/docs/1.4.0/introduction/installation.html#use-a-local-server."),fj&&(window.logs=eW,bL(7180),bL(9379)),console.log("A-Frame Version: 1.7.0 (Date 2025-03-12, Commit #1b9650f1)"),console.log("THREE Version (https://github.com/supermedium/three.js):",eP.REVISION),window.AFRAME_ASYNC||("complete"!==document.readyState?document.addEventListener("readystatechange",function a(){"complete"===document.readyState&&(document.removeEventListener("readystatechange",a),hi())}):hi());let kU=globalThis.AFRAME={AComponent:hc,AEntity:hu,ANode:hp,ANIME:c$,AScene:hB,components:g2,coreComponents:Object.keys(g2),geometries:hF,registerComponent:he,registerGeometry:hI,registerPrimitive:hN,registerShader:hT,registerSystem:hl,primitives:{getMeshMixin:kN,primitives:hM},scenes:gG,schema:bX,shaders:hP,systems:hj,emitReady:hi,THREE:eP,utils:bW,version:hZ};var kV=bM.A}};